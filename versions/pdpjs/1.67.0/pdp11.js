(function(){/*
 https://www.pcjs.org/modules/shared/lib/diskapi.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/rx11.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/serial.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/drive.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2018
 https://www.pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2018
*/
var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(){da=function(){};ba.Symbol||(ba.Symbol=ea)}var ea=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function fa(){da();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(this)}});fa=function(){}}function ha(a){var b=0;return ia(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ia(a){fa();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function ja(a){fa();da();fa();var b=a[Symbol.iterator];return b?b.call(a):ha(a)}
var ka="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},la;if("function"==typeof Object.setPrototypeOf)la=Object.setPrototypeOf;else{var ma;a:{var na={de:!0},oa={};try{oa.__proto__=na;ma=oa.de;break a}catch(a){}ma=!1}la=ma?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var pa=la;
function q(a,b){a.prototype=ka(b.prototype);a.prototype.constructor=a;if(pa)pa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ik=b.prototype}function qa(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
qa("Math.trunc",function(a){return a?a:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b}});qa("Math.log2",function(a){return a?a:function(a){return Math.log(a)/Math.LN2}});qa("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
var sa={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],10653696:[306,4,17],21411840:[615,4,17],256256:[77,1,26,128],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},ta={yi:0,Be:1,Fi:2,Gi:3,Hi:4,Ii:5,Ji:6,Ki:7,Kd:8,Li:9,Ce:10,Mi:11,Ni:12,De:13,Oi:14,Pi:15,Qi:16,Ri:17,Si:18,Ti:19,Ui:20,Vi:21,Wi:22,Xi:23,Yi:24,Zi:25,$i:26,fj:27," ":32,"!":33,'"':34,"#":35,
$:36,"%":37,"\x26":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"\x3c":60,"\x3d":61,"\x3e":62,"?":63,"@":64,Gd:65,ui:66,Ai:67,aj:68,E:69,hj:70,kj:71,wj:72,yj:73,zj:74,Aj:75,Bj:76,Ej:77,Gj:78,Mj:79,Pj:80,Q:81,Rj:82,Uj:83,ck:84,ek:85,gk:86,hk:87,lk:88,mk:89,uf:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,de:97,pk:98,sk:99,d:100,e:101,tk:102,uk:103,vk:104,wk:105,Bk:106,k:107,Ck:108,Dk:109,n:110,Ek:111,p:112,q:113,r:114,
Fk:115,t:116,Jk:117,Kk:118,Lk:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Yb:127};
function ua(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(f=parseInt(a,b))){e&&(0>f&&(f+=Math.pow(2,36)),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function va(a,b,c,d,e){e=void 0===e?0:e;var f="";isNaN(a)||"number"!=typeof a?a=null:(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;0<c--;){g||(f=","+f,g=e);if(null==a)f="?"+f;else{var k=a%b;k+=0<=k&&9>=k?48:55;f=String.fromCharCode(k)+f;a=Math.trunc(a/b)}g--}return(void 0===d?"":d)+f}function wa(a,b,c){b?36<b&&(b=36):(b=Math.abs(a),b=255>=b?8:262143>=b?18:36);return va(a,2,b,"",c)}
function u(a,b,c){b?12<b&&(b=12):(b=Math.abs(a),b=262143>=b?6:16777215>=b?8:12);return va(a,8,b,c?"0o":"")}function xa(a,b){b?11<b&&(b=11):b=99999>=Math.abs(a)?5:11;return va(a,10,b)}function v(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);return va(a,16,b,c?"0x":"")}function ya(a){return v(a,4,!0)}function za(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("\x26");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}
function Aa(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function Ba(a,b){return-1!==a.indexOf(b,a.length-b.length)}function Ca(a){return a.replace(/[&<>"']/g,function(a){return Da[a]})}function Fa(a,b){return(a+"                                        ").slice(0,b)}function Ga(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var Da={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#039;"},Ha={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"};
function Ia(a,b,c){var d=0,e=a.length,f=0;for(void 0===c&&(c=function(a,b){return a>b?1:a<b?-1:0});d<e;){var g=d+e>>1,k=void 0;k=c(b,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}
function Ja(){var a,b="";a||(a=new Date);for(var c=a.getHours(),d=a.getDate(),e=a.getMonth()+1,f=0;11>f;f++){var g;switch(g="Y-m-d H:i:s".charAt(f)){case "a":b+=12>c?"am":"pm";break;case "d":b+=("0"+d).slice(-2);break;case "D":b+=La[a.getDay()].substr(0,3);break;case "F":b+=Ma[e-1];break;case "g":b+=c?12<c?c-12:c:12;break;case "h":b+=c;break;case "H":b+=("0"+c).slice(-2);break;case "i":b+=("0"+a.getMinutes()).slice(-2);break;case "j":b+=d;break;case "l":b+=La[a.getDay()];break;case "m":b+=("0"+e).slice(-2);
break;case "M":b+=Ma[e-1].substr(0,3);break;case "n":b+=e;break;case "s":b+=("0"+a.getSeconds()).slice(-2);break;case "y":b+=(""+a.getFullYear()).slice(-2);break;case "Y":b+=a.getFullYear();break;default:b+=g}}return b}var La="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ma="January February March April May June July August September October November December".split(" ");
function Na(a,b,c,d){function e(){if(4!==l.readyState)return null;try{g=m?l.response:l.responseText}catch(t){}if(null==g||200!=l.status&&(l.status||!g.length||"file:"!=(window?window.location.protocol:"file:")))f=l.status||-1;d&&d(a,g,f);return[g,f]}b=void 0===b?"text":b;c=void 0===c?!1:c;var f=0,g=null,k=null;if("object"==typeof resources&&(g=resources[a]))return d&&d(a,g,f),[g,f];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),k;a=a.replace(/^\/(pcjs-disks|pcjs-games|private-disks)\//,
"https://jeffpar.github.io/$1/");var l=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),m=!1,n="string"===typeof l.responseType;c&&(l.onreadystatechange=e);if(b&&"object"==typeof b){n="";for(var r in b)b.hasOwnProperty(r)&&(n&&(n+="\x26"),n+=r+"\x3d"+encodeURIComponent(b[r]));n=n.replace(/%20/g,"+");l.open("POST",a,c);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(n)}else l.open("GET",a,c),"arraybuffer"==b&&(n?(m=!0,l.responseType=
b):l.overrideMimeType("text/plain; charset\x3dx-user-defined")),l.send();c||(l.readyState=4,k=e());return k}
function Oa(a,b){var c,d={Z:null,ga:null,ya:null,xa:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f;if("\x3c"==b.charAt(0))throw Error(b);var g=0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.ya=g.load;d.xa=g.exec;if(e=g.bytes)d.Z=e;else if(e=g.words)for(d.Z=Array(2*e.length),f=c=0;c<e.length;c++)d.Z[f++]=e[c]&255,d.Z[f++]=e[c]>>8&255;else if(e=g.longs)for(d.Z=Array(4*e.length),f=c=0;c<e.length;c++)d.Z[f++]=
e[c]&255,d.Z[f++]=e[c]>>8&255,d.Z[f++]=e[c]>>16&255,d.Z[f++]=e[c]>>24&255;else(e=g.data)?d.nk=e:d.Z=g;d.Z&&(d.Z.length?1==d.Z.length&&(w(d.Z[0]),d=null):(w("Empty resource: "+a),d=null));d.ga=g.symbols}catch(k){w("Resource data error ("+a+"): "+k.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){w("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.Z=e)}return d}
function Pa(){return"http://"+(window?window.location.host:"www.pcjs.org")}function Qa(){if(null==Ra){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}Ra=a}return Ra}function Sa(a){if(window)try{var b=window.localStorage.getItem(a)}catch(c){}return b}
function Ta(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Ua(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function Va(){var a,b=$a("mobile");if(b)return"true"==b;if(Ua("Mobi")){if(!a)return!0;(b="!"==a[0])&&(a=a.substr(1));return Ua(a)!=b}return!1}
function $a(a){if(!ab){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}ab=c}return ab[a]||ab[a.toLowerCase()]}function bb(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function cb(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function db(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function eb(a){fb.init.push(a)}
function gb(a){if(hb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){w("An unexpected error occurred: "+c.message+"\n\nIf it happens again, please send the URL to support@pcjs.org. Thanks.")}}function ib(a){!hb&&a?(hb=!0,jb&&kb("init"),lb&&kb("show")):hb=a}function kb(a){fb[a]&&gb(fb[a])}var ab=null,fb={init:[],show:[],exit:[]},jb=!1,lb=!1,hb=!0,Ra=null;db("onload",function(){jb=!0;gb(fb.init)});db("onpageshow",function(){lb=!0;gb(fb.show)});
db(Ua("iOS")?"onpagehide":Ua("Opera")?"onunload":"onbeforeunload",function(){gb(fb.exit)});
function x(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Rd=b.comment;this.sf=b;this.exports={};this.G=this.bindings={};a=this.id.indexOf(".");0>a?(this.gb="PCjs",this.Tc=this.id):(this.gb=this.id.substr(0,a),this.Tc=this.id.substr(a+1));this.flags={ready:!1,bb:!1,sd:!1,Ak:!1,ba:!1,Ed:!1,error:!1};this.Ic=null;this.flags.error=!1;this.ha=c||0;this.D=this.f=this.C=this.I=null;mb.push(this)}function qb(a,b,c){rb[a]&&b&&(rb[a][b]=c)}
function sb(){return Date.now()||+new Date}function w(a){window&&window.alert(a)}function tb(a){var b=!1;window&&(b=window.confirm(a));return b}function ub(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function vb(a,b){var c=y;b=A(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var k=g.getAttribute("class");if(k)for(var l=k.split(" "),m=0;m<l.length;m++)switch(k=l[m],k){case c+"-binding":(k=wb(g))&&void 0!==k.binding&&a.ua(k.type,k.binding,g,k.value),m=l.length}}}}function xb(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<mb.length;b++){var d=mb[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function Db(a){if(void 0!==a){var b;for(b=0;b<mb.length;b++)if(mb[b].id===a)return mb[b]}return null}function Eb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<mb.length;d++)if(c)c==mb[d]&&(c=null);else if(!(a!=mb[d].type||b&&mb[d].id.indexOf(b)))return mb[d]}return null}function wb(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){w(c.message+" ("+a+")")}return b}
function A(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function Fb(a){for(var b=!0,c=Gb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=Hb.indexOf(e)&&(f=function(){return function(){Fb(a)}}());var g=Ib[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{b=!1;var k=Eb(d[1],a);if(k)if(g=Jb[e])b=g(k,d[2],d[3]);else{var l=k.exports;if(l&&(g=l[e]))if(b=!0,!f)b=g.call(k,d[2],d[3]);else if(!g.call(k,f,d[2],d[3]))break}}if(!b){w("Script error: '"+e+"' command "+(g?" failed":" not recognized"));break}}c&&!c.length&&delete Gb[a];
return b}h=x.prototype;h.toString=function(){return this.name?this.name:this.id||this.type};
h.ua=function(a,b,c){switch(b){case "clear":return this.G[b]||(this.G[b]=c,c.onclick=function(a){return function(){a.G.print&&(a.G.print.value="")}}(this)),!0;case "print":return this.G[b]||(this.G[b]=c,this.S=function(a){this.v(a,this.type);return!0},c.value="",this.print=function(a){return function(b){ub(a,b)}}(c),this.v=function(a,b){return function(a,c){a||(a="");if(c!=Kb||"..."!=a.slice(-3))c&&(a=c+": "+a),ub(b,a+"\n");else{c=b.value;var d=c.lastIndexOf(a);0>d?c+=a+"\n":c=c.substr(0,d)+(a+".")+
c.substr(d+a.length);8192<c.length&&(c=c.substr(c.length-4096));b.value=c;b.scrollTop=b.scrollHeight}}}(this,c)),!0;default:return!1}};h.log=function(){};h.print=function(){};h.v=function(){};h.status=function(a){this.v(this.type+": "+a)};h.S=function(a,b,c){if(!b){var d=Eb("Computer",this.id);if(d&&d.flags.Ed)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||w((c?c+": ":"")+a);return!0};function Lb(a,b){a.flags.error=!0;a.S(b)}
function Mb(a){return a.flags.error?(a.v(a.toString()+" error"),!0):!1}function Nb(a,b){b&&(a.flags.ready?b():a.Ic=b);return a.flags.ready}function D(a,b){a.flags.error||(a.flags.ready=!1!==b,a.flags.ready&&(b=a.Ic,a.Ic=null,b&&b()))}function Ob(a,b){a.flags.bb&&(b?a.flags.sd=!0:void 0===b&&a.v(a.toString()+" busy"));return a.flags.bb}function Pb(a,b){if(a.flags.sd)return a.flags.bb=!1,a.flags.sd=!1;if(a.flags.error)return a.v(a.toString()+" error"),!1;a.flags.bb=b;return a.flags.bb}
h.Ba=function(){return this.flags.ba=!0};h.Aa=function(a,b){b&&(this.flags.ba=!1);return!0};function E(a,b){b=void 0===b?0:b;return a.D&&(a!==a.D&&(b=b||a.ha),a=a.D.ha&b,b&4026531840&&b&268435455&&(a&4026531840&&a&268435455||(a=0)),b&&a===b)?!0:!1}function F(a,b,c,d){a.D&&(!0===c||E(a,c|0))&&a.D.message(b,d)}var Kb="progress";
window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var rb=window?window.PCjs.Machines:{},mb=window?window.PCjs.Components:[],Gb=window?window.PCjs.Commands:{},Hb=["hold","sleep","wait"],Ib={alert:function(a){w(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},Jb={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var Qb="undefined"!==typeof ArrayBuffer,y="pdp11",Rb="PDPjs",Sb=!1,Tb=Qb,Ub=!0,Vb=!0,Xb="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),Yb={md:5,qd:144,Vc:8,Cc:{lf:15,Vj:16,kk:32,Wd:64,Da:128,$d:256,Zj:512,ej:1024,Bc:2048,dj:4096,ed:57344,la:{ed:13}},Ze:{ce:1,Ei:2,mf:3,Gb:28,Ac:32,zc:64,Qd:128,dk:256,Ee:512,$b:1024,Qj:2048,Zd:4096,ik:8192,Oj:16384,Fe:32768,$c:32736},Xe:{Zb:1,va:14,Fb:48,Eb:64,Ya:128,bk:256,gj:512,ij:1024,Ne:2048,od:8192,$c:16384,fb:32768,Gb:4608,
ac:61438,Sa:3967,la:{va:1,Fb:4}},Ye:{nd:15,cd:16,Xb:8160,pb:57344,la:{cd:4,Xb:5,pb:13}},va:{Ae:0,cc:2,qb:4,rd:6,Fc:8,Re:10,Ge:12,jk:14}},Zb={md:5,qd:112,Vc:4,Qe:"DY",df:{Da:1,va:14,Xa:48,Eb:64,Ya:128,pb:768,Nd:15360,cj:16384,fb:32768,Bi:16254,Yj:128,ac:65535,Sa:1022,la:{va:1,Xa:4,pb:8}},bf:{Sa:65534},ef:{nf:1,pf:4,qf:16,Wj:65408,Xd:63,Ec:64,bc:65408,Je:3,pj:8,la:{Ec:6,bc:7}},Dc:{Me:{Cj:0,ak:1,zi:2,Dj:3,Fc:4,Oe:5,fk:6,$j:7},Od:8,Le:16,mj:32,oj:64,Ke:128,nj:256,sj:512,uj:1024,rj:2048,qj:4096,vj:8192,
lj:16384,tj:32768},cf:{$a:63},Nd:{Nj:1024,bj:2048,ce:2048,xj:3072,Ee:4096,Za:5120,$b:8192,Fj:9216},va:{Hj:0,rd:2,rf:4,Fc:6,Ve:8,tf:10,Se:12,Sj:14}},$b={md:5,qd:180,Vc:2,Qe:"DX",gf:{Zb:1,va:14,pd:16,DONE:32,Eb:64,ab:128,INIT:16384,fb:32768,Gb:16128,ac:32992,Sa:16479},Tj:{},kf:{$a:127},jf:{$a:31},hf:{Jd:1,Td:2,ed:4,Yb:64,Da:128},va:{Xc:0,EMPTY:2,cc:4,qb:6,Gb:8,Ue:10,Gc:12,Te:14},Ie:{ad:8,bd:16,vi:24,Pe:32,jj:40,Xj:48,ld:56,Lj:72,Kj:80,Jj:88,Di:96,xi:104,Ij:112,kd:120,Ci:128,wi:136}},fc={48:"DL11R",
52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11",180:"RX11"};$b.ff=["DX",77,1,26,128,1,0,0,128,0];Yb.Bc=["RK",203,2,12,512,0,0,0,512,Yb.Cc.Bc|Yb.Cc.$d|Yb.Cc.Wd];Zb.$e=["RL",512,2,40,256,0,0,0,256,Zb.Dc.Me.Oe|Zb.Dc.Od|Zb.Dc.Le];y="pdp11";Rb="PDPjs";Sb=!1;Tb=Qb;Vb=Ub=!0;
var gc={cpu:1,trap:2,fault:4,"int":8,bus:16,memory:32,mmu:64,rom:128,device:256,panel:512,keyboard:1024,key:2048,pc11:4096,paper:4096,disk:8192,read:16384,write:32768,rk11:65536,rl11:131072,rx11:262144,dl11:1048576,serial:1048576,kw11:2097152,timer:2097152,speaker:16777216,computer:33554432,buffer:536870912,warn:1073741824,halt:-2147483648};
function hc(a,b){x.call(this,"Panel",a,512);this.u=this.w=0;this.K=b;this.ea=this.i=this.Va=this.Ab=0;this.B=this.F=-1;this.g=this.A=!1;this.H=ic;this.j={};this.b={START:[1,1,!0,!1,this.Qf],STEP:[1,1,!1,!1,this.Rf],ENABLE:[1,1,!1,!1,this.Lf],CONT:[1,1,!0,!1,this.Jf],DEP:[0,0,!0,!1,this.Kf],EXAM:[1,1,!0,!1,this.Mf],LOAD:[1,1,!0,!1,this.Of],TEST:[0,0,!0,!1,this.Nf]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.Pf,a];this.D=this.f=this.C=this.I=null;this.exports={hold:this.Ef,toggle:this.jh,reset:this.dh,
set:this.ih};D(this)}q(hc,x);function jc(a,b){return kc(a,a.Ab=b)}h=hc.prototype;h.reset=function(a){this.stop();a&&jc(this,0)};
h.ua=function(a,b,c,d){if(this.I&&this.I.ua(a,b,c,d)||this.f&&this.f.ua(a,b,c,d)||this.D&&this.D.ua(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.G[b]=c,this.w++,!0;default:return"led"==a||"rled"==a?(this.G[b]=c,this.j[b]=d?1:0,this.w++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.G[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,
b){return function(){lc(a,b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){mc(a,b)}}(this,b),a.ontouchstart=function(a,b){return function(c){lc(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){mc(a,b)}}(this,b),!0):x.prototype.ua.call(this,a,b,c,d)}};h.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;nc(b,this,oc);pc(b,this.reset.bind(this));qc(this);rc(this)};
h.Ba=function(a,b){if(!b)if(this.K&&sc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};h.Aa=function(a){return a?this.save():!0};h.save=function(){var a=new H(this);a.set(0,[this.ea,this.Ab,this.Va]);return a.data()};h.restore=function(a){if(a=a[0])tc(this,this.ea=a[0]),jc(this,a[1]),uc(this,a[2]);return!0};h.dh=function(){for(var a in this.b){var b=this.b[a];b[1]=b[0]}rc(this);return!0};function vc(a,b,c){if(a=a.G[b])a.style.backgroundColor=c?"#ff0000":"#000000"}
function qc(a,b){for(var c in a.j)vc(a,c,null!=b?b:a.j[c])}function wc(a,b,c){if(a=a.G[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function rc(a){for(var b in a.b)wc(a,b,a.b[b][1])}function xc(a,b,c,d){if(a.G[b]){var e=a.D&&a.D.W||8;c=c||0;c=8==e?u(c,d):v(c,d);a.G[b].textContent!=c&&(a.G[b].textContent=c)}}h.Ef=function(a,b,c){if(lc(this,b)){if(c){var d=this;setTimeout(function(){mc(d,b);a&&a()},+c);return!1}mc(this,b)}return!0};
h.ih=function(a,b){if("SR"==a)return uc(this,ua(b,8));var c=this.b[a];return c?(c[1]=+b?1:0,wc(this,a,c[1]),!0):!1};h.jh=function(a){return lc(this,a)?(mc(this,a),!0):!1};function lc(a,b){var c=a.b[b];return c?(wc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b==yc&&(a.g=!1),!0):!1}function mc(a,b){var c=a.b[b];c&&(c[2]&&c[3]&&(wc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}
h.Qf=function(a){a||this.f.flags.U||(zc(this.f,this.ea),a=this.f,a.C.reset(),Ac(a),this.b[Bc]&&this.b[Bc][1]&&Cc(this.f))};h.Rf=function(){};h.Lf=function(a){a||I(this.f)};h.Jf=function(a){if(!a&&!this.f.flags.U)if(this.b[Bc]&&this.b[Bc][1])Cc(this.f);else{if((a=this.D)&&!Ob(a,!0))Pb(a,!0),Dc(a,0,null),Pb(a,!1);else try{var b=this.f.wc(1);0<b&&(Ec(this.f,b),Fc(this.f,b,!0),Gc(this.f,b))}catch(c){"number"!=typeof c&&(b=c,Lb(this.f,b.stack||b.message))}this.stop();this.I&&Hc(this.I)}};
h.Kf=function(a){if(a&&!this.f.flags.U)if(this.g&&Ic(this),this.g=!0,a=jc(this,this.Va),this.H==ic)Jc(this.C,this.ea,a);else{var b=this.f,c=this.ea;b.oa++;b.C.Wb(Kc(b,c,4),a);b.oa--}};h.Mf=function(a){a||this.f.flags.U||(this.g&&Ic(this),this.g=!0,a=this.H==ic?Lc(this.C,this.ea):Mc(this.f,this.ea),jc(this,a))};h.Of=function(a){a||this.f.flags.U||tc(this,this.Va)};h.Nf=function(a){a?(this.A=!0,qc(this,!0)):(this.A=!1,qc(this),uc(this,0))};h.Pf=function(a,b){this.Va=a?this.Va|1<<b:this.Va&~(1<<b)};
function Ic(a){var b=1140>=a.f.ia?8:16,c=65472<=a.ea&&a.ea<65472+b;b=c?1:2;c=c?15:a.C.H;a.b[Nc]&&a.b[Nc][1]||(b=-b);tc(a,a.ea&~c|a.ea+b&c)}function tc(a,b){a.ea=b&a.C.H;if(a.B!==a.ea){a.B=a.ea;b=a.B;for(var c=0;22>c;c++)Oc(a,"A"+c,b&1<<c)}}function kc(a,b){a.i=b&65535;if(a.F!==a.i){a.F=a.i;b=a.F;for(var c=0;16>c;c++)Oc(a,"D"+c,b&1<<c)}return a.i}function Oc(a,b,c){a.j[b]=c;a.A||vc(a,b,c)}function uc(a,b){a.Va=b|0;for(b=0;22>b;b++)a.b["S"+b][1]=a.Va&1<<b?1:0;rc(a);return!0}
h.stop=function(){tc(this,this.f.g[7])};h.Cd=function(a){this.ea=a};h.setData=function(a,b){b?this.Ab=a:this.i=a};h.Wf=function(a,b){return(b?this.Ab:this.Va)&65535};h.ph=function(a){this.Ab=a};function sc(){for(var a=A(document,y,"panel"),b=0;b<a.length;b++){var c=a[b],d=wb(c),e=Db(d.id);e||(e=new hc(d,!0));vb(e,c)}}var ic=7,Bc="ENABLE",yc="LOAD",Nc="STEP",Zc={},oc=(Zc[65400]=[null,null,hc.prototype.Wf,hc.prototype.ph,"CNSW"],Zc);eb(sc);
function $c(a,b,c){x.call(this,"Bus",a,16);this.f=b;this.D=c;this.T=+a.busWidth||16;this.L=1<<this.T;this.H=this.L-1;this.j=ad;this.g=Math.log2(this.j);this.P=this.j>>2;this.i=this.j-1;this.F=this.L/this.j|0;this.R=this.F-1;this.Oa=[];this.ma=0;this.B=!1;this.M=[];this.vf=[bd,cd,dd,ed];this.b=this.u=[];this.A=this.K=this.w=this.N=this.O=0;a=new J(this);fd(a,this.D);this.b=Array(this.F);this.u=Array(this.F);for(b=0;b<this.F;b++)this.b[b]=this.u[b]=a;this.A=this.L-ad;gd(this,this.A,ad,hd,this);this.O=
this.N=(this.A&this.H)>>>this.g;this.K=0;this.w=this.H;D(this)}q($c,x);function id(a,b){if(b!=a.K){for(var c=0;c<a.F;c++)a.u[c]=a.b[c];a.K=0;a.w=a.H;b&&(a.K=b,b=1<<b,a.w=b-1,b-=ad,a.O=(b&a.w)>>>a.g,a.u[a.O]=a.b[a.N])}}h=$c.prototype;h.reset=function(){for(var a=0;a<this.M.length;a++)this.M[a]();id(this,16)};h.Ba=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Aa=function(a){return a?this.save():!0};h.save=function(){var a=new H(this);a.set(0,jd(this));return a.data()};
h.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&d.length<this.P){var e=this.P,f=0;e=e?Array(e):[];for(var g=0;g<d.length-1;)for(var k=d[g++],l=d[g++];k--;)e[f++]=l;d=e}f=this.b[c];if(!f||!f.restore(d)){w("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function gd(a,b,c,d,e){for(var f=b,g=c,k=f>>>a.g;0<g&&k<a.b.length;){var l=a.b[k],m=k*a.j,n=a.j-(f-m);n>g&&(n=g);if(!e&&l&&l.size){if(l.type==d){if(f+g<=l.J)return l.Sb+=l.J-f,l.J=f,!0;if(f>=l.J+l.Sb){n=l.size-(f-m);n>g&&(n=g);l.Sb=f-l.J+n;f=m+a.j;g-=n;k++;continue}}return kd(ld,f,g)}f=new J(a,f,n,a.j,d,e);fd(f,a.D,l);a.b[k++]=f;f=m+a.j;g-=n}return 0>=g?(a.status("Added "+(c>>10)+"Kb "+md[d]+" at "+u(b)),!0):kd(nd,b,c)}h.Hd=function(a){return this.u[(a&this.w)>>>this.g].zb(a&this.i,a)};
h.vc=function(a){var b=a&this.i,c=(a&this.w)>>>this.g;return Vb||b!=this.i?this.u[c].na(b,a):this.u[c++].zb(b,a)|this.u[c&this.R].zb(0,a+1)<<8};h.Id=function(a,b){this.u[(a&this.w)>>>this.g].Cb(a&this.i,b,a)};h.Wb=function(a,b){var c=a&this.i,d=(a&this.w)>>>this.g;Vb||c!=this.i?this.u[d].Db(c,b,a):(this.u[d++].Cb(c,b&255,a),this.u[d&this.R].Cb(0,b>>8&255,a+1))};function od(a,b){return a.b[(b&a.H)>>>a.g]}
function Lc(a,b){var c;a.B=!1;a.ma++;var d=b&a.i,e=od(a,b);Vb||d!=a.i?c=e.A(d,b):c=e.j(d,b)|od(a,b+1).j(0,b+1)<<8;a.ma--;return c}function pd(a,b,c){a.B=!1;a.ma++;od(a,b).D(b&a.i,c&255,b);a.ma--}function Jc(a,b,c){a.B=!1;a.ma++;var d=b&a.i,e=od(a,b);Vb||d!=a.i?e.B(d,c&65535,b):(e.D(d,c&255,b),od(a,b+1).D(0,c>>8&255,b+1));a.ma--}
function jd(a){for(var b=0,c=[],d=0;d<a.F;d++){var e=a.b[d];if(e.cb||e.Cf){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,k=0,l=[];g<e.length;){for(var m=e[g],n=g+1;n<e.length&&e[n]===m;)n++;l[k++]=n-g;l[k++]=m;g=n}l.length<e.length&&(e=l)}c[f]=e}}return c}function qd(a){for(var b=rd,c=0,d=0;d<a.b.length;d++){var e=a.b[d];e.type==b&&(c=e.J+e.Sb)}return c}
function sd(a,b,c,d,e,f,g,k,l){for(var m=b==c?-1:0;b<=c;b+=2){var n=b&td;if(void 0!==a.Oa[n])return w("I/O address already registered: "+v(b,8,!0)),!1;var r=l||"unknown";r&&0<=m&&(r+=m++);a.Oa[n]=[d,e,f,g,r,k||16,!1]}return!0}
function nc(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.f.ia)){var k=g[0]?g[0].bind(b):null,l=g[1]?g[1].bind(b):null,m=g[2]?g[2].bind(b):null,n=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!k&&m&&(k=function(a){return function(b){return a(b)&255}.bind(b)}(m)),!l&&n&&(l=function(a){return function(b,c){return a(b,c)}.bind(b)}(n)));for(var r=g[4],t=g[5]||1,p=0;p<t;p++,f+=2)if(r&&1<t&&(r=g[4]+p),!sd(a,f,f,k,l,m,n,g[7]||b.ha,r||b.Tc))return!1}}return!0}
function pc(a,b){a.M.push(b)}h.Ma=function(a,b,c){this.B=!0;this.ma||(this.D&&E(this.D,4)&&F(this.D,"memory fault ("+c+") on "+K(this.D,a),!0,!0),b&&(this.f.O|=b),this.f.qa(4,0,a))};function ud(a){var b=a.B;a.B=!1;return b}function kd(a,b,c){w("Memory block error ("+a+": "+v(b)+","+v(c)+")");return!1}var ad=8192,td=ad-1,ld=1,nd=2;
function bd(a,b){var c=-1,d=this.controller,e=d.Oa[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Oa[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return this.f&&E(this.f,16|e[5])&&F(this.f,e[4]+".readByte("+K(this.f,b)+"): "+K(this.f,c),!0,!d.ma),c;d.Ma(b,16,3);c=255;this.f&&E(this.f,16)&&F(this.f,"warning: unconverted read access to byte @"+K(this.f,b)+": "+K(this.f,c),!0,!d.ma);return c}
function cd(a,b,c){var d=!1,e=this.controller,f=e.Oa[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Oa[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d?this.f&&E(this.f,16|f[5])&&F(this.f,f[4]+".writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.ma):(e.Ma(c,16,5),this.f&&E(this.f,16)&&F(this.f,"warning: unconverted write access to byte @"+K(this.f,c)+": "+K(this.f,
b),!0,!e.ma))}function dd(a,b){var c=-1,d=this.controller;a=d.Oa[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return this.f&&E(this.f,16|a[5])&&F(this.f,a[4]+".readWord("+K(this.f,b)+"): "+K(this.f,c),!0,!d.ma),c;d.Ma(b,16,2);c=65535;this.f&&E(this.f,16)&&F(this.f,"warning: unconverted read access to word @"+K(this.f,b)+": "+K(this.f,c),!0,!d.ma);return c}
function ed(a,b,c){var d=!1,e=this.controller;a=e.Oa[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d?this.f&&E(this.f,16|a[5])&&F(this.f,a[4]+".writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.ma):(e.Ma(c,16,4),this.f&&E(this.f,16)&&F(this.f,"warning: unconverted write access to word @"+K(this.f,c)+": "+K(this.f,b),!0,!e.ma))}function L(a){x.call(this,"Device",a,256);this.b={eb:128,Dd:-1}}q(L,x);h=L.prototype;
h.za=function(a,b,c,d){this.C=b;this.I=a;this.f=c;this.D=d;var e=this;this.b.Dd=vd(c,function(){e.b.eb|=128;e.b.eb&64&&wd(e.f,e.b.Pa);e.I&&Hc(e.I,1);xd(e.f,e.b.Dd,1E3/60)});this.b.Pa=yd(c,64,6,2097152);nc(b,this,zd);pc(b,this.reset.bind(this));d&&Ad(d,64,function(a){var b=e.f;Bd(e,"KIPDR",b.A[0],0,a[0]);Bd(e,"KDPDR",b.A[0],8,a[0]);Bd(e,"KIPAR",b.L[0],0,a[0]);Bd(e,"KDPAR",b.L[0],8,a[0],!0);Bd(e,"SIPDR",b.A[1],0,a[0]);Bd(e,"SDPDR",b.A[1],8,a[0]);Bd(e,"SIPAR",b.L[1],0,a[0]);Bd(e,"SDPAR",b.L[1],8,a[0],
!0);Bd(e,"UIPDR",b.A[3],0,a[0]);Bd(e,"UDPDR",b.A[3],8,a[0]);Bd(e,"UIPAR",b.L[3],0,a[0]);Bd(e,"UDPAR",b.L[3],8,a[0],!0);b.V&32&&Bd(e,"UNIMAP",b.Fa,-1,a[0])});D(this)};function Bd(a,b,c,d,e,f){a=a.D;if(!(e&&0>b.indexOf(e.toUpperCase()))){e=0;var g=8,k="",l=!1,m=8;0>d&&(e=22,g=c.length,d=0,l=!0,m=4);for(var n=0;n<g;n++)0==n%m&&(k&&(k+="\n"),k+=b+(l?"["+xa(n,2)+"]":"")+":"),k+=" "+K(a,c[d+n],e);a.v(k+(f?"\n":""))}}h.Ba=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};
h.Aa=function(a){return a?this.save():!0};h.reset=function(){this.b.eb=128;xd(this.f,this.b.Dd,1E3/60,!0)};h.save=function(){var a=new H(this);a.set(0,[this.b.eb]);return a.data()};h.restore=function(a){a=ja(a[0]);this.b.eb=a.next().value;return!0};h.cg=function(){return this.b.eb};h.wh=function(a){this.b.eb=a&192;this.b.eb&64||Cd(this.f,this.b.Pa)};h.eg=function(){return Dd(this.f)};h.yh=function(a){Ed(this.f,a&-129|this.f.R&128)};h.fg=function(){return Gd(this.f)};h.gg=function(){return Hd(this.f)};
h.hg=function(){return this.f.V};h.zh=function(a){Id(this.f,a)};h.Tg=function(a){a=a>>1&63;var b=this.f.Fa[a>>1];return a&1?b>>16:b&65535};h.ki=function(a,b){b=b>>1&63;var c=b>>1;this.f.Fa[c]=b&1?this.f.Fa[c]&65535|(a&63)<<16:this.f.Fa[c]&-65536|a&65534};h.Mg=function(a){return this.f.A[1][a>>1&7]};h.di=function(a,b){this.f.A[1][b>>1&7]=a&65295};h.Kg=function(a){return this.f.A[1][(a>>1&7)+8]};h.bi=function(a,b){this.f.A[1][(b>>1&7)+8]=a&65295};h.Lg=function(a){return this.f.L[1][a>>1&7]};
h.ci=function(a,b){b=b>>1&7;this.f.L[1][b]=a;this.f.A[1][b]&=65295};h.Jg=function(a){return this.f.L[1][(a>>1&7)+8]};h.ai=function(a,b){b=(b>>1&7)+8;this.f.L[1][b]=a;this.f.A[1][b]&=65295};h.bg=function(a){return this.f.A[0][a>>1&7]};h.vh=function(a,b){this.f.A[0][b>>1&7]=a&65295};h.$f=function(a){return this.f.A[0][(a>>1&7)+8]};h.th=function(a,b){this.f.A[0][(b>>1&7)+8]=a&65295};h.ag=function(a){return this.f.L[0][a>>1&7]};h.uh=function(a,b){b=b>>1&7;this.f.L[0][b]=a;this.f.A[0][b]&=65295};
h.Zf=function(a){return this.f.L[0][(a>>1&7)+8]};h.sh=function(a,b){b=(b>>1&7)+8;this.f.L[0][b]=a;this.f.A[0][b]&=65295};h.Sg=function(a){return this.f.A[3][a>>1&7]};h.ji=function(a,b){this.f.A[3][b>>1&7]=a&65295};h.Qg=function(a){return this.f.A[3][(a>>1&7)+8]};h.hi=function(a,b){this.f.A[3][(b>>1&7)+8]=a&65295};h.Rg=function(a){return this.f.L[3][a>>1&7]};h.ii=function(a,b){b=b>>1&7;this.f.L[3][b]=a;this.f.A[3][b]&=65295};h.Pg=function(a){return this.f.L[3][(a>>1&7)+8]};
h.gi=function(a,b){b=(b>>1&7)+8;this.f.L[3][b]=a;this.f.A[3][b]&=65295};h.Qb=function(a){a&=7;return this.f.w&2048?this.f.sa[a]:this.f.g[a]};h.Ub=function(a,b){b&=7;this.f.w&2048?this.f.sa[b]=a:this.f.g[b]=a};h.og=function(){return this.f.w&49152?this.f.X[0]:this.f.g[6]};h.Gh=function(a){this.f.w&49152?this.f.X[0]=a:this.f.g[6]=a};h.rg=function(){return this.f.g[7]};h.Jh=function(a){this.f.g[7]=a};h.Rb=function(a){a&=7;return this.f.w&2048?this.f.g[a]:this.f.sa[a]};
h.Vb=function(a,b){b&=7;this.f.w&2048?this.f.g[b]=a:this.f.sa[b]=a};h.pg=function(){return 1==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[1]};h.Hh=function(a){1==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[1]=a};h.qg=function(){return 3==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[3]};h.Ih=function(a){3==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[3]=a};h.Yf=function(a){return this.f.sc[a-65504>>1]};h.rh=function(a,b){this.f.sc[b-65504>>1]=a};h.te=function(a){return 65520==a?(qd(this.C)>>6)-1:0};
h.ye=function(){};h.Og=function(){return 1};h.fi=function(){};h.Xf=function(){return this.f.O};h.qh=function(){this.f.O=0};h.dg=function(){return this.f.pc};h.xh=function(a,b){b&1||(a&=255);this.f.pc=a};h.ig=function(a,b){return b?0:this.f.mb};h.Ah=function(a){Jd(this.f,a)};h.Ng=function(a,b){return b?0:this.f.Ea&65280};h.ei=function(a){this.f.Ea=a|255};h.ng=function(){return Kd(this.f)};h.Fh=function(a){Ld(this.f,a)};h.xe=function(a,b){E(this)&&F(this,"writeIgnored("+u(b)+"): "+u(a),!0,!0)};
var M={},zd=(M[61568]=[null,null,L.prototype.Tg,L.prototype.ki,"UNIMAP",64,1170],M[62592]=[null,null,L.prototype.Mg,L.prototype.di,"SIPDR",8,1145,64],M[62608]=[null,null,L.prototype.Kg,L.prototype.bi,"SDPDR",8,1145,64],M[62624]=[null,null,L.prototype.Lg,L.prototype.ci,"SIPAR",8,1145,64],M[62640]=[null,null,L.prototype.Jg,L.prototype.ai,"SDPAR",8,1145,64],M[62656]=[null,null,L.prototype.bg,L.prototype.vh,"KIPDR",8,1140,64],M[62672]=[null,null,L.prototype.$f,L.prototype.th,"KDPDR",8,1145,64],M[62688]=
[null,null,L.prototype.ag,L.prototype.uh,"KIPAR",8,1140,64],M[62704]=[null,null,L.prototype.Zf,L.prototype.sh,"KDPAR",8,1145,64],M[62798]=[null,null,L.prototype.hg,L.prototype.zh,"MMR3",1,1145,64],M[65382]=[null,null,L.prototype.cg,L.prototype.wh,"LKS"],M[65402]=[null,null,L.prototype.eg,L.prototype.yh,"MMR0",1,1140,64],M[65404]=[null,null,L.prototype.fg,L.prototype.xe,"MMR1",1,1145,64],M[65406]=[null,null,L.prototype.gg,L.prototype.xe,"MMR2",1,1140,64],M[65408]=[null,null,L.prototype.Sg,L.prototype.ji,
"UIPDR",8,1140,64],M[65424]=[null,null,L.prototype.Qg,L.prototype.hi,"UDPDR",8,1145,64],M[65440]=[null,null,L.prototype.Rg,L.prototype.ii,"UIPAR",8,1140,64],M[65456]=[null,null,L.prototype.Pg,L.prototype.gi,"UDPAR",8,1145,64],M[65472]=[null,null,L.prototype.Qb,L.prototype.Ub,"R0SET0"],M[65473]=[null,null,L.prototype.Qb,L.prototype.Ub,"R1SET0"],M[65474]=[null,null,L.prototype.Qb,L.prototype.Ub,"R2SET0"],M[65475]=[null,null,L.prototype.Qb,L.prototype.Ub,"R3SET0"],M[65476]=[null,null,L.prototype.Qb,
L.prototype.Ub,"R4SET0"],M[65477]=[null,null,L.prototype.Qb,L.prototype.Ub,"R5SET0"],M[65478]=[null,null,L.prototype.og,L.prototype.Gh,"R6KERNEL"],M[65479]=[null,null,L.prototype.rg,L.prototype.Jh,"R7KERNEL"],M[65480]=[null,null,L.prototype.Rb,L.prototype.Vb,"R0SET1",1,1145],M[65481]=[null,null,L.prototype.Rb,L.prototype.Vb,"R1SET1",1,1145],M[65482]=[null,null,L.prototype.Rb,L.prototype.Vb,"R2SET1",1,1145],M[65483]=[null,null,L.prototype.Rb,L.prototype.Vb,"R3SET1",1,1145],M[65484]=[null,null,L.prototype.Rb,
L.prototype.Vb,"R4SET1",1,1145],M[65485]=[null,null,L.prototype.Rb,L.prototype.Vb,"R5SET1",1,1145],M[65486]=[null,null,L.prototype.pg,L.prototype.Hh,"R6SUPER",1,1145],M[65487]=[null,null,L.prototype.qg,L.prototype.Ih,"R6USER",1,1145],M[65504]=[null,null,L.prototype.Yf,L.prototype.rh,"CTRL",8,1170],M[65520]=[null,null,L.prototype.te,L.prototype.ye,"LSIZE",1,1170],M[65522]=[null,null,L.prototype.te,L.prototype.ye,"HSIZE",1,1170],M[65524]=[null,null,L.prototype.Og,L.prototype.fi,"SYSID",1,1170],M[65526]=
[null,null,L.prototype.Xf,L.prototype.qh,"ERR",1,1170],M[65528]=[null,null,L.prototype.dg,L.prototype.xh,"MBR",1,1170],M[65530]=[null,null,L.prototype.ig,L.prototype.Ah,"PIR"],M[65532]=[null,null,L.prototype.Ng,L.prototype.ei,"SLR"],M[65534]=[null,null,L.prototype.ng,L.prototype.Fh,"PSW"],M);
eb(function(){for(var a=A(document,y,"device"),b=0;b<a.length;b++){var c=a[b];var d=wb(c);switch(d.type){case "default":d=new L(d);vb(d,c);break;case "pc11":d=new Md(d);vb(d,c);break;case "rl11":d=new Nd(d);vb(d,c);break;case "rk11":d=new N(d);vb(d,c);break;case "rx11":d=new Xd(d),vb(d,c)}}});
function J(a,b,c,d,e,f){this.C=a;this.id=Yd+=2;this.b=null;this.J=b;this.Sb=c;this.size=d||0;this.type=e||Zd;this.I=e==$d;this.f=this.controller=null;this.zb=this.j=this.yd;this.na=this.A=this.zd;this.Cb=this.D=this.Tb;this.Db=this.B=this.Rc;this.G=this.i=0;fd(this);this.cb=this.Cf=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.b=a[0],ae(this,f.vf);else if(Qb)this.u=new ArrayBuffer(this.size),this.w=new DataView(this.u,0,this.size),this.g=new Uint8Array(this.u,0,this.size),this.F=new Uint16Array(this.u,
0,this.size>>1),this.b=new Int32Array(this.u,0,this.size>>2),ae(this,be?ce:de);else{a=this.b=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;ae(this,ee)}else ae(this)}h=J.prototype;h.save=function(){var a;if(this.controller)var b=null;else if(Qb)for(b=Array(this.size>>2),a=0;a<b.length;a++)b[a]=this.w.getInt32(a<<2,!0);else b=this.b;return b};
h.restore=function(a){if(this.controller)return null==a;if(a&&this.size==a.length<<2){var b;if(Qb)for(b=0;b<a.length;b++)this.w.setInt32(b<<2,a[b],!0);else this.b=a;return this.cb=!0}return!1};function ae(a,b){b||(b=fe);ge(a,b,void 0);he(a,b,void 0)}function ge(a,b,c){c&&a.G||(a.zb=b[0]||a.yd,a.na=b[2]||a.zd);if(c||void 0===c)a.j=b[0]||a.yd,a.A=b[2]||a.zd}function he(a,b,c){c&&a.i||(a.Cb=!a.I&&b[1]||a.Tb,a.Db=!a.I&&b[3]||a.Rc);if(c||void 0===c)a.D=b[1]||a.Tb,a.B=b[3]||a.Rc}
h.xb=function(a,b){b?0===this.i++&&he(this,ie,!1):0===this.G++&&ge(this,ie,!1)};function je(a,b){b?0===--a.i&&(a.Cb=a.I?a.Tb:a.D,a.Db=a.I?a.Rc:a.B):0===--a.G&&(a.zb=a.j,a.na=a.A)}function fd(a,b,c){a.f=b;a.G=a.i=0;c&&((a.G=c.G)&&ge(a,ie,!1),(a.i=c.i)&&he(a,ie,!1))}h.yd=function(a,b){this.f&&E(this.f,32)&&F(this.f,"attempt to read invalid address "+K(this.f,b),!0);this.C.Ma(b,32,2);return 255};
h.Tb=function(a,b,c){this.f&&E(this.f,32)&&F(this.f,"attempt to write "+K(this.f,b)+" to invalid addresses "+K(this.f,c),!0);this.C.Ma(c,32,4)};h.zd=function(a,b){return this.zb(a++,b++)|this.zb(a,b)<<8};h.Rc=function(a,b,c){this.Cb(a++,b&255,c++);this.Cb(a,b>>8,c)};h.Vf=function(a){return this.b[a>>2]>>>((a&3)<<3)&255};h.Zg=function(a,b){Ub&&a&1&&this.C.Ma(b,64,2);b=a>>2;a=(a&3)<<3;var c=this.b[b]>>a;return 24>a?c&65535:c&255|(this.b[b+1]&255)<<8};
h.oh=function(a,b){var c=a>>2;a=(a&3)<<3;this.b[c]=this.b[c]&~(255<<a)|b<<a;this.cb=!0};h.oi=function(a,b,c){Ub&&a&1&&this.C.Ma(c,64,4);c=a>>2;a=(a&3)<<3;24>a?this.b[c]=this.b[c]&~(65535<<a)|b<<a:(this.b[c]=this.b[c]&16777215|b<<24,c++,this.b[c]=this.b[c]&-256|b>>8);this.cb=!0};h.Tf=function(a,b){this.f&&null!=this.J&&ke(this.f,this.J+a);return this.j(a,b)};h.Vg=function(a,b){this.f&&null!=this.J&&ke(this.f,this.J+a,2);return this.A(a,b)};
h.mh=function(a,b,c){this.f&&null!=this.J&&le(this.f,this.J+a);this.I?this.Tb(a,b,c):this.D(a,b,c)};h.mi=function(a,b,c){this.f&&null!=this.J&&le(this.f,this.J+a,2);this.I?this.Tb(a,b,c):this.B(a,b,c)};h.Sf=function(a){return this.g[a]};h.Uf=function(a,b){a=this.g[a];this.f&&E(this.f,32)&&F(this.f,"Memory.readByte("+K(this.f,b)+"): "+K(this.f,a),!0);return a};h.Ug=function(a,b){Ub&&a&1&&this.C.Ma(b,64,2);return this.w.getUint16(a,!0)};
h.Yg=function(a,b){Ub&&a&1&&this.C.Ma(b,64,2);a=!Vb&&a&1?this.g[a]|this.g[a+1]<<8:this.F[a>>1];this.f&&E(this.f,32)&&F(this.f,"Memory.readWord("+K(this.f,b)+"): "+K(this.f,a),!0);return a};h.lh=function(a,b){this.g[a]=b;this.cb=!0};h.nh=function(a,b,c){this.g[a]=b;this.cb=!0;this.f&&E(this.f,32)&&F(this.f,"Memory.writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0)};h.li=function(a,b,c){Ub&&a&1&&this.C.Ma(c,64,4);this.w.setUint16(a,b,!0);this.cb=!0};
h.ni=function(a,b,c){Ub&&a&1&&this.C.Ma(c,64,4);!Vb&&a&1?(this.g[a]=b,this.g[a+1]=b>>8):this.F[a>>1]=b;this.cb=!0;this.f&&E(this.f,32)&&F(this.f,"Memory.writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0)};var Zd=0,rd=1,$d=2,hd=4,md=["NONE","RAM","ROM","VID","H/W"],Yd=0,fe=[],ee=[J.prototype.Vf,J.prototype.oh,J.prototype.Zg,J.prototype.oi],ie=[J.prototype.Tf,J.prototype.mh,J.prototype.Vg,J.prototype.mi];
if(Qb)var de=[J.prototype.Sf,J.prototype.lh,J.prototype.Ug,J.prototype.li],ce=[J.prototype.Uf,J.prototype.nh,J.prototype.Yg,J.prototype.ni];var me;if(Qb){var ne=new ArrayBuffer(2);(new DataView(ne)).setUint16(0,256,!0);me=256===(new Uint16Array(ne))[0]}else me=!1;var be=me;
function oe(a,b){x.call(this,"CPU",a,1);b=+a.cycles||b;var c=+a.multiplier||1;this.Wc=0;this.Uc=b;this.kb=c;this.gd=Math.round(this.Uc/1E4)/100;this.tb=this.gd*this.kb;this.hd=this.lc=this.wb=this.tc=0;this.flags.U=this.flags.Nc=!1;this.flags.pa=a.autoStart;"string"==typeof this.flags.pa&&(this.flags.pa="true"==this.flags.pa);this.flags.Jb=!1;this.jc=this.Kb=0;this.kc=+a.csStart;this.Ib=+a.csInterval;this.Mb=+a.csStop;this.fa=[];this.Vd=this.eh.bind(this);this.lb=this.Ia=this.jb=this.b=this.ka=this.Ha=
this.ic=this.ib=this.Nb=this.jd=this.sb=0;this.ra=null;D(this)}q(oe,x);h=oe.prototype;h.za=function(a,b,c,d){this.I=a;this.C=b;this.D=d;this.ra=a.i;for(a=0;a<pe.length;a++)(b=this.G[pe[a]])&&this.I.ua("",pe[a],b);D(this)};h.reset=function(){};h.save=function(){return null};h.restore=function(){return!1};
h.Ba=function(a,b){var c=qe(this.I,"autoStart");null!=c?this.flags.pa="true"==c?!0:"false"==c?!1:!!c:null==this.flags.pa&&(this.flags.pa=!this.D&&void 0===this.G.run);if(!b){if(a){re(this);if(!this.restore(a))return!1;se(this)}else this.reset();this.D?(a=this.D,b=this.flags.pa,a.Fa=!0,a.v("Type ? for help with PDPjs Debugger commands"),te(a),b||ue(a),a.wa&&(b=a.wa,a.wa=null,ve(a,b))):this.status("No debugger detected");this.flags.pa||this.v("CPU will not be auto-started "+(this.ra?"(click Run to start)":
"(type 'go' to start)"))}return!0};h.Aa=function(a){return a?this.save():!0};h.pa=function(){return this.flags.U?!0:this.flags.pa?Cc(this):!1};h.me=function(){return 0};function se(a){void 0===a.kc&&(a.kc=0);void 0===a.Ib&&(a.Ib=-1);void 0===a.Mb&&(a.Mb=-1);a.flags.Jb=0<=a.kc&&0<a.Ib;a.flags.Jb&&(a.jc=0,a.Kb=a.kc-a.lb)}
function Gc(a,b){if(a.flags.Jb){var c=!1;a.jc=a.jc+a.me()|0;a.Kb-=b;0>=a.Kb&&(a.Kb+=a.Ib,c=!0);0<=a.Mb&&a.Mb<=we(a)&&(a.Ib=a.Mb=-1,se(a),I(a),c=!0);c&&a.v(we(a)+" cycles: checksum\x3d"+v(a.jc))}}
h.ua=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.G[b]=c,!0;case "run":return this.G[b]=c,c.onclick=function(){var a;if(a=d.I)if(a=d.I,a.flags.ba)a=!0;else{var b=null,c,k=xb(a.id);for(c=0;c<k.length&&(b=k[c],b===a||b.flags.ready);c++);if(c==k.length)for(c=0;c<k.length&&(b=k[c],b===a||b.flags.ba);c++);c==k.length&&(b=a);w("The "+b.type+" component ("+b.id+") is not "+(b.flags.ready?"powered yet":"ready yet"+(b.Ic?" (waiting for notification)":""))+".");a=!1}a&&(d.flags.U?
I(d):Cc(d))},!0;case "speed":return this.G[b]=c,!0;case "setSpeed":return this.G[b]=c,c.onclick=function(){xe(d,d.kb<<1,!0)},c.textContent=this.tb.toFixed(2)+"Mhz",!0}return!1};function Fc(a,b,c){a.lb+=b;c&&(a.jb=a.b=a.ka=0)}function ye(a,b){var c=1;b&&1<a.kb&&a.sb&&(c=a.sb/a.gd);a.hd=Math.round(1E3/ze);a.lc=Math.floor(a.Uc/ze*c);b||(a.wb=a.lc);a.tc=0}function we(a){return a.lb+a.Ia+a.jb-a.b}function re(a){a.sb=0;a.jd=0;a.lb=a.Ia=a.jb=a.b=a.ka=0;se(a);xe(a,1)}
function xe(a,b,c){var d=!1;if(void 0!==b){.8>a.sb/a.tb?b=1:d=!0;a.kb=b;b=a.gd*a.kb;if(a.tb!=b){a.tb=b;b=a.tb.toFixed(2)+"Mhz";var e=a.G.setSpeed;e&&(e.textContent=b);a.v("target speed: "+b)}c&&a.I&&Ae(a.I)}Fc(a,a.Ia);a.Ia=0;a.Ha=sb();a.ib=0;ye(a);return d}function vd(a,b){var c=a.fa.length;a.fa.push([-1,b]);return c}function xd(a,b,c,d){0<=b&&b<a.fa.length&&(d||0>a.fa[b][0])&&(c=a.Uc*a.kb/1E3*c|0,a.flags.U&&(c+=Be(a)),a.fa[b][0]=c)}
function Ce(a,b){for(var c=a.fa.length-1;0<=c;c--){var d=a.fa[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function De(a){for(var b=[],c=0;c<a.fa.length;c++)b.push(a.fa[c][0]);return b}function Ec(a,b){for(var c=a.fa.length-1;0<=c;c--){var d=a.fa[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function Be(a,b){var c=a.jb-=a.b;a.b=a.ka=0;b&&(a.jb=0);return c}
h.eh=function(){if(this.flags.U){this.tc>=this.Uc&&ye(this,!0);this.Nb=0;this.ic=sb();if(this.ib){var a=this.ic-this.ib;a>this.hd&&(this.Ha+=a,this.Ha>this.ic&&(this.Ha=this.ic))}try{do{var b=Ce(this,this.flags.Jb?1:this.lc);try{this.wc(b)}catch(e){if("number"!=typeof e)throw e;}b=Be(this,!0);this.Nb+=b;this.Ia+=b;Gc(this,b);Ec(this,b);this.wb-=b;if(0>=this.wb){this.wb+=this.lc;++this.jd>=Ee&&(this.I&&Hc(this.I,void 0),this.jd=0);break}}while(this.flags.U)}catch(e){I(this);this.I&&this.I.stop(sb(),
we(this));Lb(this,e.stack||e.message);return}if(this.flags.U){a=setTimeout;b=this.Vd;this.ib=sb();var c=this.hd;this.Nb&&(c=Math.round(c*this.Nb/this.lc));c-=this.ib-this.ic;var d=this.ib-this.Ha;d&&(this.sb=Math.round(this.Ia/(10*d))/100,864E5<=d&&(this.lb=0,xe(this)));if(0>c||this.sb<this.tb)-1E3>c&&(this.Ha-=c),c=0;this.tc+=this.Nb;this.ib+=c;a(b,c)}}};
function Cc(a,b){if(Mb(a))return!1;if(a.flags.U)return a.v(a.toString()+" busy"),!1;xe(a);a.flags.U=!0;a.flags.Nc=!0;var c=a.G.run;c&&(c.textContent="Halt");a.I&&(b&&Ae(a.I,!0),a.I.start(a.Ha,we(a)));a.D||a.status("Started");setTimeout(a.Vd,0);return!0}h.wc=function(){return 0};function I(a,b){var c=!1;if(a.flags.U){Be(a);Fc(a,a.Ia);a.Ia=0;a.flags.U=!1;if(c=a.G.run)c.textContent="Run";a.I&&a.I.stop(sb(),we(a));c=!0;a.D||a.status("Stopped")}a.flags.complete=b;return c}var ze=30,Ee=15,pe=["power","reset"];
function Fe(a){var b=+a.model||1170;oe.call(this,a,6666667);this.ia=b;this.Pc=+a.addrReset||0;this.Ja=this.w=this.M=this.B=this.F=this.K=this.H=0;this.g=this.sa=this.X=[];this.L=this.A=this.Fa=this.sc=[];this.Ra=this.N=this.Pd=this.ub=this.vb=this.ob=this.hb=this.O=this.pc=this.mb=this.Ea=this.R=this.qc=this.rc=this.V=this.i=0;this.Sd=[4,2,0,1];this.uc=0;this.Ud=255;1120>=this.ia?(this.Yd=Ge.bind(this),this.Hb=this.zf,this.uc=8,this.Ud=-1,this.be=255,this.ae=0):(this.Yd=He.bind(this),this.Hb=this.Af,
this.be=~(1792|(1140>=this.ia?2048:0))&65535,this.ae=1140<this.ia?2048:0);this.yc=this.xc=this.oa=0;this.P=null;this.hc=[];this.ec=this.Yc=this.le;this.fc=this.Zc=this.pe;this.Oc=this.dd=this.ve;this.gc=this.fd=this.we;this.Ga=this.rb=this.mc=this.oc=0;this.wa=this.oe;this.na=this.Ad;this.Db=this.Fd;this.u=this.j=this.Sc=this.T=this.Y=0;this.flags.complete=!1}q(Fe,oe);h=Fe.prototype;
h.za=function(a,b,c,d){oe.prototype.za.call(this,a,b,c,d);this.Yc=b.Hd.bind(b);this.Zc=b.vc.bind(b);this.dd=b.Id.bind(b);this.fd=b.Wb.bind(b)};h.Ba=function(a,b){for(var c=192,d=0;d<this.hc.length;d++){var e=this.hc[d];0>e.Bb&&(e.Bb=c,c+=4)}return oe.prototype.Ba.call(this,a,b)};
h.reset=function(){this.status("Model "+this.ia);this.flags.U&&I(this);this.B=65536;this.F=32768;this.K=65535;this.H=32768;this.w=15;this.g=[0,0,0,0,0,0,0,this.Pc,-1,-2,-3,-4,-5,-6,-7,-8];this.sa=[0,0,0,0,0,0];this.X=[0,0,0,0];this.L=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.A=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,
65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Fa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.sc=[0,0,0,0,0,0,0,0];this.M=0;this.Ja=-1;this.u=this.j=this.Sc=this.T=this.Y=this.i=this.pc=0;Ac(this);re(this);this.flags.error=!1;oe.prototype.reset.call(this)};function Ac(a){a.R=0;a.qc=0;a.rc=0;a.V=0;a.O=0;a.mb=0;a.Ea=255;a.ub=0;a.vb=0;a.ob=0;a.hb=262143;a.Ra=a.g[7];a.N=0;a.P=null;a.C&&(Ie(a),a.Pd=qd(a.C))}
function Ie(a){a.ec=a.Yc;a.fc=a.Zc;a.Oc=a.dd;a.gc=a.fd;a.mc&&(a.ec=a.le,a.fc=a.pe);a.oc&&(a.Oc=a.ve,a.gc=a.we);a.ub?(a.Ga=65536,a.rb=a.V&16?4186112:253952,a.wa=a.oe,a.na=a.mc?a.Xg:a.Ad,a.Db=a.oc?a.ri:a.Fd,id(a.C,a.V&16?22:18)):(a.Ga=0,a.rb=57344,a.wa=a.Df,a.na=a.mc?a.Wg:a.ue,a.Db=a.oc?a.pi:a.ze,id(a.C,16))}function Dd(a){var b=a.R;b&57344||(b=b&-3199|a.vb<<5|a.ob<<1);return b}
function Ed(a,b){b&=-3073;if(a.R!=b){b&57344&&!(a.R&57344)&&(a.qc=a.N>>16&65535,a.rc=a.N&65535);a.R=b;a.vb=(b&96)>>5;a.ob=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.ub!=c&&(a.ub=c,Ie(a))}}function Gd(a){a.R&57344||(a.qc=a.N>>16&65535);a=a.qc;a&65280&&(a=(a<<8|a>>8)&65535);return a}function Hd(a){a.R&57344||(a.rc=a.N&65535);return a.rc}function Id(a,b){1170>a.ia&&(b&=-49);a.V!=b&&(a.V=b,a.hb=b&16?4194303:262143,Ie(a))}
function Je(a,b,c,d){a.Pc=b;zc(a,b);Ld(a,0);a.C.reset();Ac(a);if(c){a.g[0]=d||0;for(b=1;5>=b;b++)a.g[b]=0;a.g[6]=1024;a.flags.ba?a.flags.U||Cc(a):a.flags.pa=!0}else a.D&&a.flags.ba?I(a)||a.I.flags.reset||(te(a.D),Hc(a.I,-1)):!1===c&&I(a);!a.flags.U&&a.ra&&a.ra.stop()}h.me=function(){return 0};
h.save=function(){var a=new H(this);a.set(0,[this.g,this.sa,this.X,this.L,this.A,this.Fa,this.sc,this.O,this.pc,this.mb,this.Ea,this.vb,this.ob,this.Ra,this.i,this.N,this.Ja,this.xc,this.yc,this.Pc]);a.set(1,[Kd(this),Dd(this),Gd(this),Hd(this),this.V]);a.set(2,[this.lb,this.kb,this.flags.pa]);a.set(3,Ke(this));a.set(4,De(this));return a.data()};
h.restore=function(a){var b=ja(a[0]);this.g=b.next().value;this.sa=b.next().value;this.X=b.next().value;this.L=b.next().value;this.A=b.next().value;this.Fa=b.next().value;this.sc=b.next().value;this.O=b.next().value;this.pc=b.next().value;this.mb=b.next().value;this.Ea=b.next().value;this.vb=b.next().value;this.ob=b.next().value;this.Ra=b.next().value;this.i=b.next().value;this.N=b.next().value;this.Ja=b.next().value;this.xc=b.next().value;this.yc=b.next().value;this.Pc=b.next().value;b=a[1];Ld(this,
b[0]);Ed(this,b[1]);this.qc=b[2];this.rc=b[3];Id(this,b[4]);b=a[2];this.lb=b[0];xe(this,b[1]);this.flags.pa=b[2];b=a[3];for(var c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.hc.length;d++){var e=this.hc[d];if(e.Bb===b[c]){d=e;break a}}d=null}d&&(d.next=this.P,this.P=d)}a=a[4];for(b=0;b<this.fa.length&&b<a.length;b++)this.fa[b][0]=a[b];return!0};function Le(a){return a.B&65536?1:0}function Me(a){return a.F&32768?2:0}function Ne(a){return a.K&65535?0:4}function Oe(a){return a.H&32768?8:0}
function Pe(a,b){var c=a.g[7];a.g[7]=c+b&65535;return c}function Qe(a,b,c){c&&(zc(a,a.g[7]+(b<<24>>23)),a.b-=2);a.b-=3}function zc(a,b){a.g[7]=b&65535}function yd(a,b,c,d){b={Bb:b,priority:c,message:d||0,name:fc[b],next:null};a.hc.push(b);return b}function Re(a,b){var c=a.P;if(c==b)a.P=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.P&&(a.i|=1)}
function wd(a,b){if(b){if(b!=a.P){var c=a.P;if(!c||c.priority<=b.priority)b.next=c,a.P=b;else{do{var d=c.next;if(!d||d.priority<=b.priority){b.next=d;c.next=b;break}c=d}while(c)}}a.i|=1;b.message&&E(a,b.message|8)&&F(a,"setIRQ(vector\x3d"+u(b.Bb)+",priority\x3d"+b.priority+")",!0,!0)}}function Cd(a,b){b&&(Re(a,b),b.message&&E(a,b.message|8)&&F(a,"clearIRQ(vector\x3d"+u(b.Bb)+",priority\x3d"+b.priority+")",!0,!0))}function Ke(a){var b=[];for(a=a.P;a;)b.push(a.Bb),a=a.next;return b}
function Se(a){return a.i&64?(a.qa(168,64,-6),!0):a.i&32?(a.qa(4,32,-5),!0):a.i&16?(a.qa(12,16,-7),!0):!1}function Kd(a){return a.w=a.w&63728|Oe(a)|Ne(a)|Me(a)|Le(a)}function Ld(a,b){b&=a.be;a.H=b<<12;a.K=~b&4;a.F=b<<14;a.B=b<<16;if((b^a.w)&a.ae)for(var c=a.sa.length;0<=--c;){var d=a.g[c];a.g[c]=a.sa[c];a.sa[c]=d}a.M=b>>14&3;c=a.w>>14&3;a.M!=c&&(a.X[c]=a.g[6],a.g[6]=a.X[a.M]);a.w=b;a.i&=-3;a.i|=a.P?2:1}function Jd(a,b){if(b&=65024){var c=b>>9;do b+=34;while(c>>=1);a.i|=1}a.mb=b}
h.Ca=function(a){this.H=this.K=a;this.F=0};h.nb=function(a,b){this.H=this.K=this.B=a;this.F=b||0};function Te(a,b){a.H=a.K=a.B=b;a.F=a.H^a.B>>1}function Ue(a,b,c,d){a.H=a.K=a.B=b;a.F=(c^d)&(d^b)}
h.qa=function(a,b,c){if(!this.oa){0>this.Ja?this.Ja=Kd(this):this.M||(c=-4);-4==c&&(this.i&256&&(c=-1),this.i|=256,this.O|=4,this.g[6]=a=4);if(-1!=c){this.N=a|4143316992;this.M=0;var d=this.na(a|this.Ga),e=this.na(a+2&65535|this.Ga);Ld(this,e&-12289|this.Ja>>2&12288);Ve(this,this.Ja);Ve(this,this.g[7]);zc(this,d)}this.b-=5;this.i&=~(b|19);this.i|=129;this.Ja=-1;this.xc=c;this.yc=a;-1==c&&I(this);if(-4<=c)throw a;}};
function We(a){var b=Xe(a),c=Xe(a);a.w&49152&&(c=c&-225|a.w&63712);zc(a,b);Ld(a,c);a.i&=-17}function Ye(a,b){var c=b>>13&31;31>c&&(b=a.V&32?a.Fa[c]+(b&8191)&4194303:b&-3932161);return b}
function Ze(a,b,c){var d=[];if(c){c=Ye(a,b);var e=b>>13&31;d.push(c);d.push(e);a.V&32&&(d.push(a.Fa[e]),d.push(b&8191))}else if(a.ub){e=a.M<<1;var f=b>>13;7<f&&(e|=1);a.V&a.Sd[a.M]||(f&=7);b&=8191;var g=a.L[a.M][f]<<6;c=g+b&a.hb;3932160<=c&&(c=Ye(a,c));d.push(c);d.push(b);d.push(e);d.push(f&7);d.push(g);d.push(a.hb)}else c=b&65535,57344<=c&&(c|=a.rb),d.push(c);return d}
function Kc(a,b,c){if(!(c&a.ub)){var d=b&65535;57344<=d&&(d|=a.rb);return d}var e=b>>13;a.V&a.Sd[a.M]||(e&=7);var f=a.A[a.M][e];d=(a.L[a.M][e]<<6)+(b&8191)&a.hb;3932160<=d&&(d=Ye(a,d));if(a.oa)return d;d>=a.Pd&&d<a.rb?(a.O|=32,a.qa(4,0,d)):d&1&&!(c&1)&&(a.O|=64,a.qa(4,0,d));var g=0;switch(f&7){case 1:g=4096;case 2:f|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:f|=c&4?192:128;break;default:g=32768}32512!=(f&32520)&&(f&8?f&32512&&(b&8128)<(f>>2&8128)&&(g|=16384):(b&8128)>(f>>2&
8128)&&(g|=16384));a.A[a.M][e]=f;if(d!=(4194170&a.hb)||a.M)a.vb=a.M,a.ob=e;g&&(g&57344&&(0<=a.Ja&&(g|=128),a.R&57344||(g|=a.R&4096|a.vb<<5|a.ob<<1,Ed(a,a.R&-61695|g&61694)),a.qa(168,64,-2)),a.R&61440||!(d<(4191360&a.hb)||d>(4194239&a.hb))||(a.R|=4096,a.R&512&&(a.i|=64)));return d}function Xe(a){var b=a.na(a.g[6]|a.Ga);a.g[6]=a.g[6]+2&65535;return b}function Ve(a,b){var c=a.g[6]-2&65535;a.g[6]=c;a.N=a.N&65535|(a.N&-65536)<<8|16121856;a.i&256||a.Hb(4,-2,c);a.Db(c,b)}
function $e(a,b,c,d){var e=d&8?0:a.Ga;switch(b){case 0:return a.qa(4,0,-3),0;case 1:return 6==c&&a.Hb(d,0,a.g[6]),a.b-=3,7==c?a.g[c]:a.g[c]|e;case 2:var f=2;var g=a.g[c];6==c&&a.Hb(d,f,g);7!=c&&(g|=e,6>c&&d&1&&(f=1));a.b-=3;break;case 3:f=2;g=a.g[c];7!=c&&(g|=e);g=a.na(g);g|=e;a.b-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);g=a.g[c]+f&65535;6==c&&a.Hb(d,f,g);7!=c&&(g|=e);a.b-=4;break;case 5:f=-2;g=a.g[c]-2&65535;7!=c&&(g|=e);g=a.na(g)|e;a.b-=8;break;case 6:return g=a.na(Pe(a,2)),g=g+a.g[c]&65535,6==c&&
a.Hb(d,0,g),a.b-=6,g|e;case 7:return g=a.na(Pe(a,2)),g=g+a.g[c]&65535,g=a.na(g|a.Ga),a.b-=10,g|e}a.g[c]=a.g[c]+f&65535;a.N=a.N&65535|(a.N&-65536)<<8|(f<<3&248|c)<<16;return g}h.zf=function(a,b,c){!this.M&&0>=b&&c<=this.Ea&&(this.i|=32)};h.Af=function(a,b,c){this.M||(65534<=c&&(c|=-65536),a&4&&c<=this.Ea&&(c<=this.Ea-32?this.qa(4,0,-4):(this.O|=8,this.i|=32)))};h.le=function(a){this.D&&ke(this.D,a,1);return this.Yc(a)};h.pe=function(a){this.D&&ke(this.D,a,2);return this.Zc(a)};
h.ve=function(a,b){this.D&&le(this.D,a,1);this.dd(a,b)};h.we=function(a,b){this.D&&le(this.D,a,2);this.fd(a,b)};function Mc(a,b){a.oa++;b=a.C.vc(Kc(a,b,2));a.oa--;return b}function af(a,b){(b?--a.oc:--a.mc)||Ie(a)}h.Df=function(a,b,c){return $e(this,a,b,c)};h.oe=function(a,b,c){return Kc(this,$e(this,a,b,c),c)};h.ue=function(a){return this.C.vc(this.Ra=a)};h.Wg=function(a){this.D&&ke(this.D,a,2);return this.ue(a)};h.Ad=function(a){return this.C.vc(this.Ra=Kc(this,a,2))};
h.Xg=function(a){this.D&&ke(this.D,a,2);return this.Ad(a)};h.ze=function(a,b){this.C.Wb(this.Ra=a,b)};h.pi=function(a,b){this.D&&le(this.D,a,2);this.ze(a,b)};h.Fd=function(a,b){this.C.Wb(this.Ra=Kc(this,a,4),b)};h.ri=function(a,b){this.D&&le(this.D,a,2);this.Fd(a,b)};function bf(a,b,c){var d=a.j=b&7;(b=a.u=(b&56)>>3)?(d=$e(a,b,d,2),c&65536||61440!==(a.w&61440)&&(d&=65535),a.M=a.w>>12&3,c=a.na(d|c&a.Ga),a.M=a.w>>14&3):c=6!=d||(a.w>>2&12288)===(a.w&12288)?a.g[d]:a.X[a.w>>12&3];return c}
function cf(a,b,c,d){a.N=a.N&65535|1441792;var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=$e(a,b,e,4),c&65536||(e&=65535),a.M=a.w>>12&3,e=Kc(a,e|c&65536,4),a.M=a.w>>14&3,a.gc(e,d)):6!=e||(a.w>>2&12288)===(a.w&12288)?a.g[e]=d:a.X[a.w>>12&3]=d}function df(a,b){b>>=6;var c=a.Y=b&7;return(b=a.T=(b&56)>>3)?a.ec(a.wa(b,c,3)):a.g[c+a.uc]&a.Ud}function ef(a,b){var c;b>>=6;var d=a.Y=b&7;(b=a.T=(b&56)>>3)?c=a.fc(a.wa(b,d,2)):c=a.g[d+a.uc];return c}function ff(a,b){var c=a.j=b&7;b=a.u=(b&56)>>3;return $e(a,b,c,8)}
function gf(a,b){var c=a.j=b&7;return(b=a.u=(b&56)>>3)?a.ec(a.wa(b,c,3)):a.g[c]&255}function hf(a,b){var c,d=a.j=b&7;(b=a.u=(b&56)>>3)?c=a.fc(a.wa(b,d,2)):c=a.g[d];return c}function jf(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.Sc=a.wa(b,e,7),c=0>c?a.g[-c-1]&255:c,a.Oc(e,d.call(a,c,a.ec(e))),e&1&&a.b--):(b=a.g[e],c=0>c?a.g[-c-1]&255:c,a.g[e]=b&65280|d.call(a,c,b&255))}
function P(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.wa(b,e,6),a.gc(e,d.call(a,0>c?a.g[-c-1]:c,a.fc(e)))):a.g[e]=d.call(a,0>c?a.g[-c-1]:c,a.g[e])}function Bf(a,b,c,d,e){var f=a.j=b&7;(b=a.u=(b&56)>>3)?(d=a.wa(b,f,5),e.call(a,(c=0>c?a.g[-c-1]&255:c)<<8),a.Oc(d,c),d&1&&a.b--):(c?(c=0>c?a.g[-c-1]&255:c,a.g[f]=a.g[f]&~d|c<<24>>24&d):a.g[f]&=~d,e.call(a,c<<8))}
function Cf(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.wa(b,e,4),d.call(a,c=0>c?a.g[-c-1]:c),a.gc(e,c)):(a.g[e]=c=0>c?a.g[-c-1]:c,d.call(a,c))}
h.wc=function(a){this.flags.complete=!0;var b=this.D?Df(this.D)?1:this.flags.Nc?-1:0:0,c=a?this.flags.Nc?0:1:-1;this.flags.Nc=!1;this.jb=this.b=a;this.i=this.i&-5|(b?4:0);do{if(this.i){if(this.i&4){if(Ef(this.D,this.g[7],c)){I(this);break}++b||(this.i&=-5);c||c++}if(a=this.i&11)if(a=!1,this.i&2){var d=160,e=(this.mb&224)>>5,f=this.P&&this.P.priority>e?this.P:null;f&&(d=f.Bb,e=f.priority);e>(this.w&224)>>5?(this.i&8&&(Pe(this,2),this.i&=-9),this.qa(d,0,-10),e=!0):e=!1;e&&(f&&Re(this,f),a=!0);this.P||
this.mb||(this.i&=-3)}else this.i&1&&this.i++;if(a){if(this.i&4&&Ef(this.D,this.g[7],c)){I(this);break}if(0>c)break}if(this.i&112&&Se(this)){if(this.i&4&&Ef(this.D,this.g[7],c)){I(this);break}if(0>c)break}}this.i=this.i&15|this.w&16;a=this.N=this.g[7];f=this.na(a);this.g[7]=a+2&65535;this.Yd(f)}while(0<this.b);return this.flags.complete?this.jb-this.b:!1===this.flags.complete?-1:0};eb(function(){for(var a=A(document,y,"cpu"),b=0;b<a.length;b++){var c=a[b],d=wb(c);d=new Fe(d);vb(d,c)}});
function Ff(a,b){var c=b+a;this.H=this.K=this.B=c;this.F=(a^c)&(b^c);return c&65535}function Gf(a,b){var c=b+a,d=c<<8;this.H=this.K=this.B=d;this.F=(a<<8^d)&(b<<8^d);return c&255}function Hf(a,b){a=b<<1;Te(this,a);return a&65535}function If(a,b){a=b<<1;Te(this,a<<8);return a&255}function Jf(a,b){a=b&32768|b>>1|b<<16;Te(this,a);return a&65535}function Kf(a,b){a=b&128|b>>1|b<<8;Te(this,a<<8);return a&255}function Lf(a,b){a=b&~a;this.Ca(a);return a}function Mf(a,b){a=b&~a;this.Ca(a<<8);return a}
function Nf(a,b){a|=b;this.Ca(a);return a}function Of(a,b){a|=b;this.Ca(a<<8);return a}function Pf(a,b){a=~b|65536;this.nb(a);return a&65535}function Qf(a,b){a=~b|256;this.nb(a<<8);return a&255}function Rf(a,b){this.H=this.K=a=b-a;this.F=b&(b^a);return a&65535}function Sf(a,b){a=b-a;var c=a<<8;b<<=8;this.H=this.K=c;this.F=b&(b^c);return a&255}function Tf(a,b){this.H=this.K=a=b+a;this.F=a&(b^a);return a&65535}function Uf(a,b){a=b+a;var c=a<<8;this.H=this.K=c;this.F=c&(b<<8^c);return a&255}
function Vf(a,b){a=-b;this.nb(a,a&b&32768);return a&65535}function Wf(a,b){a=-b;this.nb(a<<8,(a&b&128)<<8);return a&255}function Xf(a,b){a=b<<1|this.B>>16&1;Te(this,a);return a&65535}function Yf(a,b){a=b<<1|this.B>>16&1;Te(this,a<<8);return a&255}function Zf(a,b){a=(this.B&65536|b)>>1|b<<16;Te(this,a);return a&65535}function $f(a,b){a=((this.B&65536)>>8|b)>>1|b<<8;Te(this,a<<8);return a&255}function ag(a,b){var c=b-a;Ue(this,c,a,b);return c&65535}
function bg(a,b){var c=b-a;Ue(this,c<<8,a<<8,b<<8);return c&255}function cg(a,b){this.H=this.K=b&65280;this.F=this.B=0;return(b<<8|b>>8)&65535}function dg(a,b){a^=b;this.Ca(a);return a&65535}function eg(a){P(this,a,ef(this,a),Ff);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}
function fg(a){var b=hf(this,a);a=a>>6&7;var c=this.g[a];c&32768&&(c|=4294901760);this.B=this.F=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.B=c<<17-b,c>>=b;else if(b)if(16<b)this.F=c,c=0;else{this.B=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.F=32768)}this.g[a]=c&65535;this.H=this.K=c;this.b-=(this.u?6:7)+b}
function gg(a){var b=hf(this,a);a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.B=this.F=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.B=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.B=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.F=32768)):d=c;this.g[a]=d>>16&65535;this.g[a|1]=d&65535;this.H=d>>16;this.K=d>>16|d;this.b-=(this.u?6:7)+b}function hg(a){Qe(this,a,!Le(this))}function ig(a){Qe(this,a,Le(this))}
function jg(a){P(this,a,ef(this,a),Lf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function kg(a){jf(this,a,df(this,a),Mf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function lg(a){P(this,a,ef(this,a),Nf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function mg(a){jf(this,a,df(this,a),Of);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}
function ng(a){var b=ef(this,a);a=hf(this,a);this.Ca((0>b?this.g[-b-1]:b)&a);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function og(a){var b=df(this,a);a=gf(this,a);this.Ca(((0>b?this.g[-b-1]&255:b)&a)<<8);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function pg(a){Qe(this,a,Ne(this))}function qg(a){Qe(this,a,!Oe(this)==!Me(this))}function rg(a){Qe(this,a,!Ne(this)&&!Oe(this)==!Me(this))}function sg(a){Qe(this,a,!Le(this)&&!Ne(this))}
function tg(a){Qe(this,a,Ne(this)||!Oe(this)!=!Me(this))}function ug(a){Qe(this,a,Le(this)||Ne(this))}function vg(a){Qe(this,a,!Oe(this)!=!Me(this))}function wg(a){Qe(this,a,Oe(this))}function xg(a){Qe(this,a,!Ne(this))}function yg(a){Qe(this,a,!Oe(this))}function zg(){this.qa(12,0,-9)}function Ag(a){Qe(this,a,!0)}function Bg(a){Qe(this,a,!Me(this))}function Cg(a){Qe(this,a,Me(this))}function Dg(a){a&1&&(this.B=0);a&2&&(this.F=0);a&4&&(this.K=1);a&8&&(this.H=0);this.b-=5}
function Eg(a){var b=ef(this,a);a=hf(this,a);var c=(b=0>b?this.g[-b-1]:b)-a;Ue(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function Fg(a){var b=df(this,a);a=gf(this,a);var c=(b=(0>b?this.g[-b-1]&255:b)<<8)-(a<<=8);Ue(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}
function Gg(a){var b=hf(this,a);if(b){a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.B=this.F=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.g[a]=d&65535,this.g[a|1]=c-d*b&65535,this.K=d>>16|d,this.H=d>>16):(this.F=32768,this.K=d>>15|d,this.H=c>>16,-1===b&&65534===this.g[a]&&(this.g[a]=this.g[a|1]=1));this.b-=53}else this.K=this.H=0,this.F=32768,this.B=65536,this.b-=7}function Hg(){this.qa(24,0,-9);this.b-=20}
function Ig(){this.w&49152?(this.O|=128,this.qa(4,0,-8)):(this.ra&&1120==this.ia&&this.ra.setData(this.g[0],!0),this.D?Jg(this.D):I(this));this.b-=7}function Kg(){this.qa(16,0,-9);this.b-=20}var Lg=[0,7,7,10,7,11,9,13];function Mg(a){this.ka=this.b;zc(this,ff(this,a));this.b=this.ka-Lg[this.u]}var Ng=[0,14,14,17,14,18,16,20];function Og(a){this.ka=this.b;var b=ff(this,a);a=a>>6&7;Ve(this,this.g[a]);this.g[a]=this.g[7];zc(this,b);this.b=this.ka-Ng[this.u]}
var Pg=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];function Qg(a){var b=ef(this,a);this.ka=this.b;Cf(this,a,b,this.Ca);this.b=this.ka-Pg[(this.T?8:0)+this.u]+(7!=this.j||this.u?0:2)}function Rg(a){var b=df(this,a);Bf(this,a,b,65535,this.Ca);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}var Sg=[7,13,13,17,14,18,17,21];
function Tg(a){var b=hf(this,a);a=a>>6&7;b=(b<<16>>16)*(this.g[a]<<16>>16);this.g[a]=b>>16&65535;this.g[a|1]=b&65535;b|=0;this.H=b>>16;this.K=this.H|b;this.F=0;this.B=-32768>b||32767<b?65536:0;this.b-=23}function Ug(){this.b-=5}function Vg(){this.w&49152||(this.C.reset(),Ac(this),this.ra&&this.ra.setData(this.g[0],!0));this.b-=667}function Wg(a){if(a&8)Q.call(this,a);else{var b=Xe(this);a&=7;7==a?zc(this,b):(zc(this,this.g[a]),this.g[a]=b);this.b-=9}}function Xg(){We(this);this.b-=13}
function Yg(a){a&1&&(this.B=65536);a&2&&(this.F=32768);a&4&&(this.K=0);a&8&&(this.H=32768);this.b-=5}function Zg(a){var b=(a&448)>>6;if(this.g[b]=this.g[b]-1&65535)zc(this,this.g[7]-((a&63)<<1)),this.b+=1;this.b-=6}function $g(a){P(this,a,ef(this,a),ag);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function ah(a){P(this,a,0,cg);this.b-=this.u?9:3+(7==this.j?2:0)}function bh(){this.qa(28,0,-9)}
function ch(){this.ra&&(this.ra.Cd(this.g[7],!0),this.ra.setData(this.g[0],!0));this.i|=8;Pe(this,-2);this.b-=3}function dh(a){P(this,a,this.g[(a>>6&7)+this.uc],dg);this.b-=this.u?9:3+(7==this.j?2:0)}function Q(a){var b;if(b=this.D)b=this.D,E(b,1)?(F(b,"undefined opcode "+K(b,a),!0,!0),b=Jg(b)):b=!1;b||this.qa(8,0,-9)}function Ge(a){eh[a>>12].call(this,a)}function fh(a){gh[a>>6&3].call(this,a)}function hh(a){ih[a>>6&3].call(this,a)}function jh(a){kh[a>>6&3].call(this,a)}
function lh(a){mh[a&15].call(this,a)}function nh(a){oh[a&15].call(this,a)}function ph(a){qh[a>>6&3].call(this,a)}function rh(a){sh[a>>6&3].call(this,a)}function th(a){uh[a>>6&3].call(this,a)}
var eh=[function(a){vh[a>>8&15].call(this,a)},Qg,Eg,ng,jg,lg,eg,Q,function(a){wh[a>>8&15].call(this,a)},Rg,Fg,og,kg,mg,$g,Q],vh=[function(a){xh[a>>4&15].call(this,a)},Ag,xg,pg,qg,vg,rg,tg,Og,Og,fh,hh,jh,Q,Q,Q],gh=[function(a){Cf(this,a,0,this.nb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Pf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Tf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Rf);this.b-=this.u?9:3+(7==this.j?2:0)}],ih=[function(a){P(this,a,0,Vf);
this.b-=this.u?11:6},function(a){P(this,a,Le(this)?1:0,Ff);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,Le(this)?1:0,ag);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=hf(this,a);this.nb(a);this.b-=this.u?4:3+(7==this.j?2:0)}],kh=[function(a){P(this,a,0,Zf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Xf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Jf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Hf);this.b-=this.u?9:3+(7==this.j?2:0)}],xh=
[function(a){yh[a&15].call(this,a)},Q,Q,Q,Mg,Mg,Mg,Mg,Wg,Q,lh,nh,ah,ah,ah,ah],yh=[Ig,ch,Xg,zg,Kg,Vg,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],mh=[Ug,function(){this.B=0;this.b-=5},function(){this.F=0;this.b-=5},Dg,function(){this.K=1;this.b-=5},Dg,Dg,Dg,function(){this.H=0;this.b-=5},Dg,Dg,Dg,Dg,Dg,Dg,Dg],oh=[Ug,function(){this.B=65536;this.b-=5},function(){this.F=32768;this.b-=5},Yg,function(){this.K=0;this.b-=5},Yg,Yg,Yg,function(){this.H=32768;this.b-=5},Yg,Yg,Yg,Yg,Yg,Yg,Yg],wh=[yg,wg,sg,ug,Bg,Cg,hg,ig,Hg,bh,ph,rh,
th,Q,Q,Q],qh=[function(a){Bf(this,a,0,255,this.nb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){jf(this,a,0,Qf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){jf(this,a,1,Uf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){jf(this,a,1,Sf);this.b-=this.u?9:3+(7==this.j?2:0)}],sh=[function(a){jf(this,a,0,Wf);this.b-=this.u?11:6},function(a){jf(this,a,Le(this)?1:0,Gf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){jf(this,a,Le(this)?1:0,bg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=gf(this,
a);this.nb(a<<8);this.b-=this.u?4:3+(7==this.j?2:0)}],uh=[function(a){jf(this,a,0,$f);this.b-=this.u?9+(this.Sc&1):3+(7==this.j?2:0)},function(a){jf(this,a,0,Yf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){jf(this,a,0,Kf);this.b-=this.u?9+(this.Sc&1):3+(7==this.j?2:0)},function(a){jf(this,a,0,If);this.b-=this.u?9:3+(7==this.j?2:0)}];function He(a){zh[a>>12].call(this,a)}
var zh=[function(a){Ah[a>>8&15].call(this,a)},Qg,Eg,ng,jg,lg,eg,function(a){Bh[a>>8&15].call(this,a)},function(a){Ch[a>>8&15].call(this,a)},Rg,Fg,og,kg,mg,$g,Q],Ah=[function(a){Dh[a>>4&15].call(this,a)},Ag,xg,pg,qg,vg,rg,tg,Og,Og,fh,hh,jh,function(a){Eh[a>>6&3].call(this,a)},Q,Q],Eh=[function(a){a=this.g[7]+((a&63)<<1)&65535;var b=this.na(a|this.Ga);zc(this,this.g[5]);this.g[6]=a+2&65535;this.g[5]=b;this.b-=8},function(a){a=bf(this,a,0);this.Ca(a);Ve(this,a);this.b-=11},function(a){var b=Xe(this);
this.ka=this.b;this.Ca(b);cf(this,a,0,b);this.b=this.ka-Sg[this.u]},function(a){Cf(this,a,Oe(this)?65535:0,this.Ca);this.b-=this.u?9:3+(7==this.j?2:0)}],Dh=[function(a){Fh[a&15].call(this,a)},Q,Q,Q,Mg,Mg,Mg,Mg,Wg,function(a){!(a&8)||1145>this.ia?Q.call(this,a):(this.w&49152||(this.w=this.w&-225|(a&7)<<5,this.i|=1,this.i&=-3),this.b-=5)},lh,nh,ah,ah,ah,ah],Fh=[Ig,ch,function(){We(this);this.i|=this.w&16;this.b-=13},zg,Kg,Vg,Xg,function(a){Q.call(this,a)},Q,Q,Q,Q,Q,Q,Q,Q],Bh=[Tg,Tg,Gg,Gg,fg,fg,gg,gg,
dh,dh,Q,Q,Q,Q,Zg,Zg],Ch=[yg,wg,sg,ug,Bg,Cg,hg,ig,Hg,bh,ph,rh,th,function(a){1145>this.ia?Q.call(this,a):Gh[a>>6&3].call(this,a)},Q,Q],Gh=[function(a){Q.call(this,a)},function(a){a=bf(this,a,65536);this.Ca(a);Ve(this,a);this.b-=11},function(a){var b=Xe(this);this.ka=this.b;this.Ca(b);cf(this,a,65536,b);this.b=this.ka-Sg[this.u]},function(a){Q.call(this,a)}];
function Hh(a){x.call(this,"ROM",a,128);this.ga=this.g=null;this.u=+a.addr;this.b=+a.size;this.w=!1;this.i=a.alias;"string"==typeof this.i&&(this.i=eval(this.i));this.j=a.file;this.A=za(this.j);if(this.j){a=this.j;var b=Aa(this.A);"json"!=b&&"hex"!=b&&(a=Pa()+"/api/v1/dump?file\x3d"+this.j+"\x26format\x3dbytes\x26decimal\x3dtrue");var c=this;Na(a,null,!0,function(a,b,f){f?(c.S("Unable to load ROM resource (error "+f+": "+a+")"),c.j=null):(qb(c.gb,a,b),(a=Oa(a,b))?(c.g=a.Z,c.ga=a.ga):c.j=null);Ih(c)})}}
q(Hh,x);h=Hh.prototype;h.za=function(a,b,c,d){this.C=b;this.f=c;this.D=d;Ih(this)};h.Ba=function(){this.ga&&(this.D&&Jh(this.D,this.id,this.u,this.b,this.ga),delete this.ga);return!0};h.Aa=function(){return!0};
function Ih(a){if(!Nb(a)){if(a.j){if(!a.g||!a.C)return;a.b||(a.b=a.g.length);if(a.g.length!=a.b)Lb(a,"ROM size ("+v(a.g.length,8,!0)+") does not match specified size ("+v(a.b,8,!0)+")");else{a:{var b=a.u;if(57344<=b&&b<57344+ad){var c={};c=(c[b]=[Hh.prototype.Gg,Hh.prototype.Yh,null,null,null,a.b>>1],c);if(nc(a.C,a,c)){a.status("Added "+a.b+"-byte ROM at "+u(b));b=a.w=!0;break a}}else if(gd(a.C,b,a.b,$d)){for(c=0;c<a.g.length;c++)pd(a.C,b+c,a.g[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.i?
b.push(a.i):null!=a.i&&a.i.length&&(b=a.i);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.C,g=d.b,k=[],l=d.u>>>f.g;0<g&&l<f.b.length;)k.push(f.b[l++]),g-=f.j;f=d.C;d=d.b;g=0;for(e>>>=f.g;0<d&&e<f.b.length;){l=k[g++];if(!l)break;f.b[e++]=l;d-=f.j}}a.w||delete a.g}}}D(a)}}h.Gg=function(a){return this.g[a-this.u]};h.Yh=function(){};eb(function(){for(var a=A(document,y,"rom"),b=0;b<a.length;b++){var c=a[b],d=wb(c);d=new Hh(d);vb(d,c)}});
function Kh(a){x.call(this,"RAM",a);this.ga=this.g=null;this.i=+a.addr;this.j=+a.size;this.ya=a.load;this.xa=a.exec;null!=this.ya&&(this.ya=+this.ya);null!=this.xa&&(this.xa=+this.xa);this.u=this.A=!1;this.b=a.file;this.w=za(this.b);if(this.b){a=this.b;var b=Aa(this.w);"json"!=b&&"hex"!=b&&(a=Pa()+"/api/v1/dump?file\x3d"+this.b+"\x26format\x3dbytes\x26decimal\x3dtrue");var c=this;Na(a,null,!0,function(a,b,f){f?(c.S("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(qb(c.gb,a,b),(a=Oa(a,
b))?(c.g=a.Z,c.ga=a.ga,null==c.ya&&(c.ya=a.ya),null==c.xa&&(c.xa=a.xa)):c.b=null);Lh(c)})}}q(Kh,x);Kh.prototype.za=function(a,b,c,d){this.C=b;this.f=c;this.D=d;Lh(this)};Kh.prototype.Ba=function(a,b){this.ga&&(this.D&&Jh(this.D,this.id,this.i,this.j,this.ga),delete this.ga);b||this.reset();return!0};Kh.prototype.Aa=function(){return!0};
function Lh(a){if(a.C&&(!a.u&&a.j&&(gd(a.C,a.i,a.j,rd)?a.u=!0:a.j=0),!Nb(a))){if(!a.u)w("No RAM allocated");else if(a.b){if(!a.g)return;Mh(a,a.g,a.ya,a.xa,a.i)?a.status('Loaded image "'+a.w+'"'):a.S('Error loading image "'+a.w+'"')}a.A=!0;D(a)}}
Kh.prototype.reset=function(){if(this.u&&!this.A){var a=this.C,b=this.i,c=this.j,d=b&a.i;for(b>>>=a.g;0<c&&b<a.b.length;){var e=a.b[b],f=d,g=c,k=0;f=f||0;k=(k||0)&255;void 0===g&&(g=e.size);if(Qb&&e.g)for(d=f;g--&&d<e.g.length;d++)e.g[d]=k;else for(d=f;g--&&d<e.size;d++)e.D(f,k,e.J+f);c-=a.j;b++;d=0}this.g&&Mh(this,this.g,this.ya,this.xa,this.i,!this.D)}this.A=!1};
function Mh(a,b,c,d,e,f){var g=!1,k=!1;if(null==c)for(var l=0;l<b.length-1;){var m=b[l]&255|(b[l+1]&255)<<8;if(m)if(m&255){var n=l;if(1!=m){F(a,"invalid signature ("+ya(m)+") at offset "+ya(n),4096);break}if(l+6>=b.length){F(a,"invalid block at offset "+ya(n),4096);break}l+=2;var r=b[l++]&255|(b[l++]&255)<<8,t=b[l++]&255|(b[l++]&255)<<8;m+=(r&255)+(r>>8)+(t&255)+(t>>8);for(var p=l,z=r-=6;0<r&&l<b.length;)m+=b[l++]&255,r--;if(0!=r||l>=b.length){F(a,"insufficient data for block at offset "+ya(n),4096);
break}m+=b[l++]&255;if(m&255){F(a,"invalid checksum ("+v(m,2,!0)+") for block at offset "+ya(n),4096);break}if(z)for(F(a,"loading "+ya(z)+" bytes at "+ya(t)+"-"+ya(t+z),4096);z--;)pd(a.C,t++,b[p++]&255);else t&1?g=!0:null==d&&(d=t),null!=d&&F(a,"starting address: "+ya(d),4096);k=!0}else l++;else l+=2}if(!k&&(null==c&&(c=e),null!=c)){for(e=0;e<b.length;e++)pd(a.C,c+e,b[e]);k=!0}if(k){if(null==d||g)I(a.f),f=!1;null!=d&&Je(a.f,d,f)}return k}
eb(function(){for(var a=A(document,y,"ram"),b=0;b<a.length;b++){var c=a[b],d=wb(c);d=new Kh(d);vb(d,c)}});function Nh(a){x.call(this,"Keyboard",a,1024);D(this)}q(Nh,x);Nh.prototype.ua=function(){return!1};Nh.prototype.za=function(a,b,c,d){this.I=a;this.f=c;this.D=d};eb(function(){for(var a=A(document,y,"keyboard"),b=0;b<a.length;b++){var c=a[b],d=wb(c);d=new Nh(d);vb(d,c)}});
function Oh(a){x.call(this,"SerialPort",a,1048576);this.L=+a.adapter;this.R=+a.baudReceive||9600;this.Y=+a.baudTransmit||9600;this.K=a.upperCase;"string"==typeof this.K&&(this.K="true"==this.K);this.u=this.w=null;this.V=+a.tabSize;this.T=+a.charBOL;this.A=0;this.H=!0;this.O=this.M=null;this.P=this.X=-1;this.B=this.b=this.g=0;this.j=[];a=a.binding;if("console"==a)this.w="";else if(a){var b=Eb("Panel",this.id);b&&(b=b.G[a])&&this.ua("",a,b)}this.i=this.F=this.N=null;this.exports={connect:this.qe,receiveData:this.Jc,
receiveStatus:this.bh,setConnection:this.hh}}q(Oh,x);h=Oh.prototype;
h.ua=function(a,b,c){if(!a||"textarea"==a){var d=this;this.G[b]=this.u=c;c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?ta.Kd:ta.Yb:46==c?b=ta.Kd:a.ctrlKey&&c>=ta.Gd&&c<=ta.uf&&(b=c-(ta.Gd-ta.Be));b&&(a.preventDefault&&a.preventDefault(),d.Jc(b));return!0};c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==ta.De&&(b=ta.Ce);d.Jc(b);a.preventDefault&&a.preventDefault()}return!0};c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.Jc(a.getData("Text"))};c.removeAttribute("readonly");return!0}return!1};
h.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;var e=this;this.O=yd(this.f,this.L?-1:48,4,1048576);this.P=vd(this.f,function(){var a=-1;e.j.length&&(a=e.j.shift()&255,F(e,"receiveByte("+v(a,2,!0)+")"),e.K&&97<=a&&122>a&&(a-=32),xd(e.f,e.P,1E3/Math.round(e.R/10)));0<=a&&(e.B=a,e.b&128?e.B|=49152:e.b|=128,e.b&64&&wd(c,e.O))});this.M=yd(this.f,this.L?-1:52,4,1048576);this.X=vd(this.f,function(){e.g|=128;e.g&64&&wd(c,e.M)});nc(b,this,Ph,this.L?64832+8*(this.L-1)-65392:0);pc(b,this.reset.bind(this));
D(this)};h.qe=function(a){if(!this.i){var b=qe(this.I,"connection");if(b){var c=b.split("-\x3e");if(2==c.length){var d=Ga(c[0]);if(d!=this.Tc)return;c=Ga(c[1]);if(this.i=Db(c)){var e=this.i.exports;if(e){var f=e.connect;f&&f.call(this.i,this.H);if(this.F=e.receiveData){this.H=a;this.N=e.receiveStatus;this.status("Connected "+this.gb+"."+d+" to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};
h.Ba=function(a,b){if(!b)if(this.qe(this.H),!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Aa=function(a){return a?this.save():!0};h.reset=function(){Qh(this)};h.save=function(){var a=new H(this);a.set(0,[this.B,this.b,this.g,this.j]);return a.data()};h.restore=function(a){return Qh(this,a[0])};function Qh(a,b){b||(b=[0,8192,128,a.j]);b=ja(b);a.B=b.next().value;a.b=b.next().value;a.g=b.next().value;a.j=b.next().value;return!0}
h.Jc=function(a){if("number"==typeof a)this.j.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.j.push(b)}else this.j=this.j.concat(a);xd(this.f,this.P,1E3/Math.round(this.R/10));return!0};h.bh=function(a){var b=this.b;this.b&=-12289;a&32&&(this.b|=8192);a&256&&(this.b|=4096);b!=this.b&&(this.b|=32768,this.b&32&&wd(this.f,this.O))};h.hh=function(a,b){return this.i?!1:(this.i=a,this.F=b,!0)};
h.tg=function(){var a=this.b&65534;this.b&=-32769;return a};h.Lh=function(a){var b=a^this.b;this.b=this.b&-112|a&111;this.N&&b&6&&(b=0,b=this.H?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.N.call(this.i,b))};h.sg=function(){this.b&=-129;return this.B};h.Kh=function(){};h.ah=function(){return this.g};h.ti=function(a){this.g&128&&(a&64?wd(this.f,this.M):Cd(this.f,this.M));this.g=this.g&-70|a&69};h.$g=function(){return 0};
h.si=function(a){a&=255;this.F&&this.F.call(this.i,a);a&=127;if(this.u)if(13==a)this.A=0;else if(8==a)this.u.value=this.u.value.slice(0,-1),0<this.A&&this.A--;else{if(a){var b;13!=a&&10!=a&&(b=Ha[a]);b=b?"\x3c"+b+"\x3e":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.V||8,c=a-this.A%a,this.V&&(b=Fa("",c)));this.T&&!this.A&&c&&(b=String.fromCharCode(this.T)+b);this.u.value+=b;this.u.scrollTop=this.u.scrollHeight;this.A+=c}}else if(null!=this.w){if(10==a||1024<=this.w.length)this.v(this.w),
this.w="";10!=a&&(this.w+=String.fromCharCode(a))}xd(this.f,this.X,1E3/Math.round(this.Y/10));this.g&=-129};var Rh={},Ph=(Rh[65392]=[null,null,Oh.prototype.tg,Oh.prototype.Lh,"RCSR"],Rh[65394]=[null,null,Oh.prototype.sg,Oh.prototype.Kh,"RBUF"],Rh[65396]=[null,null,Oh.prototype.ah,Oh.prototype.ti,"XCSR"],Rh[65398]=[null,null,Oh.prototype.$g,Oh.prototype.si,"XBUF"],Rh);eb(function(){for(var a=A(document,y,"serial"),b=0;b<a.length;b++){var c=a[b],d=wb(c);d=new Oh(d);vb(d,c)}});
function Md(a){x.call(this,"PC11",a,4096);this.M=Sh(this,a.autoMount);this.g=0;this.T=+a.baudReceive||3600;this.w=this.b=0;this.K=32768;this.i=this.P=0;this.B=[];this.A=Th;this.j=Uh;this.L=this.u="";this.Z=this.ya=this.xa=null;this.O=-1;this.N=!Va()&&window&&"FileReader"in window;this.F=null;this.R=-1;this.H=null}q(Md,x);function Sh(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){w(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=Md.prototype;
h.ua=function(a,b,c){var d=this,e=Uh;switch(b){case "listTapes":return this.G[b]=c,c.onchange=function(){var a=d.G.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(l){w("PC11 option error: "+l.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='\x3ca href\x3d"'+e+'" target\x3d"_blank"\x3e'+b+"\x3c/a\x3e");a.innerHTML=b}},!0;case "descTape":return this.G[b]=c,!0;case "readTape":e=Vh;case "loadTape":return e||(e=Wh),this.G[b]=
c,c.onclick=function(){var a=d.G.listTapes;a&&Xh(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(!this.N){c.parentNode.removeChild(c);break}this.G[b]=c;c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length});c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;Xh(d,za(b,!0),b,Wh,a)}return!1};return!0;case Yh:return this.G[b]=c,!0}return!1};
h.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;this.H=Zh(a);var e=this;if(a=Sh(this,qe(this.I,"autoMount")))for(var f in a)"PTR"==f&&(this.M[f]=a[f]);this.F=yd(this.f,56,4,4096);this.R=vd(this.f,function(){1!=(e.b&32769)||e.b&128||(e.i<e.B.length?(e.w=e.B[e.i]&255,E(e)&&F(e,e.type+".advanceReader("+e.i+"): "+v(e.w,2,!0),!0),e.i++,$h(e,e.i/e.B.length*100)):e.b|=32768,e.b|=128,e.b&=-2049,e.b&64&&wd(e.f,e.F))});nc(b,this,ai);pc(b,this.reset.bind(this));bi(this,"None",Th,!0);this.N&&bi(this,
"Local Tape",ci);bi(this,"Remote Tape",di);ei(this)||D(this)};h.Ba=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};h.Aa=function(a){return a?this.save():!0};h.reset=function(){this.b&=-2241;this.w=0};function ei(a){a.g=0;var b=a.M.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.G.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=za(c,!0)}c&&b?fi(a,b,c,Wh,!0):gi(a)}return!!a.g}
function Xh(a,b,c,d,e){if(c)if(c==ci)a.S('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==di){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=za(c);a.status("Attempting to load "+c+' as "'+b+'"');a.A=di}else a.A=c;fi(a,b,c,d,!1,e)}else hi(a,!1)}
function fi(a,b,c,d,e,f){var g=-1;if(a.u.toLowerCase()!=c.toLowerCase()||a.j!=d)g++,hi(a,!0),a.flags.bb?a.S("PC11 busy"):(e&&(a.g++,E(a)&&F(a,"auto-loading tape: "+b)),a.load(b,c,d,f)?g++:a.flags.bb=!0);g&&ii(a,a.L,a.u,a.j,a.Z,a.ya,a.xa)}
h.load=function(a,b,c,d){var e=this,f=b;if(d){var g=new FileReader;g.onload=function(){var d=g.result;d&&(d=new Uint8Array(d,0,d.byteLength),ii(e,a,b,c,d),e.A=ci);e.flags.bb=!1;gi(e)};g.readAsArrayBuffer(d);return!1}0>b.indexOf("/api/v1/dump")&&(d=Aa(b),f="json"==d||"gz"==d?encodeURI(b):Pa()+"/api/v1/dump?path\x3d"+encodeURIComponent(b)+"\x26format\x3djson");return!!Na(f,null,!0,function(d,f,g){var k=0>g&&!!e.I&&!e.I.flags.ba;g?e.S('Unable to load tape "'+a+'" (error '+g+": "+d+")",k):(qb(e.gb,d,
f),(d=Oa(d,f))&&ii(e,a,b,c,d.Z,d.ya,d.xa));e.flags.bb=!1;e.g&&(e.g--,e.g||D(e));gi(e)})};function bi(a,b,c,d){if((a=a.G.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function gi(a){var b=a.G.listTapes;if(b&&b.options){a=a.A||a.u;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}function $h(a,b){b|=0;if(b!==a.O){var c=a.G[Yh];c&&(c=(c=A(c,ji))&&c[0])&&c.style&&(c.style.width=b+"%");a.O=b}}
function ii(a,b,c,d,e,f,g){a.L=b;a.u=c;a.j=d;a.Z=e;a.ya=f;a.xa=g;d==Vh?a.H&&Mh(a.H,e,f,g,null,!1)?a.status('Read tape "'+b+'"'):a.S('No valid memory address for tape "'+b+'"'):(a.i=0,a.B=e,a.b&=-32769,a.status('Loaded tape "'+b+'" ('+e.length+" bytes)"),$h(a,0))}function hi(a,b){if(a.u||!1===b)a.L="",a.u="",b||(a.j&&a.status(a.j==Wh?"tape detached":"tape unloaded"),a.A=Th,a.j=Uh,gi(a))}h.save=function(){return(new H(this)).data()};h.restore=function(){return!0};h.mg=function(){return this.b&65534};
h.Eh=function(a){a&1&&(this.b&32768?(a&=-2,this.b&64&&wd(this.f,this.F)):(this.b&=-129,this.b|=2048,this.w=0,xd(this.f,this.R,1E3/Math.round(this.T/10))));this.b=this.b&-66|a&65};h.lg=function(){this.b&=-129;this.b|=2048;return this.w};h.Dh=function(){};h.kg=function(){return this.K};h.Ch=function(a){this.K=this.K&-65|a&64};h.jg=function(){return this.P};h.Bh=function(a){this.P=a&255};
var Th="",ci="?",di="??",Uh=0,Wh=1,Vh=2,Yh="readProgress",ji="pcjs-progress-bar",ki={},ai=(ki[65384]=[null,null,Md.prototype.mg,Md.prototype.Eh,"PRS"],ki[65386]=[null,null,Md.prototype.lg,Md.prototype.Dh,"PRB"],ki[65388]=[null,null,Md.prototype.kg,Md.prototype.Ch,"PPS"],ki[65390]=[null,null,Md.prototype.jg,Md.prototype.Bh,"PPB"],ki);
function li(a,b,c){x.call(this,"Disk",{id:a.gb+".disk"+v(++mi,4)},8192);this.controller=a;this.I=a.I;this.D=a.D;this.u=b;this.Wa=b.name;this.Na=this.Bd="";this.vd=b.vd;this.aa=this.ja=this.da=this.ta=this.mode=0;this.b=[];this.i=null;this.j=!1;this.create(c,b.aa,b.ja,b.da,b.ta);this.g=this.w=null;D(this)}q(li,x);h=li.prototype;h.za=function(a,b,c,d){this.D=d};
h.create=function(a,b,c,d,e){this.mode=a;this.aa=b;this.ja=c;this.da=d;this.ta=e;this.b=[];if("preload"!=this.mode){a=Array(this.aa);for(b=0;b<a.length;b++){c=Array(this.ja);for(d=0;d<c.length;d++){e=Array(this.da);for(var f=1;f<=e.length;f++)e[f-1]=ni(null,b,d,f,this.ta,0);c[d]=e}a[b]=c}this.b=a}this.i=null};
h.load=function(a,b,c,d,e){var f=b;if(this.g)return!0;this.Wa=a;this.Na=b;this.Bd=za(b);var g=this;this.g=d;this.w=e||this.controller;if(c){var k=new FileReader;k.onload=function(){var a=k.result,b=a?a.byteLength:0,c=sa[b];if(c){g.aa=c[0];g.ja=c[1];g.da=c[2];g.ta=c[3]||512;var d=g.ta>>2;var e=c=0;a=new DataView(a,0,b);g.b=Array(g.aa);for(b=0;b<g.b.length;b++)for(var f=g.b[b]=Array(g.ja),z=0;z<f.length;z++)for(var B=f[z]=Array(g.da),C=0;C<B.length;C++){for(var G=ni(null,b,z,C+1,g.ta,0),Fd=G.data,Wb=
0;Wb<d;Wb++,e+=4){var ca=Fd[Wb]=a.getInt32(e,!0);c=c+ca&-1}G.Ka=d;B[C]=G}g.i=c;d=g}else g.S("Unrecognized disk format ("+b+" bytes)");g.g&&(g.g.call(g.controller,g.u,d,g.Wa,g.Na),g.g=null)};k.readAsArrayBuffer(c);return!0}0>b.indexOf("/api/v1/dump")&&(a=Aa(b),"json"==a||"gz"==a?f=encodeURI(b):(c="path",d="\x26mbhd\x3d10",!b.indexOf("http:")||!b.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(a)?(c="disk",d="\x26mbhd\x3d0"):Ba(b,"/")&&(c="dir"),f=Pa()+"/api/v1/dump?"+c+"\x3d"+encodeURIComponent(b)+
(this.vd?"":d)+"\x26format\x3djson"));return!!Na(f,null,!0,function(a,b,c){oi(g,a,b,c)})};
function oi(a,b,c,d){var e=null,f=0>d&&!!a.I&&!a.I.flags.ba;a.j=!1;if(d)a.controller.S('Unable to load disk "'+a.Wa+'" (error '+d+": "+b+")",f);else{qb(a.controller.gb,b,c);try{if(0<za(a.Bd,!0).toLowerCase().indexOf("-readonly"))a.j=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.j=!0)}var k;"\x3c"==c.substr(0,1)?k=["Missing disk image: "+a.Wa]:k=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):
eval("("+c+")");if(k.length)if(1==k.length)w(k[0]);else{a.aa=k.length;a.ja=k[0].length;a.da=k[0][0].length;var l=k[0][0][0];a.ta=l&&l.length||512;for(d=c=0;d<a.aa;d++)for(f=0;f<a.ja;f++)for(g=0;g<a.da;g++)if(l=k[d][f][g]){var m=l.length;void 0===m&&(m=l.length=512);m>>=2;var n=l.pattern;void 0===n&&(n=l.pattern=0);var r=l.data;if(void 0===r){var t=l.bytes;if(void 0!==t&&t.length){for(var p=m<<2,z=t.length;z<p;z++)t[z]=n;pi(l,t)}else r=[],n=l.pattern=n|n<<8|n<<16|n<<24,l.data=r;delete l.bytes}ni(l,
d,f);for(p=0;p<r.length;p++)c=c+r[p]&-1}a.b=k;a.i=c;e=a}else w("Empty disk image: "+a.Wa)}catch(B){w("Disk image error ("+b+"): "+B.message)}}a.g&&(a.g.call(a.w,a.u,e,a.Wa,a.Na),a.g=null)}function ni(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.xk=b;a.yk=c;a.Ua=a.Ka=0;a.cb=!1;return a}
h.seek=function(a,b,c,d,e){d=null;var f=this.u,g=this.b[a];if(g){var k=g[b];if(!k&&f.wf&&b<f.ja)for(k=g[b]=Array(f.xf),g=0;g<k.length;g++)k[g]=ni(null,a,b,g+1,f.re,0);if(k){for(g=0;g<k.length;g++)if(k[g]&&k[g].sector==c){d=k[g];break}!d&&f.wf&&9==f.ge&&(d=k[g]=ni(null,a,b,f.ge,f.re,0))}}e&&e(d,!1);return d};function pi(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
h.read=function(a,b){var c=-1;if(a&&b<a.length){c=a.data;var d=b>>2;c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255}return c};h.write=function(a,b,c){if(this.j)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.Ka?f<a.Ua?(a.Ka+=a.Ua-f,a.Ua=f):f>=a.Ua+a.Ka&&(a.Ka+=f-(a.Ua+a.Ka)+1):(a.Ua=f,a.Ka=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
function qi(a,b){var c=a.ja*a.da,d=b/c|0;return d<a.aa?(b%=c,a.seek(d,b/a.da|0,b%a.da+1)):null}function ri(a,b,c){for(var d=1,e=0,f=0;d--;){var g=a.read(b,c++);if(0>g)break;e|=g<<f;f+=8}return e}
h.save=function(){var a=0,b=[];b[a++]=[this.Na,this.i,this.aa,this.ja,this.da,this.ta];if(!this.j)for(var c=this.b,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.Ka){for(var k=[],l=0,m=g.Ua,n=g.Ua+g.Ka;m<n;)k[l++]=g.data[m++];b[a++]=[d,e,f,g.Ua,k]}}return b};
h.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.b.length&&6<=e.length?this.create("local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.i&&e[1]!=this.i&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.i+")",b=-2));for(this.b.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],k=g[f++],l=g[f++],m=g[f++];if(k>=this.b.length||l>=this.b[k].length||m>=this.b[k][l].length){c="sector (CHS\x3d"+k+":"+l+":"+m+") out of range ("+
b+" changes applied)";b=-1;break}if(this.j){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(k=this.b[k][l][m]){for(l=k.data.length;l<e;)k.data[l++]=k.pattern;l=0;k.Ua=e;for(k.Ka=f.length;e<g;)k.data[e++]=f[l++];b++}}}0>b&&-2!=b&&this.controller.S("Unable to restore disk '"+this.Wa+": "+c);return b};var mi=0;
function si(a,b,c,d,e,f){x.call(this,a,b,c);this.M=ti(this,b.autoMount);this.L=0;this.P=d;this.R=e;this.T=f;this.O=d.Vc;this.g=Array(this.O);this.N=!Va()&&window&&"FileReader"in window;this.A=[];this.Pa=null;this.exports={bootDisk:this.he,loadDisk:this.xd,selectDrive:this.gh,wait:this.kh}}q(si,x);function ti(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){w(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}h=si.prototype;
h.ua=function(a,b,c){var d=this;switch(b){case "listDisks":return this.G[b]=c,c.onchange=function(){ui(d)},!0;case "descDisk":case "listDrives":return this.G[b]=c,c.onchange=function(){var a=ua(c.value,10);null!=a&&vi(d,a)},!0;case "loadDisk":return this.G[b]=c,c.onclick=function(){d.xd()},!0;case "bootDisk":return this.G[b]=c,c.onclick=function(){d.he()},!0;case "saveDisk":if(!this.N){c.parentNode.removeChild(c);break}this.G[b]=c;c.onclick=function(){var a=d.G.listDrives;if(a&&a.options&&d.g)if(a=
d.g[ua(a.value,10)||0])if(a=a.ca){var b="";for(var c=0,k;k=qi(a,c++);)for(var l=0,m=k.length;l<m;l++)b+=String.fromCharCode(ri(a,k,l));b=btoa(b);a=a.Bd.replace(".json",".img");c=null;b="data:application/octet-stream;base64,"+b;a&&(c=document.createElement("a"),"string"!=typeof c.download&&(c=null));c?(c.href=b,c.download=a,document.body.appendChild(c),c.click(),document.body.removeChild(c),a="Check your Downloads folder for "+a+".",Ua("Chrome")&&(a+='\n\nIn Chrome, after clicking OK, you may ALSO have to select the "Window" menu, choose "Downloads", and then locate this download and select "Keep".\n\nThis is part of Chrome\'s "Security By Jumping Through Extra Hoops" technology, which is much easier for Google to implement than actually checking for something malicious.\n\nAnd for the record, there is nothing malicious on the PCjs website.')):
(window.open(b),a="Check your browser for a new window/tab containing the requested data"+(a?" ("+a+")":"")+".");w(a)}else d.S("No disk loaded in drive.");else d.S("No disk drive selected.")};return!0;case "mountDisk":if(this.N)return this.G[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;d.xd(za(b,!0),b,a)}return!1},!0;c.parentNode.removeChild(c)}return!1};
h.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;if(a=ti(this,qe(this.I,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.M[e]=a[e]);this.reset();this.Pa=yd(this.f,this.P.qd,this.P.md,this.ha);nc(b,this,this.T);pc(b,this.reset.bind(this));wi(this,"None",xi,!0);this.N&&wi(this,"Local Disk",Yi);wi(this,"Remote Disk",$i);aj(this)||D(this)};
h.Ba=function(a,b){if(!b){if(!a){if(this.reset(),this.I.M){this.A=[];for(a=0;a<this.g.length;a++)bj(this,a,!0);aj(this,!0)}}else if(!this.restore(a))return!1;if(a=this.G.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;b<this.O;b++){var c=document.createElement("option");c.value=b;c.text=this.g[b].Lc||"---";a.appendChild(c)}0<this.O&&(a.value="0",vi(this,0))}}return!0};h.Aa=function(a){return a?this.save():!0};h.reset=function(){this.yb();cj(this)};
h.save=function(){var a=new H(this);a.set(0,this.Mc());a.set(1,dj(this));a.set(2,ej(this));return a.data()};h.restore=function(a){var b=!0;this.yb(a[0])||(b=!1);var c=a[1];c&&(this.A=c);cj(this,a[2])||(b=!1);return b};h.yb=function(){return!0};h.Mc=function(){return[]};
function cj(a,b){for(var c=0;c<a.g.length;c++){var d=a.g[c];void 0===d&&(d=a.g[c]={});var e=a,f=d;d=c;var g=a.R,k=b&&b[c],l=0;f.Ob=d;f.name=e.Tc;f.Hc=f.Lb=!1;f.dc=null;f.vd=!0;f.Lc=g[l++]+d;f.aa=g[l++];f.ja=g[l++];f.da=g[l++];f.ta=g[l++];f.Ff=g[l++];f.Gf=g[l++];f.Hf=g[l++];f.yf=g[l++];f.status=g[l];f.rk=0;f.qk=0;f.ge=1;f.xf=f.da;f.re=f.ta;f.zk=0;f.Hk=null;f.ca||(f.Na="");k&&(l=k[1],g=k[2],k[0]?(f=l,k=g,g=e.g[d],bj(e,d,!0),g.Lb=!0,d=new li(e,g,"preload"),e.je(g,d,f,k,!0)):fj(e,d,l,g,!0)?f.ca&&g&&gj(e,
l,g,f.ca):D(e,!1))}return!0}function ej(a){for(var b=[],c=0;c<a.g.length;c++){var d=a.g[c];b.push([d.Lb,d.Wa,d.Na])}return b}function dj(a){for(var b=0;b<a.g.length;b++){var c=a.g[b];c.ca&&hj(a,c.Na,c.ca)}return a.A}
function aj(a,b){b||(a.L=0);for(var c in a.M){var d=a.M[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.G.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var k=f.options[g];if(k.value==e){f=k.text;break a}}f=za(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.g.length)){!fj(a,g,f,e,!0)&&b&&D(a,!1);continue}a.S("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.L}
h.xd=function(a,b,c){if(!a&&!b){var d=this.G.listDisks;d&&d.options&&(a=d.options[d.selectedIndex].text,b=d.value)}d=(d=this.G.listDrives)&&ua(d.value,10);if(void 0===d||0>d||d>=this.g.length)return this.S("Unable to load the selected drive"),!1;if(!b)return bj(this,d),!0;if(b==Yi)return this.S('Use "Choose File" and "Mount" to select and load a local disk.'),!1;if(b==$i){b=window.prompt("Enter the URL of a remote disk image.","")||"";if(!b)return!1;a=za(b);this.status("Attempting to load "+b+' as "'+
a+'"')}fj(this,d,a,b,!1,c);return!0};h.he=function(){var a,b=this.G.listDrives;b=b&&ua(b.value,10);if(null==b||0>b||b>=this.g.length||!(a=this.g[b]))return this.S("Unable to boot the selected drive"),!1;if(!a.ca)return this.S("Load a disk into the drive first"),!1;Je(this.f,0,!0,b);return(a=this.Pb(a,a.Ff,a.Gf,a.Hf,a.yf,0,2))?(this.S("Unable to read the boot sector ("+a+")"),!1):!0};
function fj(a,b,c,d,e,f){var g=-1,k=a.g[b];k.Na.toLowerCase()!=d.toLowerCase()&&(g++,bj(a,b,!0),k.Hc?a.S(a.type+" busy"):(k.Hc=!0,e&&(k.ud=!0,a.L++,E(a)&&F(a,"auto-loading disk: "+c)),k.Lb=!!f,(new li(a,k,"preload")).load(c,d,f,a.je)&&g++));return g}
h.je=function(a,b,c,d,e){a.Hc=!1;b&&(b.aa>a.aa||b.ja>a.ja)&&(this.S('Disk "'+c+'" too large for drive '+(this.g[a.Ob].Lc||"---")),b=null);b?(a.ca=b,a.Wa=c,a.Na=d,this.se(a.Ob),gj(this,c,d,b),this.S('Loaded disk "'+c+'" in drive '+(this.g[a.Ob].Lc||"---"),a.ud||e),this.I&&Ae(this.I)):a.Lb=!1;a.ud&&(a.ud=!1,--this.L||D(this));vi(this,a.Ob);a.dc&&(a.dc(),a.dc=null)};
function wi(a,b,c,d){if((a=a.G.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function vi(a,b,c){var d=!1;if(0<=b&&b<a.g.length){var e=a.g[b],f=a.G.listDisks;a=a.G.listDrives;if(f&&a&&f.options&&a.options){if(c)for(c=0;c<a.options.length;c++)if(ua(a.options[c].value,10)==e.Ob){a.selectedIndex!=c&&(a.selectedIndex=c);d=!0;break}c=ua(a.value,10);e=e.Lb?Yi:e.Na;if(!isNaN(c)&&c==b){for(c=0;c<f.options.length;c++)if(f.options[c].value==e){f.selectedIndex!=c&&(f.selectedIndex=c);d=!0;break}c==f.options.length&&(f.selectedIndex=0)}}}return d}
h.gh=function(a){var b=this.G.listDrives;if(b&&b.options)for(var c=b.options.length,d=0;d<c;d++)if(b.options[d].textContent==a){var e=ua(b.options[d].value,10);if(0<=e)return vi(this,e,!0)}return!1};
function ui(a){var b=a.G.listDisks,c=a.G.descDisk,d=b.options&&b.options[b.selectedIndex];if(c&&d){b={};if(d=d.getAttribute("data-value"))try{b=eval("("+d+")")}catch(e){w(a.type+" option error: "+e.message)}a=b.desc;void 0===a&&(a="");b=b.href;void 0!==b&&(a='\x3ca href\x3d"'+b+'" target\x3d"_blank"\x3e'+a+"\x3c/a\x3e");c.innerHTML=a}}h.kh=function(a){for(var b=0;b<this.g.length;b++){var c=this.g[b];if(c&&c.Hc)return c.dc||(c.dc=a),!1}return!0};
function bj(a,b,c){var d=a.g[b];if(d.ca||!1===c)hj(a,d.Na,d.ca),d.Wa="",d.Na="",d.ca=null,d.Lb=!1,c||(a.S("Drive "+(a.g[b].Lc||"---")+" unloaded",c),vi(a,b))}function gj(a,b,c,d){var e;for(e=0;e<a.A.length;e++)if(a.A[e][1]==c){d.restore(a.A[e][2]);return}a.A[e]=[b,c,[]]}function hj(a,b,c){var d;for(d=0;d<a.A.length;d++)if(a.A[d][1]==b){a.A[d][2]=c.save();break}}h.se=function(){};h.Pb=function(){return-1};h.Qc=function(){return-1};var xi="",Yi="?",$i="??";
function N(a){si.call(this,"RK11",a,65536,Yb,Yb.Bc,ij);this.F=this.i=this.b=this.w=this.u=this.j=this.B=0}q(N,si);h=N.prototype;h.yb=function(a){a||(a=[jj.Bc|jj.$d|jj.Wd,0,R.Ya,0,0,0,0]);a=ja(a);this.F=a.next().value;this.i=a.next().value;this.b=a.next().value;this.w=a.next().value;this.u=a.next().value;this.j=a.next().value;this.B=a.next().value;return!0};h.Mc=function(){return[this.F,this.i,this.b,this.w,this.u,this.j,this.B]};
h.Pb=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.ca;var n=null;a||(m=S.Qd,e=0);for(;e;){if(!n){if(b>=a.aa){m=S.zc;break}n=a.seek(b,c,d+1);if(!n){m=S.Zd;break}var r=0;++d>=a.da&&(d=0,++c>=a.ja&&(c=0,++b))}var t,p;if(0>(t=a.read(n,r++))||0>(p=a.read(n,r++))){m=S.Ac;break}if(!k&&(Jc(this.C,Ye(this.f,f),t|p<<8),ud(this.C))){m=S.$b;break}r>=a.ta&&(n=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.Qc=function(a,b,c,d,e,f,g,k,l){var m=0;a=a.ca;var n=null;a||(m=S.Qd,e=0);for(;e;){var r=Lc(this.C,Ye(this.f,f));if(ud(this.C)){m=S.$b;break}if(!n){if(b>=a.aa){m=S.zc;break}n=a.seek(b,c,d+1,!0);if(!n){m=S.Zd;break}var t=0;++d>=a.da&&(d=0,++c>=a.ja&&(c=0,++b))}if(k){var p,z;if(0>(p=a.read(n,t++))||0>(z=a.read(n,t++))){m=S.Ac;break}if(r!=(p|z<<8)){m=S.ce;break}}else if(!a.write(n,t++,r&255)||!a.write(n,t++,r>>8)){m=S.Ac;break}t>=a.ta&&(n=null);f+=g;e--}return l?l(m,b,c,d,e,f):m};
h.We=function(a,b,c,d,e,f){this.u=f&65535;this.b=this.b&~R.Fb|f>>16-R.la.Fb&R.Fb;this.w=65536-e&65535;this.j=this.j&~kj.nd|d&kj.nd;this.i|=a;lj(this);return!0};function lj(a){a.b&=~R.fb;a.i&&(a.i|=S.Fe,a.b|=R.fb,a.i&S.$c&&(a.b|=R.$c),E(a)&&F(a,a.type+": ERROR: "+u(a.i)))}h.yg=function(){return this.F};h.Qh=function(){};h.zg=function(){return this.i};h.Rh=function(){};h.vg=function(){return this.b&R.ac};
h.Nh=function(a){this.b=this.b&~R.Sa|a&R.Sa;if(this.b&R.Zb){a=!0;var b,c="",d=(this.j&kj.pb)>>kj.la.pb,e=this.g[d];this.b&=~(R.Ya|R.od);this.i&=~S.mf;switch(b=this.b&R.va){case mj.Ae:E(this)&&F(this,this.type+": CRESET("+d+")",!0);this.i=this.j=0;this.b=R.Ya;break;case mj.Re:c="RCHK";case mj.qb:c||(c="READ");var f=this.Pb;case mj.rd:c||(c="WCHK");case mj.cc:c||(c="WRITE");f||(f=this.Qc);var g=(this.j&kj.Xb)>>kj.la.Xb;var k=(this.j&kj.cd)>>kj.la.cd;var l=this.j&kj.nd;var m=65536-this.w&65535;var n=
(this.b&R.Fb)<<16-R.la.Fb|this.u;var r=this.b&R.Ne?0:2;E(this)&&F(this,this.type+": "+c+"("+g+":"+k+":"+l+") "+u(n)+"--"+u(n+(m<<1)),!0,!0);if(g>=e.aa){this.i|=S.zc;break}if(l>=e.da){this.i|=S.Ac;break}a=f.call(this,e,g,k,l,m,n,r,b>=mj.rd,this.We.bind(this));break;case mj.Fc:g=(this.j&kj.Xb)>>kj.la.Xb;E(this)&&F(this,this.type+": SEEK("+g+")",!0);g<e.aa?this.b|=R.od:this.i|=S.zc;break;case mj.Ge:E(this)&&F(this,this.type+": DRESET("+d+")");this.i=this.j=0;this.b=R.Ya|R.od;break;default:E(this)&&F(this,
this.type+": UNSUPPORTED("+b+")")}this.F=e.status|(e.ca?jj.Da:0)|d<<jj.la.ed|this.j&jj.lf;lj(this);a&&(this.b&=~R.Zb,this.b|=R.Ya,this.b&R.Eb&&wd(this.f,this.Pa))}};h.Ag=function(){return this.w};h.Sh=function(a){this.w=a};h.ug=function(){return this.u};h.Mh=function(a){this.u=a};h.wg=function(){return this.j};h.Oh=function(a){this.j=a};h.xg=function(){return this.B};h.Ph=function(a){this.B=a};
var jj=Yb.Cc,S=Yb.Ze,R=Yb.Xe,kj=Yb.Ye,mj=Yb.va,nj={},ij=(nj[65280]=[null,null,N.prototype.yg,N.prototype.Qh,"RKDS"],nj[65282]=[null,null,N.prototype.zg,N.prototype.Rh,"RKER"],nj[65284]=[null,null,N.prototype.vg,N.prototype.Nh,"RKCS"],nj[65286]=[null,null,N.prototype.Ag,N.prototype.Sh,"RKWC"],nj[65288]=[null,null,N.prototype.ug,N.prototype.Mh,"RKBA"],nj[65290]=[null,null,N.prototype.wg,N.prototype.Oh,"RKDA"],nj[65294]=[null,null,N.prototype.xg,N.prototype.Ph,"RKDB"],nj);
function Nd(a){si.call(this,"RL11",a,131072,Zb,Zb.$e,oj);this.b=this.B=this.i=this.j=this.w=this.u=0}q(Nd,si);h=Nd.prototype;h.yb=function(a){a||(a=[U.Da|U.Ya,0,0,0,0,0]);a=ja(a);this.b=a.next().value;this.B=a.next().value;this.i=a.next().value;this.j=a.next().value;this.w=a.next().value;this.u=a.next().value;return!0};h.Mc=function(){return[this.b,this.B,this.i,this.j,this.w,this.u]};
h.Pb=function(a,b,c,d,e,f,g,k,l){g=0;a=a.ca;k=null;a||(g=pj.Za,e=0);for(;e;){if(!k){k=a.seek(b,c,d+1);if(!k){g=pj.Za;break}var m=0}var n,r;if(0>(n=a.read(k,m++))||0>(r=a.read(k,m++))){g=pj.Za;break}Jc(this.C,Ye(this.f,f),n|r<<8);if(ud(this.C)){g=pj.$b;break}f+=2;e--;if(m>=a.ta&&(k=null,++d>=a.da&&(d=0,++c>=a.ja&&(c=0,++b>=a.aa)))){g=pj.Za;break}}return l?l(g,b,c,d,e,f):g};
h.Qc=function(a,b,c,d,e,f,g,k,l){g=0;a=a.ca;k=null;a||(g=pj.Za,e=0);for(;e;){var m=Lc(this.C,Ye(this.f,f));if(ud(this.C)){g=pj.$b;break}f+=2;e--;if(!k){k=a.seek(b,c,d+1,!0);if(!k){g=pj.Za;break}var n=0}if(!a.write(k,n++,m&255)||!a.write(k,n++,m>>8)){g=pj.Za;break}if(n>=a.ta&&(k=null,++d>=a.da&&(d=0,++c>=a.ja&&(c=0,++b>=a.aa)))){g=pj.Za;break}}return l?l(g,b,c,d,e,f):g};
h.af=function(a,b,c,d,e,f){this.B=f&65535;this.b=this.b&~U.Xa|f>>16-U.la.Xa&U.Xa;this.u=f>>16&qj.$a;this.j=this.i=b<<rj.la.bc|(c?rj.Ec:0)|d&rj.Xd;this.w=65536-e&65535;a&&(this.b=this.b|a|U.fb);return!0};h.Dg=function(){return this.b&U.ac};
h.Vh=function(a){this.b=this.b&~U.Sa|a&U.Sa;this.u=this.u&60|(a&U.Xa)>>U.la.Xa;if(!(this.b&U.Ya)){a=!0;var b="",c=this.g[(this.b&U.pb)>>U.la.pb],d=c.ca;this.b&=~U.Da;switch(this.b&U.va){case sj.rf:this.w&tj.Od&&(this.b&=U.Da|U.va|U.Xa);this.w=c.status|this.j&rj.Ec|(d&&512==d.aa?tj.Ke:0);break;case sj.Fc:if((this.i&rj.Je)==rj.nf){var e=this.i&rj.bc;b=(this.i&rj.qf)<<2;this.j=this.i&rj.pf?this.j+e:this.j-e;this.i=this.j=this.j&rj.bc|b}break;case sj.Ve:this.w=this.j;break;case sj.Se:b="READ",e=this.Pb;
case sj.tf:b||(b="WRITE");e||(e=this.Qc);var f=this.i>>rj.la.bc;var g=this.i&rj.Ec?1:0;var k=this.i&rj.Xd;!d||f>=d.aa||k>=d.da?this.b=this.b|pj.Za|U.fb:(a=65536-this.w&65535,d=(this.u&qj.$a)<<16|this.B,E(this)&&F(this,this.type+": "+b+"("+f+":"+g+":"+k+") "+u(d)+"--"+u(d+(a<<1)),!0,!0),a=e.call(this,c,f,g,k,a,d,2,!1,this.af.bind(this)))}a&&(this.b=this.b|U.Da|U.Ya,this.b&U.Eb&&wd(this.f,this.Pa))}};h.Bg=function(){return this.B};h.Th=function(a){this.B=a&uj.Sa};h.Eg=function(){return this.i};
h.Wh=function(a){this.i=a};h.Fg=function(){return this.w};h.Xh=function(a){this.w=a};h.Cg=function(){return this.u};h.Uh=function(a){this.u=a&qj.$a;this.b=this.b&~U.Xa|(this.u&3)<<U.la.Xa};
var U=Zb.df,uj=Zb.bf,rj=Zb.ef,tj=Zb.Dc,qj=Zb.cf,pj=Zb.Nd,sj=Zb.va,vj={},oj=(vj[63744]=[null,null,Nd.prototype.Dg,Nd.prototype.Vh,"RLCS"],vj[63746]=[null,null,Nd.prototype.Bg,Nd.prototype.Th,"RLBA"],vj[63748]=[null,null,Nd.prototype.Eg,Nd.prototype.Wh,"RLDA"],vj[63750]=[null,null,Nd.prototype.Fg,Nd.prototype.Xh,"RLMP"],vj[63752]=[null,null,Nd.prototype.Cg,Nd.prototype.Uh,"RLBE"],vj);
function Xd(a){si.call(this,"RX11",a,262144,$b,$b.ff,wj);this.H=this.F=this.i=this.K=this.b=this.B=0;this.j=V.Gb;this.u=0;this.w=Array(128).fill(0)}q(Xd,si);h=Xd.prototype;h.yb=function(a){a?(a=ja(a),this.b=a.next().value,this.B=a.next().value,this.H=a.next().value,this.F=a.next().value,this.i=a.next().value,this.K=a.next().value,this.j=a.next().value,this.u=a.next().value,this.w=a.next().value):(this.B=this.b=0,this.F=this.H=1,this.K=this.i=0,this.j=V.qb,this.u=0,Cd(this.f,this.Pa),xj(this));return!0};
h.Mc=function(){return[this.b,this.B,this.H,this.F,this.i,this.K,this.j,this.u,this.w]};h.se=function(a){0==a&&this.yb()};function yj(a,b){b&&(a.K=b,a.B=a.i,a.b|=W.fb);a.j=V.Gb;a.b|=W.DONE;a.b&W.Eb&&wd(a.f,a.Pa)}
h.Pb=function(a,b,c,d,e,f,g,k,l){k=0;var m=a.ca,n=null;E(this)&&F(this,this.type+".readData("+b+":"+c+":"+d+") "+u(f)+"--"+u(f+(e<<1)),!0,!0);m||(k=a.Ob?zj.bd:zj.ad,e=0);for(;e;){if(!n){if(b>=m.aa){k=zj.Pe;break}n=m.seek(b,c,d+1);if(!n){k=zj.ld;break}var r=0;++d>=m.da&&(d=0,++c>=m.ja&&(c=0,++b))}var t;if(0>(a=m.read(n,r++))||0>(t=m.read(n,r++))){k=zj.kd;break}Jc(this.C,Ye(this.f,f),a|t<<8);r>=m.ta&&(n=null);f+=g;e--}return l?l(k,b,c,d,e,f):k};
function xj(a){var b=0,c=a.b&W.pd?1:0,d=a.g[c];d=d&&d.ca;var e=a.H&Aj.$a,f=a.F&Bj.$a;a.i&=~(Cj.Jd|Cj.Td|Cj.Yb|Cj.Da);if(d)if(a.i|=Cj.Da,E(a)&&F(a,a.type+".readSector("+e+":0:"+f+")",!0,!0),c=d.seek(e,0,f,!0)){e=0;for(f=a.w.length;e<f;){var g=d.read(c,e);if(0>g){b=zj.kd;break}a.w[e++]=g}c.Bf&&(a.i|=Cj.Yb)}else b=zj.ld;else b=c?zj.bd:zj.ad;yj(a,b)}
h.Hg=function(a,b){a=this.b;if(!b)switch(a&=W.ac,this.j){case V.Xc:case V.EMPTY:this.u<this.w.length&&(this.b|=W.ab);break;case V.qb:case V.cc:case V.Gc:2>this.u&&(this.b|=W.ab)}return a};
h.Zh=function(a){this.b=this.b&~W.Sa|a&W.Sa;if(this.b&W.INIT)this.yb();else if(this.b&W.Zb&&this.j==V.Gb)switch(this.j=this.b&W.va,this.b&=~(W.Zb|W.ab|W.DONE|W.fb),Cd(this.f,this.Pa),E(this)&&F(this,this.type+".processCommand("+Dj[this.j>>1]+")",!0,!0),this.j){case V.Xc:case V.EMPTY:case V.qb:case V.cc:case V.Gc:this.u=0;break;case V.Ue:a=this.g[this.b&W.pd?1:0];this.i&=~Cj.Da;a&&a.ca&&(this.i|=Cj.Da);this.B=this.i;yj(this);break;case V.Te:this.B=this.K,yj(this)}else this.b&W.Eb?this.b&W.DONE&&wd(this.f,
this.Pa):Cd(this.f,this.Pa)};h.Ig=function(a,b){if(!b)switch(this.j){case V.EMPTY:this.b&W.ab&&(this.b&=~W.ab,this.B=this.w[this.u]&255,E(this)&&F(this,this.type+".readByte("+this.u+"): "+v(this.B,2,!0),!0,!0),++this.u>=this.w.length&&yj(this))}return this.B};
h.$h=function(a){switch(this.j){case V.Xc:this.b&W.ab&&(this.b&=~W.ab,this.w[this.u]=a&255,E(this)&&F(this,this.type+".writeByte("+this.u+","+v(a,2,!0)+")",!0,!0),++this.u>=this.w.length&&yj(this));break;case V.qb:case V.cc:case V.Gc:if(this.b&W.ab)switch(this.b&=~W.ab,this.u++){case 0:this.F=a;break;case 1:if(this.H=a,this.j==V.qb)xj(this);else{var b=this.j==V.Gc,c=0,d=this.b&W.pd?1:0,e=this.g[d];e=e&&e.ca;var f=this.H&Aj.$a,g=this.F&Bj.$a;this.i&=~(Cj.Jd|Cj.Td|Cj.Yb|Cj.Da);if(e)if(this.i|=Cj.Da,
E(this)&&F(this,this.type+".writeSector("+f+":0:"+g+")",!0,!0),d=e.seek(f,0,g,!0))for(b&&(d.Bf=!0),b=0,f=this.w.length;b<f;){if(!e.write(d,b,this.w[b]&255)){c=zj.kd;break}b++}else c=zj.ld;else c=d?zj.bd:zj.ad;yj(this,c)}}}this.B=a};var W=$b.gf,Aj=$b.kf,Bj=$b.jf,Cj=$b.hf,V=$b.va,zj=$b.Ie,Dj="FILL EMPTY WRITE READ UNUSED RDSTAT WRDEL RDERR".split(" "),Ej={},wj=(Ej[65144]=[null,null,Xd.prototype.Hg,Xd.prototype.Zh,"RXCS"],Ej[65146]=[null,null,Xd.prototype.Ig,Xd.prototype.$h,"RXDB"],Ej);
function Fj(a){x.call(this,"Debugger",a);this.W=+a.base||16;this.O=["{","}"];this.ia=["[","]"];this.Ra=this.A=0;this.R=!1;this.w=-1;this.u=[];this.i={}}q(Fj,x);Fj.prototype.ne=function(){return-1};Fj.prototype.wd=function(){};
function Gj(a,b,c,d){if(c)if(b){0>a.w&&a.u.length&&(a.w=0);if(0>a.w||b!=a.u[a.w])a.u.splice(0,0,b),a.w=0;a.w--}else a.R?b="end":b=a.u[a.w+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(Ga(b.substring(c,f))),c=f+1}}return a}
function Hj(a,b,c){var d=a;b=b||32;if(c)if(32==b)d=a>>>0;else if(32>b)d=a&(1<<b)-1;else{if(b=Math.pow(2,b),0>a||a>=b)d=a%b,0>d&&(d+=b)}else 32>=b?d=a<<32-b>>32-b:(b=Math.pow(2,b-1),a>=b?(d=a%b,(a/b|0)&1&&(d-=b)):a<-b&&(d=a%b,((-a-1)/b|0)&1?d&&(d+=b):d||(d-=b)));a!=d&&(a=d);return a}
function Ij(a,b,c){for(c=void 0===c?-1:c;c--&&b.length;){var d=b.pop();if(2>a.length)return!1;var e=a.pop();var f=a.pop();switch(d){case "*":f*=e;break;case "/":if(!e)return!1;f=Math.trunc(f/e);break;case "^/":if(!e)return!1;f%=e;break;case "+":f+=e;break;case "-":f-=e;break;case "\x3c\x3c":f<<=e;break;case "\x3e\x3e":f>>=e;break;case "\x3e\x3e\x3e":f>>>=e;break;case "\x3c":f=f<e?1:0;break;case "\x3c\x3d":f=f<=e?1:0;break;case "\x3e":f=f>e?1:0;break;case "\x3e\x3d":f=f>=e?1:0;break;case "\x3d\x3d":f=
f==e?1:0;break;case "!\x3d":f=f!=e?1:0;break;case "\x26":f&=e;break;case "!":case "|":f|=e;break;case "^!":f|=e;break;case "\x26\x26":f=f&&e?1:0;break;case "||":f=f||e?1:0;break;case ",,":f=Hj(f,18,!0)*Math.pow(2,18)+Hj(e,18,!0);break;case "_":case "^_":"^_"==d&&(e=35-(e&255));e&&(f=Hj(f,0,!0),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));break;default:return!1}a.push(Hj(f))}return!0}
function Jj(a,b,c,d,e,f){var g,k=!1,l=0,m=[],n=[],r=a.W;for(a.W=e;c<d;){var t=b[c++].trim();var p=c<d?b[c++]:"";if(t)var z=Kj(a,t,void 0,f,l);else if("{"==p){t=1;for(z=c;c<d;)if(c++,p=c<b.length?b[c++]:"","{"==p)t++;else if("}"==p&&!--t)break;z=Jj(a,b,z,c-1,a.W,f);null!=z&&l&&(z=Lj(z,l));t=c<d?b[c++].trim():"";p=c<d?b[c++]:""}else{if(" "==p)continue;if("^B"==p){a.W=2;continue}if("^O"==p){a.W=8;continue}if("^D"==p){a.W=10;continue}if(!(l&-1073741824)){if("+"==p)continue;if("-"==p){l=l<<2|1;continue}if("~"==
p||"^-"==p){l=l<<2|2;continue}if("^L"==p){l=l<<2|3;continue}}k=!0;break}if(void 0===z)if(f)f.push(t),z=0;else{k=!0;f=[];break}m.push(Hj(z));if(" "==p)if(c<b.length-1&&!b[c])c++,p=b[c++];else{k=!0;break}if(!p)break;l="\x3c"==a.O[0]?Mj:Nj;if(!l[p]){k=!0;break}n.length&&l[p]<=l[n[n.length-1]]&&Ij(m,n,1);n.push(p);a.W="^_"==p?10:e;l=0}if(k||!Ij(m,n)||1!=m.length)k=!0;k?f||a.v("parse error ("+(t||p)+")"):g=m.pop();a.W=r;return g}
function Oj(a,b,c,d,e){for(var f;0<=(f=b.indexOf(c));){for(var g=0,k=f+1,l=e;k<b.length;){var m=b[k++];if(m==c){l=-1;break}if(!l)break;l--;m=m.charCodeAt(0);7==d?m&=127:m=m-32&63;g=Hj(g*Math.pow(2,d)+m,d*e,!0)}if(0<=l){a.v("parse error ("+c+b+c+")");return}b=b.substr(0,f)+K(a,g,-1)+b.substr(k)}return b}
function Pj(a,b,c){var d=void 0,e=!1===c;c=Array.isArray(c)?c:void 0;if(b){"{"!=a.O[0]&&(b=b.split(a.O[0]).join("{").split(a.O[1]).join("}"));b=Oj(a,b,'"',7,5);if(!b)return d;b=Oj(a,b,"'",6,6);if(!b)return d;16!=a.W&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=Jj(a,b,0,b.length,a.W,c);void 0!==d&&e&&Qj(a,null,d)}return d}
function Lj(a,b){for(;b;){switch(b&3){case 1:a=-Hj(a);break;case 2:a|=-1;break;case 3:for(var c=35;0<=c&&!(a&Math.pow(2,c));)c--;a=35-c}b>>>=2}return a}
function Kj(a,b,c,d,e){e=void 0===e?0:e;var f=Array.isArray(d)?d:void 0;if(void 0!=b){var g=a.ne(b);if(0<=g)g=a.wd(g);else if(g=b,a.i[g]?g=a.i[g].value:(g=g.substr(0,6),g=a.i[g]&&a.i[g].value),void 0!=g){var k=a.i[b]&&a.i[b].fh;k&&(f?f.push(k):(f=Pj(a,k,d),void 0!==f?g+=f:(d||a.v("undefined "+(c||"value")+": "+b+" ("+k+")"),g=void 0)))}else g=ua(b,1<b.length||10<a.W?a.W:10);void 0!=g?g=Hj(Lj(g,e)):d||a.v("invalid "+(c||"value")+": "+b)}else d||a.v("missing "+(c||"value"));return g}
function Qj(a,b,c){var d=!1;if(void 0!==c){d=!0;var e=8==a.W?K(a,c,32,8,1)+"  "+c+".":K(a,c,32,16,1)+"  "+K(a,c,32,8,1)+"  "+K(a,c,32,2,8)+"  "+c+".";32<=c&&127>c&&(e+=" '"+String.fromCharCode(c)+"'")}a.v((null!=b?b+": ":"")+e);return d}function Rj(a,b){var c=0;if(a.i){if(b)return Qj(a,b,a.i[b]&&a.i[b].value);b=Object.keys(a.i);b.sort();for(var d=0;d<b.length;d++)Qj(a,b[d],a.i[b[d]].value),c++}return 0<c}
function K(a,b,c,d,e){c=void 0===c?0:c;e=void 0===e?0:e;switch((void 0===d?0:d)||a.W){case 2:a=wa(b,0<c?c:0,e);break;case 8:a=u(b,0<c?(c+2)/3|0:0,!!e);break;case 10:a=xa(b,0<c?Math.ceil(.3*c):0);break;default:a=v(b,0<c?c+3>>2:0,!!e)}return c=0>c?a.replace(/^0+([0-9A-F]+)$/i,"$1"):a}
var Nj={"||":5,"\x26\x26":6,"!":7,"|":7,"^!":8,"\x26":9,"!\x3d":10,"\x3d\x3d":10,"\x3e\x3d":11,"\x3e":11,"\x3c\x3d":11,"\x3c":11,"\x3e\x3e\x3e":12,"\x3e\x3e":12,"\x3c\x3c":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},Mj={",,":1,"||":5,"\x26\x26":6,"!\x3d":10,"\x3d\x3d":10,"\x3e\x3d":11,"\x3e":11,"\x3c\x3d":11,"\x3c":11,"\x3e\x3e\x3e":12,"\x3e\x3e":12,"\x3c\x3c":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"\x26":15,_:19,"^_":19,"{":20,"}":20};
function Sj(a){Fj.call(this,a);this.Fa=!1;this.O=["(",")"];this.ia=[];this.K=X();this.Ea=X();this.P=X();this.B=[];this.b=this.M=this.H=[];Tj(this);this.T=this.fa=0;this.j=[];this.ra=void 0;Uj(this);this.D=this;this.ka={};this.ha=0;this.V=null;this.N=[];Vj(this,a.messages);this.wa=a.commands;this.Ia=Wj;this.X=[];this.L=0;this.Ja=this.sa=null;this.A=this.Ha=this.Ga=this.Y=this.oa=0;this.g=this.F=null;var b=this;window?void 0===window[y]&&(window[y]=function(a){return ve(b,a)}):void 0===global[y]&&(global[y]=
function(a){return ve(b,a)})}q(Sj,Fj);function Xj(a){a=a&&a.J;null==a&&(a=-1);return a}function X(a,b,c){return{J:void 0===a?null:a,La:void 0===b?!1:b,Ta:!1,W:c}}h=Sj.prototype;h.Cd=function(a,b){a.J=b;a.Ta=!1;a.W=void 0};function Yj(a){return[a.J,a.La,a.W,a.Ta,a.Kc]}function Zj(a,b){var c=X(b[0],b[1],b[2]);c.Ta=b[3];b[4]&&(c.ee=Gj(a,c.Kc=b[4]));return c}
h.za=function(a,b,c,d){this.C=b;this.I=a;this.f=c;this.g=a.i;(a=qe(a,"messages"))&&Vj(this,a);1140>this.f.ia&&(this.X=this.X.concat(ak));1145>this.f.ia&&(this.X=this.X.concat(bk));Ad(this,16,function(a){a:{var b=d.C.b,c=a[0],e=a=0,l=b.length;if(c){a=Xj(ck(d,c));if(-1===a){d.v("invalid address: "+c);break a}e=a>>>d.C.g;l=1}d.v("blockid   physical   blockaddr  used    size    type");d.v("--------  ---------  ---------  ------  ------  ----");c=-1;for(var m=0;l--;){var n=b[e];n.type==c?m++||d.v("..."):
(c=n.type,m=md[c],n&&d.v(v(n.id,8)+"  %"+v(e<<d.C.g,8)+"  %"+v(n.J,8)+"  "+ya(n.Sb)+"  "+ya(n.size)+"  "+m),c!=Zd&&(c=-1),m=0);a+=d.C.j;e++}}});D(this)};
h.ua=function(a,b,c){var d=this;switch(b){case "debugInput":return this.F=this.G[b]=c,c.onkeydown=function(a){if(13==a.keyCode){var b=d.F.value;d.F.value="";ve(d,b,!0)}else if(27==a.keyCode)d.F.value=b="";else if(38==a.keyCode?(b=null,d.w<d.u.length-1&&(b=d.u[++d.w])):40==a.keyCode&&(0<d.w?b=d.u[--d.w]:(b="",d.w=-1)),null!=b){var c=b.length;d.F.value=b;d.F.setSelectionRange(c,c)}null!=b&&a.preventDefault&&a.preventDefault()},!0;case "debugEnter":return this.G[b]=c,cb(c,function(){if(d.F){var a=d.F.value;
d.F.value="";ve(d,a,!0);return!0}return!1}),!0;case "step":return this.G[b]=c,cb(c,function(a){var b=!1;Ob(d,!0)||(Pb(d,!0),b=Dc(d,a?1:0,null),Pb(d,!1));return b}),!0}return!1};function ue(a){if(a.F){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.F.focus();window&&window.scrollTo(b,c)}}h.Ld=function(a,b){var c=255,d=Xj(a);-1!==d&&(a.La||65535<d?(c=this.C,d=Ye(this.f,d),c.B=!1,c.ma++,d=od(c,d).j(d&c.i,d),c.ma--):(c=this.f,c.oa++,d=c.C.Hd(Kc(c,d,3)),c.oa--),c=d,b&&dk(a,b));return c};
h.Qa=function(a,b){var c=65535,d=Xj(a);-1!==d&&(c=a.La||65535<d?Lc(this.C,Ye(this.f,d)):Mc(this.f,d),b&&dk(a,b));return c};h.Md=function(a,b,c){var d=Xj(a);if(-1!==d){if(a.La||65535<d)pd(this.C,Ye(this.f,d),b);else{var e=this.f;e.oa++;e.C.Id(Kc(e,d,5),b);e.oa--}c&&dk(a,c);Hc(this.I,-1)}};h.He=function(a,b,c){var d=Xj(a);if(-1!==d){if(a.La||65535<d)Jc(this.C,Ye(this.f,d),b);else{var e=this.f;e.oa++;e.C.Wb(Kc(e,d,4),b);e.oa--}c&&dk(a,c);Hc(this.I,-1)}};
function ck(a,b,c){c=(c?a.K:a.Ea).J;var d;if(void 0!==b){a:{var e=a.O[0];c=a.O[1];var f="("==e||"{"==e||"["==e?"\\":"";var g="["==e?"\\":"";for(g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);){var k=Pj(a,f[1]);if(void 0===k){b=void 0;break a}b=b.replace(e+f[1]+c,null!=k?K(a,k):"undefined")}if(a.ia.length)for(e=a.ia[0],c=a.ia[1],f="("==e||"{"==e||"["==e?"\\":"",g="["==e?"\\":"",g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);)b=b.replace("["+f[1]+"]","unimplemented");for(;e=b.match(/\$([a-z]+)/i);){c=
null;switch(e[1].toLowerCase()){case "ops":c=a.Ra}if(null==c)break;b=b.replace(e[0],c.toString())}}if("%"==b.charAt(0)){var l=!0;b=b.substr(1)}e=b;var m;a:{c=a.C;f=e.toUpperCase();for(n in c.Oa)if(g=+n,c.Oa[g][4]==f){var n=c.A+g;break a}n=null}if(null==n&&e.match(/^[a-z_][a-z0-9_]*$/i))for(e=e.toUpperCase(),c=0;c<a.B.length;c++)if(f=a.B[c].ga[e],null!=f){n=f.o;break}null!=n&&(m=X(n));if(e=m)return e;0<=b.indexOf("0x")?d=16:0<=b.indexOf("0o")?d=8:0<=b.indexOf(".")&&(d=10);c=Pj(a,b)}null!=c&&(e=X(c,
l,d));return e}function ek(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.ee=Gj(a,b.Kc=c[2]))}function dk(a,b){null!=a.J&&(a.J+=b||1)}function fk(a,b){return(b.La?"%":"")+K(a,b.J)}
function Vj(a,b){a.D=a;a.ha=1073741824;a.V=null;a.N=[];b=Gj(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in gc){a:{var d=void 0;if(Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}}0<=d&&(a.ha|=gc[c],a.v(c+" messages enabled"))}}function Ad(a,b,c){for(var d in gc)if(b==gc[d]){a.ka[d]=c;break}}
h.ne=function(a){a=a.toUpperCase();var b=gk[a];null==b&&(b=-1,"R"==a.charAt(0)&&(b=+a.charAt(1),0>b||7<b))&&(b=-1);return b};function hk(a,b){if(b<ik||a.g)var c=jk[b];return c||""}
h.wd=function(a){if(0<=a)if(8>a)var b=this.f.g[a];else if(16>a)b=this.f.sa[a-8];else if(20>a)b=this.f.X[a-16];else{var c=this.f,d=this.g;switch(a){case kk:b=Kd(this.f);break;case lk:b=c.mb;break;case mk:b=c.O;break;case nk:b=c.Ea&65280;break;case ok:b=Dd(c);break;case pk:b=Gd(c);break;case qk:b=Hd(c);break;case rk:b=c.V;break;case ik:d&&(b=d.ea);break;case sk:d&&(b=d.Ab);break;case tk:d&&(b=d.Va)}}return b};
h.message=function(a,b){b&&(a+=" @"+fk(this,X(this.f.N&65535)));if(!this.V||a!=this.V)if(this.V=a,this.ha&536870912)this.N.push(a);else{var c;if(this.ha&-2147483648&&this.f&&(c=this.f.flags.U)||Ob(this,!0))uk(this),c&&(a+=" (cpu halted)");this.v(a);this.f&&(a=this.f,Be(a),a.wb=0,a.I&&Hc(a.I,void 0))}};
function Uj(a){var b;if(!Df(a))a.j&&a.j.length&&a.v("instruction history buffer freed"),a.T=0,a.j=[];else if(!a.j||!a.j.length){a.j=Array(vk);for(b=0;b<a.j.length;b++)a.j[b]=X();a.T=0;a.v("instruction history buffer allocated")}}function wk(a,b,c){if(!xk(a,c))return!1;Cc(a.f,b);return!0}
function Dc(a,b,c,d){if(!xk(a))return!1;var e="";null===c&&(e=(c=!a.sa||"tr"==a.sa)?"tr":"t");a.A=0;b||Df(a)&&Ef(a,a.f.g[7],0);try{b=Ce(a.f,b);var f=a.f.wc(b);0<f&&(Ec(a.f,f),a.A+=f,Fc(a.f,f,!0),Gc(a.f,f),a.Y++)}catch(g){"number"!=typeof g&&(b=g,a.A=0,Lb(a.f,b.stack||b.message))}!1!==d&&(a.g&&a.g.stop(),Hc(a.I,-1));te(a,c||!1,e);return 0<a.A}function uk(a,b){a.f&&I(a.f,b)}
function te(a,b,c){if(a.Fa){void 0===b&&(b=!0);c&&a.v(yk+c);c=a.f;if(c=c.i&128?c.yc|c.xc<<8:0){var d=c>>8;a.v("trapped to "+K(a,c&255,8)+" ("+(0>d?Xb[-d]:K(a,d))+")")}a.K=X(a.f.g[7]);b&&1!=a.L?zk(a):Ak(a)}}function xk(a,b){var c;(c=!a.f||!Nb(a.f))||(c=a.f,c.flags.ba?c=!0:(c.v(c.toString()+" not powered"),c=!1),c=!c);return c||a.f.flags.U?(b||a.v("cpu busy or unavailable, command ignored"),!1):!Mb(a.f)}h.Ba=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};
h.Aa=function(a,b){b&&this.v(a?"suspending":"shutting down");return a?this.save():!0};h.reset=function(a){Uj(this);this.Y=0;this.V=null;this.A=0;this.K=X(this.f.g[7]);this.flags.U=!1;Bk(this);a||te(this)};h.save=function(){var a=new H(this);a.set(0,Yj(this.K));a.set(1,Yj(this.P));a.set(2,[this.u,this.R,this.ha]);a.set(3,this.B);return a.data()};
h.restore=function(a){var b=0;void 0!==a[2]&&(this.K=Zj(this,a[b++]),this.P=Zj(this,a[b++]),this.u=a[b][0],"string"==typeof this.u&&(this.u=[this.u]),this.R=a[b][1],this.ha|=a[b][2]);a[3]&&(this.B=a[3]);return!0};h.start=function(a,b){this.L||this.v("running");this.flags.U=!0;this.Ga=a;this.Ha=b};
h.stop=function(a,b){if(this.flags.U){this.flags.U=!1;this.A=b-this.Ha;if(!this.L){b="stopped";if(this.A){a-=this.Ga;var c=0<a?Math.round(1E3*this.A/a):0;b+=" (";Df(this)&&(b+=this.Y+" instructions, ",this.Y=0);b+=this.A+" cycles, "+a+" ms, "+c+" hz)"}else E(this,-2147483648)&&(b+=" (use the 't' command to execute blocked faults)");this.v(b)}te(this,!0);ue(this);Bk(this,this.f.g[7]);this.V=null}};function Df(a){return 1<a.b.length||!!a.fa}
function Ef(a,b,c){var d=-1;c||(d=Mc(a.f,b),0==d&&(a.f.N&65535)==b&&(b=Pe(a.f,2)));if(0<c&&(a.fa&&!--a.fa||Ck(a,b,1,a.b)))return!0;0<=c&&a.j.length&&(a.Y++,0>d&&(d=Mc(a.f,b)),65535!=(d&65535)&&(a.Cd(a.j[a.T],b),++a.T==a.j.length&&(a.T=0)));return!1}function Jg(a){var b=a.f;if(b.flags.U)throw zc(b,a.f.N&65535),uk(a),-1;return!1}function ke(a,b,c){Ck(a,b,c||1,a.M)&&uk(a,!1)}function le(a,b,c){Ck(a,b,c||1,a.H)&&uk(a,!1)}
function Tj(a){var b;a.b=["bp"];if(void 0!==a.M)for(b=1;b<a.M.length;b++){var c=a.M[b];var d=Xj(c);c.La?(c=a.C,je(c.b[d>>>c.g],!1)):af(a.f,!1)}a.M=["br"];if(void 0!==a.H)for(b=1;b<a.H.length;b++)c=a.H[b],d=Xj(c),c.La?(c=a.C,je(c.b[d>>>c.g],!0)):af(a.f,!0);a.H=["bw"];a.oa=0;a.fa=0}
h.xb=function(a,b,c){var d=!0;c||Dk(this,a,b,!1,!0);if(a!=this.b){var e=Xj(b);if(-1===e)this.v("invalid address: "+fk(this,b)),d=!1;else{var f=a==this.H;65535<e&&(b.La=!0);if(b.La){var g=this.C;g.b[e>>>g.g].xb(e&g.i,f)}else e=this.f,(f?e.oc++:e.mc++)||Ie(e)}}d&&(a.push(b),c?b.Ta=!0:(Ek(this,a,a.length-1,"set"),Uj(this)))};
function Dk(a,b,c,d,e){var f=!1;c=Xj(c);for(var g=1;g<b.length;g++){var k=b[g];if(c==Xj(k)&&(!d||k.Ta)){f=!0;k.Ta||e||Ek(a,b,g,"cleared");b.splice(g,1);b!=a.b&&(b=b==a.H,k.La?(d=a.C,je(d.b[c>>>d.g],b)):af(a.f,b));k.Ta||Uj(a);break}}return f}function Fk(a,b){for(var c=1;c<b.length;c++)Ek(a,b,c);return b.length-1}function Ek(a,b,c,d){c=b[c];a.v(b[0]+" "+fk(a,c)+(d?" "+d:c.Kc?' "'+c.Kc+'"':""))}
function Bk(a,b){if(void 0!==b)Ck(a,b,1,a.b,!0),a.L=0;else for(b=1;b<a.b.length;b++){var c=a.b[b];if(c.Ta){if(!Dk(a,a.b,c,!0))break;b=0}}}
function Ck(a,b,c,d,e){var f=!1;if(!a.oa++)for(var g=1;!f&&g<d.length;g++){var k=d[g];if(!e||k.Ta)for(var l=Xj(k)&(d==a.b?65535:-1),m=0;m<c;m++)if(b+m==l){var n;f=!0;k.Ta&&(Dk(a,d,k,!0),e=!0);if(n=k.ee){f=!1;for(var r=0;r<n.length;r++)if(!Gk(a,n[r],!0)){if(n[r].indexOf("if")){f=!0;break}for(var t=r+1;t<n.length&&n[t].indexOf("else");t++)r++;if(t==n.length){f=!0;break}}a.f.flags.U||(f=!0)}if(f){e||Ek(a,d,g,"hit");break}}}a.oa--;return f}
function Hk(a,b,c,d){var e=X(b.J),f=a.Qa(b,2),g,k;for(k in a.Ia)if(g=a.Ia[k][f&k])break;g||(g=Ik);var l=g[0];0<=a.X.indexOf(l)&&(g=Ik,l=g[0]);var m=k="",n=Jk[l],r=g.length-1;l||r||(k=K(a,f));for(l=1;l<=r;l++){var t=g[l];if(void 0!==t){var p=a;var z=t;t=b;var B="";var C=z&Kk;if(C==Y)t=t.J+((f&255)<<24>>23)&65535,B=K(p,t);else if(C==Lk)t=t.J-((f&63)<<1)&65535,B=K(p,t);else if(C==Mk)B=K(p,f&7,3);else if(C==Nk)B=K(p,f&63,6);else if(C==Ok)B=K(p,f&255,8);else if(C=f&z,z&Pk&&(C>>=6,z>>=6),z&Z){z=null;var G=
C&Qk;switch(C&Rk){case 0:B=hk(p,G);break;case 8:B="@"+hk(p,G);z=Sk(p,p.f.g[G]);break;case 16:7>G?B="("+hk(p,G)+")+":(C=p.Qa(t,2),B="#"+K(p,C,-1));break;case 24:7>G?B="@("+hk(p,G)+")+":(C=p.Qa(t,2),B="@#"+K(p,C,-1),z=Sk(p,C));break;case 32:B="-("+hk(p,G)+")";break;case 40:B="@-("+hk(p,G)+")";break;case 48:C=p.Qa(t,2);B=K(p,C,-1)+"("+hk(p,G)+")";7==G&&(B=K(p,C=C+t.J&65535),z=Sk(p,C));break;case 56:C=p.Qa(t,2),B="@"+K(p,C)+"("+hk(p,G)+")",7==G&&(B="@"+K(p,C=C+t.J&65535),z=Sk(p,Mc(p.f,C)))}z&&(B=[B,z])}p=
B;if(!p||!p.length){k="INVALID";break}"string"!=typeof p&&(m=p[1],p=p[0]);0<k.length&&(k+=",");k+=p||"???"}}f="";g=fk(a,e)+":";if(-1!==e.J&&-1!==b.J){do if(f+=" "+K(a,a.Qa(e,2)),null==e.J)break;while(e.J!=b.J)}g+=Fa(f,24);g+=Fa(n,5);k&&(g+=" "+k);if(c||m)g=Fa(g,60)+";"+(c||""),g=a.f.flags.Jb?g+("cycles\x3d"+we(a.f).toString()+" cs\x3d"+v(a.f.jc)):g+(null!=d?"\x3d"+d.toString():""),m&&(";"!=g.slice(-1)&&(g+=" "),g+=m);return g}
function Sk(a,b){b=Ze(a.f,b)[0];b>=a.f.rb&&b<a.C.A&&(b=b-a.f.rb+a.C.A);var c=a.C;a=null;b>=c.A&&(b=c.Oa[b&td])&&(a=b[4]);return a}function Tk(a,b){switch(b){case "N":a=Oe(a.f);break;case "Z":a=Ne(a.f);break;case "V":a=Me(a.f);break;case "C":a=Le(a.f);break;default:a=0}return b.charAt(0)+(a?"1":"0")+" "}function Uk(a,b){var c=hk(a,b);c&&(c+="\x3d"+K(a,a.wd(b))+" ");return c}
function Vk(a,b){var c,d="";for(c=0;6>c;c++)d+=Uk(a,c);d=d+"\n"+(Uk(a,6)+Uk(a,7));d+=Uk(a,kk)+Uk(a,lk)+Uk(a,nk);d+=Tk(a,"T")+Tk(a,"N")+Tk(a,"Z")+Tk(a,"V")+Tk(a,"C");b&&(b=d,c=Uk(a,ok)+Uk(a,pk),c+=Uk(a,qk)+Uk(a,rk)+Uk(a,mk),c=c+"\n"+(Uk(a,tk)+Uk(a,ik)+Uk(a,sk)),d=b+("\n"+c));return d}h.ie=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Jh(a,b,c,d,e){var f=[],g;for(g in e){var k=e[g];"number"==typeof k&&(e[g]=k={o:k});var l=k.o,m=k.a;if(void 0!==l){var n=f;l=[l>>>0,g];var r=Ia(n,l,a.ie);0>r&&n.splice(-(r+1),0,l)}m&&(k.a=m.replace(/''/g,'"'))}a.B.push({Gk:b,J:c,If:d,ga:e,fe:f})}function Wk(a,b,c){var d=[],e=Xj(b)>>>0;for(b=0;b<a.B.length;b++){var f=a.B[b],g=f.J>>>0,k=f.If;if(e>=g&&e<g+k){e=Ia(f.fe,[e-g],a.ie);0<=e?Xk(a,b,e,d):c&&(e=~e,Xk(a,b,e-1,d),Xk(a,b,e,d));break}}return d}
function Xk(a,b,c,d){var e={},f=a.B[b].fe,g=0,k=null;0<=c&&c<f.length&&(g=f[c][0],k=f[c][1]);k&&(e=a.B[b].ga[k],k="."==k.charAt(0)?null:e.l||k);d.push(k);d.push(g);d.push(e.a);d.push(e.c)}function Yk(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return Rj(a)||a.v("no variables"),!0;if(!c[2])return Rj(a,c[1]);if(!c[3])return delete a.i[c[1]],!0;b=Pj(a,c[3]);return void 0!==b?(a.i[c[1]]={value:b,fh:void 0},!0):!1}a.v("invalid assignment:"+b);return!1}
function Zk(a,b,c){var d=null;if(b=ck(a,b,!0)){var e=Wk(a,b,!0);if(e.length){var f;if(e[0]){var g="";(f=b.J-e[1])&&(g=" + "+ya(f));f=e[0]+" ("+K(a,e[1])+")"+g;c&&a.v(f);d=f}4<e.length&&e[4]&&(g="",(f=e[5]-b.J)&&(g=" - "+ya(f)),f=e[4]+" ("+K(a,e[5])+")"+g,c&&a.v(f),d||(d=f))}else c&&a.v("no symbols")}return d}
function zk(a,b){var c;if(b&&"?"==b[1])a.v("register commands:"),a.v("\tr\tdump registers"),a.v("\trm\tdump misc registers"),a.v("\trx [#]\tset flag or register x to [#]");else{var d=!1,e=a.f;null==c&&(c=!0);if(null!=b&&1<b.length){var f=b[1];if("m"==f)d=!0;else{var g=f.indexOf("\x3d");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.v("missing value for "+b[1]);return}g=Pj(a,b);if(void 0===g)return;b=f.toUpperCase();switch(b){case "SP":case "R6":e.g[6]=g&65535;break;case "PC":case "R7":zc(e,
g);a.K=X(e.g[7]);break;case "N":e.H=g?32768:0;break;case "Z":e.K=g?0:1;break;case "V":e.F=g?32768:0;break;case "C":e.B=g?65536:0;break;case "PS":Ld(e,g);break;case "PI":Jd(e,g);break;case "ER":e.O=g;d=!0;break;case "SL":e.Ea=g|255;break;case "M0":Ed(e,g);d=!0;break;case "M3":Id(e,g);d=!0;break;case "AR":a.g&&(d=a.g,tc(d,d.ea=g));d=!0;break;case "DR":a.g&&jc(a.g,g);d=!0;break;case "SR":a.g&&uc(a.g,g);d=!0;break;default:if("R"==b.charAt(0)&&(b=+b.charAt(1),0<=b&&6>b)){e.g[b]=g&65535;break}a.v("unknown register: "+
f);return}Hc(a.I);a.v("updated registers:")}}a.v(Vk(a,d));c&&(a.K=X(e.g[7]),Ak(a,fk(a,a.K)))}}function $k(a,b){b=Ga(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.v(c[2]):Qj(a,null,c[2].charCodeAt(0)):Pj(a,b,!1)}
function al(a,b,c){if("?"==c)a.v("trace commands:"),a.v("\tt  [#]\ttrace # instructions"),a.v("\ttr [#]\ttrace # instructions with register updates"),a.v("\ttc [#]\ttrace # cycles"),a.v("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Kj(a,c,void 0,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.sa=b;bb(c,function(){return Pb(a,!0)&&Dc(a,e,d,!1)},function(){a.g&&a.g.stop();Hc(a.I,-1);Pb(a,!1)})}}
function Ak(a,b,c,d){if(b=ck(a,b,!0)){void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Kj(a,c.substr(1)),null!=c&&(d=c);else{d=ck(a,c,!0);if(!d||d.J<b.J)return;e=d.J-b.J;if(256<e){a.v("range too large");return}d=-1}c=0;for(var f;0<e&&d--;){f=Ob(a,!1)||a.L?a.A:null;var g=null!=f?"cycles":null,k=Wk(a,b),l=b.J;if(k[0]&&d&&(!c&&d||0>k[0].indexOf("+"))){var m=k[0]+":";k[2]&&(m+=" "+k[2]);a.v(m)}k[3]&&(g=k[3],f=null);f=Hk(a,b,g,f);a.v(f);a.K=b;e-=b.J-l;c++}}}
function Gk(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.v(yk+b):(a.R&&(a.v("ended assemble at "+fk(a,a.P)),a.K=a.P,a.R=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.V=null;if(Nb(a)&&0<b.length){a.R&&(b="a "+fk(a,a.P)+" "+b);var f=!1,g=b.replace(/ +/g," ").split(" ");g[0]=g[0].toLowerCase();if(g&&g.length)for(var k=g[0],l=k.charAt(0),m=1;m<k.length;m++){var n=k.charAt(m);if("?"==l||"r"==l||"a">n||"z"<n){g[0]=k.substr(m);g.unshift(k.substr(0,m));break}}switch(g[0].charAt(0)){case "a":var r=
ck(a,g[1],!0);if(r)if(a.P=r,void 0===g[2])a.v("begin assemble at "+fk(a,r)),a.R=!0,Hc(a.I);else{a.v("not supported yet");var t=[];if(t.length){for(var p=0;p<t.length;p++)a.Md(r,t[p],1);a.v(Hk(a,a.P))}}break;case "b":a:{var z=g[0],B=g[1],C=b;if("?"==B)a.v("breakpoint commands:"),a.v("\tbp #\tset exec breakpoint"),a.v("\tbr #\tset read breakpoint"),a.v("\tbw #\tset write breakpoint"),a.v("\tbc #\tclear breakpoint (* to clear all)"),a.v("\tbl\tlist all breakpoints"),a.v("\tbn [#]\tbreak after # instruction(s)");
else{var G=z.charAt(1);if("l"==G){var Fd=Fk(a,a.b);Fd+=Fk(a,a.M);(Fd+=Fk(a,a.H))||a.v("no breakpoints")}else if("n"==G){var Wb=+B||0;B&&(a.fa=Wb);a.v("break after "+Wb+" instruction(s)")}else if(void 0===B)a.v("missing breakpoint address");else{var ca=X();if("*"!=B&&(ca=ck(a,B,!0),!ca))break a;"c"==G?null==ca.J?(Tj(a),a.v("all breakpoints cleared")):Dk(a,a.b,ca)||Dk(a,a.M,ca)||Dk(a,a.H,ca)||a.v("breakpoint missing: "+fk(a,ca)):null!=ca.J&&(ek(a,ca,C),"p"==G?a.xb(a.b,ca):"r"==G?a.xb(a.M,ca):"w"==G?
a.xb(a.H,ca):a.v("unknown breakpoint command: "+G))}}}break;case "c":var yi=a.I;yi.w&&(yi.w.value="");break;case "d":a:{var ac,nb=g[0],Wa=g[1],ob=g[2],yl=g[3];if("?"==Wa){var bc="";for(ac in gc)a.ka[ac]&&(bc&&(bc+=","),bc+=ac);bc+=",state,symbols";a.v("dump memory commands:");a.v("\tda [a]        dump info for address a");a.v("\tdb [a] [n]    dump n bytes at address a");a.v("\tdw [a] [n]    dump n words at address a");a.v("\tdd [a] [n]    dump n dwords at address a");a.v("\tds [a] [n]    dump n words at address a as JSON");
a.v("\tdh [p] [n]    dump n instructions from history position p");bc.length&&a.v("dump extension commands:\n\t"+bc)}else if("state"==Wa){var kf=bl(a.I,!0);if("console"==ob)console.log(kf);else{var zi=a.I;zi.w&&(zi.w.value="");kf&&a.v(kf)}}else if("symbols"==Wa)for(var lf=0;lf<a.B.length;lf++){var mf=a.B[lf],cc;for(cc in mf.ga)if("."!=cc.charAt(0)){var Ai=mf.ga[cc].o;if(void 0!==Ai){var Bi=mf.ga[cc].l;Bi&&(cc=Bi);a.v(K(a,Ai)+" "+cc)}}}else{if("d"==nb){for(ac in gc)if(g[1]==ac){var Ci=a.ka[ac];Ci?
(g.shift(),g.shift(),Ci(g)):a.v("no dump registered for "+Wa);break a}Wa||(nb=a.Ja||"dw")}else a.Ja=nb;if("dh"==nb){var Di=Wa,Ei=ob,Fi="",Gi=0,Ka=a.T,Xa=a.j;if(Xa.length){var Ea=+Di||a.ra,Pc=+Ei||10;isNaN(Ea)?Ea=Pc:Fi="more ";Ea>Xa.length&&(a.v("note: only "+Xa.length+" available"),Ea=Xa.length);Ka-=Ea;0>Ka&&(null==Xa[Xa.length-1].J?(Ea=Ka+Ea,Ka=0):Ka+=Xa.length);var nf=[];"call"==Ei&&(Pc=1E5,nf=["CALL"]);for(void 0!==Di&&a.v(Ea+" instructions earlier:");0<Pc&&Ka!=a.T;){var Hi=Xa[Ka++];if(null==Hi.J)break;
var Qc=X(Hi.J),zl=Ea--,Ii=Hk(a,Qc,"history",zl);(!nf.length||0<=Ii.indexOf(nf[0]))&&a.v(Ii);Qc.td&&(Ka+=Qc.td,Pc-=Qc.td,Ea-=Qc.td);Ka>=Xa.length&&(Ka=0);a.ra=Ea;Gi++;Pc--}}Gi||(a.v("no "+Fi+"history available"),a.ra=void 0)}else{var ra=ck(a,Wa);if(ra)if("da"==nb){var of=ra.La||65535<ra.J,O=Ze(a.f,ra.J||0,of);a.v(Fa("",of?12:19)+wa(ra.J,of?22:17,3)+"  "+u(ra.J,8));6>O.length?(2<O.length&&(a.v("    OFFSET:             "+wa(O[3],13,3)+"  "+u(O[3],8)),a.v("UNIMAP["+xa(O[1],2)+"]: "+wa(O[2],22,3)+"  "+
u(O[2],8))),a.v("  PHYSICAL: "+wa(O[0],22,3)+"  "+u(O[0],8))):(a.v("    OFFSET:             "+wa(O[1],13,3)+"  "+u(O[1],8)),a.v("+   "+cl[O[2]]+"PAR"+O[3]+": "+wa(O[4],22,3)+"  "+u(O[4],8)),a.v("\x26  MMUMASK: "+wa(O[5],22,3)+"  "+u(O[5],8)),a.v("\x3d PHYSICAL: "+wa(O[0],22,3)+"  "+u(O[0],8)))}else{var yb=0,pf="ds"==nb;if(ob){if("l"==ob.charAt(0))ob=ob.substr(1)||yl,yb=Kj(a,ob);else{var Ji=ck(a,ob);Ji&&(yb=Ji.J-ra.J)}0>yb&&(yb=0);65536<yb&&(yb=65536)}var Bl=a.W;ra.W&&(a.W=ra.W);for(var zb="dd"==nb?
4:"db"==nb?1:2,Od=zb*yb||128,qf=pf?16:a.W,Cl=(Od+qf-1)/qf|0||1,Ab="";Cl--&&0<Od;){var Bb="",Ki="";Wa=fk(a,ra);for(var Pd=qf,Qd=0,Rd=0;0<Pd&&0<Od;){var dc=1,rf=1==zb?a.Ld(ra,dc):a.Qa(ra,dc=2);Qd|=rf<<(Rd<<3);Rd+=dc;Rd==zb&&(pf?(Bb&&(Bb+=","),Bb+="0x"+v(Qd,zb<<1)):(Bb+=K(a,Qd,zb<<3),Bb+=1==zb?9==Pd?"-":" ":"  "),Qd=Rd=0);Pd-=dc;for(Od-=dc;1==zb&&dc--;){var sf=rf&255;Ki+=32<=sf&&127>sf?String.fromCharCode(sf):".";rf>>=8}}Ab&&(Ab+="\n");Ab=pf?Ab+(Bb+","):Ab+(Wa+":  "+Bb+(0==Pd?" "+Ki:""))}Ab&&a.v(Ab);
a.Ea=ra;a.W=Bl}}}}break;case "e":if("else"==g[0])break;var tf=g[0],uf=g[1];if("eb"==tf){var Rc=1;var Li=255;var Mi=a.Ld;var Ni=a.Md}else"e"==tf||"ew"==tf?(Rc=2,Li=65535,Mi=a.Qa,Ni=a.He):uf=null;if(null==uf)a.v("edit memory commands:"),a.v("\teb [a] [...]  edit bytes at address a"),a.v("\tew [a] [...]  edit words at address a");else{var Sd=ck(a,uf);if(Sd)for(var Td=2;Td<g.length;Td++){var Sc=Pj(a,g[Td]);if(void 0===Sc){a.v("unrecognized value: "+g[Td]);break}Sc&~Li&&a.v("warning: "+v(Sc)+" exceeds "+
Rc+"-byte value");a.v("changing "+fk(a,Sd)+(E(a,16)?"":" from "+K(a,Mi.call(a,Sd),Rc<<3))+" to "+K(a,Sc,Rc<<3));Ni.call(a,Sd,Sc,Rc)}}break;case "g":a:{var Oi=g[1],Dl=b;if(void 0!==Oi){var vf=ck(a,Oi,!0);if(!vf)break a;ek(a,vf,Dl);a.xb(a.b,vf,!0)}wk(a,!0,c)}break;case "h":a.flags.U?(c||a.v("halting"),uk(a)):Ob(a,!0)||c||a.v("already halted");break;case "i":if("if"==g[0]){var Tc=b.substr(2);Tc=Ga(Tc);if(Pj(a,Tc)){c||a.v("true: "+Tc);var Pi=!0}else c||a.v("false: "+Tc),Pi=!1;Pi||(d=!1);break}f=!0;break;
case "k":var El=g[0];if("?"==g[1])a.v("stack trace commands:"),a.v("\tk\tshow frame addresses"),a.v("\tks\tshow symbol information");else{var wf=0,xf=X(),Uc=X(a.f.g[6]);for(a.v("stack trace for "+fk(a,Uc));10>wf;){for(var Cb=null,Fl=256;65536>Uc.J>>>0;){xf.J=a.Qa(Uc,2);if(null==Uc.J||!Fl--)break;if(!(xf.J&1)){for(var Gl=a,Ud=xf,Qi=null,Vc=Ud.J,Ri=Vc,yf=1;6>=yf&&Vc;yf++){if(2<yf){Ud.J=Vc;var Vd=Hk(Gl,Ud);if(0<=Vd.indexOf("JSR")){var Si=Vd.indexOf(" ");if(Vc+(Vd.indexOf(" ",Si+1)-Si-1)/2==Ri){Qi=Vd;
break}}}Vc-=2}Ud.J=Ri;if(Cb=Qi)break}}if(!Cb||null==Cb)break;var Ti=null;if("ks"==El){var Ui=Cb.match(/[0-9A-F]+$/);Ui&&(Ti=Zk(a,Ui[0]))}Cb=Fa(Cb,50)+"  ;"+(Ti||"stack\x3d"+fk(a,Uc));a.v(Cb);wf++}wf||a.v("no return addresses found")}break;case "l":if("ln"==g[0]){Zk(a,g[1],!0);break}f=!0;break;case "m":a:{var Ya,Za=null,T=g[1];"?"==T&&(T=void 0);if(void 0!==T){var pb=0;if("all"==T)pb=1610610687,T=null;else if("on"==T)Za=!0,T=null;else if("off"==T)Za=!1,T=null;else{"keys"==T&&(T="key");"kbd"==T&&(T=
"keyboard");for(Ya in gc)if(T==Ya){pb=gc[Ya];Za=!!(a.ha&pb);break}if(!pb){a.v("unknown message category: "+T);break a}}if(pb)if("on"==g[2])a.ha|=pb,Za=!0;else if("off"==g[2]&&(a.ha&=~pb,Za=!1,536870912==pb)){for(var Vi=1E3<=a.N.length?a.N.length-1E3:0;Vi<a.N.length;)a.v(a.N[Vi++]);a.N=[]}}var Hl=0,Wc="";for(Ya in gc)if(!T||T==Ya){var Il=!!(a.ha&gc[Ya]);if(null===Za||Za==Il)Wc&&(Wc+=","),++Hl%10||(Wc+="\n\t"),"key"==Ya&&(Ya="keys"),Wc+=Ya}void 0===T&&a.v("message commands:\n\tm [category] [on|off]\tturn categories on/off");
a.v((null!==Za?Za?"messages on:  ":"messages off: ":"message categories:\n\t")+(Wc||"none"));Uj(a)}break;case "p":if("print"==g[0]){$k(a,b.substr(5));break}var Jl=g[0];if("?"==g[1])a.v("step commands:"),a.v("\tp\tstep over instruction"),a.v("\tpr\tstep over instruction with register update");else{var Wi="pr"==Jl?1:0,Xi=1+Wi;if(a.L)a.v("step in progress");else{var Wd=X(a.f.g[7]),ec=a.Qa(Wd);3==ec||4==ec||34816==(ec&65280)||32256==(ec&65024)||35072==(ec&65280)?(a.L=Xi,dk(Wd,2)):2048==(ec&65024)&&(Hk(a,
Wd),a.L=Xi);a.L?(a.xb(a.b,Wd,!0),wk(a)||(a.I&&Ae(a.I),a.L=0)):al(a,Wi?"tr":"t")}}break;case "r":if("reset"==b){a.I&&a.I.reset();break}zk(a,g);break;case "s":a:switch(g[1]){case "base":if(g[2]){var Xc=+g[2];if(8==Xc||10==Xc||16==Xc)a.W=Xc;else{a.v("invalid base: "+Xc);break}}a.v("default base: "+a.W);break;case "cs":var Yc;void 0!==g[3]&&(Yc=+g[3]);switch(g[2]){case "int":a.f.Ib=Yc;break;case "start":a.f.kc=Yc;break;case "stop":a.f.Mb=Yc;break;default:a.v("unknown cs option");break a}void 0!==Yc&&
se(a.f);a.v("checksums "+(a.f.flags.Jb?"enabled":"disabled"));break;case "sp":void 0!==g[2]&&(xe(a.f,+g[2])||a.v("warning: using 1x multiplier, previous target not reached"));a.v("target speed: "+(a.f.tb.toFixed(2)+"Mhz")+" ("+a.f.kb+"x)");break;default:if(g[1]){a.v("unknown option: "+g[1]);break}case "?":a.v("debugger options:"),a.v("\tbase #\t\tset default base to #"),a.v("\tcs int #\tset checksum cycle interval to #"),a.v("\tcs start #\tset checksum cycle start count to #"),a.v("\tcs stop #\tset checksum cycle stop count to #"),
a.v("\tsp #\t\tset speed multiplier to #")}break;case "t":al(a,g[0],g[1]);break;case "u":Ak(a,g[1],g[2],8);break;case "v":if("var"==g[0]){Yk(a,b.substr(3))||(d=!1);break}if("ver"==g[0]){a.v((Rb||"PDP11")+" version 1.67.0 ("+a.f.ia+",RELEASE"+(Tb?",TYPEDARRAYS":Sb?",BYTEARRAYS":",LONGARRAYS")+")");a.v(window?window.navigator.userAgent:"");break}f=!0;break;case "?":if(g[1]){$k(a,b.substr(1));break}var zf="commands:",Af;for(Af in dl)zf+="\n"+Fa(Af,9)+dl[Af];Df(a)||(zf+="\nnote: history disabled if no exec breakpoints");
a.v(zf);break;default:f=!0}f&&(a.v("unknown command: "+b),d=!1)}}catch(Zi){a.v("debugger error: "+(Zi.stack||Zi.message)),d=!1}return d}function ve(a,b,c){b=Gj(a,b,c);for(var d in b)if(!Gk(a,b[+d]))return!1;return!0}
var dl={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Jk=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),
kk=20,lk=21,mk=22,nk=23,ok=24,pk=25,qk=26,rk=27,ik=28,sk=29,tk=30,gk={SP:6,PC:7,PS:kk,PI:lk,ER:mk,SL:nk,M0:ok,M1:pk,M2:qk,M3:rk,AR:ik,DR:sk,SR:tk},jk="R0 R1 R2 R3 R4 R5 SP PC A0 A1 A2 A3 A4 A5 A6 A7 S0 S1 S2 S3 PS PI ER SL M0 M1 M2 M3 AR DR SR".split(" "),cl="KI KD SI SD ?? ?? UI UD".split(" "),Qk=7,Rk=56,Z=Rk|Qk,Pk=4032,Y=4096,Lk=8192,Mk=12288,Nk=24576,Ok=32768,Kk=61440,Wj={61440:{4096:[62,Pk,Z],8192:[47,Pk,Z],12288:[18,Pk,Z],16384:[14,Pk,Z],20480:[16,Pk,Z],24576:[3,Pk,Z],36864:[63,Pk,Z],40960:[48,
Pk,Z],45056:[19,Pk,Z],49152:[15,Pk,Z],53248:[17,Pk,Z],57344:[94,Pk,Z]},65024:{2048:[57,448,Z],28672:[100,Z,448],29184:[101,Z,448],29696:[102,Z,448],30208:[103,Z,448],30720:[104,448,Z],32256:[105,448,Lk]},65280:{256:[27,Y],512:[24,Y],768:[10,Y],1024:[11,Y],1280:[22,Y],1536:[12,Y],1792:[20,Y],32768:[25,Y],33024:[23,Y],33280:[13,Y],33536:[21,Y],33792:[28,Y],34048:[29,Y],34304:[8,Y],34560:[9,Y],34816:[106,Ok],35072:[107,Ok]},65472:{64:[56,Z],192:[95,Z],2560:[39,Z],2624:[49,Z],2688:[53,Z],2752:[51,Z],
2816:[67,Z],2880:[1,Z],2944:[77,Z],3008:[97,Z],3072:[73,Z],3136:[71,Z],3200:[6,Z],3264:[4,Z],3328:[58,Nk],3392:[60,Z],3456:[65,Z],3520:[96,Z],35328:[40,Z],35392:[50,Z],35456:[54,Z],35520:[52,Z],35584:[68,Z],35648:[2,Z],35712:[78,Z],35776:[98,Z],35840:[74,Z],35904:[72,Z],35968:[7,Z],36032:[5,Z],36096:[66,Z],36160:[59,Z],36224:[64,Z],36288:[61,Z]},65528:{128:[76,Qk],152:[108,Mk]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],
166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],191:[79]}},Ik=[0],ak=[58,60,65,96,110,100,101,102,103,104,105],bk=[108,59,64],vk=1E3,yk="\x3e\x3e ";eb(function(){for(var a=A(document,y,"debugger"),b=0;b<a.length;b++){var c=a[b],d=wb(c);d=new Sj(d);vb(d,c)}});
function el(a,b,c){x.call(this,"Computer",a,33554432);this.flags.ba=!1;this.O=null;fl(this,b);this.L=qe(this,"autoPower",a,6);this.j=0;this.T=+a.busWidth||+a.buswidth;this.H=this.A=this.K=null;this.F=this.R=!1;this.B=this.u=null;this.P=this.M=this.N=!1;this.V=qe(this,"url")||"";(Math.random()+.1).toString(36);this.g=gl(this);if(this.f=Eb("CPU",this.id)){this.D=Eb("Debugger",this.id);this.C=new $c({id:this.gb+".bus",busWidth:this.T},this.f,this.D);var d=xb(this.id);if(this.w=(this.i=Eb("Panel",this.id))&&
this.i.G.print)for(b=0;b<d.length;b++){var e=d[b];e.S=this.i.S;e.print=this.i.print;e.v=this.i.v}this.v(Rb+" v1.67.0\nCopyright \u00a9 2012-2018 Jeff Parsons \x3cJeff@pcjs.org\x3e\nLicense: GPL version 3 or later \x3chttp://gnu.org/licenses/gpl.html\x3e");this.v("Portions adapted from the PDP-11/70 Emulator by Paul Nankervis \x3chttp://skn.noip.me/pdp11/pdp11.html\x3e");for(b=0;b<d.length;b++)e=d[b],e.za&&e.za(this,this.C,this.f,this.D);b=null;e=qe(this,"resume",a);void 0!==e&&(1<e.length?b=this.A=
e:this.b=parseInt(e,10));var f;if(a=qe(this,"state")||(f=!0,a.state))this.K=b=a,f||(this.F=!0,this.b=hl),this.b&&(this.B=new H(this,"1.67.0"),this.B.load()?b=null:delete this.B);!b&&this.b&&(b=il(this))&&(this.F=!0);if(b){var g=this;Na(b,null,!0,function(a,b,c){c?(g.A=null,g.F=!1,g.S("Unable to load machine state from server (error "+c+(b?": "+Ga(b):"")+")")):(g.H=b,g.R=!0);D(g)})}else D(this);this.G.power||(this.L=!0);!c&&this.L&&this.wait(this.nc)}else w("Unable to find CPU component")}q(el,x);
function fl(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){w(d.message+" ("+c+")")}}a.O=b}function qe(a,b,c,d){var e=b.toLowerCase();e=$a(b)||$a(e);void 0===e&&a.O&&(e=a.O[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}h=el.prototype;
h.wait=function(a,b){for(var c=this,d=xb(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!Nb(f)){Nb(f,function(){c.wait(a,b)});return}}a.call(this,b)};function jl(a,b){var c=new H(a,"1.67.0",kl);if(c.load()&&ll(c)){var d=c.get(ml),e=b?b.get(ml):"unknown";d!=e&&(a.S("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}
h.nc=function(a){void 0===a&&(a=this.b||(this.H?nl:hl));if(!this.j){this.j++;var b=!1,c=!1;this.N=!1;var d=this.B||new H(this,"1.67.0");if(a==ol)b=!0;else if(a>hl){if(d.load(this.H)){this.u=new H(this,"1.67.0",pl);this.u.load()&&(ql(this,d),a=rl,sl(this.u));this.u.set(ml,Ja());this.u.store();var e=this.b&&!this.F;if(a==nl||tb("Click OK to restore the previous "+Rb+" machine state, or CANCEL to reset the machine.")){if(c=ll(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?d.load(g):("error"==f&&
"no machine state"!=g?(this.S("Error: "+g),"unable to verify user"==g&&(Ta(tl,""),this.g=null)):this.v(f+": "+g),sl(d),d.load()?(c=ll(d),e=!0):c=!1))}e&&jl(this,c?d:null)}else a==rl&&d.clear()}else jl(this);delete this.H;delete this.B}e=xb(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.f&&(c=ul(this,g,d,b,c));b=[d,a,c];a!=ol?this.wait(this.ke,b):this.ke(b)}};
function ul(a,b,c,d,e){if(!b.flags.ba){b.flags.ba=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/-[0-9]+\./i,".")))),"string"===typeof f&&(f=null),!b.Ba(f,d)&&f&&(w("Unable to restore state for "+b.type),a.K&&!a.R?(c.clear(),a.b=hl,window&&window.location.reload()):a.N=!0,b.Ba(null),e=!1),!d&&b.Rd){var g=b.Rd.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(k){w("Error restoring state for "+b.type+" ("+k.message+")")}}return e}
h.ke=function(a){var b=a[0],c=0>a[1];a=a[2];this.P=!0;this.flags.ba=!0;var d=this.G.power;d&&(d.textContent="Shutdown");this.f&&(ul(this,this.f,b,c,a),Hc(this,-2),this.f.pa());this.N&&(ql(this,b),b.clear());!c&&this.u&&(this.u.clear(),delete this.u);this.j=0};
function ql(a,b){if(tb("There may be a problem with your "+Rb+" machine.\n\nTo help us diagnose it, click OK to send this "+Rb+" machine state to http://www.pcjs.org.")){var c=a.V;a=a.g||"";b=b.toString();var d={};d.app=Rb;d.ver="1.67.0";d.url=c;d.user=a;d.type="bug";d.data=b;Na("http://www.pcjs.org/api/v1/report",d,!0)}}
function bl(a,b,c){var d="none";if(a.j)return null;a.j--;var e=new H(a,"1.67.0"),f=new H(a,"1.67.0",kl),g=Ja();f.set(ml,g);e.set(ml,g);e.set(vl,"1.67.0");e.set(wl,window?window.location.href:null);e.set(xl,window?window.navigator.userAgent:"");if(a.f&&a.f.Aa){c&&(b&&(a.f.flags.pa=a.f.flags.U),I(a.f));var k=a.f.Aa(b,c);"object"===typeof k&&e.set(a.f.id,k);c&&(a.f.flags.ba=!1,!1===k&&(d=null))}g=xb(a.id);for(var l=0;l<g.length;l++){var m=g[l];m.flags.ba&&(m.Aa&&(k=m.Aa(b,c),"object"===typeof k&&e.set(m.id,
k)),c&&(m.flags.ba=!1,!1===k&&(d=null)))}d&&(c?(g=k=!1,b?(a.g&&Al(a,a.g,e.toString()),f.store()&&e.store()||(d=null,k=g=!0)):a.b&&(k=!0,g=a.b==Kl),k&&e.clear(g)):d=e.toString());c&&(a.flags.ba=!1,b=a.G.power)&&(b.textContent="Power");a.j=0;return d}
h.reset=function(){this.flags.reset=!0;this.C&&this.C.reset&&(F(this,"Resetting "+this.C.type),this.C.reset());this.f&&this.f.reset&&(F(this,"Resetting "+this.f.type),this.f.reset());for(var a=xb(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.C&&c!==this.f&&c.reset&&(F(this,"Resetting "+c.type),c.reset())}this.flags.reset=!1;Hc(this,-1)};h.start=function(a,b){for(var c=xb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}Hc(this,-1)};
h.stop=function(a,b){for(var c=xb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}Hc(this,-1)};
function Hc(a,b){if(a.f){var c=a.f,d=b||0,e=c.G.speed;e&&(0>=d||30<=(c.Wc+=d))&&(e.textContent=c.flags.U?c.sb.toFixed(2)+"Mhz":"Stopped",c.Wc=0)}if(a.i&&(a=a.i,b=b||0,a.w)){c=a.f.flags.U;d=!!(a.f.i&8);if(0>=b||60<=(a.u+=b)){for(e=0;e<a.f.g.length;e++)xc(a,"R"+e,a.f.g[e]);e=Kd(a.f);xc(a,"PS",e);xc(a,"NF",e&8?1:0,1);xc(a,"ZF",e&4?1:0,1);xc(a,"VF",e&2?1:0,1);xc(a,"CF",e&1?1:0,1);a.u=0}-1>b?a.ea=a.f.g[7]:0<b&&c&&!d&&(a.ea=a.f.Ra);tc(a,a.ea);kc(a,a.Ab);b=a.f;b=b.ub?b.V&16?1:2:4;Oc(a,"B22",b&1);Oc(a,"B18",
b&2);Oc(a,"B16",b&4)}}
h.ua=function(a,b,c){var d=this;switch(b){case "power":return this.G[b]=c,c.onclick=function(){d.j||(d.flags.ba?bl(d,!1,!0):d.wait(d.nc))},!0;case "reset":return this.G[b]=c,c.onclick=function(){if(d.flags.ba&&!d.j)if(d.b&&!d.A){var a=tb("Click OK to save changes to this "+Rb+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");bl(d,a,!0);!a&&d.K?window&&window.location.reload():(a||(d.M=!0),d.nc(hl),d.M=!1)}else d.reset(),d.f&&!d.D&&d.f.pa()},!0;case "save":if(Ba(Pa(),"pcjs.org"))c.parentNode.removeChild(c);
else return this.G[b]=c,c.onclick=function(){var a=gl(d,!0);if(a){var b=!!(d.b&&!d.A||d.K),c=bl(d,b);b?Al(d,a,c):d.S("Resume disabled, machine state not saved")}},!0}return!1};
function gl(a,b){var c=a.g;c||((c=Sa(tl),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Ll(a,c))||a.S("The user ID is invalid.")):b&&a.S("Browser local storage is not available"));return c}
function Ll(a,b){a.g=null;b=Na(Pa()+"/api/v1/user?req\x3dverify\x26user\x3d"+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(Ta(tl,b.data),a.g=b.data)}catch(d){w(d.message+" ("+c+")")}return a.g}function il(a){var b=null;a.g&&(b=Pa()+"/api/v1/user?req\x3dload\x26user\x3d"+a.g+"\x26state\x3d"+Ml(a,"1.67.0"));return b}
function Al(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Ml(a,"1.67.0");d.data=c;b=Na(Pa()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.S("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.S(c),Ta(tl,""),a.g=null)}}
function Zh(a){var b;a=xb(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function Ae(a,b){if(a.w){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.w.focus();!b&&window&&window.scrollTo(c,d)}}var pl="failsafe",kl="validate",ml="timestamp",vl="version",wl="url",xl="browser",tl="user",ol=-1,hl=0,nl=1,rl=2,Kl=3;
eb(function(){for(var a=A(document,y+"-machine"),b=0;b<a.length;b++){var c=a[b],d=wb(c);c=A(c,y,"computer");for(var e=0;e<c.length;e++){var f=c[e],g=wb(f);g=new el(g,d,!0);vb(g,f);g.L&&g.wait(g.nc)}}});fb.show.push(function(){for(var a=A(document,y,"computer"),b=0;b<a.length;b++){var c=wb(a[b]);if(c=Eb("Computer",c.id))c.flags.Ed=!1,c.P&&!c.flags.ba&&c.nc(ol)}});
fb.exit.push(function(){for(var a=A(document,y,"computer"),b=0;b<a.length;b++){var c=wb(a[b]);if(c=Eb("Computer",c.id))c.flags.Ed=!0,c.flags.ba&&bl(c,!(!c.b||c.A),!0)}});function H(a,b,c){this.id=a.id;this.b="";this.f={};this.g=this.C=!1;this.key=Ml(a,b,c);sl(this,a.sf)}h=H.prototype;h.set=function(a,b){try{this.f[a]=b}catch(c){}};h.get=function(a){return this.f[a]||null};h.data=function(){return this.f};
h.load=function(a){return a?(this.b=a,this.g=!0,this.C=!1,!0):this.g?!0:Qa()&&(a=Sa(this.key))?(this.b=a,this.g=!0):!1};function ll(a){var b=!0;if(!a.C)try{a.f=JSON.parse(a.b),a.C=!0}catch(c){w(c.message||c),b=!1}return b}h.store=function(){var a=!0;if(Qa()){var b=JSON.stringify(this.f);Ta(this.key,b)||(w("Unable to store "+b.length+" bytes in browser local storage"),a=!1)}return a};h.toString=function(){return this.f?JSON.stringify(this.f):this.b};
function sl(a,b){a.b="";a.f={};a.g=a.C=!1;b&&a.set("parms",b)}h.clear=function(a){sl(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function Ml(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Nl=0;
function Ol(a,b,c,d,e,f,g,k){g("Loading "+a+"...");Na(a,null,!0,function(l,m,n){n?(m||(m="unable to load "+a+" ("+n+")"),k(m,null)):Pl(m,a,b,c,d,e,f,g,k)})}
function Pl(a,b,c,d,e,f,g,k,l){function m(a,k){if(k)l(k,null);else{if(c){qb(c,b,a);(k=b)&&0>k.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(k=window.location.pathname+k);e?"}"==e.slice(-1)?(e=e.slice(0,-1),1<e.length&&(e+=",")):e='{state:"'+e+'",':e="{";e+='url:"'+k+'"}';"object"==typeof resources&&(k=null);e=e.replace(/\$/g,"$$$$");if(f){var m=a.match(/(<machine[^>]*\sclass=)(['"])(.*?)(\2.*?>)/);m&&(a=a.replace(m[0],m[1]+m[2]+f+m[4]),f="")}a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,
"$1$2"+c+"$2"+(f?' class\x3d"'+f+'"':"")+(e?" parms\x3d'"+e+"'":"")+(k?' url\x3d"'+k+'"':""))}g||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+d+"$2"));k=null;if("\x3c"==a.charAt(0))try{g||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(k=new window.ActiveXObject("Microsoft.XMLDOM"),k.async=!1,k.loadXML(a)):k=(new window.DOMParser).parseFromString(a,
"text/xml")}catch(p){k=null,a=p.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);l(a,k)}}a?g?Ql(a,k,m):m(a,""):l("no data"+(b?" for file: "+b:""),null)}
function Ql(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");Na(e,null,!0,function(f,g,k){if(k||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(f=d[3])if(k=g.match(new RegExp("\x3c"+d[1]+"[^\x3e]*\x3e"))){for(var l=k[0],m,n=/( [a-z]+=)(['"])(.*?)\2/gi;m=n.exec(f);)l=0>l.toLowerCase().indexOf(m[1].toLowerCase())?l.replace("\x3e",m[0]+"\x3e"):l.replace(new RegExp(m[1]+"(['\"])(.*?)\\1"),m[0]);k[0]!=l&&(g=g.replace(k[0],l))}else{c(a,"missing \x3c"+
d[1]+"\x3e in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],g);Ql(a,b,c)}})}else c(a,"")}
function Rl(a,b,c,d,e,f){function g(a){if(void 0===m){var b=l&&A(l,"machine-warning");m=b&&b[0]||l}m&&(m.innerHTML=Ca(a))}function k(a){g("Error: "+a);n&&(--Nl||ib(!0));n=!1}var l,m,n=!0;c||(c="machine.xml",d||(d="components.xsl"));Nl++;rb[b]={};try{if(l=document.getElementById(b)){var r;if("object"==typeof resources&&(r=resources.css)){var t=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.type="text/css";p.styleSheet?p.styleSheet.cssText=r:p.appendChild(document.createTextNode(r));
t.appendChild(p)}d||(r=a,"pdp"==a.substr(0,3)&&(r="pdpjs"),d="/versions/"+r+"/1.67.0/components.xsl");r=function(e,f){f?Ol(d||"","",a,"","",!1,g,function(a,e){e?(qb(b,d||"",a),g("Processing "+c+"..."),window.ActiveXObject||"ActiveXObject"in window?(e=f.transformNode(e))?(l.outerHTML=e,--Nl||ib(!0)):k("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(a=new XSLTProcessor,a.importStylesheet(e),(e=a.transformToFragment(f,document))?l.parentNode?(l.parentNode.replaceChild(e,
l),--Nl||ib(!0)):k("invalid machine element: "+b):k("transformToFragment failed")):k("unable to transform XML: unsupported browser")):k(a)}):k(e)};"\x3c"!=c.charAt(0)?Ol(c,b,a,e||"",f||"",!0,g,r):Pl(c,"",b,a,e||"",f||"",!1,g,r)}else k("missing machine element: "+b)}catch(z){k(z.message)}return n}window.embedPDP10=function(a,b,c,d,e){ib(!1);return Rl("pdp10",a,b,c,d,e)};window.embedPDP11=function(a,b,c,d,e){ib(!1);return Rl("pdp11",a,b,c,d,e)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete Gb[c],d=!0;else if("string"==typeof f&&!Gb[c]){d=!0;e=Gb;for(var g=c,k=f.length,l=[],m=[],n="",r=null,t=0;t<k;t++){var p=f[t];if('"'==p||"'"==p)r&&p!=r?n+=p:(r?r=null:r=p,n&&(m.push(n),n=""));else{if(!r){if("\r"==p||"\n"==p)p=";";if(" "==p||"\t"==p||";"==p){n&&(m.push(n),n="");";"==p&&m.length&&(l.push(m),m=[]);continue}}n+=p}}n&&m.push(n);m.length&&l.push(m);e[g]=l;Fb(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=Eb(d,c+".machine"))&&(k=g.exports)&&(k=k[e]))return k.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=ib;window.sendEvent=kb;})()
//# sourceMappingURL=pdp11.js.map
