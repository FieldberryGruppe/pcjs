(function(){/*
 https://www.pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/messages.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/device.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/rom.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/ram.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/computer.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/defines.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/panel.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/bus.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/memory.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/cpu.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/cpustate.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/cpuops.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/serial.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/debugger.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp10/lib/macro10.js (C) Jeff Parsons 2012-2019
*/
var m,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(){ca=function(){};ba.Symbol||(ba.Symbol=da)}var da=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function ea(){ca();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return fa(this)}});ea=function(){}}function fa(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ha(a){ea();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function ia(a){ea();ca();ea();var b=a[Symbol.iterator];return b?b.call(a):fa(a)}
var la="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ma;if("function"==typeof Object.setPrototypeOf)ma=Object.setPrototypeOf;else{var pa;a:{var qa={xb:!0},ra={};try{ra.__proto__=qa;pa=ra.xb;break a}catch(a){}pa=!1}ma=pa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var sa=ma;
function ta(a,b){a.prototype=la(b.prototype);a.prototype.constructor=a;if(sa)sa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.yd=b.prototype}function ya(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}
function za(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}za("Math.trunc",function(a){return a?a:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b}});za("Number.parseInt",function(a){return a||parseInt});za("Math.log2",function(a){return a?a:function(a){return Math.log(a)/Math.LN2}});
var Aa={sc:0,Lb:1,uc:2,vc:3,wc:4,xc:5,yc:6,zc:7,vb:8,Ac:9,Mb:10,Bc:11,Cc:12,Nb:13,Dc:14,Ec:15,Fc:16,Gc:17,Hc:18,Ic:19,Jc:20,Kc:21,Lc:22,Mc:23,Nc:24,Oc:25,Pc:26,Rc:27," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"\x26":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"\x3c":60,"\x3d":61,"\x3e":62,"?":63,"@":64,ub:65,rc:66,tc:67,Qc:68,E:69,Sc:70,Tc:71,Uc:72,Vc:73,Wc:74,Xc:75,Yc:76,Zc:77,$c:78,ad:79,bd:80,Q:81,cd:82,dd:83,ed:84,
fd:85,gd:86,hd:87,jd:88,kd:89,Pb:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,xb:97,ld:98,md:99,d:100,e:101,nd:102,od:103,pd:104,qd:105,sd:106,k:107,td:108,ud:109,n:110,vd:111,p:112,q:113,r:114,wd:115,t:116,zd:117,Ad:118,Bd:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Ob:127};function Ba(){}
function Ca(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(f=parseInt(a,b))){e&&(0>f&&(f+=Math.pow(2,36)),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function Da(a,b,c,d,e){e=void 0===e?0:e;var f="";isNaN(a)||"number"!=typeof a?a=null:(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;0<c--;){g||(f=","+f,g=e);if(null==a)f="?"+f;else{var h=a%b;h+=0<=h&&9>=h?48:55;f=String.fromCharCode(h)+f;a=Math.trunc(a/b)}g--}return(void 0===d?"":d)+f}function Ea(a,b,c){b?12<b&&(b=12):(b=Math.abs(a),b=262143>=b?6:16777215>=b?8:12);return Da(a,8,b,c?"0o":"")}
function Fa(a,b){b?11<b&&(b=11):b=99999>=Math.abs(a)?5:11;return Da(a,10,b)}function n(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);return Da(a,16,b,c?"0x":"")}function Ja(a){var b=a,c=a.lastIndexOf("/");0<=c&&(b=a.substr(c+1));c=b.indexOf("\x26");0<c&&(b=b.substr(0,c));return b}function Ka(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function La(a,b){return-1!==a.indexOf(b,a.length-b.length)}
function Ma(a){return a.replace(/[&<>"'$]/g,function(a){return Na[a]})}function Oa(a,b){return(a+"                                        ").slice(0,b)}function Pa(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return void 0===b[0]?new Date(Date.now()):"string"===typeof b[0]?new Date(b[0]+" "+(b[1]||"00:00:00 GMT")):void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,b instanceof Array?b:ya(ia(b))))}
function Qa(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),f=0,g;for(g=0;g<e.length-6;g+=6){d+=e[g];var h=e[g+5],k="ACDFHIMNSTWYdfjcsoXx%".indexOf(h);if(0>k)d+="%"+e[g+1]+e[g+2]+e[g+3]+e[g+4]+h;else{if(f<c.length){var l=c[f];"%"!=h&&f++}else l=c[c.length-1];var p=e[g+1],q=e[g+2];"*"==q?(q=l,l=f<c.length?c[f++]:c[c.length-1]):q=+q||0;var w=e[g+3];w=w?+w.substr(1):-1;var r=0<=p.indexOf("#"),G=null,ka=0,N="";
k=12>k&&"object"!=typeof l?Pa(l):l;switch(h){case "C":l=r?"#":"";d+=isNaN(k.getTime())?void 0:Qa(Qa("%%%sW, %%%sF %%%sD, %%%sY",l),k);continue;case "D":l=r?k.getUTCDate():k.getDate();h="d";break;case "A":case "H":case "I":l=r?k.getUTCHours():k.getHours();"A"==h?(l=12>l?"am":"pm",h="s"):("I"==h&&(l=l?12<l?l-12:l:12),h="d");break;case "F":case "M":l=r?k.getUTCMonth():k.getMonth();"F"==h?(l=Ra[l],h="s"):(l++,h="d");break;case "N":l=r?k.getUTCMinutes():k.getMinutes();h="d";break;case "S":l=r?k.getUTCSeconds():
k.getSeconds();h="d";break;case "T":l=r?"#":"";d+=isNaN(k.getTime())?void 0:Qa(Qa("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",l),k);continue;case "W":l=Wa[r?k.getUTCDay():k.getDay()];h="s";break;case "Y":l=r?k.getUTCFullYear():k.getFullYear(),0<w&&(l%=Math.pow(10,w),w=-1),h="d"}switch(h){case "d":l=Math.trunc(l);case "f":h=l+"";0<w&&(q-=w+1);h.length<q&&(0<=p.indexOf("0")?(0>l&&q--,h=("0000000000"+Math.abs(l)).slice(-q),0>l&&(h="-"+h)):h=("          "+h).slice(-q));0<w&&(l=Math.round((l-Math.trunc(l))*
Math.pow(10,w)),h+="."+("0000000000"+Math.abs(l)).slice(-w));d+=h;break;case "j":d+=JSON.stringify(l,null,q||null);break;case "c":l="string"==typeof l?l[0]:String.fromCharCode(l);case "s":if(void 0!==l)for("string"!=typeof l&&(l=l.toString()),0<=w&&(l=l.substr(0,w));l.length<q;)l=0<=p.indexOf("-")?l+" ":" "+l;d+=l;break;case "o":ka=8,r&&(N="0");case "X":G=Xa,r&&(N="0X");case "x":h="";ka||(ka=16);!N&&r&&(N="0x");G||(G=Ya);"string"==typeof l&&(l=Number.parseInt(l,l.match(/(^0x|[a-f])/i)?16:10));w=q?
"":N;do r=l&ka-1,l>>>=16==ka?4:3,0<=p.indexOf("0")||""==h||r||l?h=G[r]+h:q&&(N?(h=N.slice(-1)+h,N=N.slice(0,-1)):h=" "+h);while(0<--q||l);d+=w+h;break;case "%":d+="%";break;default:d+="(unimplemented printf type %"+h+")"}}}return d+=e[g]}function Za(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var Na={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;",$:"\x26dollar;"},Ya="0123456789abcdef",Xa="0123456789ABCDEF",Wa="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ra="January February March April May June July August September October November December".split(" ");
function $a(a,b,c){var d=0,e=a.length,f=0;for(void 0===c&&(c=function(a,b){return a>b?1:a<b?-1:0});d<e;){var g=d+e>>1,h=void 0;h=c(b,a[g]);0<h?d=g+1:(e=g,f=!h)}return f?d:~d}
function ab(a,b,c,d){function e(){if(4!==l.readyState)return null;try{g=p?l.response:l.responseText}catch(G){}if(null==g||200!=l.status&&(l.status||!g.length||"file:"!=(window?window.location.protocol:"file:")))if(f=l.status||-1,!l.status&&!bb){var b=k.match(/(^https?:\/\/[^/]+)(.*)/);b&&(bb=!0,t("PCjs was unable to perform a cross-origin resource request to '"+b[1]+"'.\n\nIf you're running an ad blocker, try adding '"+cb()+"' to your whitelist (or find a smarter ad blocker)."))}d&&d(a,g,f);return[g,
f]}b=void 0===b?"text":b;c=void 0===c?!1:c;var f=0,g=null,h=null;if("object"==typeof resources&&(g=resources[a]))return d&&d(a,g,f),[g,f];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),h;var k=a;"pcjs:8088"==(window?window.location.host:"localhost")?(k=a.replace(/^(http:\/\/archive\.pcjs\.org\/|https:\/\/[a-z0-9-]+\.amazonaws\.com\/archive\.pcjs\.org\/)([^/]*)\/(.*?)\/([^/]*)$/,"/$2-demo/$3/archive/$4"),k=k.replace(/^https:\/\/([a-z0-9]+)-disks\.pcjs\.org\/(.*)$/,
"/disks-$1/$2")):k=a.replace(/^\/disks-([a-z0-9]+)\//,"https://$1-disks.pcjs.org/");var l=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),p=!1,q="string"===typeof l.responseType;c&&(l.onreadystatechange=e);if(b&&"object"==typeof b){q="";for(var w in b)b.hasOwnProperty(w)&&(q&&(q+="\x26"),q+=w+"\x3d"+encodeURIComponent(b[w]));q=q.replace(/%20/g,"+");l.open("POST",k,c);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(q)}else l.open("GET",
k,c),"arraybuffer"==b&&(q?(p=!0,l.responseType=b):l.overrideMimeType("text/plain; charset\x3dx-user-defined")),l.send();c||(l.readyState=4,h=e());return h}
function db(a,b){var c,d={ca:null,Y:null,ja:null,wa:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f;if("\x3c"==b.charAt(0))throw Error(b);var g=0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.ja=g.load;d.wa=g.exec;if(e=g.bytes)d.ca=e;else if(e=g.words)for(d.ca=Array(2*e.length),f=c=0;c<e.length;c++)d.ca[f++]=e[c]&255,d.ca[f++]=e[c]>>8&255;else if(e=g.longs)for(d.ca=Array(4*e.length),f=c=0;c<
e.length;c++)d.ca[f++]=e[c]&255,d.ca[f++]=e[c]>>8&255,d.ca[f++]=e[c]>>16&255,d.ca[f++]=e[c]>>24&255;else(e=g.data)?d.Ma=e:d.ca=g;d.ca&&(d.ca.length?1==d.ca.length&&(t(d.ca[0]),d=null):(t("Empty resource: "+a),d=null));d.Y=g.symbols}catch(h){t("Resource data error ("+a+"): "+h.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){t("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&
(d.ca=e)}return d}function cb(){return window?window.location.protocol+"//"+window.location.host:"https://www.pcjs.org"}function eb(){if(null==fb){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}fb=a}return fb}function gb(a){if(window)try{var b=window.localStorage.getItem(a)}catch(c){}return b}
function hb(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function ib(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}
function jb(a){if(!kb){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}kb=c}return kb[a]||kb[a.toLowerCase()]}function lb(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function mb(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function nb(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function ob(a){ub.init.push(a)}
function vb(a){t(a+"\n\nIf it happens again, please send the URL to support@pcjs.org. Thanks.")}function wb(a){if(xb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){vb("An unexpected error occurred: "+c.message)}}function yb(a){!xb&&a?(xb=!0,zb&&Ab("init"),Bb&&Ab("show")):xb=a}function Ab(a){ub[a]&&wb(ub[a])}var kb=null,ub={init:[],show:[],exit:[]},zb=!1,Bb=!1,xb=!0,bb=!1,fb=null;nb("onload",function(){zb=!0;wb(ub.init)});nb("onpageshow",function(){Bb=!0;wb(ub.show)});
nb(ib("iOS")?"onpagehide":ib("Opera")?"onunload":"onbeforeunload",function(){wb(ub.exit)});
function u(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Bb=b.comment;this.Sb=b;this.exports={};this.I=this.bindings={};a=this.id.indexOf(".");0>a?(this.Ta="PCjs",this.Cb=this.id):(this.Ta=this.id.substr(0,a),this.Cb=this.id.substr(a+1));this.flags={ready:!1,Ua:!1,mb:!1,rd:!1,Z:!1,sb:!1,error:!1};this.ab=null;this.flags.error=!1;this.aa=c||0;this.C=this.v=this.G=this.F=null;Cb.push(this)}function Db(a,b,c){Eb[a]&&b&&(Eb[a][b]=c)}
function Fb(){return Date.now()||+new Date}function t(a){window&&window.alert(a)}function Gb(a){var b=!1;window&&(b=window.confirm(a));return b}function Hb(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function Ib(a,b){var c=v;b=x(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var h=g.getAttribute("class");if(h)for(var k=h.split(" "),l=0;l<k.length;l++)switch(h=k[l],h){case c+"-binding":(h=Sb(g))&&void 0!==h.binding&&a.qa(h.type,h.binding,g,h.value),l=k.length}}}}function Tb(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<Cb.length;b++){var d=Cb[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function Ub(a){if(void 0!==a){var b;for(b=0;b<Cb.length;b++)if(Cb[b].id===a)return Cb[b]}return null}function Vb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<Cb.length;d++)if(c)c==Cb[d]&&(c=null);else if(!(a!=Cb[d].type||b&&Cb[d].id.indexOf(b)))return Cb[d]}return null}function Sb(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){t(c.message+" ("+a+")")}return b}
function x(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function Wb(a){for(var b=!0,c=Xb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=Yb.indexOf(e)&&(f=function(){return function(){Wb(a)}}());var g=Zb[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{b=!1;var h=Vb(d[1],a);if(h)if(g=$b[e])b=g(h,d[2],d[3]);else{var k=h.exports;if(k&&(g=k[e]))if(b=!0,!f)b=g.call(h,d[2],d[3]);else if(!g.call(h,f,d[2],d[3]))break}}if(!b){t("Script error: '"+e+"' command "+(g?" failed":" not recognized"));break}}c&&!c.length&&delete Xb[a];
return b}m=u.prototype;m.toString=function(){return this.name?this.name:this.id||this.type};
m.qa=function(a,b,c){switch(b){case "clear":return this.I[b]||(this.I[b]=c,c.onclick=function(a){return function(){a.I.print&&(a.I.print.value="")}}(this)),!0;case "print":return this.I[b]||(this.I[b]=c,this.ha=function(a){this.u(a,this.type);return!0},c.value="",this.print=function(a){return function(b){Hb(a,b)}}(c),this.u=function(a,b){return function(a,c){a||(a="");if(c!=ac||"..."!=a.slice(-3))c&&(a=c+": "+a),Hb(b,a+"\n");else{c=b.value;var d=c.lastIndexOf(a);0>d?c+=a+"\n":c=c.substr(0,d)+(a+".")+
c.substr(d+a.length);8192<c.length&&(c=c.substr(c.length-4096));b.value=c;b.scrollTop=b.scrollHeight}}}(this,c)),!0;default:return!1}};m.log=function(){};m.print=function(){};m.u=function(){};m.status=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];this.u(this.type+": "+Qa.apply(Ba,[a].concat(c instanceof Array?c:ya(ia(c)))))};
m.ha=function(a,b,c){if(!b){var d=Vb("Computer",this.id);if(d&&d.flags.sb)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||t((c?c+": ":"")+a);return!0};function bc(a,b){a.flags.error=!0;a.ha(b)}function cc(a){return a.flags.error?(a.u(a.toString()+" error"),!0):!1}function dc(a,b){b&&(a.flags.ready?b():a.ab=b);return a.flags.ready}function ec(a){if(!a.flags.error&&(a.flags.ready=!0,a.flags.ready)){var b=a.ab;a.ab=null;b&&b()}}
function fc(a,b){a.flags.Ua&&(b?a.flags.mb=!0:void 0===b&&a.u(a.toString()+" busy"));return a.flags.Ua}function gc(a,b){if(a.flags.mb)return a.flags.Ua=!1,a.flags.mb=!1;if(a.flags.error)return a.u(a.toString()+" error"),!1;a.flags.Ua=b;return a.flags.Ua}m.za=function(){return this.flags.Z=!0};m.pa=function(a,b){b&&(this.flags.Z=!1);return!0};
function hc(a,b){b=void 0===b?0:b;return a.C&&(a!==a.C&&(b=b||a.aa),a=a.C.aa&b,b&4026531840&&b&268435455&&(a&4026531840&&a&268435455||(a=0)),b&&a===b)?!0:!1}function ic(a,b,c,d){a.C&&(!0===c||hc(a,c|0))&&a.C.message(b,d)}var ac="progress";window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var Eb=window?window.PCjs.Machines:{},Cb=window?window.PCjs.Components:[],Xb=window?window.PCjs.Commands:{},Yb=["hold","sleep","wait"],Zb={alert:function(a){t(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},$b={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var v="pdp10",jc="PDPjs",kc=Math.pow(2,18)-1,lc=Math.pow(2,18),mc=Math.pow(2,17)-1,nc=Math.pow(2,17),y=Math.pow(2,18)-1,z=Math.pow(2,18),A=Math.pow(2,35)-1,B=Math.pow(2,35),C=Math.pow(2,36)-1,D=Math.pow(2,36),E=Math.pow(2,32),oc=Math.pow(2,34),pc=Math.pow(2,36),qc=Math.pow(2,21),rc=Math.pow(2,26),sc=Math.pow(2,23),tc=Math.pow(2,30);v="pdp10";jc="PDPjs";
var uc={cpu:1,trap:2,fault:4,"int":8,bus:16,memory:32,mmu:64,rom:128,device:256,panel:512,keyboard:1024,key:2048,paper:4096,read:16384,write:32768,serial:1048576,timer:2097152,speaker:16777216,computer:33554432,log:268435456,warn:536870912,buffer:1073741824,halt:-2147483648};
function vc(a,b){u.call(this,"Panel",a,512);this.J=this.K=0;this.U=b;this.i=this.H=this.j=this.w=0;this.L=this.M=-1;this.N=this.O=this.D=!1;this.R=wc;this.B={};this.b={START:[1,1,!0,!1,this.cc],STEP:[1,1,!1,!1,this.dc],ENABLE:[1,1,!1,!1,this.Yb],CONT:[1,1,!0,!1,this.Wb],DEP:[0,0,!0,!1,this.Xb],EXAM:[1,1,!0,!1,this.Zb],LOAD:[1,1,!0,!1,this.ac],TEST:[0,0,!0,!1,this.$b]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.bc,a];this.C=this.v=this.G=this.F=null;this.exports={hold:this.Tb,toggle:this.mc,reset:this.ic,
set:this.lc};ec(this)}ta(vc,u);m=vc.prototype;m.reset=function(a){this.stop();a&&xc(this,this.w=0)};
m.qa=function(a,b,c,d){if(this.F&&this.F.qa(a,b,c,d)||this.v&&this.v.qa(a,b,c,d)||this.C&&this.C.qa(a,b,c,d))return!0;switch(b){case "PC":return this.I[b]=c,this.K++,!0;default:return"led"==a||"rled"==a?(this.I[b]=c,this.B[b]=d?1:0,this.K++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.I[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,b){return function(){yc(a,b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){zc(a,b)}}(this,b),a.ontouchstart=
function(a,b){return function(c){yc(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){zc(a,b)}}(this,b),!0):u.prototype.qa.call(this,a,b,c,d)}};m.xa=function(a,b,c,d){this.F=a;this.G=b;this.v=c;this.C=d;Ac(this);Bc(this)};m.za=function(a,b){if(!b)if(this.U&&Cc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};m.pa=function(a){return a?this.save():!0};m.save=function(){var a=new F(this);a.set(0,[this.i,this.w,this.j]);return a.data()};
m.restore=function(a){if(a=a[0])Dc(this,this.i=a[0]),xc(this,this.w=a[1]),Ec(this,a[2]);return!0};m.ic=function(){for(var a in this.b){var b=this.b[a];b[1]=b[0]}Bc(this);return!0};function Fc(a,b,c){if(a=a.I[b])a.style.backgroundColor=c?"#ff0000":"#000000"}function Ac(a,b){for(var c in a.B)Fc(a,c,null!=b?b:a.B[c])}function Gc(a,b,c){if(a=a.I[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function Bc(a){for(var b in a.b)Gc(a,b,a.b[b][1])}
m.Tb=function(a,b,c){if(yc(this,b)){if(c){var d=this;setTimeout(function(){zc(d,b);a&&a()},+c);return!1}zc(this,b)}return!0};m.lc=function(a,b){if("SR"==a)return Ec(this,Ca(b,8));var c=this.b[a];return c?(c[1]=+b?1:0,Gc(this,a,c[1]),!0):!1};m.mc=function(a){return yc(this,a)?(zc(this,a),!0):!1};function yc(a,b){var c=a.b[b];return c?(Gc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b!=Hc&&(a.N=b==Ic,a.O=b==Jc),!0):!1}
function zc(a,b){var c=a.b[b];c&&(c[2]&&c[3]&&(Gc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}m.cc=function(a){a||this.v.flags.P||(H(this.v,this.i),this.b[Kc]&&this.b[Kc][1]&&Lc(this.v))};m.dc=function(){};m.Yb=function(a){a||I(this.v)};
m.Wb=function(a){if(!a&&!this.v.flags.P)if(this.b[Kc]&&this.b[Kc][1])Lc(this.v);else{if((a=this.C)&&!fc(a,!0))gc(a,!0),Mc(a,0,null),gc(a,!1);else try{var b=this.v.Ya(1);0<b&&(Nc(this.v,b),Qc(this.v,b,!0),Rc(this.v,b))}catch(c){"number"!=typeof c&&(b=c,bc(this.v,b.stack||b.message))}this.stop();this.F&&K(this.F)}};m.Xb=function(a){a&&!this.v.flags.P&&(this.N&&Sc(this),a=xc(this,this.w=this.j),this.R==wc?Tc(this.G,this.i,a):this.v.g(this.i,a))};
m.Zb=function(a){if(!a&&!this.v.flags.P){var b;this.O&&Sc(this);this.R==wc?b=Uc(this.G,this.i):b=this.v.f(this.i);xc(this,this.w=b)}};m.ac=function(a){a||this.v.flags.P||Dc(this,this.j)};m.$b=function(a){a?(this.D=!0,Ac(this,!0)):(this.D=!1,Ac(this),Ec(this,0))};m.bc=function(a,b){this.j=a?this.j|1<<b:this.j&~(1<<b)};function Sc(a){var b=1,c=a.G.j;a.b[Hc]&&a.b[Hc][1]||(b=-b);Dc(a,a.i&~c|a.i+b&c)}
function Dc(a,b){a.i=b&a.G.j;if(a.L!==a.i){a.L=a.i;b=a.L;for(var c=0;22>c;c++){var d=a,e="A"+c,f=b&1<<c;d.B[e]=f;d.D||Fc(d,e,f)}}}function xc(a,b){a.H=b%D;if(a.M!==a.H){a.M=a.H;b=a.M;for(var c=0;16>c;c++){var d=a,e="D"+c,f=b&1<<c;d.B[e]=f;d.D||Fc(d,e,f)}}return a.H}function Ec(a,b){a.j=b|0;for(b=0;22>b;b++)a.b["S"+b][1]=a.j&1<<b?1:0;Bc(a);return!0}m.stop=function(){Dc(this,this.v.i)};
function Cc(){for(var a=x(document,v,"panel"),b=0;b<a.length;b++){var c=a[b],d=Sb(c),e=Ub(d.id);e||(e=new vc(d,!0));Ib(e,c)}}var wc=7,Ic="DEP",Kc="ENABLE",Jc="EXAM",Hc="STEP";ob(Cc);function Vc(a,b,c){u.call(this,"Bus",a,16);this.v=b;this.C=c;this.D=+a.busWidth||18;this.H=1<<this.D;this.j=this.H-1;this.i=Math.log2(16384);this.B=this.H/16384|0;this.w=0;this.b=[];a=new Wc(this);Xc(a,this.C);this.b=Array(this.B);for(b=0;b<this.B;b++)this.b[b]=a;ec(this)}ta(Vc,u);m=Vc.prototype;m.reset=function(){};
m.za=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};m.pa=function(a){return a?this.save():!0};m.save=function(){var a=new F(this);a.set(0,Yc(this));return a.data()};m.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&4096>d.length){for(var e=0,f=Array(4096),g=0;g<d.length-1;)for(var h=d[g++],k=d[g++];h--;)f[e++]=k;d=f}e=this.b[c];if(!e||!e.restore(d)){t("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function Zc(a,b,c,d){for(var e=b,f=c,g=e>>>a.i;0<f&&g<a.b.length;){var h=a.b[g],k=16384*g,l=16384-(e-k);l>f&&(l=f);if(h&&h.size){if(h.type==d){if(e+f<=h.A)return h.Wa+=h.A-e,h.A=e,!0;if(e>=h.A+h.Wa){l=h.size-(e-k);l>f&&(l=f);h.Wa=e-h.A+l;e=k+16384;f-=l;g++;continue}}return $c(ad,e,f)}e=new Wc(a,e,l,16384,d);Xc(e,a.C,h);a.b[g++]=e;e=k+16384;f-=l}return 0>=f?(a.status("Added %dKb %s at %o",c>>10,bd[d],b),!0):$c(cd,b,c)}
function Uc(a,b){var c=a.b[(b&a.j)>>>a.i];a.w++;b=c.w(b&16383,b);a.w--;return b}function Tc(a,b,c){var d=a.b[(b&a.j)>>>a.i];a.w++;d.C(c,b&16383,b);a.w--}function Yc(a){for(var b=0,c=[],d=0;d<a.B;d++){var e=a.b[d];if(e.ob||e.Rb){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,h=0,k=[];g<e.length;){for(var l=e[g],p=g+1;p<e.length&&e[p]===l;)p++;k[h++]=p-g;k[h++]=l;g=p}k.length<e.length&&(e=k)}c[f]=e}}return c}
m.Hb=function(a){if(!this.w)throw this.C&&hc(this.C,4)&&ic(this.C,"memory fault on "+L(this.C,a),!0,!0),I(this.v),-1;};function $c(a,b,c){t("Memory block error ("+a+": "+n(b)+","+n(c)+")");return!1}var ad=1,cd=2;function dd(a){u.call(this,"Device",a,256)}ta(dd,u);m=dd.prototype;m.xa=function(a,b,c,d){this.G=b;this.F=a;this.v=c;this.C=d;ec(this)};m.za=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};m.pa=function(a){return a?this.save():!0};m.reset=function(){};
m.save=function(){return(new F(this)).data()};m.restore=function(){return!0};ob(function(){for(var a=x(document,v,"device"),b=0;b<a.length;b++){var c=a[b];var d=Sb(c);switch(d.type){case "default":d=new dd(d),Ib(d,c)}}});
function Wc(a,b,c,d,e){this.G=a;this.id=ed+=2;this.A=b;this.Wa=c;this.size=d||0;this.type=e||fd;this.F=e==gd;this.b=null;this.f=this.w=this.rb;this.g=this.C=this.Xa;this.i=this.v=0;Xc(this);this.ob=this.Rb=!1;if(this.size){a=this.j=Array(this.size);for(b=0;b<a.length;b++)a[b]=0;hd(this,id)}else hd(this)}m=Wc.prototype;m.save=function(){return this.j};m.restore=function(a){return a&&this.size==a.length?(this.j=a,this.ob=!0):!1};function hd(a,b){b||(b=jd);kd(a,b,void 0);ld(a,b,void 0)}
function kd(a,b,c){c&&a.i||(a.f=b[0]||a.rb);if(c||void 0===c)a.w=b[0]||a.rb}function ld(a,b,c){c&&a.v||(a.g=!a.F&&b[1]||a.Xa);if(c||void 0===c)a.C=b[1]||a.Xa}m.Pa=function(a,b){b?0===this.v++&&ld(this,md,!1):0===this.i++&&kd(this,md,!1)};function nd(a,b){b?0===--a.v&&(a.g=a.F?a.Xa:a.C):0===--a.i&&(a.f=a.w)}function Xc(a,b,c){a.b=b;a.i=a.v=0;c&&((a.i=c.i)&&kd(a,md,!1),(a.v=c.v)&&ld(a,md,!1))}
m.rb=function(a,b){this.b&&hc(this.b,32)&&ic(this.b,"attempt to read invalid address "+L(this.b,b),!0);this.G.Hb(b);return-1};m.Xa=function(a,b,c){this.b&&hc(this.b,32)&&ic(this.b,"attempt to write "+L(this.b,a)+" to invalid addresses "+L(this.b,c),!0);this.G.Hb(c)};m.gc=function(a){return this.j[a]};m.pc=function(a,b){this.j[b]!=a&&(this.j[b]=a,this.ob=!0)};m.ec=function(a,b){if(this.b&&null!=this.A){var c=this.b;od(c,this.A+a,2,c.N)&&pd(c,!1)}return this.w(a,b)};
m.oc=function(a,b,c){if(this.b&&null!=this.A){var d=this.b;od(d,this.A+b,2,d.K)&&pd(d,!1)}this.F?this.Xa(a,b,c):this.C(a,b,c)};var fd=0,gd=2,bd=["NONE","RAM","ROM"],ed=0,jd=[],id=[Wc.prototype.gc,Wc.prototype.pc],md=[Wc.prototype.ec,Wc.prototype.oc];
function qd(a,b){u.call(this,"CPU",a,1);b=+a.cycles||b;var c=+a.multiplier||1;this.fb=0;this.jb=b;this.fa=c;this.gb=Math.round(this.jb/1E4)/100;this.ba=this.gb*this.fa;this.ib=this.Ha=this.ka=this.Za=0;this.flags.P=this.flags.eb=!1;this.flags.ea=a.autoStart;"string"==typeof this.flags.ea&&(this.flags.ea="true"==this.flags.ea);this.flags.Sa=!1;this.Fa=this.ra=0;this.Ga=+a.csStart;this.na=+a.csInterval;this.sa=+a.csStop;this.O=[];this.Db=this.jc.bind(this);this.V=this.L=this.U=this.M=this.K=this.Ea=
this.R=this.ta=this.kb=this.X=0;this.La=null;ec(this)}ta(qd,u);m=qd.prototype;m.xa=function(a,b,c,d){this.F=a;this.G=b;this.C=d;this.La=a.j;for(a=0;a<rd.length;a++)(b=this.I[rd[a]])&&this.F.qa("",rd[a],b);ec(this)};m.reset=function(){};m.save=function(){return null};m.restore=function(){return!1};
m.za=function(a,b){var c=sd(this.F,"autoStart");null!=c?this.flags.ea="true"==c?!0:"false"==c?!1:!!c:null==this.flags.ea&&(this.flags.ea=!this.C&&void 0===this.I.run);if(!b){if(a){td(this);if(!this.restore(a))return!1;ud(this)}else this.reset();this.C?(a=this.C,b=this.flags.ea,a.Ha=!0,a.u("Type ? for help with PDPjs Debugger commands"),vd(a),b||wd(a),a.sa&&(b=a.sa,a.sa=null,xd(a,b,!0))):this.status("No debugger detected");this.flags.ea||this.u("CPU will not be auto-started "+(this.La?"(click Run to start)":
"(type 'go' to start)"))}return!0};m.pa=function(a){return a?this.save():!0};m.ea=function(){return this.flags.P?!0:this.flags.ea?(Lc(this),!0):!1};m.Ib=function(){return 0};function ud(a){void 0===a.Ga&&(a.Ga=0);void 0===a.na&&(a.na=-1);void 0===a.sa&&(a.sa=-1);a.flags.Sa=0<=a.Ga&&0<a.na;a.flags.Sa&&(a.Fa=0,a.ra=a.Ga-a.V)}
function Rc(a,b){if(a.flags.Sa){var c=!1;a.Fa=a.Fa+a.Ib()|0;a.ra-=b;0>=a.ra&&(a.ra+=a.na,c=!0);0<=a.sa&&a.sa<=yd(a)&&(a.na=a.sa=-1,ud(a),I(a),c=!0);c&&a.u(yd(a)+" cycles: checksum\x3d"+n(a.Fa))}}
m.qa=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.I[b]=c,!0;case "run":return this.I[b]=c,c.onclick=function(){var a;if(a=d.F)if(a=d.F,a.flags.Z)a=!0;else{var b=null,c,h=Tb(a.id);for(c=0;c<h.length&&(b=h[c],b===a||b.flags.ready);c++);if(c==h.length)for(c=0;c<h.length&&(b=h[c],b===a||b.flags.Z);c++);c==h.length&&(b=a);t("The "+b.type+" component ("+b.id+") is not "+(b.flags.ready?"powered yet":"ready yet"+(b.ab?" (waiting for notification)":""))+".");a=!1}a&&(d.flags.P?
I(d):Lc(d))},!0;case "speed":return this.I[b]=c,!0;case "setSpeed":return this.I[b]=c,c.onclick=function(){zd(d,d.fa<<1,!0)},c.textContent=this.ba.toFixed(2)+"Mhz",!0}return!1};function Qc(a,b,c){a.V+=b;c&&(a.U=a.M=0)}function Ad(a,b){var c=1;b&&1<a.fa&&a.X&&(c=a.X/a.gb);a.ib=Math.round(1E3/Bd);a.Ha=Math.floor(a.jb/Bd*c);b||(a.ka=a.Ha);a.Za=0}function yd(a){return a.V+a.L+a.U-a.M}function td(a){a.X=0;a.kb=0;a.V=a.L=a.U=a.M=0;ud(a);zd(a,1)}
function zd(a,b,c){var d=!1;if(void 0!==b){.8>a.X/a.ba?b=1:d=!0;a.fa=b;b=a.gb*a.fa;if(a.ba!=b){a.ba=b;b=a.ba.toFixed(2)+"Mhz";var e=a.I.setSpeed;e&&(e.textContent=b);a.u("target speed: "+b)}c&&a.F&&Cd(a.F)}Qc(a,a.L);a.L=0;a.K=Fb();a.R=0;Ad(a);return d}function Dd(a,b){for(var c=a.O.length-1;0<=c;c--){var d=a.O[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function Ed(a){for(var b=[],c=0;c<a.O.length;c++)b.push(a.O[c][0]);return b}
function Nc(a,b){for(var c=a.O.length-1;0<=c;c--){var d=a.O[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function Fd(a,b){var c=a.U-=a.M;a.M=0;b&&(a.U=0);return c}
m.jc=function(){if(this.flags.P){this.Za>=this.jb&&Ad(this,!0);this.ta=0;this.Ea=Fb();if(this.R){var a=this.Ea-this.R;a>this.ib&&(this.K+=a,this.K>this.Ea&&(this.K=this.Ea))}try{do{var b=Dd(this,this.flags.Sa?1:this.Ha);try{this.Ya(b)}catch(e){if("number"!=typeof e)throw e;}b=Fd(this,!0);this.ta+=b;this.L+=b;Rc(this,b);Nc(this,b);this.ka-=b;if(0>=this.ka){this.ka+=this.Ha;++this.kb>=Gd&&(this.F&&K(this.F,void 0),this.kb=0);break}}while(this.flags.P)}catch(e){I(this);this.F&&this.F.stop(Fb(),yd(this));
bc(this,e.stack||e.message);return}if(this.flags.P){a=setTimeout;b=this.Db;this.R=Fb();var c=this.ib;this.ta&&(c=Math.round(c*this.ta/this.Ha));c-=this.R-this.Ea;var d=this.R-this.K;d&&(this.X=Math.round(this.L/(10*d))/100,864E5<=d&&(this.V=0,zd(this)));if(0>c||this.X<this.ba)-1E3>c&&(this.K-=c),c=0;this.Za+=this.ta;this.R+=c;a(b,c)}}};
function Lc(a,b){if(!cc(a))if(a.flags.P)a.u(a.toString()+" busy");else{zd(a);a.flags.P=!0;a.flags.eb=!0;var c=a.I.run;c&&(c.textContent="Halt");a.F&&(b&&Cd(a.F,!0),a.F.start(a.K,yd(a)));a.C||a.status("Started");setTimeout(a.Db,0)}}m.Ya=function(){return 0};function I(a,b){var c=!1;if(a.flags.P){Fd(a);Qc(a,a.L);a.L=0;a.flags.P=!1;if(c=a.I.run)c.textContent="Run";a.F&&a.F.stop(Fb(),yd(a));c=!0;a.C||a.status("Stopped")}a.flags.complete=b;return c}var Bd=30,Gd=15,rd=["power","reset"];
function Hd(a){var b=+a.model||1001;qd.call(this,a,1E6);this.hb=b;this.Ra=+a.addrReset||0;this.Qb=Id.bind(this);this.w=M.bind(this);this.Ba=null;this.tb=[];this.flags.complete=!1}ta(Hd,qd);m=Hd.prototype;m.xa=function(a,b,c,d){qd.prototype.xa.call(this,a,b,c,d)};
m.reset=function(){this.status("Model "+this.hb);this.flags.P&&I(this);this.Ia=this.Ja=this.b=this.H=0;this.i=this.ma=this.Ra;this.J=this.N=-1;this.D=this.j=0;this.lb=[0,0];this.ua=[0,0];this.la=[0,0];this.va=[0,0];this.Aa=this.i;this.B=0;this.f=this.fc;this.g=this.qc;this.Ba=null;td(this);this.flags.error=!1;qd.prototype.reset.call(this)};m.Ib=function(){return 0};
m.save=function(){var a=new F(this);a.set(0,[this.b,this.H,this.Ia,this.Ja,this.i,this.N,this.J,this.j,this.B,this.ma,this.Aa,this.Ra]);a.set(1,[]);a.set(2,[this.V,this.fa,this.flags.ea]);a.set(3,Jd(this));a.set(4,Ed(this));return a.data()};
m.restore=function(a){var b=ia(a[0]);this.b=b.next().value;this.H=b.next().value;this.Ia=b.next().value;this.Ja=b.next().value;this.i=b.next().value;this.N=b.next().value;this.J=b.next().value;this.j=b.next().value;this.B=b.next().value;this.ma=b.next().value;this.Aa=b.next().value;this.Ra=b.next().value;b=a[2];this.V=b[0];zd(this,b[1]);this.flags.ea=b[2];b=a[3];for(var c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.tb.length;d++){var e=this.tb[d];if(e.nc===b[c]){d=e;break a}}d=null}d&&(d.next=this.Ba,
this.Ba=d)}a=a[4];for(b=0;b<this.O.length&&b<a.length;b++)this.O[b][0]=a[b];return!0};function Kd(a,b){a.j=a.j&-254049|b&254048;a.j|=b&4096;b&2048?a.j&4096||(a.j|=2048):a.j&=-2049}function Ld(a,b){var c=a.i;a.i=(c+b)%lc;return c}function Md(a){return 0<=a.N?a.N:a.H&4194304?a.ma:a.i}function H(a,b){a.H=0;a.N=-1;a.i=b%lc}function Jd(a){var b=[];for(a=a.Ba;a;)b.push(a.nc),a=a.next;return b}m.fc=function(a){var b=this.G;a=this.Aa=a;return b.b[(a&b.j)>>>b.i].f(a&16383,a)};
m.qc=function(a,b){var c=this.G;a=this.Aa=a;c.b[(a&c.j)>>>c.i].g(b,a&16383,a);return b};
m.Ya=function(a){this.flags.complete=!0;var b=this.C?Nd(this.C)?1:this.flags.eb?-1:0:0,c=a?this.flags.eb?0:1:-1;this.flags.eb=!1;this.U=this.M=a;this.B=this.B&-5|(b?4:0);do{if(this.B){if(this.B&4){if(Od(this.C,Md(this),c)){I(this);break}++b||(this.B&=-5);c||c++}if(a=this.B&11)this.B&2?this.Ba||(this.B&=-3):this.B&1&&this.B++,a=!1;if(a){if(this.B&4&&Od(this.C,Md(this),c)){I(this);break}if(0>c)break}}this.B&=15;this.H&4194304?this.H=this.Ia=this.f(this.b):0<=this.N?(this.H=this.Ja=this.f(this.N),this.N=
-1):(this.H=this.Ja=this.f(this.ma=this.i),this.i=(this.i+1)%lc);this.H&=8388607;this.b=this.H&262143;if(a=this.H>>18&15)this.b=this.b+(this.Ia=this.f(a))&kc;a=this.H&4194304?-1:this.Ja/sc|0;0<=a&&this.Qb(a);this.M--}while(0<this.M);return this.flags.complete?this.U-this.M:!1===this.flags.complete?-1:0};ob(function(){for(var a=x(document,v,"cpu"),b=0;b<a.length;b++){var c=a[b],d=Sb(c);d=new Hd(d);Ib(d,c)}});function Id(a){Pd[a>>4].call(this,a,a&15)}function P(a){this.w(a)}
function Qd(){var a=0,b=this.f(this.b),c=b/tc&63,d=b>>24&63;c-=d;0>c&&(a++,c=36-d,0>c&&(c=100-d));b=c*tc+(d<<24)+(b&16777215);a&&(b=(b+a)%D);this.g(this.b,b)}function Rd(a,b){a=this.f(this.b);if(0>this.J)this.J=a,this.H=this.b|4194304;else{var c=this.J/tc&63,d=this.J>>24&63;a=32>c+d?(a>>c&(1<<d)-1)>>>0:Math.trunc(a/Math.pow(2,c))%Math.pow(2,d);this.g(b,a);this.j&=-8193;this.J=-1}}
function Sd(a,b){a=this.f(this.b);if(0>this.J)this.J=a,this.H=this.b|4194304;else{var c=this.J/tc&63,d=this.J>>24&63;b=this.f(b)%Math.pow(2,d)*Math.pow(2,c)%D;a=a-a%Math.pow(2,c+d)+b+a%Math.pow(2,c);this.g(this.b,a);this.j&=-8193;this.J=-1}}function Td(a,b){this.g(b,this.f(this.b))}function ke(a,b){this.g(b,this.b)}function le(a,b){this.g(this.b,this.f(b))}function me(a,b){this.g(b,0)}function ne(a,b){this.g(b,C-this.f(b))}function oe(a,b){this.g(b,C)}
function pe(a,b){var c=this.f(this.b),d=this.f(b);this.g(b,qe(a,d,c)+(c-(c&y)))}function re(a,b){var c=this.f(b);this.g(b,qe(a,c,0))}function se(a,b){b=this.f(b);var c=this.f(this.b);this.g(this.b,qe(a,c,b)+(b-(b&y)))}function te(a,b){var c=this.f(this.b),d=c;if(a&=384)switch(d-=d&y,a){case 256:d+=y;break;case 384:d+=c>A?y:0}c=d;this.g(this.b,c);b&&this.g(b,c)}function ue(a,b){var c=(this.f(this.b)&y)*z,d=this.f(b);this.g(b,qe(a,d,c)+c)}
function ve(a,b){var c=this.b*z,d=this.f(b);this.g(b,qe(a,d,c)+c)}function we(a,b){b=(this.f(b)&y)*z;var c=this.f(this.b);this.g(this.b,qe(a,c,b)+b)}function xe(a,b){var c=this.f(this.b),d=(c&y)*z;c=qe(a,c,d)+d;this.g(this.b,c);b&&this.g(b,c)}function ye(a,b){var c=this.f(this.b)&y,d=this.f(b);this.g(b,ze(a,d,c)+c)}function Ae(a,b){var c=this.f(b);this.g(b,ze(a,c,this.b)+this.b)}function Be(a,b){b=this.f(b)&y;var c=this.f(this.b);this.g(this.b,ze(a,c,b)+b)}
function Ce(a,b){var c=this.f(this.b),d=c;if(a&=384)switch(d&=y,a){case 256:d+=y*z;break;case 384:d+=c>mc?y*z:0}c=d;this.g(this.b,c);b&&this.g(b,c)}function De(a,b){var c=this.f(this.b)/z|0,d=this.f(b);this.g(b,ze(a,d,c)+c)}function Ee(a,b){var c=this.f(b);this.g(b,ze(a,c,0))}function Fe(a,b){b=this.f(b)/z|0;var c=this.f(this.b);this.g(this.b,ze(a,c,b)+b)}function Ge(a,b){var c=this.f(this.b),d=c/z|0;c=ze(a,c,d)+d;this.g(this.b,c);b&&this.g(b,c)}function Q(a){He[a&7].call(this,a,a>>3&127)}
function Ie(){}function Je(){}function M(a){this.u("undefined opcode: "+Ea(a));Ld(this,-1);I(this)}function Ke(a){a>A&&(a!=B?a=pc-a:this.j|=163840);return a}function R(a,b){var c=(a+b)%D;Le.call(this,a,b,c);return c}
function Me(a,b,c){var d=!1,e=!1;if(void 0===c){if(!a)return this.j|=131104,-1;c=b>A?C:0}else if((c<B?c:pc-c-(b?1:0))>=(a<B?a:pc-a))return this.j|=131104,-1;var f=c-c%B;b=b%B+(c&1)*B;c=this.D=f+Math.trunc(c/2);a>A&&(a=D-a,d=!d);c>A&&(b?(c=C-c,b=D-b):c&&(c=D-c),e=!0,d=!d);f=this.lb;f[0]=0;f[1]=0;f=this.ua;f[0]=1;f[1]=0;f=this.la;f[0]=a;f[1]=0;a=this.va;a[0]=b;for(a[1]=c;0<Ne(this.va,this.la);)Oe(this.la,this.la),Oe(this.ua,this.ua);do{if(0<=Ne(this.va,this.la)&&(c=this.va,a=this.la,c[0]-=a[0],c[1]-=
a[1],0>c[0]&&(c[0]+=D,c[1]--),Oe(this.lb,this.ua),Pe(this.va)))break;Qe(this.la);Qe(this.ua)}while(!Pe(this.ua));b=this.lb[0];this.D=this.va[0];d&&b&&(b=D-b);e&&this.D&&(this.D=D-this.D);return b}
function Re(a,b,c,d){var e=a,f=b;b=!1;e>A&&(d||1001!=this.hb||e!=B)&&(e=D-e,b=!b);f>A&&(f=D-f,b=!b);if(e<z&&f<z){a=e*f;var g=0}else{a=e&y;e=Math.trunc(e/z);g=f&y;f=Math.trunc(f/z);var h=a*g,k=e*g+Math.trunc(h/z);g=Math.trunc(k/z);k=(k&y)+a*f;a=(k*z+(h&y))%D;g+=Math.trunc(k/z)+e*f}b&&(a?(g=C-g,a=D-a):g&&(g=D-g));b=a;a=g;e=a-a%B;a=2*a%D+Math.trunc(b/B);b=e+b%B;a-a%B!=e&&(b=a);d?g=b:(b==B&&a==B&&(this.j|=131072),this.D=b,g=a);c&&(a=this.D,!d&&(g||a>A)&&(g!=C||a<=A)&&(this.j|=131072),g=a);return g}
function Se(a){a?a==B?this.j|=163840:a=pc-a:this.j|=98304;return a}function Te(a,b){var c=a-b;0>c&&(c+=D);Le.call(this,c,b,a);return c}function Le(a,b,c){a=Math.trunc(a/oc);b=Math.trunc(b/oc);c=Math.trunc(c/oc);var d=a^(a^b)&(b^c);this.j=this.j|(d&2?65536:0)|(d&1?32768:0)|((a^c)&(b^c)&2?131072:0)}function S(a,b){return((a/E|0)&(b/E|0))*E+((a&b)>>>0)}function T(a,b){return S(a,(~(b/E|0)&15)*E+(~b>>>0))}function Ue(a,b){return(a<B?a:a-D)-(b<B?b:b-D)}
function Ve(a,b){return(~((a/E|0)^(b/E|0))&15)*E+(~(a^b)>>>0)}function U(a,b){return(a/E|0|b/E|0)*E+((a|b)>>>0)}function V(a){return a<B?a:a-D}function W(a,b){return((a/E|0)^(b/E|0))*E+((a^b)>>>0)}function X(a){return(a/z|0)+(a&y)*z}function ze(a,b,c){switch(a&384){case 0:b-=b&y;break;case 128:b=0;break;case 256:b=y*z;break;case 384:b=c>mc?y*z:0}return b}function qe(a,b,c){switch(a&384){case 0:b&=y;break;case 128:b=0;break;case 256:b=y;break;case 384:b=c>A?y:0}return b}
function Oe(a,b){a[0]+=b[0];a[1]+=b[1];a[0]>=D&&(a[0]%=D,a[1]++)}function Ne(a,b){var c=a[1]-b[1];c||(c=a[0]-b[0]);return c}function Qe(a){a[1]%2&&(a[0]+=D);a[0]=Math.trunc(a[0]/2);a[1]=Math.trunc(a[1]/2)}function Pe(a){return!a[0]&&!a[1]}
var Pd=[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},Qd,function(a,b){this.j&8192||(Qd.call(this,a,b),this.j|=8192);Rd.call(this,a,b)},Rd,function(a,b){this.j&8192||(Qd.call(this,a,b),this.j|=8192);Sd.call(this,a,b)},Sd,function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},
function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},
function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},Td,ke,le,function(a,b){b&&this.g(b,this.f(this.b))},function(a,b){a=this.f(this.b);a=(a/z|0)+(a&y)*z;this.g(b,a)},function(a,b){this.g(b,this.b*z)},function(a,b){a=this.f(b);a=(a/z|0)+(a&y)*z;this.g(this.b,a)},function(a,b){a=this.f(this.b);a=(a/z|0)+(a&y)*z;this.g(this.b,a);b&&this.g(b,a)},function(a,b){this.g(b,Se.call(this,this.f(this.b)))},function(a,b){this.g(b,
Se.call(this,this.b))},function(a,b){this.g(this.b,Se.call(this,this.f(b)))},function(a,b){a=Se.call(this,this.f(this.b));this.g(this.b,a);b&&this.g(b,a)},function(a,b){this.g(b,Ke.call(this,this.f(this.b)))},function(a,b){this.g(b,this.b)},function(a,b){this.g(this.b,Ke.call(this,this.f(b)))},function(a,b){a=Ke.call(this,this.f(this.b));this.g(this.b,a);b&&this.g(b,a)},function(a,b){this.g(b,Re.call(this,this.f(b),this.f(this.b),!0))},function(a,b){this.g(b,Re.call(this,this.f(b),this.b,!0))},function(a,
b){this.g(this.b,Re.call(this,this.f(b),this.f(this.b),!0))},function(a,b){this.g(this.b,this.g(b,Re.call(this,this.f(b),this.f(this.b),!0)))},function(a,b){this.g(b,Re.call(this,this.f(b),this.f(this.b)));this.g(b+1&15,this.D)},function(a,b){this.g(b,Re.call(this,this.f(b),this.b));this.g(b+1&15,this.D)},function(a,b){this.g(this.b,Re.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,Re.call(this,this.f(b),this.f(this.b))));this.g(b+1&15,this.D)},function(a,b){a=Me.call(this,
this.f(this.b),this.f(b));0>a||(this.g(b,a),this.g(b+1&15,this.D))},function(a,b){a=Me.call(this,this.b,this.f(b));0>a||(this.g(b,a),this.g(b+1&15,this.D))},function(a,b){a=Me.call(this,this.f(this.b),this.f(b));0>a||this.g(this.b,a)},function(a,b){a=Me.call(this,this.f(this.b),this.f(b));0>a||(this.g(this.b,this.g(b,a)),this.g(b+1&15,this.D))},function(a,b){a=this.f(b);var c=this.f(b+1&15);c=Me.call(this,this.f(this.b),c,a);0>c||(this.g(b,c),this.g(b+1&15,this.D))},function(a,b){a=this.f(b);var c=
this.f(b+1&15);c=Me.call(this,this.b,c,a);0>c||(this.g(b,c),this.g(b+1&15,this.D))},function(a,b){a=this.f(b);b=this.f(b+1&15);b=Me.call(this,this.f(this.b),b,a);0>b||this.g(this.b,b)},function(a,b){a=this.f(b);var c=this.f(b+1&15);c=Me.call(this,this.f(this.b),c,a);0>c||(this.g(b,this.g(this.b,c)),this.g(b+1&15,this.D))},function(a,b){if(a=(this.b&nc)<<14>>23|this.b&255){var c=this.f(b);if(0<a){var d=A;var e=c<B?0:B;35>a&&(e+=c*Math.pow(2,a)%B,d=B-Math.pow(2,35-a));c<B?c+d>A&&(this.j|=131072):c-
d<B&&(this.j|=131072)}else-35>=a?e=c<B?0:A:(e=Math.trunc(c/Math.pow(2,-a)),c>A&&(d=D-Math.pow(2,36+a),e+=d));this.g(b,e)}},function(a,b){if(a=((this.b&nc)<<14>>23|this.b&255)%36){var c=this.f(b);0>a&&(a=36+a);c=c*Math.pow(2,a)%D+Math.trunc(c/Math.pow(2,36-a));this.g(b,c)}},function(a,b){if(a=(this.b&nc)<<14>>23|this.b&255){var c=this.f(b);c=0<a?36<=a?0:c*Math.pow(2,a)%D:-36>=a?0:Math.trunc(c/Math.pow(2,-a));this.g(b,c)}},function(a,b){a=0;var c=this.f(b);if(c){for(;c<B;)a++,c*=2;H(this,this.b)}this.g(b+
1&15,a)},function(a,b){if(a=(this.b&nc)<<14>>23|this.b&255){var c=this.f(b),d=this.f(b+1&15);if(0<a){var e=c;if(36<=a){if(0<c&&c<B||c>A&&c<C)this.j|=131072;if(71<=a){if(0<d&&d<B||d>A&&d<C)this.j|=131072;c=0}else{c=d*Math.pow(2,a-35)%B;var f=B-Math.pow(2,70-a);e<=A?d+f>A&&(this.j|=131072):d-f<=A&&(this.j|=131072)}d=0;e>A&&(c+=B,d+=B)}else c=c*Math.pow(2,a)%B+Math.trunc(d%B/Math.pow(2,35-a)),d=d*Math.pow(2,a)%B,f=B-Math.pow(2,35-a),e<=A?e+f>A&&(this.j|=131072):(e-f<=A&&(this.j|=131072),c+=B,d+=B)}else-36>=
a?(d=-72>=a?c>A?C:0:Math.trunc(c%B/Math.pow(2,-a-35)),c<=A?c=0:(c=C,d+=B)):(f=c>A?D-Math.pow(2,36+a):0,d=Math.trunc(d%B/Math.pow(2,-a))+c%B*Math.pow(2,35+a)%B,c=Math.trunc(c/Math.pow(2,-a))+f,c>A&&(d+=B));this.g(b,c);this.g(b+1&15,d)}},function(a,b){if(a=((this.b&nc)<<14>>23|this.b&255)%72){var c=this.f(b),d=this.f(b+1&15),e=c;0>a&&(a=72+a);36>a?(c=c*Math.pow(2,a)%D+Math.trunc(d/Math.pow(2,36-a)),d=d*Math.pow(2,a)%D+Math.trunc(e/Math.pow(2,36-a))):(c=d*Math.pow(2,a-36)%D+Math.trunc(c/Math.pow(2,72-
a)),d=e*Math.pow(2,a-36)%D+Math.trunc(d/Math.pow(2,72-a)));this.g(b,c);this.g(b+1&15,d)}},function(a,b){if(a=(this.b&nc)<<14>>23|this.b&255){var c=this.f(b),d=this.f(b+1&15);0<a?36<=a?(c=72<=a?0:d*Math.pow(2,a-36)%D,d=0):(c=c*Math.pow(2,a)%D+Math.trunc(d/Math.pow(2,36-a)),d=d*Math.pow(2,a)%D):-36>=a?(d=-72>=a?0:Math.trunc(c/Math.pow(2,-a-36)),c=0):(d=Math.trunc(d/Math.pow(2,-a))+c*Math.pow(2,36+a)%D,c=Math.trunc(c/Math.pow(2,-a)));this.g(b,c);this.g(b+1&15,d)}},M,function(a,b){a=this.f(b);this.g(b,
this.f(this.b));this.g(this.b,a)},function(a,b){var c=a=!1,d=this.f(b),e=d/z|0;for(d&=y;!a;)if(this.g(d,this.f(e)),(a=d>=this.b)||(e=e+1&y,d=d+1&y,c=!0),a||!this.flags.P){c&&this.g(b,e*z+d);a||Ld(this,-1);break}},function(a,b){a=(this.f(b)+262145)%D;this.g(b,a);a<B&&H(this,this.b)},function(a,b){a=(this.f(b)+262145)%D;this.g(b,a);a>=B&&H(this,this.b)},function(a,b){b&1&&(this.j|=4096);b&2&&Kd(this,this.Ia/z|0);b&4&&I(this);b&8&&this.w(a);H(this,this.b)},function(a,b){a=b<<14;this.j&a&&(this.j&=~a,
H(this,this.b))},function(){this.N=this.b},M,function(a,b){a=(this.f(b)+262145)%D;this.g(b,a);a/z|0||(this.j|=262144);this.g(a&kc,(this.j&y)*z+this.i);this.j&=-8193;H(this,this.b)},function(a,b){a=this.f(b);a+=262145;this.g(a&kc,this.f(this.b));a>=D&&(a-=D);a/z|0||(this.j|=262144);this.g(b,a)},function(a,b){a=this.f(b);var c=this.f(a&kc);this.g(this.b,c);this.b==b&&(a=c);a-=262145;0>a&&(a+=D);(a/z|0)==y&&(this.j|=262144);this.g(b,a)},function(a,b){a=this.f(b);var c=this.f(a&kc);a-=262145;0>a&&(a+=
D);(a/z|0)==y&&(this.j|=262144);this.g(b,a);H(this,c&kc)},function(){this.g(this.b,(this.j&y)*z+this.i);this.j&=-8193;H(this,this.b+1)},function(a,b){this.g(b,(this.j&y)*z+this.i);this.j&=-8193;H(this,this.b)},function(a,b){this.g(this.b,this.f(b));this.g(b,this.b*z+this.i);H(this,this.b+1)},function(a,b){a=this.f(b);this.g(b,this.f(a/z|0));H(this,this.b)},function(a,b){this.g(b,R.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(b,R.call(this,this.f(b),this.b))},function(a,b){this.g(this.b,
R.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,R.call(this,this.f(b),this.f(this.b))))},function(a,b){this.g(b,Te.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(b,Te.call(this,this.f(b),this.b))},function(a,b){this.g(this.b,Te.call(this,this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,Te.call(this,this.f(b),this.f(this.b))))},Ie,function(a,b){0>Ue(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){0==Ue(this.f(b),this.b)&&H(this,this.i+1)},
function(a,b){0>=Ue(this.f(b),this.b)&&H(this,this.i+1)},function(){H(this,this.i+1)},function(a,b){0<=Ue(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){0!=Ue(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){0<Ue(this.f(b),this.b)&&H(this,this.i+1)},Je,function(a,b){0>Ue(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){0==Ue(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){0>=Ue(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(){H(this,this.i+1)},function(a,b){0<=Ue(this.f(b),
this.f(this.b))&&H(this,this.i+1)},function(a,b){0!=Ue(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){0<Ue(this.f(b),this.f(this.b))&&H(this,this.i+1)},Ie,function(a,b){0>V(this.f(b))&&H(this,this.b)},function(a,b){0==V(this.f(b))&&H(this,this.b)},function(a,b){0>=V(this.f(b))&&H(this,this.b)},function(){H(this,this.b)},function(a,b){0<=V(this.f(b))&&H(this,this.b)},function(a,b){0!=V(this.f(b))&&H(this,this.b)},function(a,b){0<V(this.f(b))&&H(this,this.b)},function(a,b){b&&this.g(b,this.f(this.b))},
function(a,b){a=this.f(this.b);0>V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);0==V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);0>=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){H(this,this.i+1);b&&this.g(b,this.f(this.b))},function(a,b){a=this.f(this.b);0<=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);0!=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.f(this.b);0<V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,
b){this.g(b,R.call(this,this.f(b),1))},function(a,b){a=this.g(b,R.call(this,this.f(b),1));0>V(a)&&H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),1));0==V(a)&&H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),1));0>=V(a)&&H(this,this.b)},function(a,b){this.g(b,R.call(this,this.f(b),1));H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),1));0<=V(a)&&H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),1));0!=V(a)&&H(this,this.b)},function(a,b){a=this.g(b,
R.call(this,this.f(b),1));0<V(a)&&H(this,this.b)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));0>V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));0==V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));0>=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));H(this,
this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));0<=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));0!=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),1));0<V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){this.g(b,R.call(this,this.f(b),C))},function(a,b){a=this.g(b,R.call(this,this.f(b),C));0>V(a)&&H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),
C));0==V(a)&&H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),C));0>=V(a)&&H(this,this.b)},function(a,b){this.g(b,R.call(this,this.f(b),C));H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),C));0<=V(a)&&H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),C));0!=V(a)&&H(this,this.b)},function(a,b){a=this.g(b,R.call(this,this.f(b),C));0<V(a)&&H(this,this.b)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),C));b&&this.g(b,a)},function(a,b){a=this.g(this.b,
R.call(this,this.f(this.b),C));0>V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),C));0==V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),C));0>=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),C));H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),C));0<=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,
R.call(this,this.f(this.b),C));0!=V(a)&&H(this,this.i+1);b&&this.g(b,a)},function(a,b){a=this.g(this.b,R.call(this,this.f(this.b),C));0<V(a)&&H(this,this.i+1);b&&this.g(b,a)},me,me,function(){this.g(this.b,0)},function(a,b){this.g(this.b,this.g(b,0))},function(a,b){this.g(b,S(this.f(b),this.f(this.b)))},function(a,b){this.g(b,S(this.f(b),this.b))},function(a,b){this.g(this.b,S(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,S(this.f(b),this.f(this.b))))},function(a,b){this.g(b,S(C-
this.f(b),this.f(this.b)))},function(a,b){this.g(b,S(C-this.f(b),this.b))},function(a,b){this.g(this.b,S(C-this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,S(C-this.f(b),this.f(this.b))))},Td,ke,Je,Td,function(a,b){this.g(b,S(this.f(b),C-this.f(this.b)))},function(a,b){this.g(b,S(this.f(b),C-this.b))},function(a,b){this.g(this.b,S(this.f(b),C-this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,S(this.f(b),C-this.f(this.b))))},Ie,Ie,le,le,function(a,b){this.g(b,W(this.f(b),this.f(this.b)))},
function(a,b){this.g(b,W(this.f(b),this.b))},function(a,b){this.g(this.b,W(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,W(this.f(b),this.f(this.b))))},function(a,b){this.g(b,U(this.f(b),this.f(this.b)))},function(a,b){this.g(b,U(this.f(b),this.b))},function(a,b){this.g(this.b,U(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,U(this.f(b),this.f(this.b))))},function(a,b){this.g(b,S(C-this.f(b),C-this.f(this.b)))},function(a,b){this.g(b,S(C-this.f(b),C-this.b))},
function(a,b){this.g(this.b,S(C-this.f(b),C-this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,S(C-this.f(b),C-this.f(this.b))))},function(a,b){this.g(b,Ve(this.f(b),this.f(this.b)))},function(a,b){this.g(b,Ve(this.f(b),this.b))},function(a,b){this.g(this.b,Ve(this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,Ve(this.f(b),this.f(this.b))))},ne,ne,function(a,b){this.g(this.b,C-this.f(b))},function(a,b){this.g(this.b,this.g(b,C-this.f(b)))},function(a,b){this.g(b,U(C-this.f(b),this.f(this.b)))},
function(a,b){this.g(b,U(C-this.f(b),this.b))},function(a,b){this.g(this.b,U(C-this.f(b),this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,U(C-this.f(b),this.f(this.b))))},function(a,b){this.g(b,C-this.f(this.b))},function(a,b){this.g(b,C-this.b)},function(){this.g(this.b,C-this.f(this.b))},function(a,b){this.g(this.b,this.g(b,C-this.f(this.b)))},function(a,b){this.g(b,U(this.f(b),C-this.f(this.b)))},function(a,b){this.g(b,U(this.f(b),C-this.b))},function(a,b){this.g(this.b,U(this.f(b),C-this.f(this.b)))},
function(a,b){this.g(this.b,this.g(b,U(this.f(b),C-this.f(this.b))))},function(a,b){this.g(b,U(C-this.f(b),C-this.f(this.b)))},function(a,b){this.g(b,U(C-this.f(b),C-this.b))},function(a,b){this.g(this.b,U(C-this.f(b),C-this.f(this.b)))},function(a,b){this.g(this.b,this.g(b,U(C-this.f(b),C-this.f(this.b))))},oe,oe,function(){this.g(this.b,C)},function(a,b){this.g(this.b,this.g(b,C))},pe,re,se,te,ue,ve,we,xe,pe,re,se,te,ue,ve,we,xe,pe,re,se,te,ue,ve,we,xe,pe,re,se,te,ue,ve,we,xe,ye,Ae,Be,Ce,De,Ee,
Fe,Ge,ye,Ae,Be,Ce,De,Ee,Fe,Ge,ye,Ae,Be,Ce,De,Ee,Fe,Ge,ye,Ae,Be,Ce,De,Ee,Fe,Ge,Ie,Ie,function(a,b){0==S(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){0==S(this.f(b),this.b*z)&&H(this,this.i+1)},function(){H(this,this.i+1)},function(){H(this,this.i+1)},function(a,b){0!=S(this.f(b),this.b)&&H(this,this.i+1)},function(a,b){0!=S(this.f(b),this.b*z)&&H(this,this.i+1)},Je,Je,function(a,b){0==S(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){0==S(this.f(b),X(this.f(this.b)))&&H(this,this.i+
1)},function(){H(this,this.i+1)},function(){H(this,this.i+1)},function(a,b){0!=S(this.f(b),this.f(this.b))&&H(this,this.i+1)},function(a,b){0!=S(this.f(b),X(this.f(this.b)))&&H(this,this.i+1)},function(a,b){this.g(b,T(this.f(b),this.b))},function(a,b){this.g(b,T(this.f(b),this.b*z))},function(a,b){a=this.f(b);0==S(a,this.b)&&H(this,this.i+1);this.g(b,T(a,this.b))},function(a,b){a=this.f(b);var c=this.b*z;0==S(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),
this.b))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),this.b*z))},function(a,b){a=this.f(b);0!=S(a,this.b)&&H(this,this.i+1);this.g(b,T(a,this.b))},function(a,b){a=this.f(b);var c=this.b*z;0!=S(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){this.g(b,T(this.f(b),this.f(this.b)))},function(a,b){this.g(b,T(this.f(b),X(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);0==S(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){a=this.f(b);var c=X(this.f(this.b));0==S(a,
c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),this.f(this.b)))},function(a,b){H(this,this.i+1);this.g(b,T(this.f(b),X(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);0!=S(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){a=this.f(b);var c=X(this.f(this.b));0!=S(a,c)&&H(this,this.i+1);this.g(b,T(a,c))},function(a,b){this.g(b,W(this.f(b),this.b))},function(a,b){this.g(b,W(this.f(b),this.b*z))},function(a,b){a=this.f(b);0==S(a,this.b)&&
H(this,this.i+1);this.g(b,W(a,this.b))},function(a,b){a=this.f(b);var c=this.b*z;0==S(a,c)&&H(this,this.i+1);this.g(b,W(a,c))},function(a,b){H(this,this.i+1);this.g(b,W(this.f(b),this.b))},function(a,b){H(this,this.i+1);this.g(b,W(this.f(b),this.b*z))},function(a,b){a=this.f(b);0!=S(a,this.b)&&H(this,this.i+1);this.g(b,W(a,this.b))},function(a,b){a=this.f(b);var c=this.b*z;0!=S(a,c)&&H(this,this.i+1);this.g(b,W(a,c))},function(a,b){this.g(b,W(this.f(b),this.f(this.b)))},function(a,b){this.g(b,W(this.f(b),
X(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);0==S(a,c)&&H(this,this.i+1);this.g(b,W(a,c))},function(a,b){a=this.f(b);var c=X(this.f(this.b));0==S(a,c)&&H(this,this.i+1);this.g(b,W(a,c))},function(a,b){H(this,this.i+1);this.g(b,W(this.f(b),this.f(this.b)))},function(a,b){H(this,this.i+1);this.g(b,W(this.f(b),X(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);0!=S(a,c)&&H(this,this.i+1);this.g(b,W(a,c))},function(a,b){a=this.f(b);var c=X(this.f(this.b));0!=S(a,
c)&&H(this,this.i+1);this.g(b,W(a,c))},function(a,b){this.g(b,U(this.f(b),this.b))},function(a,b){this.g(b,U(this.f(b),this.b*z))},function(a,b){a=this.f(b);0==S(a,this.b)&&H(this,this.i+1);this.g(b,U(a,this.b))},function(a,b){a=this.f(b);0==S(a,this.b*z)&&H(this,this.i+1);this.g(b,U(a,this.b*z))},function(a,b){H(this,this.i+1);this.g(b,U(this.f(b),this.b))},function(a,b){H(this,this.i+1);this.g(b,U(this.f(b),this.b*z))},function(a,b){a=this.f(b);0!=S(a,this.b)&&H(this,this.i+1);this.g(b,U(a,this.b))},
function(a,b){a=this.f(b);var c=this.b*z;0!=S(a,c)&&H(this,this.i+1);this.g(b,U(a,c))},function(a,b){this.g(b,U(this.f(b),this.f(this.b)))},function(a,b){this.g(b,U(this.f(b),X(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);0==S(a,c)&&H(this,this.i+1);this.g(b,U(a,c))},function(a,b){a=this.f(b);var c=X(this.f(this.b));0==S(a,c)&&H(this,this.i+1);this.g(b,U(a,c))},function(a,b){H(this,this.i+1);this.g(b,U(this.f(b),this.f(this.b)))},function(a,b){H(this,this.i+1);this.g(b,U(this.f(b),
X(this.f(this.b))))},function(a,b){a=this.f(b);var c=this.f(this.b);0!=S(a,c)&&H(this,this.i+1);this.g(b,U(a,c))},function(a,b){a=this.f(b);var c=X(this.f(this.b));0!=S(a,c)&&H(this,this.i+1);this.g(b,U(a,c))},Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],He=[function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a){this.w(a)},function(a,b){switch(b){case 0:a=this.f(this.b);a&8&&(this.j&=-131073);
a&131072&&(this.j&=-262145);break;default:this.w(a)}},function(a,b){switch(b){case 0:a=0;this.j&131072&&(a|=8);this.j&262144&&(a|=65536);this.g(this.b,a);break;default:this.w(a)}},function(a){this.w(a)},function(a){this.w(a)}];
function We(a){u.call(this,"ROM",a,128);this.Y=this.b=null;this.B=+a.addr;this.j=+a.size;this.i=a.alias;"string"==typeof this.i&&(this.i=eval(this.i));this.w=a.file;this.D=Ja(this.w);if(this.w){a=this.w;var b=Ka(this.D);"json"!=b&&"hex"!=b&&(a=cb()+"/api/v1/dump?file\x3d"+this.w+"\x26format\x3dbytes\x26decimal\x3dtrue");var c=this;ab(a,null,!0,function(a,b,f){f?(c.ha("Unable to load ROM resource (error "+f+": "+a+")"),c.w=null):(Db(c.Ta,a,b),(a=db(a,b))?(c.b=a.ca,c.Y=a.Y):c.w=null);Xe(c)})}}
ta(We,u);We.prototype.xa=function(a,b,c,d){this.G=b;this.v=c;this.C=d;Xe(this)};We.prototype.za=function(){this.Y&&(this.C&&Ye(this.C,this.id,this.B,this.j,this.Y),delete this.Y);return!0};We.prototype.pa=function(){return!0};
function Xe(a){if(!dc(a)){if(a.w){if(!a.b||!a.G)return;a.j||(a.j=a.b.length);if(a.b.length!=a.j)bc(a,"ROM size ("+n(a.b.length,8,!0)+") does not match specified size ("+n(a.j,8,!0)+")");else{var b=a.B;if(Zc(a.G,b,a.j,gd)){var c;for(c=0;c<a.b.length;c++)Tc(a.G,b+c,a.b[c]);b=!0}else b=!1;if(b){b=[];"number"==typeof a.i?b.push(a.i):null!=a.i&&a.i.length&&(b=a.i);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.G,g=d.j,h=[],k=d.B>>>f.i;0<g&&k<f.b.length;)h.push(f.b[k++]),g-=16384;f=d.G;d=d.j;g=0;for(e>>>=
f.i;0<d&&e<f.b.length;){k=h[g++];if(!k)break;f.b[e++]=k;d-=16384}}delete a.b}}}ec(a)}}ob(function(){for(var a=x(document,v,"rom"),b=0;b<a.length;b++){var c=a[b],d=Sb(c);d=new We(d);Ib(d,c)}});
function Ze(a){u.call(this,"RAM",a);this.Y=this.Ma=null;this.i=+a.addr;this.j=+a.size;this.ja=a.load;this.wa=a.exec;null!=this.ja&&(this.ja=+this.ja);null!=this.wa&&(this.wa=+this.wa);this.w=this.D=!1;this.b=a.file;this.B=Ja(this.b);if(this.b){a=this.b;var b=Ka(this.B);"json"!=b&&"hex"!=b&&(a=cb()+"/api/v1/dump?file\x3d"+this.b+"\x26format\x3dbytes\x26decimal\x3dtrue");var c=this;ab(a,null,!0,function(a,b,f){f?(c.ha("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(Db(c.Ta,a,b),(a=db(a,
b))?(c.Ma=a.Ma,c.Y=a.Y,null==c.ja&&(c.ja=a.ja),null==c.wa&&(c.wa=a.wa)):c.b=null);$e(c)})}}ta(Ze,u);Ze.prototype.xa=function(a,b,c,d){this.G=b;this.v=c;this.C=d;$e(this)};Ze.prototype.za=function(a,b){this.Y&&(this.C&&Ye(this.C,this.id,this.i,this.j,this.Y),delete this.Y);b||this.reset();return!0};Ze.prototype.pa=function(){return!0};
function $e(a){if(a.G&&(!a.w&&a.j&&(Zc(a.G,a.i,a.j,1)?a.w=!0:a.j=0),!dc(a))){if(!a.w)t("No RAM allocated");else if(a.b){if(!a.Ma)return;af(a,a.Ma,a.ja,a.wa,a.i)?a.status('Loaded image "%s"',a.B):a.ha('Error loading image "'+a.B+'"')}a.D=!0;ec(a)}}
Ze.prototype.reset=function(){if(this.w&&!this.D){var a=this.G,b=this.i,c=this.j,d=b&16383;for(b>>>=a.i;0<c&&b<a.b.length;){var e=a.b[b],f=c,g=0;g=void 0===g?0:g;d=d||0;void 0===f&&(f=e.size);0>g&&g>=-B&&(g+=D);g=Math.trunc(Math.abs(g))%D;for(var h=d;f--&&h<e.size;h++)e.C(g,d,e.A+d);c-=16384;b++;d=0}this.Ma&&af(this,this.Ma,this.ja,this.wa,this.i,!this.C)}this.D=!1};
function af(a,b,c,d,e,f){var g=!1;null==c&&(c=e);if(null!=c){for(g=0;g<b.length;g++)Tc(a.G,c+g,b[g]);g=!0}g&&(null==d&&(I(a.v),f=!1),null!=d&&(a=a.v,a.Ra=d,H(a,d),f?a.flags.Z?a.flags.P||Lc(a):a.flags.ea=!0:a.C&&a.flags.Z?I(a)||a.F.flags.reset||(vd(a.C),K(a.F,-1)):!1===f&&I(a),!a.flags.P&&a.La&&a.La.stop()));return g}ob(function(){for(var a=x(document,v,"ram"),b=0;b<a.length;b++){var c=a[b],d=Sb(c);d=new Ze(d);Ib(d,c)}});
function bf(a){u.call(this,"SerialPort",a,1048576);this.w=a.upperCase;"string"==typeof this.w&&(this.w="true"==this.w);this.j=!0;this.i=[];a=a.binding;if("console"!=a&&a){var b=Vb("Panel",this.id);b&&(b=b.I[a])&&this.qa("",a,b)}this.b=this.B=null;this.exports={connect:this.Jb,receiveData:this.bb,receiveStatus:this.hc,setConnection:this.kc}}ta(bf,u);m=bf.prototype;
m.qa=function(a,b,c){if(!a||"textarea"==a){var d=this;this.I[b]=c;c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?Aa.vb:Aa.Ob:46==c?b=Aa.vb:a.ctrlKey&&c>=Aa.ub&&c<=Aa.Pb&&(b=c-(Aa.ub-Aa.Lb));b&&(a.preventDefault&&a.preventDefault(),d.bb(b));return!0};c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==Aa.Nb&&(b=Aa.Mb);d.bb(b);a.preventDefault&&a.preventDefault()}return!0};c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.bb(a.getData("Text"))};c.removeAttribute("readonly");return!0}return!1};m.xa=function(a,b,c,d){this.F=a;this.G=b;this.v=c;this.C=d;ec(this)};
m.Jb=function(a){if(!this.b){var b=sd(this.F,"connection");if(b){var c=b.split("-\x3e");if(2==c.length){var d=Za(c[0]);if(d!=this.Cb)return;c=Za(c[1]);if(this.b=Ub(c)){var e=this.b.exports;if(e){var f=e.connect;f&&f.call(this.b,this.j);if(this.B=e.receiveData){this.j=a;this.status("Connected %s.%s to %s",this.Ta,d,c);return}}}}this.status("Unable to establish connection: %s",b)}}};m.za=function(a,b){if(!b)if(this.Jb(this.j),!a)this.reset();else if(!this.restore(a))return!1;return!0};
m.pa=function(a){return a?this.save():!0};m.reset=function(){};m.save=function(){var a=new F(this);a.set(0,[]);return a.data()};m.restore=function(){return!0};m.bb=function(a){if("number"==typeof a)this.i.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.i.push(b)}else this.i=this.i.concat(a);return!0};m.hc=function(){};m.kc=function(a,b){return this.b?!1:(this.b=a,this.B=b,!0)};
ob(function(){for(var a=x(document,v,"serial"),b=0;b<a.length;b++){var c=a[b],d=Sb(c);d=new bf(d);Ib(d,c)}});function cf(a){u.call(this,"Debugger",a);this.S=+a.base||16;this.L=32;this.U=["{","}"];this.ra=["[","]"];this.Ra=this.D=0;this.V=!1;this.B=-1;this.w=[];this.b={}}ta(cf,u);cf.prototype.pb=function(){return-1};cf.prototype.qb=function(){};
function df(a,b,c,d){if(c)if(b){0>a.B&&a.w.length&&(a.B=0);if(0>a.B||b!=a.w[a.B])a.w.splice(0,0,b),a.B=0;a.B--}else a.V?b="end":b=a.w[a.B+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(Za(b.substring(c,f))),c=f+1}}return a}function ef(a,b,c){if(32>=a.L)return b&c;b=Y(a,b,0,!0);c=Y(a,c,0,!0);return((b/ff|0)&(c/ff|0))*ff+((b&c)>>>0)}
function gf(a,b,c){if(32>=a.L)return b|c;b=Y(a,b,0,!0);c=Y(a,c,0,!0);return((b/ff|0)^(c/ff|0))*ff+((b^c)>>>0)}cf.prototype.Gb=function(a,b){return a*b};function Y(a,b,c,d){var e=b;c=c||a.L;if(d)if(32==c)e=b>>>0;else if(32>c)e=b&(1<<c)-1;else{if(a=Math.pow(2,c),0>b||b>=a)e=b%a,0>e&&(e+=a)}else 32>=c?e=b<<32-c>>32-c:(a=Math.pow(2,c-1),b>=a?(e=b%a,(b/a|0)&1&&(e-=a)):b<-a&&(e=b%a,((-b-1)/a|0)&1?e&&(e+=a):e||(e-=a)));b!=e&&(b=e);return b}
function hf(a,b,c,d){for(d=void 0===d?-1:d;d--&&c.length;){var e=c.pop();if(2>b.length)return!1;var f=b.pop();var g=b.pop();switch(e){case "*":g=a.Gb(g,f);break;case "/":if(!f)return!1;g=Math.trunc(g/f);break;case "^/":if(!f)return!1;g%=f;break;case "+":g+=f;break;case "-":g-=f;break;case "\x3c\x3c":g<<=f;break;case "\x3e\x3e":g>>=f;break;case "\x3e\x3e\x3e":g>>>=f;break;case "\x3c":g=g<f?1:0;break;case "\x3c\x3d":g=g<=f?1:0;break;case "\x3e":g=g>f?1:0;break;case "\x3e\x3d":g=g>=f?1:0;break;case "\x3d\x3d":g=
g==f?1:0;break;case "!\x3d":g=g!=f?1:0;break;case "\x26":g=ef(a,g,f);break;case "!":case "|":e=g;32>=a.L?g=e|f:(e=Y(a,e,0,!0),f=Y(a,f,0,!0),g=(e/ff|0|f/ff|0)*ff+((e|f)>>>0));break;case "^!":g=gf(a,g,f);break;case "\x26\x26":g=g&&f?1:0;break;case "||":g=g||f?1:0;break;case ",,":g=Y(a,g,18,!0)*Math.pow(2,18)+Y(a,f,18,!0);break;case "_":case "^_":"^_"==e&&(f=35-(f&255));f&&(g=Y(a,g,0,!0),g=0<f?g*Math.pow(2,f):Math.trunc(g/Math.pow(2,-f)));break;default:return!1}b.push(Y(a,g))}return!0}
function jf(a,b,c,d,e,f){var g,h=!1,k=0,l=[],p=[],q=a.S;for(a.S=e;c<d;){var w=b[c++].trim();var r=c<d?b[c++]:"";if(w)var G=kf(a,w,void 0,f,k);else if("{"==r){w=1;for(G=c;c<d;)if(c++,r=c<b.length?b[c++]:"","{"==r)w++;else if("}"==r&&!--w)break;G=jf(a,b,G,c-1,a.S,f);null!=G&&k&&(G=lf(a,G,k));w=c<d?b[c++].trim():"";r=c<d?b[c++]:""}else{if(" "==r)continue;if("^B"==r){a.S=2;continue}if("^O"==r){a.S=8;continue}if("^D"==r){a.S=10;continue}if(!(k&-1073741824)){if("+"==r)continue;if("-"==r){k=k<<2|1;continue}if("~"==
r||"^-"==r){k=k<<2|2;continue}if("^L"==r){k=k<<2|3;continue}}h=!0;break}if(void 0===G)if(f)f.push(w),G=0;else{h=!0;f=[];break}l.push(Y(a,G));if(" "==r)if(c<b.length-1&&!b[c])c++,r=b[c++];else{h=!0;break}if(!r)break;k="\x3c"==a.U[0]?mf:nf;if(!k[r]){h=!0;break}p.length&&k[r]<=k[p[p.length-1]]&&hf(a,l,p,1);p.push(r);a.S="^_"==r?10:e;k=0}if(h||!hf(a,l,p)||1!=l.length)h=!0;h?f||a.u("parse error ("+(w||r)+")"):g=l.pop();a.S=q;return g}
function of(a,b,c,d,e){for(var f;0<=(f=b.indexOf(c));){for(var g=0,h=f+1,k=e;h<b.length;){var l=b[h++];if(l==c){k=-1;break}if(!k)break;k--;l=l.charCodeAt(0);7==d?l&=127:l=l-32&63;g=Y(a,g*Math.pow(2,d)+l,d*e,!0)}if(0<=k){a.u("parse error ("+c+b+c+")");return}b=b.substr(0,f)+L(a,g,-1)+b.substr(h)}return b}
function pf(a,b,c){var d=void 0,e=!1===c;c=Array.isArray(c)?c:void 0;if(b){"{"!=a.U[0]&&(b=b.split(a.U[0]).join("{").split(a.U[1]).join("}"));b=of(a,b,'"',7,5);if(!b)return d;b=of(a,b,"'",6,6);if(!b)return d;16!=a.S&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=jf(a,b,0,b.length,a.S,c);void 0!==d&&e&&qf(a,null,d)}return d}
function lf(a,b,c){for(;c;){var d;switch(c&3){case 1:b=-Y(a,b);break;case 2:b=gf(a,b,-1);break;case 3:for(d=35;0<=d&&!ef(a,b,Math.pow(2,d));)d--;b=35-d}c>>>=2}return b}
function kf(a,b,c,d,e){e=void 0===e?0:e;var f=Array.isArray(d)?d:void 0;if(void 0!=b){var g=a.pb(b);if(0<=g)g=a.qb(g);else if(g=b,a.b[g]?g=a.b[g].value:(g=g.substr(0,6),g=a.b[g]&&a.b[g].value),void 0!=g){var h=a.b[b]&&a.b[b].Kb;h&&(f?f.push(h):(f=pf(a,h,d),void 0!==f?g+=f:(d||a.u("undefined "+(c||"value")+": "+b+" ("+h+")"),g=void 0)))}else g=Ca(b,1<b.length||10<a.S?a.S:10);void 0!=g?g=Y(a,lf(a,g,e)):d||a.u("invalid "+(c||"value")+": "+b)}else d||a.u("missing "+(c||"value"));return g}
function qf(a,b,c){var d=!1;if(void 0!==c){d=!0;var e=8==a.S?L(a,c,a.L,8,1)+"  "+c+".":L(a,c,a.L,16,1)+"  "+L(a,c,a.L,8,1)+"  "+L(a,c,a.L,2,32>=a.L?8:6)+"  "+c+".";32<=c&&127>c&&(e+=" '"+String.fromCharCode(c)+"'")}a.u((null!=b?b+": ":"")+e);return d}function rf(a){var b=a.b;a.b={};return b}function sf(a,b){var c=0;if(a.b){if(b)return qf(a,b,a.b[b]&&a.b[b].value);b=Object.keys(a.b);b.sort();for(var d=0;d<b.length;d++)qf(a,b[d],a.b[b[d]].value),c++}return 0<c}
function L(a,b,c,d,e){c=void 0===c?0:c;e=void 0===e?0:e;switch((void 0===d?0:d)||a.S){case 2:(a=0<c?c:0)?36<a&&(a=36):(a=Math.abs(b),a=255>=a?8:262143>=a?18:36);b=Da(b,2,a,"",e);break;case 8:b=Ea(b,0<c?(c+2)/3|0:0,!!e);break;case 10:b=Fa(b,0<c?Math.ceil(.3*c):0);break;default:b=n(b,0<c?c+3>>2:0,!!e)}return c=0>c?b.replace(/^0+([0-9A-F]+)$/i,"$1"):b}
var nf={"||":5,"\x26\x26":6,"!":7,"|":7,"^!":8,"\x26":9,"!\x3d":10,"\x3d\x3d":10,"\x3e\x3d":11,"\x3e":11,"\x3c\x3d":11,"\x3c":11,"\x3e\x3e\x3e":12,"\x3e\x3e":12,"\x3c\x3c":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},mf={",,":1,"||":5,"\x26\x26":6,"!\x3d":10,"\x3d\x3d":10,"\x3e\x3d":11,"\x3e":11,"\x3c\x3d":11,"\x3c":11,"\x3e\x3e\x3e":12,"\x3e\x3e":12,"\x3c\x3c":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"\x26":15,_:19,"^_":19,"{":20,"}":20},ff=Math.pow(2,32);
function tf(a){cf.call(this,a);this.Ha=!1;this.Ea=18;this.L=36;this.U=["\x3c","\x3e"];this.ra=[];this.Ga=Z();this.M=Z(0);this.ma=Z(0);this.fa=Z(0);this.H=[];this.i=this.N=this.K=[];uf(this);this.X=this.na=0;this.j=[];this.Aa=void 0;vf(this);this.C=this;this.ta={};this.aa=0;this.ba=null;this.R=[];wf(this,a.messages);this.sa=a.commands;this.Fa=[];this.O=0;this.La=this.Ba=null;this.D=this.Ja=this.Ia=this.la=this.va=0;this.ua=this.ka=this.J=null;var b=this;window?void 0===window[v]&&(window[v]=function(a){return xd(b,
a)}):void 0===global[v]&&(global[v]=function(a){return xd(b,a)})}ta(tf,cf);function xf(a){a=a&&a.A;null==a&&(a=-1);return a}function Z(a,b,c){return{A:void 0===a?null:a,$a:void 0===b?!1:b,oa:!1,S:c}}function yf(a,b,c,d){a.A=b;a.$a=c||!1;a.oa=!1;a.S=d}function zf(a){return[a.A,a.$a,a.oa,a.S,a.cb]}function Af(a,b){var c=Z(b[0],b[1],b[2]);c.oa=b[3];b[4]&&(c.yb=df(a,c.cb=b[4]));return c}m=tf.prototype;
m.xa=function(a,b,c,d){this.G=b;this.F=a;this.v=c;this.ka=a.j;this.Ea=b.D;(b=sd(a,"messages"))&&wf(this,b);if(a=sd(a,"commands"))this.sa=a;Bf(this,function(a){a:{var b=d.G.b,c=a[0],e=a=0,k=b.length;if(c){a=xf(Cf(d,c,d.ma));if(-1===a){d.u("invalid address: "+c);break a}e=a>>>d.G.i;k=1}d.u("blockid   physical   blockaddr  used    size    type");d.u("--------  ---------  ---------  ------  ------  ----");c=-1;for(var l=0;k--;){var p=b[e];p.type==c?l++||d.u("..."):(c=p.type,l=bd[c],p&&d.u(n(p.id,8)+"  %"+
n(e<<d.G.i,8)+"  %"+n(p.A,8)+"  "+n(p.Wa,4,!0)+"  "+n(p.size,4,!0)+"  "+l),c!=fd&&(c=-1),l=0);a+=16384;e++}}});ec(this)};
m.qa=function(a,b,c){var d=this;switch(b){case "debugInput":return this.J=this.I[b]=c,c.onkeydown=function(a){if(13==a.keyCode){var b=d.J.value;d.J.value="";xd(d,b,!0)}else if(27==a.keyCode)d.J.value=b="";else if(38==a.keyCode?(b=null,d.B<d.w.length-1&&(b=d.w[++d.B])):40==a.keyCode&&(0<d.B?b=d.w[--d.B]:(b="",d.B=-1)),null!=b){var c=b.length;d.J.value=b;d.J.setSelectionRange(c,c)}null!=b&&a.preventDefault&&a.preventDefault()},!0;case "debugEnter":return this.I[b]=c,mb(c,function(){if(d.J){var a=d.J.value;
d.J.value="";xd(d,a,!0);return!0}return!1}),!0;case "step":return this.I[b]=c,mb(c,function(a){var b=!1;fc(d,!0)||(gc(d,!0),b=Mc(d,a?1:0,null),gc(d,!1));return b}),!0}return!1};function wd(a){if(a.J){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.J.focus();window&&window.scrollTo(b,c)}}m.Ka=function(a,b){var c=-1,d=xf(a);-1!==d&&(c=Uc(this.G,d),b&&null!=a.A&&(a.A+=b||1));return c};m.wb=function(a,b,c){var d=xf(a);-1!==d&&(Tc(this.G,d,b),c&&null!=a.A&&(a.A+=c||1),K(this.F,-1))};
m.Gb=function(a,b){0>a&&(a+=D);0>b&&(b+=D);a=Re.call(this.v,a,b,!1,!0);a>=B&&(a-=D);return a};
function Cf(a,b,c){var d;c||(c=Z());var e=c.A;if(void 0!==b){a:{e=a.U[0];var f=a.U[1];var g="("==e||"{"==e||"["==e?"\\":"";var h="["==e?"\\":"";for(h=new RegExp(g+e+"([^"+h+e+h+f+"]+)"+g+f);g=b.match(h);){var k=pf(a,g[1]);if(void 0===k){b=void 0;break a}b=b.replace(e+g[1]+f,null!=k?L(a,k):"undefined")}if(a.ra.length)for(e=a.ra[0],f=a.ra[1],g="("==e||"{"==e||"["==e?"\\":"",h="["==e?"\\":"",h=new RegExp(g+e+"([^"+h+e+h+f+"]+)"+g+f);g=b.match(h);)b=b.replace("["+g[1]+"]","unimplemented");for(;e=b.match(/\$([a-z]+)/i);){f=
null;switch(e[1].toLowerCase()){case "ops":f=a.Ra}if(null==f)break;b=b.replace(e[0],f.toString())}}if("%"==b.charAt(0)){var l=!0;b=b.substr(1)}var p;e=b;if(e.match(/^[a-z_][a-z0-9_]*$/i))for(e=e.toUpperCase(),f=0;f<a.H.length;f++)if(g=a.H[f].Y[e],null!=g){var q=g.o;break}null!=q&&(p=Z(q));if(p)return p;0<=b.indexOf("0x")?d=16:0<=b.indexOf("0o")?d=8:0<=b.indexOf(".")&&(d=10);e=pf(a,b)}null!=e&&(e=Df(e,a.Ea),yf(c,e,l,d));return c}
function Ef(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.yb=df(a,b.cb=c[2]))}function Df(a,b){0>a&&a>=-B&&(a+=D);return Math.trunc(Math.abs(a))%Math.pow(2,void 0===b?36:b)}function Ff(a,b){return L(a,b/lc,18)+" "+L(a,b%lc,18)}
function wf(a,b){a.C=a;a.aa=536870916;a.ba=null;a.R=[];b=df(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in uc){a:{var d=void 0;if(Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}}0<=d&&(a.aa|=uc[c],a.u(c+" messages enabled"))}}function Bf(a,b){for(var c in uc)if(16==uc[c]){a.ta[c]=b;break}}m.pb=function(a){return Gf.indexOf(a.toUpperCase())};
m.qb=function(a){var b=this.v;switch(a){case Hf:var c=b.i;break;case If:c=b.H;break;case Jf:c=b.b;break;case Kf:c=b.j&y;break;case Lf:c=b.j&131072?1:0;break;case Mf:c=b.j&65536?1:0;break;case Nf:c=b.j&32768?1:0;break;case Of:c=b.j&8192?1:0;break;case Pf:c=b.j&32?1:0;break;case Qf:c=b.j&262144?1:0}return c};
m.message=function(a,b){b&&(a+=" @"+L(this,Z(this.v.ma).A,18));if(!this.ba||a!=this.ba)if(this.ba=a,this.aa&1073741824)this.R.push(a);else{var c;if(this.aa&-2147483648&&this.v&&(c=this.v.flags.P)||fc(this,!0))pd(this),c&&(a+=" (cpu halted)");this.u(a);this.v&&(a=this.v,Fd(a),a.ka=0,a.F&&K(a.F,void 0))}};
function vf(a){var b;if(!Nd(a))a.j&&a.j.length&&a.u("instruction history buffer freed"),a.X=0,a.j=[];else if(!a.j||!a.j.length){a.j=Array(Rf);for(b=0;b<a.j.length;b++)a.j[b]=Z();a.X=0;a.u("instruction history buffer allocated")}}function Sf(a,b,c){if(!Tf(a,c))return!1;Lc(a.v,b);return!0}
function Mc(a,b,c,d){if(!Tf(a))return!1;var e="";null===c&&(e=(c=!a.Ba||"tr"==a.Ba)?"tr":"t");a.D=0;b||Nd(a)&&Od(a,a.v.i,0);try{b=Dd(a.v,b);var f=a.v.Ya(b);0<f&&(Nc(a.v,f),a.D+=f,Qc(a.v,f,!0),Rc(a.v,f),a.la++)}catch(g){"number"!=typeof g&&(b=g,a.D=0,bc(a.v,b.stack||b.message))}!1!==d&&(a.ka&&a.ka.stop(),K(a.F,-1));vd(a,c||!1,e);return 0<a.D}function pd(a,b){a.v&&I(a.v,b)}function vd(a,b,c){b=void 0===b?!0:b;a.Ha&&(c&&a.u(Uf+c),yf(a.M,a.v.i),b&&1!=a.O?Vf(a):Wf(a))}
function Tf(a,b){var c;(c=!a.v||!dc(a.v))||(c=a.v,c.flags.Z?c=!0:(c.u(c.toString()+" not powered"),c=!1),c=!c);return c||a.v.flags.P?(b||a.u("cpu busy or unavailable, command ignored"),!1):!cc(a.v)}m.za=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};m.pa=function(a,b){b&&this.u(a?"suspending":"shutting down");return a?this.save():!0};m.reset=function(a){vf(this);this.la=0;this.ba=null;this.D=0;yf(this.M,this.v.i);this.flags.P=!1;Xf(this);a||vd(this)};
m.save=function(){var a=new F(this);a.set(0,zf(this.M));a.set(1,zf(this.ma));a.set(2,zf(this.fa));a.set(3,[this.w,this.V,this.aa]);a.set(4,this.H);return a.data()};m.restore=function(a){var b=0;void 0!==a[3]&&(this.M=Af(this,a[b++]),this.ma=Af(this,a[b++]),this.fa=Af(this,a[b++]),this.w=a[b][0],"string"==typeof this.w&&(this.w=[this.w]),this.V=a[b][1],this.aa|=a[b][2]);a[4]&&(this.H=a[4]);return!0};m.start=function(a,b){this.O||this.u("running");this.flags.P=!0;this.Ia=a;this.Ja=b};
m.stop=function(a,b){if(this.flags.P){this.flags.P=!1;this.D=b-this.Ja;if(!this.O){b="stopped";if(this.D){a-=this.Ia;var c=0<a?Math.round(1E3*this.D/a):0;b+=" (";Nd(this)&&(b+=this.la+" instructions, ",this.la=0);b+=this.D+" cycles, "+a+" ms, "+c+" hz)"}else hc(this,-2147483648)&&(b+=" (use the 't' command to execute blocked faults)");this.u(b)}vd(this,!0);wd(this);Xf(this,this.v.i);this.ba=null}};function Nd(a){return 1<a.i.length||!!a.na}
function Od(a,b,c){var d=-1;c||(d=a.v.f(b),2756==d>>23&&a.v.ma==b&&(b=Ld(a.v,1)));if(0<c&&(a.na&&!--a.na||od(a,b,1,a.i)))return!0;0<=c&&a.j.length&&(a.la++,0>d&&(d=a.v.f(b)),0<=d&&(yf(a.j[a.X],b),++a.X==a.j.length&&(a.X=0)));return!1}
function Yf(a,b,c,d){var e=Z(b.A),f=a.Ka(b,1),g,h=0,k=f/qc|0,l;for(l in Zf)if(g=Zf[l][k&l]){var p=+l;k>>=6;switch(p){case 32512:var q=$f;h=k&3;break;case 32256:q=ag;h=k&7;break;case 29248:q=bg,h=(k&48)>>2|(k&6)>>1}break}q=q&&q[h]||"";"S"==q&&g>cg&&(q="B");q=dg[g||0]+q;if(g){if(28700==p)p=f/rc&127,h=L(a,p,-1);else for(p=f>>23&15,h=L(a,p,-1),k=0;h&&k<eg.length;k++)if(g==eg[k][0]&&(l=eg[k][p])){q=dg[l];h="";break}q=Oa(q,8)+(h?h+",":"");f&4194304&&(q+="@");q+=L(a,f&262143,-1);(f=f>>18&15)&&(q+="("+L(a,
f,-1)+")")}else q=Oa(q,8)+Ff(a,f);f=q;g="";p=L(a,e.A,18)+":";if(-1!==e.A&&-1!==b.A){do if(q=a.Ka(e,1),g+=" "+Ff(a,q),null==e.A)break;while(e.A!=b.A)}p+=Oa(g,16)+f;c&&(p=Oa(p,48)+";"+(c||""),p=a.v.flags.Sa?p+("cycles\x3d"+yd(a.v).toString()+" cs\x3d"+n(a.v.Fa)):p+(null!=d?"\x3d"+d.toString():""));return p}
function fg(a,b,c,d,e){var f=-1;if(b){for(var g=b.toUpperCase(),h=0;h<eg.length;h++)for(var k in eg[h])if(+k){var l=eg[h][k];if(g==dg[l]){g=dg[eg[h][0]];c&&(c=L(a,+k)+","+c);break}}for(var p in Zf){var q=+p;k=Zf[p];switch(q){case 32512:h=$f;break;case 32256:h=ag;break;case 29248:h=bg;break;default:h=[""]}for(var w in k){l=k[w];for(var r=0;r<h.length;r++){var G=h[r];"S"==G&&l>cg&&(G="B");if(g==dg[l]+G){f=29248!=q?r:(r&3)<<1|(r&12)<<2;f=(w|f<<6)*qc;break}}if(0<=f)break}if(0<=f)break}!(0>f)||c&&c.match(/^[0-9A-Z$%.?]/i)||
(c=b+c,b="",f=0)}else c&&(f=q=0);if(0<=f&&c)for(g=c.split(","),2<g.length&&(e||a.u("too many operands: "+c),g.length=0,f=-1),p=0;p<g.length;p++)if(l=g[p].trim()){w=l.match(/(@?)([^(]*)\(?([^)]*)\)?/);if(!w){e||a.u("unknown operand: "+l);f=-1;break}w[1]&&(f+=4194304);if(l=w[3]){l=pf(a,l,e);if(void 0==l){f=-1;break}l=X(Y(a,l,36,!0));f+=l}l=w[2];if(p||1==g.length)l=l?l.replace(/(^|[^0-9])\./g,"$1"+L(a,d,18)):"0";l=pf(a,l,e);if(void 0==l){f=-1;break}if(!p&&1<g.length)if(28700==q){if(0>l||127<l)l&=127;
f+=l*rc}else{if(0>l||15<l)l&=15;f+=l<<23}else{if(b||p)if(0>l||262143<l)l&=kc;f+=l}}0>f&&!e&&a.u("unknown instruction: "+b+" "+c);return f}function uf(a){var b;a.i=["bp"];if(void 0!==a.N)for(b=1;b<a.N.length;b++){var c=a.N[b];c=xf(c);var d=a.G;nd(d.b[c>>>d.i],!1)}a.N=["br"];if(void 0!==a.K)for(b=1;b<a.K.length;b++)c=a.K[b],c=xf(c),d=a.G,nd(d.b[c>>>d.i],!0);a.K=["bw"];a.va=0;a.na=0}
m.Pa=function(a,b,c){var d=!0;c||Kg(this,a,b,!1,!0);if(a!=this.i){var e=xf(b);if(-1===e)this.u("invalid address: "+L(this,b.A,18)),d=!1;else{var f=this.G;f.b[e>>>f.i].Pa(e&16383,a==this.K)}}d&&(a.push(b),c?b.oa=!0:(Mg(this,a,a.length-1,"set"),vf(this)))};function Kg(a,b,c,d,e){var f=!1;c=xf(c);for(var g=1;g<b.length;g++){var h=b[g];if(c==xf(h)&&(!d||h.oa)){f=!0;h.oa||e||Mg(a,b,g,"cleared");b.splice(g,1);b!=a.i&&(d=a.G,nd(d.b[c>>>d.i],b==a.K));h.oa||vf(a);break}}return f}
function Ng(a,b){for(var c=1;c<b.length;c++)Mg(a,b,c);return b.length-1}function Mg(a,b,c,d){c=b[c];a.u(b[0]+" "+L(a,c.A,18)+(d?" "+d:c.cb?' "'+c.cb+'"':""))}function Xf(a,b){if(void 0!==b)od(a,b,1,a.i,!0),a.O=0;else for(b=1;b<a.i.length;b++){var c=a.i[b];if(c.oa){if(!Kg(a,a.i,c,!0))break;b=0}}}
function od(a,b,c,d,e){var f=!1;if(!a.va++)for(var g=1;!f&&g<d.length;g++){var h=d[g];if(!e||h.oa)for(var k=xf(h)&(d==a.i?65535:-1),l=0;l<c;l++)if(b+l==k){var p;f=!0;h.oa&&(Kg(a,d,h,!0),e=!0);if(p=h.yb){f=!1;for(var q=0;q<p.length;q++)if(!Og(a,p[q],!0)){if(p[q].indexOf("if")){f=!0;break}for(var w=q+1;w<p.length&&p[w].indexOf("else");w++)q++;if(w==p.length){f=!0;break}}a.v.flags.P||(f=!0)}if(f){e||Mg(a,d,g,"hit");break}}}a.va--;return f}
function Pg(a,b){b=void 0===b?!0:b;for(var c="",d=0;16>d;d++){!d||d&3||(c+="\n");var e=a,f=Ea(d,2);yf(e.Ga,d);f+="\x3d"+L(e,e.Ka(e.Ga),36)+" ";c+=f}if(b){b="";for(d=0;d<Gf.length;d++)(e=Gf[d]||"")&&(e+="\x3d"+L(a,a.qb(d),d>=Lf?1:d==If?23:18)+" "),b+=e;c+="\n"+b}return c}m.Eb=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Ye(a,b,c,d,e){var f=[],g;for(g in e){var h=e[g];"number"==typeof h&&(e[g]=h={o:h});var k=h.o,l=h.a;if(void 0!==k){var p=f;k=[k>>>0,g];var q=$a(p,k,a.Eb);0>q&&p.splice(-(q+1),0,k)}l&&(h.a=l.replace(/''/g,'"'))}a.H.push({xd:b,A:c,Ub:d,Y:e,Ab:f})}function Qg(a,b,c){var d=[],e=xf(b)>>>0;for(b=0;b<a.H.length;b++){var f=a.H[b],g=f.A>>>0,h=f.Ub;if(e>=g&&e<g+h){e=$a(f.Ab,[e-g],a.Eb);0<=e?Rg(a,b,e,d):c&&(e=~e,Rg(a,b,e-1,d),Rg(a,b,e,d));break}}return d}
function Sg(a,b,c){var d=a.G,e=0,f=null,g=0;b.forEach(function(a,b){d.b[(b&d.j)>>>d.i].g(a,b&16383,b);null==f&&(f=b);b>g&&(g=b);e++});e?(b="start address ",null!=c?(H(a.v,c),b+=L(a,c)):b+="unspecified",a.u(e+" words loaded at "+L(a,f)+"-"+L(a,g)+", "+b),vd(a)):a.u("no data")}function Rg(a,b,c,d){var e={},f=a.H[b].Ab,g=0,h=null;0<=c&&c<f.length&&(g=f[c][0],h=f[c][1]);h&&(e=a.H[b].Y[h],h="."==h.charAt(0)?null:e.l||h);d.push(h);d.push(g);d.push(e.a);d.push(e.c)}
function Tg(a,b){var c=b[0].substr(1),d=b[1]&&"0"<=b[1][0]&&"9">=b[1][0]?b[1]:void 0,e=d?b[2]:b[1],f=Cf(a,d,a.fa);if(!e)return a.u("begin assemble at "+L(a,f.A,18)),a.V=!0,K(a.F),!0;var g=e.match(/^(['"]?)(.*?)(\.klm|\.mac|\.html|\.txt|)\1$/i);if(g&&(g[1]||g[3])){f=Cf(a,d);if(a.ua)a.u("assembly already in progress");else{var h=g[2]+g[3];g[3]||(c+="s");var k=f.A,l=a.ua=new Ug(a);Vg(l,h,k,c,function(b,c){if(!b)try{var d=l.I;null==d&&(d=k);Sg(a,l.T,d)}catch(r){"number"==typeof r?b=r||-1:(a.u(r.message),
b=-1)}b&&a.u("error ("+b+") processing "+(c||h));a.ua=null;b||xd(a)})}return!1}b.shift();b.shift();b.shift();b=fg(a,e,b.join(""),f.A||0);0<=b&&(a.wb(f,b),a.u(Yf(a,f)));return!0}function Wg(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return sf(a)||a.u("no variables"),!0;if(!c[2])return sf(a,c[1]);if(!c[3])return delete a.b[c[1]],!0;b=pf(a,c[3]);return void 0!==b?(a.b[c[1]]={value:b,Kb:void 0},!0):!1}a.u("invalid assignment:"+b);return!1}
function Xg(a,b,c){var d=null;b=Cf(a,b);var e=Qg(a,b,!0);if(e.length){var f;if(e[0]){var g="";(f=b.A-e[1])&&(g=" + "+n(f,4,!0));f=e[0]+" ("+L(a,e[1],18)+")"+g;c&&a.u(f);d=f}4<e.length&&e[4]&&(g="",(f=e[5]-b.A)&&(g=" - "+n(f,4,!0)),f=e[4]+" ("+L(a,e[5],18)+")"+g,c&&a.u(f),d||(d=f))}else c&&a.u("no symbols");return d}
function Vf(a,b){var c;if(b&&"?"==b[1])a.u("register commands:"),a.u("\tr\tdump registers"),a.u("\trm\tdump misc registers"),a.u("\trx [#]\tset flag or register x to [#]");else{var d=a.v,e=void 0;null==c&&(c=!0);if(null!=b&&1<b.length){var f=b[1];if("m"==f)e=!0;else{var g=f.indexOf("\x3d");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.u("missing value for "+b[1]);return}g=pf(a,b);if(void 0===g)return;b=a.pb(f);if(0>b){a.u("unknown register: "+f);return}f=0;var h=a.v;switch(b){case Hf:H(h,
g);yf(a.M,h.i);break;case Kf:Kd(h,g);break;case Lf:f=131072;break;case Mf:f=65536;break;case Nf:f=32768;break;case Of:f=8192;break;case Pf:f=32;break;case Qf:f=262144}f&&(h.j=g?h.j|f:h.j&~f);K(a.F);a.u("updated registers:")}}a.u(Pg(a,e));c&&(yf(a.M,Md(d)),Wf(a,L(a,a.M.A,18)))}}function Yg(a,b){b=Za(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.u(c[2]):qf(a,null,c[2].charCodeAt(0)):pf(a,b,!1)}
function Zg(a,b,c){if("?"==c)a.u("trace commands:"),a.u("\tt  [#]\ttrace # instructions"),a.u("\ttr [#]\ttrace # instructions with register updates"),a.u("\ttc [#]\ttrace # cycles"),a.u("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=kf(a,c,void 0,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.Ba=b;lb(c,function(){return gc(a,!0)&&Mc(a,e,d,!1)},function(){a.ka&&a.ka.stop();K(a.F,-1);gc(a,!1)})}}
function Wf(a,b,c,d){b=Cf(a,b,a.M);void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=kf(a,c.substr(1)),null!=c&&(d=c);else{d=Cf(a,c);if(d.A<b.A)return;e=d.A-b.A;if(256<e){a.u("range too large");return}d=-1}for(c=0;0<e&&d--;){var f=fc(a,!1)||a.O?a.D:null,g=null!=f?"cycles":null,h=Qg(a,b),k=b.A;if(h[0]&&d&&(!c&&d||0>h[0].indexOf("+"))){var l=h[0]+":";h[2]&&(l+=" "+h[2]);a.u(l)}h[3]&&(g=h[3],f=null);h=a.fa;l=b;h.A=l.A;h.$a=l.$a;h.oa=l.oa;h.S=l.S;a.u(Yf(a,b,g,f));e-=b.A-k;c++}}
function Og(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.u(Uf+b):(a.V&&(a.u("ended assemble at "+L(a,a.fa.A,18)),a.V=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.ba=null;if(dc(a)&&0<b.length){a.V&&(b="a "+L(a,a.fa.A,18)+" "+b);var f=!1,g=b;var h=void 0===h?" ":h;for(var k=[],l="",p=0,q=0;p<g.length;){var w=g[p++];l?w==l&&(l="",k.push(g.substr(q,p-q)),q=p):'"'==w||"'"==w?l=w:0<=h.indexOf(w)&&(k.push(g.substr(q,p-q-1)),q=p)}q<p&&k.push(g.substr(q,p-q));k[0]=k[0].toLowerCase();if(k&&k.length){var r=
k[0],G=r.charAt(0);for(p=1;p<r.length;p++)if(w=r.charAt(p),"?"==G||"r"==G||"a">w||"z"<w){k[0]=r.substr(p);k.unshift(r.substr(0,p));break}}switch(k[0].charAt(0)){case "a":d=Tg(a,k);break;case "b":var ka=k[0],N=k[1],J=b;if("?"==N)a.u("breakpoint commands:"),a.u("\tbp #\tset exec breakpoint"),a.u("\tbr #\tset read breakpoint"),a.u("\tbw #\tset write breakpoint"),a.u("\tbc #\tclear breakpoint (* to clear all)"),a.u("\tbl\tlist all breakpoints"),a.u("\tbn [#]\tbreak after # instruction(s)");else{var Sa=
ka.charAt(1);if("l"==Sa){var gg=Ng(a,a.i);gg+=Ng(a,a.N);(gg+=Ng(a,a.K))||a.u("no breakpoints")}else if("n"==Sa){var hg=+N||0;N&&(a.na=hg);a.u("break after "+hg+" instruction(s)")}else if(void 0===N)a.u("missing breakpoint address");else{var na="*"==N?Z():Cf(a,N,a.M);"c"==Sa?null==na.A?(uf(a),a.u("all breakpoints cleared")):Kg(a,a.i,na)||Kg(a,a.N,na)||Kg(a,a.K,na)||a.u("breakpoint missing: "+L(a,na.A,18)):null!=na.A&&(Ef(a,na,J),"p"==Sa?a.Pa(a.i,na):"r"==Sa?a.Pa(a.N,na):"w"==Sa?a.Pa(a.K,na):a.u("unknown breakpoint command: "+
Sa))}}break;case "c":var ig=a.F;ig.D&&(ig.D.value="");break;case "d":a:{var pb,qb=k[0],ua=k[1],Ga=k[2],oi=k[3];if("?"==ua){var rb="";for(pb in uc)a.ta[pb]&&(rb&&(rb+=","),rb+=pb);rb+=",state,symbols";a.u("dump memory commands:");a.u("\tdw [a] [n]    dump n words at address a");a.u("\tds [a] [n]    dump n words at address a as JSON");a.u("\tdh [p] [n]    dump n instructions from history position p");rb.length&&a.u("dump extension commands:\n\t"+rb)}else if("state"==ua){var Ud=$g(a.F,!0);if("console"==
Ga)console.log(Ud);else{var jg=a.F;jg.D&&(jg.D.value="");Ud&&a.u(Ud)}}else if("symbols"==ua)for(var Vd=0;Vd<a.H.length;Vd++){var Wd=a.H[Vd],sb;for(sb in Wd.Y)if("."!=sb.charAt(0)){var kg=Wd.Y[sb].o;if(void 0!==kg){var lg=Wd.Y[sb].l;lg&&(sb=lg);a.u(L(a,kg,18)+" "+sb)}}}else{if("d"==qb){for(pb in uc)if(k[1]==pb){var mg=a.ta[pb];mg?(k.shift(),k.shift(),mg(k)):a.u("no dump registered for "+ua);break a}ua||(qb=a.La||"dw")}else a.La=qb;if("dh"==qb){var ng=ua,og=Ga,pg="",qg=0,oa=a.X,va=a.j;if(va.length){var ja=
+ng||a.Aa,Jb=+og||10;isNaN(ja)?ja=Jb:pg="more ";ja>va.length&&(a.u("note: only "+va.length+" available"),ja=va.length);oa-=ja;0>oa&&(null==va[va.length-1].A?(ja=oa+ja,oa=0):oa+=va.length);var Xd=[];"call"==og&&(Jb=1E5,Xd=["CALL"]);for(void 0!==ng&&a.u(ja+" instructions earlier:");0<Jb&&oa!=a.X;){var rg=va[oa++];if(null==rg.A)break;var Kb=Z(rg.A),pi=ja--,sg=Yf(a,Kb,"history",pi);(!Xd.length||0<=sg.indexOf(Xd[0]))&&a.u(sg);Kb.nb&&(oa+=Kb.nb,Jb-=Kb.nb,ja-=Kb.nb);oa>=va.length&&(oa=0);a.Aa=ja;qg++;Jb--}}qg||
(a.u("no "+pg+"history available"),a.Aa=void 0)}else{var Ta=0,tg="ds"==qb,Lb=Cf(a,ua,a.ma);Ga&&("l"==Ga.charAt(0)?(Ga=Ga.substr(1)||oi,Ta=kf(a,Ga)):Ta=Cf(a,Ga).A-Lb.A,0>Ta&&(Ta=0),65536<Ta&&(Ta=65536));var qi=a.S;Lb.S&&(a.S=Lb.S);for(var ug="db"==qb?1:2,Yd=Ta||32,Zd=1==ug?1:4,ri=(Yd+Zd-1)/Zd|0||1,Ua="";ri--&&0<Yd;){var Ha="",vg="";ua=L(a,Lb.A,18);for(var wg=Zd;0<wg--&&0<Yd--;){var $d=a.Ka(Lb,1);tg?(Ha&&(Ha+=","),Ha+=$d):(Ha+=Ff(a,$d),Ha+="  ");for(var ae=29,si=0;1==ug&&0<=ae;si++){var be=$d/Math.pow(2,
ae)%Math.pow(2,7);Ha+=L(a,be,7)+" ";vg+=32>be?".":String.fromCharCode(be);ae-=7}}Ua&&(Ua+="\n");Ua=tg?Ua+(Ha+","):Ua+(ua+": "+Ha+(0>wg?" "+vg:""))}Ua&&a.u(Ua);a.S=qi}}}break;case "e":if("else"==k[0])break;var xg=k[0],ce=k[1];if("e"==xg||"ew"==xg){var ti=a.Ka;var ui=a.wb}else ce=null;if(null==ce)a.u("edit memory commands:"),a.u("\tew [a] [...]  edit words at address a");else for(var de=Cf(a,ce,a.ma),ee=2;ee<k.length;ee++){var Mb=pf(a,k[ee]);if(void 0===Mb)break;Mb=Df(Mb);a.u("changing "+L(a,de.A,18)+
" from "+Ff(a,ti.call(a,de))+" to "+Ff(a,Mb));ui.call(a,de,Mb,1)}break;case "g":var yg=k[1],vi=b;if(void 0!==yg){var zg=Cf(a,yg);Ef(a,zg,vi);a.Pa(a.i,zg,!0)}Sf(a,!0,c);break;case "h":a.flags.P?(c||a.u("halting"),pd(a)):fc(a,!0)||c||a.u("already halted");break;case "i":if("if"==k[0]){var Nb=b.substr(2);Nb=Za(Nb);if(pf(a,Nb)){c||a.u("true: "+Nb);var Ag=!0}else c||a.u("false: "+Nb),Ag=!1;Ag||(d=!1);break}f=!0;break;case "k":var wi=k[0];if("?"==k[1])a.u("stack trace commands:"),a.u("\tk\tshow frame addresses"),
a.u("\tks\tshow symbol information");else{var fe=0,ge=Z(),Ob=Z();for(a.u("stack trace for "+L(a,Ob.A,18));10>fe;){for(var Va=null,xi=256;65536>Ob.A>>>0;){ge.A=a.Ka(Ob,2);if(null==Ob.A||!xi--)break;if(!(ge.A&1)){for(var yi=a,Oc=ge,Bg=null,Pb=Oc.A,Cg=Pb,he=1;6>=he&&Pb;he++){if(2<he){Oc.A=Pb;var Pc=Yf(yi,Oc);if(0<=Pc.indexOf("JSR")){var Dg=Pc.indexOf(" ");if(Pb+(Pc.indexOf(" ",Dg+1)-Dg-1)/2==Cg){Bg=Pc;break}}}Pb-=2}Oc.A=Cg;if(Va=Bg)break}}if(!Va||null==Va)break;var Eg=null;if("ks"==wi){var Fg=Va.match(/[0-9A-F]+$/);
Fg&&(Eg=Xg(a,Fg[0]))}Va=Oa(Va,50)+"  ;"+(Eg||"stack\x3d"+L(a,Ob.A,18));a.u(Va);fe++}fe||a.u("no return addresses found")}break;case "l":if("ln"==k[0]){Xg(a,k[1],!0);break}f=!0;break;case "m":a:{var wa,xa=null,O=k[1];"?"==O&&(O=void 0);if(void 0!==O){var Ia=0;if("all"==O)Ia=1879046143,O=null;else if("on"==O)xa=!0,O=null;else if("off"==O)xa=!1,O=null;else{"keys"==O&&(O="key");"kbd"==O&&(O="keyboard");for(wa in uc)if(O==wa){Ia=uc[wa];xa=!!(a.aa&Ia);break}if(!Ia){a.u("unknown message category: "+O);break a}}if(Ia)if("on"==
k[2])a.aa|=Ia,xa=!0;else if("off"==k[2]&&(a.aa&=~Ia,xa=!1,1073741824==Ia)){for(var Gg=1E3<=a.R.length?a.R.length-1E3:0;Gg<a.R.length;)a.u(a.R[Gg++]);a.R=[]}}var zi=0,Qb="";for(wa in uc)if(!O||O==wa){var Ai=!!(a.aa&uc[wa]);if(null===xa||xa==Ai)Qb&&(Qb+=","),++zi%10||(Qb+="\n\t"),"key"==wa&&(wa="keys"),Qb+=wa}void 0===O&&a.u("message commands:\n\tm [category] [on|off]\tturn categories on/off");a.u((null!==xa?xa?"messages on:  ":"messages off: ":"message categories:\n\t")+(Qb||"none"));vf(a)}break;case "p":if("print"==
k[0]){Yg(a,b.substr(5));break}var Hg=k[0],Ig="p"==Hg?0:"pr"==Hg?1:-1;if("?"==k[1]||0>Ig)a.u("step commands:"),a.u("\tp\tstep over instruction"),a.u("\tpr\tstep over instruction with register update");else if(a.O)a.u("step in progress");else{var Jg=Z(a.v.i);a.Ka(Jg);a.O?(a.Pa(a.i,Jg,!0),Sf(a)||(a.F&&Cd(a.F),a.O=0)):Zg(a,Ig?"tr":"t")}break;case "r":if("reset"==b){a.F&&a.F.reset();break}Vf(a,k);break;case "s":a:switch(k[1]){case "base":if(k[2]){var tb=+k[2];if(2==tb||8==tb||10==tb||16==tb)a.S=tb;else{a.u("invalid base: "+
tb);break}}a.u("default base: "+a.S);break;case "cs":var Rb;void 0!==k[3]&&(Rb=+k[3]);switch(k[2]){case "int":a.v.na=Rb;break;case "start":a.v.Ga=Rb;break;case "stop":a.v.sa=Rb;break;default:a.u("unknown cs option");break a}void 0!==Rb&&ud(a.v);a.u("checksums "+(a.v.flags.Sa?"enabled":"disabled"));break;case "sp":void 0!==k[2]&&(zd(a.v,+k[2])||a.u("warning: using 1x multiplier, previous target not reached"));a.u("target speed: "+(a.v.ba.toFixed(2)+"Mhz")+" ("+a.v.fa+"x)");break;default:if(k[1]){a.u("unknown option: "+
k[1]);break}case "?":a.u("debugger options:"),a.u("\tbase #\t\tset default base to #"),a.u("\tcs int #\tset checksum cycle interval to #"),a.u("\tcs start #\tset checksum cycle start count to #"),a.u("\tcs stop #\tset checksum cycle stop count to #"),a.u("\tsp #\t\tset speed multiplier to #")}break;case "t":Zg(a,k[0],k[1]);break;case "u":Wf(a,k[1],k[2],8);break;case "v":if("var"==k[0]){Wg(a,b.substr(3))||(d=!1);break}if("ver"==k[0]){a.u((jc||"PDP10")+" version 1.75.0 ("+a.v.hb+",RELEASE)");a.u(window?
window.navigator.userAgent:"");break}f=!0;break;case "?":if(k[1]){Yg(a,b.substr(1));break}var ie="commands:",je;for(je in ah)ie+="\n"+Oa(je,9)+ah[je];Nd(a)||(ie+="\nnote: history disabled if no exec breakpoints");a.u(ie);break;default:f=!0}f&&(a.u("unknown command: "+b),d=!1)}}catch(Lg){a.u("Debugger "+(Lg.stack||Lg.message)),d=!1}return d}function xd(a,b,c){null!=b&&(a.Fa=df(a,b,c));for(;b=a.Fa.shift();)if(!Og(a,b))return!1;return!0}
var ah={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},cg=20,dg=".WORD HLL HLLZ HLLO HLLE HRL HRLZ HRLO HRLE HRR HRRZ HRRO HRRE HLR HLRZ HLRO HLRE MOVE MOVS MOVN MOVM EXCH BLT PUSH POP LDB DPB IBP ILDB IDPB SETZ SETO SETA SETCA SETM SETCM AND ANDCA ANDCM ANDCB IOR ORCA ORCM ORCB XOR EQV LSH LSHC ROT ROTC ADD SUB MUL IMUL DIV IDIV ASH ASHC FSC FADR FSBR FMPR FDVR DFN UFA FAD FSB FMP FDV AOBJP AOBJN CAI CAM JUMP SKIP AOJ AOS SOJ SOS TR TL TD TS XCT JFFO JFCL JSR JSP JRST JSA JRA PUSHJ POPJ BLKI DATAI BLKO DATAO CONO CONI CONSZ CONSO UUO JOV JCRY0 JCRY1 JCRY JFOV HALT JRSTF JEN".split(" "),
Hf=0,If=1,Jf=2,Kf=3,Lf=4,Mf=5,Nf=6,Of=7,Pf=8,Qf=9,Gf="PC RA EA PS OV C0 C1 BI ND PD".split(" "),bh={},Zf=(bh[28672]={0:101},bh[32704]={5632:64,5696:63,5760:58,5824:27,5888:28,5952:25,6016:29,6080:26,10240:56,10304:48,10368:46,10432:84,10496:57,10560:49,10624:47,10752:21,10816:22,10880:69,10944:70,11008:88,11072:85,11136:83,11264:91,11328:23,11392:24,11456:92,11520:86,11584:87,11648:89,11712:90},bh[32512]={6144:65,6400:59,6656:66,6912:60,7168:67,7424:61,7680:68,7936:62,8192:17,8448:18,8704:19,8960:cg,
9216:53,9472:52,9728:55,9984:54,11776:50,12032:51,16384:30,16640:36,16896:37,17152:34,17408:38,17664:32,17920:44,18176:40,18432:39,18688:45,18944:33,19200:41,19456:35,19712:42,19968:43,20224:31,20480:1,20736:5,20992:2,21248:6,21504:3,21760:7,22016:4,22272:8,22528:9,22784:13,23040:10,23296:14,23552:11,23808:15,24064:12,24320:16},bh[32256]={12288:71,12800:72,13312:73,13824:74,14336:75,14848:76,15360:77,15872:78},bh[29248]={24576:79,24640:80,25088:81,25152:82},bh[28700]={28672:93,28676:94,28680:95,28684:96,
28688:97,28692:98,28696:99,28700:100},bh),$f=["","I","M","S"],ag=" L E LE A GE N G".split(" "),bg="N NE NA NN Z ZE ZA ZN C CE CA CN O OE OA ON".split(" "),eg=[{0:85,8:102,4:103,2:104,6:105,1:106},{0:88,4:107,2:108,10:109}],Rf=1E3,Uf="\x3e\x3e ";ob(function(){for(var a=x(document,v,"debugger"),b=0;b<a.length;b++){var c=a[b],d=Sb(c);d=new tf(d);Ib(d,c)}});function Ug(a){this.b=a}
function ch(a,b,c,d){a.ja=b;a.V=(c||"").toLowerCase();a.done=d;a.O=0;a.G=[];a.M=[];a.C=[];a.v={};a.J={};a.L=[];a.K=[];a.T=[];a.da=[];a.X=[];a.ga=0;a.U=0;a.ba=0;a.W=a.ja||0;a.Ca=-1;a.F=[];a.R=null;a.i=0;a.H=null;a.B=a.N="";a.fa=/^[ \t]*([A-Z$%.?][0-9A-Z$%.]*:|)[ \t]*([A-Z$%.][0-9A-Z$%.]*|)([ \t]*)([^;]+|)(;?[\s\S]*)/i;a.j=null;a.w=null;a.D="";a.I=null}
function Vg(a,b,c,d,e){d&&0<=d.indexOf("s")?(ch(a,c,d,e),a.C=b.split(/(\r?\n)/),a.M.push(a.C.length),dh(a),a.done&&a.done(a.U)):(ch(a,c,d,e),a.G=b.split(";"),eh(a))}
function eh(a){if(a.O==a.G.length)dh(a),a.done&&a.done(a.U);else{var b=a.G[a.O];a.u("loading "+Ja(b));0>b.indexOf(":")&&0<=".MAC.KLM".indexOf(b.slice(-4).toUpperCase())&&(b+=".txt");ab(b,null,!0,function(b,d,e){if(e)a.done&&a.done(e,b);else{e=d;if(La(b,".html")){e="";var c;for(b=/<pre>([\s\S]*?)<\/pre>/gi;c=b.exec(d);)c=c[1],0<=c.indexOf("\x26")&&(c=c.replace(/&lt;/gi,"\x3c").replace(/&gt;/gi,"\x3e").replace(/&amp;/gi,"\x26")),e+=c;(c=e.match(/&[a-z]+;/i))&&fh(a,"unrecognized HTML entity '"+c[0]+
"'")}d=e.split(/(\r?\n)/);if(d.length&1){if(c=d.pop())fh(a,"unexpected line '"+c+"'"),d.push(c),d.push("")}else fh(a,"unexpected number of lines ("+d.length+")");a.C=a.C.concat(d);a.M[a.O]=d.length>>1;a.O++;setTimeout(function(){eh(a)},0)}})}}
function dh(a){if(0<=a.V.indexOf("p"))a.u(a.C.join(""));else{var b=rf(a.b);gh(a,"APR",0);gh(a,"PI",4);try{for(var c=0;c<a.C.length;c+=2){a.ga++;0<=a.V.indexOf("l")&&a.u(hh(a)+": "+a.C[c]);if(!ih(a,a.C[c]+"\r\n"))break;if(null!==a.I)break}a.i&&a.error("open block",a.v[a.H].ga);a.F.length&&a.error("open scope",a.F[0].ga);jh(a);kh(a);a.da.forEach(function(b,c){b=lh(a,b,void 0,c,a.X[c]);void 0!==b&&(b+=a.T[c],a.T[c]=mh(a,b,c))})}catch(d){a.u(d.message),a.U=-1}0>a.V.indexOf("d")&&(a.b.b=b)}}
function ih(a,b,c,d,e){var f;null!=a.w&&(b=nh(a,b));for(var g=!0,h="";g;){var k=b.match(a.fa);if(!k||k[5]&&";"!=k[5].charAt(0))return a.error("failed to parse line '"+b+"'"),!1;g=!1;h=k[2].toUpperCase();if(h==oh||h==ph)c=null;if(c){for(f=0;f<c.length;f++){var l=c[f],p=a.v[a.H];if(!(p&&0<=p.Na.indexOf(l))){p=d[f]||e[f]||"";for(var q=0,w=b.length-k[5].length;q<w;){var r=b.indexOf(l,q);if(0>r)break;q=r+1;var G=r+l.length,ka="",N="";r&&(ka=b[r-1]).match(/[0-9A-Z$%.]/i)||!(G>=b.length)&&(N=b[G]).match(/[0-9A-Z$%.]/i)||
("'"==ka&&r--,"'"==N&&G++,b=b.substr(0,r)+p+b.substr(G),q=r+p.length,g=!0)}}}c=null}if(a.i&&(1==a.i&&(f=b.indexOf(a.B),0<=f?(a.i++,b=b.substr(f+1)):a.error("expected "+a.R+" definition in '"+b+"'")),1<a.i&&(b=qh(a,b),g=!0),a.i))return!0}d=k[1];b=k[3];c=k[4].trim();k=k[4]+k[5];d&&(d=d.slice(0,-1),gh(a,d,a.W,rh));var J;h&&(J=c.match(/^([=:]+)(.*)/))&&(e=0,d=h,h=J[1],c=J[2],"\x3d\x3d"==h?e|=2:"\x3d:"==h&&(e|=sh),gh(a,d,c,e),h=c="");if(!h&&!c)return!0;a.R=h;if(J=th(a,c))c=c.replace(J,uh(a,vh,th(a,k))),
b||(b="\t");for(;J=wh(a,c);)c=c.replace(J,J.slice(0,-1));if(!xh(a,h,c))switch(h){case yh:case zh:case Ah:nh(a,k);break;case Bh:h=c;J=lh(a,h);void 0!==J&&0<=J&&262143>=J?a.W+=J:a.error("unrecognized BLOCK expression '"+h+"'");break;case Ch:h=c;b=k=0;for(c=36;J=Dh(a,h);){h=h.substr(J.length).trim();d=J;if(e=J.match(/^\((.*)\)\s*(.*)$/))e[1]&&(k=lh(a,"^D"+e[1])),d=e[2];if(k){d=d?lh(a,d):0;if(void 0===d||0>k||36<k){a.error("unexpected BYTE operand: "+J);break}d=Y(a.b,d,k,!0);c<k&&(Eh(a,b),b=0,c=36);b+=
d*Math.pow(2,c-k);c-=k}else Eh(a,0)}36>c&&Eh(a,b);break;case Fh:(h=c)?(a.I=lh(a,h),void 0===a.I&&a.error("unrecognized END expression '"+h+"'")):a.I=a.ja;break;case Gh:Hh(a,c);break;case Ih:jh(a);break;case Jh:a.W=lh(a,c)||0;break;case Kh:kh(a);break;case Lh:Hh(a,c.replace(",",",,"));break;case Mh:case Nh:case Oh:case Ph:case Qh:case Rh:case Sh:case Th:case Uh:case Vh:case Wh:case Xh:case oh:case ph:case Yh:case Zh:uh(a,h,k);break;case $h:h=ai(a,c);for(J=0;J<h.length;J++)delete a.b.b[h[J]],delete a.J[h[J]];
break;case bi:case ci:case di:case ei:case fi:case gi:case hi:case ii:break;default:Hh(a,h,b,c)}return!0}
function xh(a,b,c){var d=a.v[b];if(!d)return!1;if(null!=c){if(d.Da==ji){var e=a.W;ki(a,d.ia);if(e<a.W){if(!c)return!0;li(a);ki(a,c);d=a.T[0];var f=a.da[0];mi(a);if(void 0!==d)return a.T[e]+=d&130023423,a.T[e]+=d&4194304,f&&(a.da[e]=a.da[e]?a.da[e]+("+"+f):f),!0}a.error("OPDEF '"+b+"' ("+c+") failed");return!1}b=a.j;a.j=d;d.Oa=ai(a,c,!0);ki(a,d.ia,d.Na,d.Oa,d.zb);a.j=b;return!0}if("?"!=b[0])return!1;switch(b.substr(1)){case Qh:case Ph:case Xh:d.Da||ki(a,d.ia);break;case Rh:0<d.Da&&ki(a,d.ia);break;
case Sh:0<=d.Da&&ki(a,d.ia);break;case Uh:0>d.Da&&ki(a,d.ia);break;case Vh:0>=d.Da&&ki(a,d.ia);break;case Nh:case Wh:case Oh:case Th:d.Da&&ki(a,d.ia);break;case oh:case ph:for(b=0;b<d.Oa.length;b++)ki(a,d.ia,d.Na,[d.Oa[b]],[]);break;case Zh:for(;0<d.Da--;)ki(a,d.ia);break;default:c=d.ia,li(a,b),ki(a,c),mi(a)}return!0}function ki(a,b,c,d,e){b=b.split(/\r?\n/);for(var f=0;f<b.length&&ih(a,b[f]+"\r\n",c,d,e);f++);}
function li(a,b){a.F.push({name:b,T:a.T,da:a.da,W:a.W,Ca:a.Ca,ga:a.ga});a.T=[];a.da=[];0>a.Ca&&(a.Ca=a.W);a.W=0}function mi(a){if(a.F.length){var b=a.F[a.F.length-1].name;b&&a.L.push({name:b,T:a.T,da:a.da});b=a.F.pop();a.T=b.T;a.da=b.da;a.W=b.W;a.Ca=b.Ca;a.F.length||-1==a.Ca||a.error("scope restore error")}else a.error("scope nesting error")}
function Dh(a,b){var c=void 0===c?",":c;for(var d=0,e=!1,f=null,g=0;d<b.length;){var h=b[d++];if('"'==h)e=!e;else if(!e){if(!g&&0<=c.indexOf(h)){d--;break}if("\x3c"==h)g++;else if("\x3e"==h&&0>--g){a.error("missing bracket(s) in '"+b+"'");break}}}g?0<g&&a.error("extra bracket(s) in '"+b+"'"):f=b.substr(0,d);return f}
function lh(a,b,c,d,e){var f=-1;void 0===d&&(d=0<=a.Ca?a.Ca:a.W);var g=b.replace(/SIXBIT\s*(\S)(.*?)\1/g,"'$2'").replace(/ASCII\s*(\S)(.*?)\1/g,'"$2"');if(c){var h="",k=g;if(f=g.match(/^([^\s]+)\s*(.*?)\s*$/))h=f[1],k=f[2];f=fg(a.b,h,k,d,c)}0>f&&(g=g.replace(/\.([^0-9]|$)/g,L(a.b,d,-1)+"$1"),f=pf(a.b,g,c),void 0===f&&a.error("unable to parse expression '"+b+"'",e));return f}
function th(a,b){for(var c=0,d="",e=0,f=-1,g=b.length;e<b.length;){var h=b[e];if(";"==h)break;"["==h&&(c++||(f=e));e++;if("]"==h&&0>=--c){g=e;break}}0>c&&a.error("missing bracket(s) in '"+b+"'");0<=f&&(d=b.substr(f,g-f));return d}function hh(a,b){b=void 0===b?a.ga:b;for(var c=0;b>a.M[c];)if(b-=a.M[c],c<a.G.length-1)c++;else break;return Ja(a.G[c]+" line "+b)}
function wh(a,b){var c=null;if(b=b.match(/([A-Z$%.][0-9A-Z$%.]*)#/i)){c=b[0];b=b[1];var d="?"+b;if(void 0===a.v[d]){var e,f;var g=e=f=[];a.v[d]={name:d,Da:ni,Na:g,zb:e,Oa:f,ia:b+": 0",ga:a.ga};a.K.push(d)}}return c}
function ai(a,b,c){var d=[];for(c&&(b=b.replace(/^\(?(.*?)\)?$/,"$1"));b;){b=b.trim();c=Dh(a,b);if(!c)break;var e=c;if("\\"==c[0]){var f=1,g=0;"'"==c[1]?(f++,g=6):'"'==c[1]&&(f++,g=7);e=a;f=c.substr(f);g=void 0===g?0:g;var h=lh(e,f);if(void 0!==h){var k=5;switch(g){case 0:f=L(e.b,h,-1);break;case 6:k++;case 7:for(;h&&k--;)h=Math.trunc(h/Math.pow(2,g))}}e=f}d.push(e);b=b.substr(c.length+1)}return d}
function nh(a,b){var c=b;null==a.w&&(a.w=a.D="",b&&(a.w=b[0],c=b=b.substr(1)));if(a.w){var d=b.indexOf(a.w);0>d?c="":(c=b.substr(d+1),b=b.substr(0,d),a.w=null);a.D+=b}if(null==a.w){d=b=0;var e=a.D.length;a.R==zh&&e++;for(var f=0;f<e;f++){if(!b){d=0;var g=29;var h=7;a.R==Ah&&(h--,g++)}var k=a.D.charCodeAt(f)&127;6==h&&(97<=k&&122>=k&&(k-=32),k=k+32&63);d+=k*Math.pow(2,g);g-=h;b++;0>g&&(Eh(a,d),b=0)}b&&Eh(a,d)}return c}
function uh(a,b,c){var d,e;a.B="\x3c";a.N="\x3e";var f=d=e=[];if(b==Mh){var g=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*(\([^)]*\)|)\s*,?\s*(<|)([\s\S]*)/i);if(!g)return a.error("unrecognized "+b+" in '"+c+"'"),c;var h=g[1];if(g[2]&&","!=g[2]){d=f=ai(a,g[2],!0);b=[];for(c=0;c<d.length;c++){var k=d[c].indexOf("\x3c");if(0<=k){var l=d[c].lastIndexOf("\x3e");0>l&&(l=d[c].length);b[c]=d[c].substr(k,l-k);d[c]=d[c].substr(0,k)}}d=b}k=Bi;b=3}else if(b==Yh){a.B="[";a.N="]";g=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*(\[)([\s\S]*)/i);
if(!g)return a.error("unrecognized "+b+" in '"+c+"'"),c;h=g[1];k=ji;b=2}else if(b==vh)a.B="[",a.N="]",h="?"+Fa(++a.ba,5),void 0!==a.v[h]&&a.error("literal symbol '"+h+"' redefined"),g=[c[0],c.substr(1)],k=Ci,b=0;else if(b==oh||b==ph){a.j||a.error(b+" outside of macro");g=c.match(/([A-Z$%.][0-9A-Z$%.]*)\s*,\s*(<|)([\s\S]*)/i);if(!g)return a.error("unrecognized "+b+" operands '"+c+"'"),c;for(k=0;k<a.j.Na.length&&g[1]!=a.j.Na[k];k++);if(k==a.j.Na.length)return a.error("invalid "+b+" parameter '"+g[1]+
"'"),c;h="?"+b;f=[g[1]];b==ph?e=a.j.Oa[k].split(""):e=ai(a,a.j.Oa[k]);k=e.length;b=2}else{if(b==Nh)k=1,","==c[0]&&(c=c.substr(1).trim());else{g=Dh(a,c);if(!g)return a.error("missing "+b+" expression '"+c+"'"),c;c=c.substr(g.length+1);g=g.trim();if(b==Ph||b==Th){h=Dh(a,c);if(!h)return a.error("missing second "+b+" expression '"+c+"'"),c;c=c.substr(h.length+1)}k=b==Oh||b==Xh?void 0!==a.v[g]||void 0!==a.J[g]||void 0!==a.b.b[g]?1:0:lh(a,g)||0}g=c.match(/\s*(<|)([\s\S]*)/i);h="?"+b;b=1}h=h.toUpperCase();
a.i=1;a.H=h;a.v[h]={name:h,Da:k,Na:f,zb:d,Oa:e,ia:"",ga:a.ga};g[b]&&(a.i=2,qh(a,g[b+1]));return h}function qh(a,b){for(var c="",d=0;d<b.length;d++)if(b[d]==a.B)a.i++;else if(b[d]==a.N&&(a.i--,1==a.i)){a.i=0;c=b.substr(d+1);b=b.substr(0,d);break}d=a.H||"";a.v[d].ia+=b;a.i||(a.H=null,xh(a,d));return c}
function gh(a,b,c,d){d=void 0===d?0:d;b=b.toUpperCase().substr(0,6);if(d&rh&&void 0!==a.J[b])a.error("redefined label '"+b+"'");else{var e=void 0;if("string"==typeof c){e=[];var f=lh(a,c,e);if(void 0===f){a.error("invalid symbol '"+b+"': "+c);return}1<e.length&&a.error("too many undefined symbols in '"+b+"': "+e.join());c=f;e=e[0]}(f=a.J[b])?(f.value=c,f.Vb=d,f.ga=a.ga):a.J[b]={name:b,value:c,Vb:d,ga:a.ga};a.b.b[b]={value:c,Kb:e}}}
function Hh(a,b,c,d){var e=[];b=(b+(void 0===c?"":c)+(void 0===d?"":d)).trim();c=lh(a,b,e);void 0!==c?e.length?1==e.length?Eh(a,c,e[0]):Eh(a,0,b):Eh(a,c):a.error("unrecognized word expression '"+b+"'")}
function jh(a){for(var b=a.W,c={},d=0;d<a.L.length;c={T:c.T,Qa:c.Qa,ya:c.ya},d++){c.ya=a.L[d];c.T=[];c.Qa=0;c.ya.T.forEach(function(a){return function(b,c){c===a.T.length&&a.T.push(b);a.Qa++}}(c));if(c.Qa==c.T.length)for(var e=b;e+c.Qa<=a.W;e++){var f=void 0;for(f=0;f<c.Qa&&c.T[f]===a.T[e+f]&&c.ya.da[f]==a.da[e];f++);if(f==c.Qa){gh(a,c.ya.name,e,rh);c.ya=null;break}}if(c.ya){var g=a;gh(a,c.ya.name,a.W,rh);c.ya.T.forEach(function(a){return function(b,c){Eh(g,b,a.ya.da[c])}}(c))}}a.L=[]}
function kh(a){for(var b=0;b<a.K.length;b++){var c=a.K[b],d=a.v[c];d?ki(a,d.ia):a.error("missing definition for variable '"+c+"'")}a.K=[]}function Eh(a,b,c){a.T[a.W]=mh(a,b);void 0!==c&&(a.da[a.W]=c);a.X[a.W]=a.ga;a.W++}function mh(a,b,c){c=void 0===c?a.W:c;var d=Y(a.b,b||0,36,!0);(b<-B||b>=D)&&fh(a,"truncated value "+Ea(b)+" at location "+Ea(c)+" to "+Ea(d));return d}Ug.prototype.error=function(a,b){throw Error("error in "+hh(this,b)+": "+a);};
function fh(a,b){a.u("warning in "+hh(a,void 0)+": "+b)}Ug.prototype.u=function(a){this.b?this.b.u(a):console.log(a)};
var rh=1,sh=4,yh="ASCII",zh="ASCIZ",Bh="BLOCK",Ch="BYTE",Mh="DEFINE",Fh="END",Gh="EXP",Nh="IF1",Oh="IFDEF",Ph="IFDIF",Qh="IFE",Rh="IFG",Sh="IFGE",Th="IFIDN",Uh="IFL",Vh="IFLE",Wh="IFN",Xh="IFNDEF",oh="IRP",ph="IRPC",bi="LALL",Ih="LIT",vh="LITERAL",ci="LIST",Jh="LOC",di="NOSYM",Yh="OPDEF",ei="PAGE",$h="PURGE",Zh="REPEAT",Ah="SIXBIT",fi="SUBTTL",gi="TITLE",Kh="VAR",hi="XALL",Lh="XWD",ii="XLIST",Bi=-1,ji=-2,Ci=-3,ni=-4;
function Di(a,b,c){u.call(this,"Computer",a,33554432);this.flags.Z=!1;this.R=null;Ei(this,b);this.N=sd(this,"autoPower",a,6);this.w=0;this.X=+a.busWidth||+a.buswidth;this.L=this.H=this.M=null;this.K=this.V=!1;this.J=this.B=null;this.U=this.O=!1;this.url=sd(this,"url")||"";(Math.random()+.1).toString(36);this.i=Fi(this);if(this.v=Vb("CPU",this.id)){this.C=Vb("Debugger",this.id);this.G=new Vc({id:this.Ta+".bus",busWidth:this.X},this.v,this.C);var d=Tb(this.id);if(this.D=(this.j=Vb("Panel",this.id))&&
this.j.I.print)for(b=0;b<d.length;b++){var e=d[b];e.ha=this.j.ha;e.print=this.j.print;e.u=this.j.u}this.u(jc+" v1.75.0\nCopyright \u00a9 2012-2019 Jeff Parsons \x3cJeff@pcjs.org\x3e\nLicense: GPL version 3 or later \x3chttp://gnu.org/licenses/gpl.html\x3e");for(b=0;b<d.length;b++)e=d[b],e.xa&&e.xa(this,this.G,this.v,this.C);b=null;e=sd(this,"resume",a);void 0!==e&&(1<e.length?b=this.H=e:this.b=parseInt(e,10));var f;if(a=sd(this,"state")||(f=!0,a.state))this.M=b=a,f||(this.K=!0,this.b=Gi),this.b&&
(this.J=new F(this,"1.75.0"),this.J.load()?b=null:delete this.J);!b&&this.b&&(b=Hi(this))&&(this.K=!0);if(b){var g=this;ab(b,null,!0,function(a,b,c){c?(g.H=null,g.K=!1,g.ha("Unable to load machine state from server (error "+c+(b?": "+Za(b):"")+")")):(g.L=b,g.V=!0);ec(g)})}else ec(this);this.I.power||(this.N=!0);!c&&this.N&&this.wait(this.Va)}else t("Unable to find CPU component")}ta(Di,u);
function Ei(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){t(d.message+" ("+c+")")}}a.R=b}function sd(a,b,c,d){var e=b.toLowerCase();e=jb(b)||jb(e);void 0===e&&a.R&&(e=a.R[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}m=Di.prototype;
m.wait=function(a,b){for(var c=this,d=Tb(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!dc(f)){dc(f,function(){c.wait(a,b)});return}}a.call(this,b)};function Ii(a,b){var c=new F(a,"1.75.0",Ji);if(c.load()&&Ki(c)){var d=c.get(Li),e=b?b.get(Li):"unknown";d!=e&&(a.ha("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}
m.Va=function(a){void 0===a&&(a=this.b||(this.L?Mi:Gi));if(!this.w){this.w++;var b=!1,c=!1;this.O=!1;var d=this.J||new F(this,"1.75.0");if(a==Ni)b=!0;else if(a>Gi){if(d.load(this.L)){this.B=new F(this,"1.75.0",Oi);this.B.load()&&(Pi(),a=Qi,Ri(this.B));this.B.set(Li,Qa("%T",new Date));this.B.store();var e=this.b&&!this.K;if(a==Mi||Gb("Click OK to restore the previous "+jc+" machine state, or CANCEL to reset the machine.")){if(c=Ki(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?d.load(g):("error"==
f&&"no machine state"!=g?(this.ha("Error: "+g),"unable to verify user"==g&&(hb(Si,""),this.i=null)):this.u(f+": "+g),Ri(d),d.load()?(c=Ki(d),e=!0):c=!1))}e&&Ii(this,c?d:null)}else a==Qi&&d.clear()}else Ii(this);delete this.L;delete this.J}e=Tb(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.v&&(c=Ti(this,g,d,b,c));b=[d,a,c];a!=Ni?this.wait(this.Fb,b):this.Fb(b)}};
function Ti(a,b,c,d,e){if(!b.flags.Z){b.flags.Z=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/[a-z0-9]\./i,".")))),"string"===typeof f&&(f=null),!b.za(f,d)&&f&&(t("Unable to restore state for "+b.type),a.M&&!a.V?(c.clear(),a.b=Gi,window&&window.location.reload()):a.O=!0,b.za(null),e=!1),!d&&b.Bb){var g=b.Bb.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(h){t("Error restoring state for "+b.type+" ("+h.message+")")}}return e}
m.Fb=function(a){var b=a[0],c=0>a[1];a=a[2];this.U=!0;this.flags.Z=!0;var d=this.I.power;d&&(d.textContent="Shutdown");this.v&&(Ti(this,this.v,b,c,a),K(this,-2),this.v.ea());this.O&&(Pi(),b.clear());!c&&this.B&&(this.B.clear(),delete this.B);this.w=0};function Pi(){vb("There may be a problem with your "+jc+" machine.")}
function $g(a,b,c){var d="none";if(a.w)return null;a.w--;var e=new F(a,"1.75.0"),f=new F(a,"1.75.0",Ji),g=Qa("%T",new Date);f.set(Li,g);e.set(Li,g);e.set(Ui,"1.75.0");e.set(Vi,window?window.location.href:null);e.set(Wi,window?window.navigator.userAgent:"");if(a.v&&a.v.pa){c&&(b&&(a.v.flags.ea=a.v.flags.P),I(a.v));var h=a.v.pa(b,c);"object"===typeof h&&e.set(a.v.id,h);c&&(a.v.flags.Z=!1,!1===h&&(d=null))}g=Tb(a.id);for(var k=0;k<g.length;k++){var l=g[k];l.flags.Z&&(l.pa&&(h=l.pa(b,c),"object"===typeof h&&
e.set(l.id,h)),c&&(l.flags.Z=!1,!1===h&&(d=null)))}d&&(c?(g=h=!1,b?(a.i&&Xi(a,a.i,e.toString()),f.store()&&e.store()||(d=null,h=g=!0)):a.b&&(h=!0,g=a.b==Yi),h&&e.clear(g)):d=e.toString());c&&(a.flags.Z=!1,b=a.I.power)&&(b.textContent="Power");a.w=0;return d}
m.reset=function(){this.flags.reset=!0;this.G&&this.G.reset&&(ic(this,"Resetting "+this.G.type),this.G.reset());this.v&&this.v.reset&&(ic(this,"Resetting "+this.v.type),this.v.reset());for(var a=Tb(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.G&&c!==this.v&&c.reset&&(ic(this,"Resetting "+c.type),c.reset())}this.flags.reset=!1;K(this,-1)};m.start=function(a,b){for(var c=Tb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}K(this,-1)};
m.stop=function(a,b){for(var c=Tb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}K(this,-1)};
function K(a,b){if(a.v){var c=a.v,d=b||0,e=c.I.speed;e&&(0>=d||30<=(c.fb+=d))&&(e.textContent=c.flags.P?c.X.toFixed(2)+"Mhz":"Stopped",c.fb=0)}if(a.j&&(a=a.j,b=b||0,a.K)){c=a.v.flags.P;d=!!(a.v.B&8);if(0>=b||60<=(a.J+=b)){e=a.v.i;if(a.I.PC){var f=a.C&&a.C.S||8;e=e||0;e=8==f?Ea(e,void 0):n(e,void 0);a.I.PC.textContent!=e&&(a.I.PC.textContent=e)}a.J=0}-1>b?a.i=a.v.i:0<b&&c&&!d&&(a.i=a.v.Aa);Dc(a,a.i);xc(a,a.w)}}
m.qa=function(a,b,c){var d=this;switch(b){case "power":return this.I[b]=c,c.onclick=function(){d.w||(d.flags.Z?$g(d,!1,!0):d.wait(d.Va))},!0;case "reset":return this.I[b]=c,c.onclick=function(){if(d.flags.Z&&!d.w)if(d.b&&!d.H){var a=Gb("Click OK to save changes to this "+jc+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");$g(d,a,!0);!a&&d.M?window&&window.location.reload():d.Va(Gi)}else d.reset(),d.v&&!d.C&&d.v.ea()},!0;case "save":if(La(window?window.location.hostname:
"localhost","pcjs.org"))c.parentNode.removeChild(c);else return this.I[b]=c,c.onclick=function(){var a=Fi(d,!0);if(a){var b=!!(d.b&&!d.H||d.M),c=$g(d,b);b?Xi(d,a,c):d.ha("Resume disabled, machine state not saved")}},!0}return!1};
function Fi(a,b){var c=a.i;c||((c=gb(Si),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Zi(a,c))||a.ha("The user ID is invalid.")):b&&a.ha("Browser local storage is not available"));return c}
function Zi(a,b){a.i=null;b=ab(cb()+"/api/v1/user?req\x3dverify\x26user\x3d"+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(hb(Si,b.data),a.i=b.data)}catch(d){t(d.message+" ("+c+")")}return a.i}function Hi(a){var b=null;a.i&&(b=cb()+"/api/v1/user?req\x3dload\x26user\x3d"+a.i+"\x26state\x3d"+$i(a,"1.75.0"));return b}
function Xi(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=$i(a,"1.75.0");d.data=c;b=ab(cb()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.ha("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.ha(c),hb(Si,""),a.i=null)}}
function Cd(a,b){if(a.D){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.D.focus();!b&&window&&window.scrollTo(c,d)}}var Oi="failsafe",Ji="validate",Li="timestamp",Ui="version",Vi="url",Wi="browser",Si="user",Ni=-1,Gi=0,Mi=1,Qi=2,Yi=3;ob(function(){for(var a=x(document,v+"-machine"),b=0;b<a.length;b++){var c=a[b],d=Sb(c);c=x(c,v,"computer");for(var e=0;e<c.length;e++){var f=c[e],g=Sb(f);g=new Di(g,d,!0);Ib(g,f);g.N&&g.wait(g.Va)}}});
ub.show.push(function(){for(var a=x(document,v,"computer"),b=0;b<a.length;b++){var c=Sb(a[b]);if(c=Vb("Computer",c.id))c.flags.sb=!1,c.U&&!c.flags.Z&&c.Va(Ni)}});ub.exit.push(function(){for(var a=x(document,v,"computer"),b=0;b<a.length;b++){var c=Sb(a[b]);if(c=Vb("Computer",c.id))c.flags.sb=!0,c.flags.Z&&$g(c,!(!c.b||c.H),!0)}});function F(a,b,c){this.id=a.id;this.i="";this.b={};this.v=this.j=!1;this.key=$i(a,b,c);Ri(this,a.Sb)}m=F.prototype;m.set=function(a,b){try{this.b[a]=b}catch(c){}};
m.get=function(a){return this.b[a]||null};m.data=function(){return this.b};m.load=function(a){return a?(this.i=a,this.v=!0,this.j=!1,!0):this.v?!0:eb()&&(a=gb(this.key))?(this.i=a,this.v=!0):!1};function Ki(a){var b=!0;if(!a.j)try{a.b=JSON.parse(a.i),a.j=!0}catch(c){t(c.message||c),b=!1}return b}m.store=function(){var a=!0;if(eb()){var b=JSON.stringify(this.b);hb(this.key,b)||(t("Unable to store "+b.length+" bytes in browser local storage"),a=!1)}return a};
m.toString=function(){return this.b?JSON.stringify(this.b):this.i};function Ri(a,b){a.i="";a.b={};a.v=a.j=!1;b&&a.set("parms",b)}m.clear=function(a){Ri(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};
function $i(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var aj=0;function bj(a,b,c,d,e,f,g,h){g("Loading "+a+"...");ab(a,null,!0,function(k,l,p){p?(l||(l="unable to load "+a+" ("+p+")"),h(l,null)):cj(l,a,b,c,d,e,f,g,h)})}
function cj(a,b,c,d,e,f,g,h,k){function l(a,h){if(h)k(h,null);else{if(c){Db(c,b,a);(h=b)&&0>h.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(h=window.location.pathname+h);e?"}"==e.slice(-1)?(e=e.slice(0,-1),1<e.length&&(e+=",")):e='{state:"'+e+'",':e="{";e+='url:"'+h+'"}';"object"==typeof resources&&(h=null);e=e.replace(/\$/g,"$$$$");if(f){var l=a.match(/(<machine[^>]*\sclass=)(['"])(.*?)(\2.*?>)/);l&&(a=a.replace(l[0],l[1]+l[2]+f+l[4]),f="")}a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,
"$1$2"+c+"$2"+(f?' class\x3d"'+f+'"':"")+(e?" parms\x3d'"+e+"'":"")+(h?' url\x3d"'+h+'"':""))}g||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+d+"$2"));h=null;if("\x3c"==a.charAt(0))try{g||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(h=new window.ActiveXObject("Microsoft.XMLDOM"),h.async=!1,h.loadXML(a)):h=(new window.DOMParser).parseFromString(a,
"text/xml")}catch(r){h=null,a=r.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);k(a,h)}}a?g?dj(a,h,l):l(a,""):k("no data"+(b?" for file: "+b:""),null)}
function dj(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");ab(e,null,!0,function(f,g,h){if(h||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+h+")");else{if(f=d[3])if(h=g.match(new RegExp("\x3c"+d[1]+"[^\x3e]*\x3e"))){for(var k=h[0],l,p=/( [a-z]+=)(['"])(.*?)\2/gi;l=p.exec(f);)k=0>k.toLowerCase().indexOf(l[1].toLowerCase())?k.replace("\x3e",l[0]+"\x3e"):k.replace(new RegExp(l[1]+"(['\"])(.*?)\\1"),l[0]);h[0]!=k&&(g=g.replace(h[0],k))}else{c(a,"missing \x3c"+
d[1]+"\x3e in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],g);dj(a,b,c)}})}else c(a,"")}
function ej(a,b,c,d,e,f){function g(a){if(void 0===l){var b=k&&x(k,"machine-warning");l=b&&b[0]||k}l&&(l.innerHTML=Ma(a))}function h(a){g("Error: "+a);p&&(--aj||yb(!0));p=!1}var k,l,p=!0;c||(c="machine.xml",d||(d="components.xsl"));aj++;Eb[b]={};try{if(k=document.getElementById(b)){var q;if("object"==typeof resources&&(q=resources.css)){var w=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css";r.styleSheet?r.styleSheet.cssText=q:r.appendChild(document.createTextNode(q));
w.appendChild(r)}d||(q=a,"pdp"==a.substr(0,3)&&(q="pdpjs"),d="/versions/"+q+"/1.75.0/components.xsl");q=function(e,f){f?bj(d||"","",a,"","",!1,g,function(a,e){if(e)if(Db(b,d||"",a),g("Processing "+c+"..."),window.ActiveXObject||"ActiveXObject"in window)(e=f.transformNode(e))?(k.outerHTML=e,--aj||yb(!0)):h("transformNodeToObject failed");else if(document.implementation&&document.implementation.createDocument){a=new XSLTProcessor;a.importStylesheet(e);var l=a.transformToFragment(f,document);if(l){var p=
k.parentNode;if(p){a=e=0;var q=k.getBoundingClientRect();0>q.bottom&&(e=window.scrollX,a=window.scrollY);p.replaceChild(l,k);(k=document.getElementById(b))&&0>q.bottom&&(l=k.getBoundingClientRect(),a=window.performance&&window.performance.navigation.type==window.performance.navigation.TYPE_RELOAD?0:a+Math.ceil(l.height-q.height),window.scrollTo(e,a));--aj||yb(!0)}else h("invalid machine element: "+b)}else h("transformToFragment failed")}else h("unable to transform XML: unsupported browser");else h(a)}):
h(e)};"\x3c"!=c.charAt(0)?bj(c,b,a,e||"",f||"",!0,g,q):cj(c,"",b,a,e||"",f||"",!1,g,q)}else h("missing machine element: "+b)}catch(G){h(G.message)}return p}window.embedPDP10=function(a,b,c,d,e){yb(!1);return ej("pdp10",a,b,c,d,e)};window.embedPDP11=function(a,b,c,d,e){yb(!1);return ej("pdp11",a,b,c,d,e)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete Xb[c],d=!0;else if("string"==typeof f&&!Xb[c]){d=!0;e=Xb;for(var g=c,h=f.length,k=[],l=[],p="",q=null,w=0;w<h;w++){var r=f[w];if('"'==r||"'"==r)q&&r!=q?p+=r:(q?q=null:q=r,p&&(l.push(p),p=""));else{if(!q){if("\r"==r||"\n"==r)r=";";if(" "==r||"\t"==r||";"==r){p&&(l.push(p),p="");";"==r&&l.length&&(k.push(l),l=[]);continue}}p+=r}}p&&l.push(p);l.length&&k.push(l);e[g]=k;Wb(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=Vb(d,c+".machine"))&&(h=g.exports)&&(h=h[e]))return h.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=yb;window.sendEvent=Ab;})()
//# sourceMappingURL=pdp10.js.map
