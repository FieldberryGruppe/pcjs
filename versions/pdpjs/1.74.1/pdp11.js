(function(){/*
 https://www.pcjs.org/modules/shared/lib/diskapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rx11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/serial.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/drive.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2019
*/
var k,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(){da=function(){};ba.Symbol||(ba.Symbol=ea)}var ea=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function fa(){da();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(this)}});fa=function(){}}function ha(a){var b=0;return ia(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ia(a){fa();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function ja(a){fa();da();fa();var b=a[Symbol.iterator];return b?b.call(a):ha(a)}
var ka="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},la;if("function"==typeof Object.setPrototypeOf)la=Object.setPrototypeOf;else{var ma;a:{var na={de:!0},oa={};try{oa.__proto__=na;ma=oa.de;break a}catch(a){}ma=!1}la=ma?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var pa=la;
function r(a,b){a.prototype=ka(b.prototype);a.prototype.constructor=a;if(pa)pa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Jk=b.prototype}function qa(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}
function sa(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}sa("Math.trunc",function(a){return a?a:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b}});sa("Number.parseInt",function(a){return a||parseInt});sa("Math.log2",function(a){return a?a:function(a){return Math.log(a)/Math.LN2}});
sa("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}});
var ta={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],10653696:[306,4,17],21411840:[615,4,17],256256:[77,1,26,128],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},ua={yi:0,Be:1,Fi:2,Gi:3,Hi:4,Ii:5,Ji:6,Ki:7,Kd:8,Li:9,Ce:10,Mi:11,Ni:12,De:13,Oi:14,Pi:15,Qi:16,Ri:17,Si:18,Ti:19,Ui:20,Vi:21,Wi:22,Xi:23,Yi:24,Zi:25,$i:26,fj:27," ":32,"!":33,'"':34,"#":35,
$:36,"%":37,"\x26":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"\x3c":60,"\x3d":61,"\x3e":62,"?":63,"@":64,Gd:65,ui:66,Ai:67,aj:68,E:69,hj:70,kj:71,wj:72,yj:73,zj:74,Aj:75,Bj:76,Ej:77,Gj:78,Mj:79,Pj:80,Q:81,Rj:82,Uj:83,ck:84,ek:85,gk:86,hk:87,lk:88,mk:89,uf:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,de:97,pk:98,sk:99,d:100,e:101,uk:102,vk:103,wk:104,xk:105,Ck:106,k:107,Dk:108,Ek:109,n:110,Fk:111,p:112,q:113,r:114,
Gk:115,t:116,Kk:117,Lk:118,Mk:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Yb:127};function va(){}
function wa(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(f=parseInt(a,b))){e&&(0>f&&(f+=Math.pow(2,36)),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function xa(a,b,c,d,e){e=void 0===e?0:e;var f="";isNaN(a)||"number"!=typeof a?a=null:(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;0<c--;){g||(f=","+f,g=e);if(null==a)f="?"+f;else{var h=a%b;h+=0<=h&&9>=h?48:55;f=String.fromCharCode(h)+f;a=Math.trunc(a/b)}g--}return(void 0===d?"":d)+f}function ya(a,b,c){b?36<b&&(b=36):(b=Math.abs(a),b=255>=b?8:262143>=b?18:36);return xa(a,2,b,"",c)}
function u(a,b,c){b?12<b&&(b=12):(b=Math.abs(a),b=262143>=b?6:16777215>=b?8:12);return xa(a,8,b,c?"0o":"")}function za(a,b){b?11<b&&(b=11):b=99999>=Math.abs(a)?5:11;return xa(a,10,b)}function v(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);return xa(a,16,b,c?"0x":"")}function Aa(a){return v(a,4,!0)}function Ba(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("\x26");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}
function Ca(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function Da(a,b){return-1!==a.indexOf(b,a.length-b.length)}function Fa(a){return a.replace(/[&<>"'$]/g,function(a){return Ga[a]})}function Ha(a,b){return(a+"                                        ").slice(0,b)}
function Ia(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),f=0,g;for(g=0;g<e.length-6;g+=6){d+=e[g];var h=e[g+5],m="ACDFHIMNSTWYdfjcsoXx%".indexOf(h);if(0>m)d+="%"+e[g+1]+e[g+2]+e[g+3]+e[g+4]+h;else{var l=c[f];"%"!=h&&f++;var n=e[g+1],q=e[g+2];"*"==q?(q=l,l=c[f++]):q=+q||0;var t=e[g+3];t=t?+t.substr(1):-1;var p=0<=n.indexOf("#"),w=null,B=0,A="";m=12>m&&"object"!=typeof l?new Date(l):l;switch(h){case "C":l=
p?"#":"";d+=Ia(Ia("%%%sW, %%%sF %%%sD, %%%sY",l,l,l,l),m,m,m,m);continue;case "D":l=p?m.getUTCDate():m.getDate();h="d";break;case "A":case "H":case "I":l=p?m.getUTCHours():m.getHours();"A"==h?(l=12>l?"am":"pm",h="s"):("I"==h&&(l=l?12<l?l-12:l:12),h="d");break;case "F":case "M":l=p?m.getUTCMonth():m.getMonth();"F"==h?(l=Ka[l],h="s"):(l++,h="d");break;case "N":l=p?m.getUTCMinutes():m.getMinutes();h="d";break;case "S":l=p?m.getUTCSeconds():m.getSeconds();h="d";break;case "T":l=p?"#":"";d+=Ia(Ia("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",
l,l,l,l,l,l),m,m,m,m,m,m);continue;case "W":l=La[p?m.getUTCDay():m.getDay()];h="s";break;case "Y":l=p?m.getUTCFullYear():m.getFullYear(),0<t&&(l%=Math.pow(10,t),t=-1),h="d"}switch(h){case "d":l=Math.trunc(l);case "f":h=l+"";0<t&&(q-=t+1);h.length<q&&(0<=n.indexOf("0")?(0>l&&q--,h=("0000000000"+Math.abs(l)).slice(-q),0>l&&(h="-"+h)):h=("          "+h).slice(-q));0<t&&(l=Math.round((l-Math.trunc(l))*Math.pow(10,t)),h+="."+("0000000000"+Math.abs(l)).slice(-t));d+=h;break;case "j":d+=JSON.stringify(l,
null,q||null);break;case "c":l=String.fromCharCode(l);case "s":if(void 0!==l)for("string"!=typeof l&&(l=l.toString()),0<=t&&(l=l.substr(0,t));l.length<q;)l=0<=n.indexOf("-")?l+" ":" "+l;d+=l;break;case "o":B=8,p&&(A="0");case "X":w=Ma,p&&(A="0X");case "x":h="";B||(B=16);!A&&p&&(A="0x");w||(w=Na);"string"==typeof l&&(l=Number.parseInt(l,l.match(/(^0x|[a-f])/i)?16:10));t=q?"":A;do p=l&B-1,l>>>=16==B?4:3,0<=n.indexOf("0")||""==h||p||l?h=w[p]+h:q&&(A?(h=A.slice(-1)+h,A=A.slice(0,-1)):h=" "+h);while(0<
--q||l);d+=t+h;break;case "%":d+="%";break;default:d+="(unimplemented printf type %"+h+")"}}}return d+=e[g]}function Oa(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var Ga={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;",$:"\x26dollar;"},Pa={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"},Na="0123456789abcdef",Ma="0123456789ABCDEF",La="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
Ka="January February March April May June July August September October November December".split(" ");function Qa(a,b,c){var d=0,e=a.length,f=0;for(void 0===c&&(c=function(a,b){return a>b?1:a<b?-1:0});d<e;){var g=d+e>>1,h=void 0;h=c(b,a[g]);0<h?d=g+1:(e=g,f=!h)}return f?d:~d}
function Ra(a,b,c,d){function e(){if(4!==l.readyState)return null;try{g=n?l.response:l.responseText}catch(w){}if(null==g||200!=l.status&&(l.status||!g.length||"file:"!=(window?window.location.protocol:"file:")))if(f=l.status||-1,!l.status&&!Sa){var b=m.match(/(^https?:\/\/[^/]+)(.*)/);b&&(Sa=!0,x("PCjs was unable to perform a cross-origin resource request to '"+b[1]+"'.\n\nIf you're running an ad blocker, try adding '"+Ta()+"' to your whitelist (or find a smarter ad blocker)."))}d&&d(a,g,f);return[g,
f]}b=void 0===b?"text":b;c=void 0===c?!1:c;var f=0,g=null,h=null;if("object"==typeof resources&&(g=resources[a]))return d&&d(a,g,f),[g,f];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),h;var m=a;"pcjs:8088"==(window?window.location.host:"localhost")?(m=a.replace(/^(http:\/\/archive\.pcjs\.org\/|https:\/\/[a-z0-9-]+\.amazonaws\.com\/archive\.pcjs\.org\/)([^/]*)\/(.*?)\/([^/]*)$/,"/$2-demo/$3/archive/$4"),m=m.replace(/^https:\/\/([a-z0-9]+)-disks\.pcjs\.org\/(.*)$/,
"/disks-$1/$2")):m=a.replace(/^\/disks-([a-z0-9]+)\//,"https://$1-disks.pcjs.org/");var l=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),n=!1,q="string"===typeof l.responseType;c&&(l.onreadystatechange=e);if(b&&"object"==typeof b){q="";for(var t in b)b.hasOwnProperty(t)&&(q&&(q+="\x26"),q+=t+"\x3d"+encodeURIComponent(b[t]));q=q.replace(/%20/g,"+");l.open("POST",m,c);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(q)}else l.open("GET",
m,c),"arraybuffer"==b&&(q?(n=!0,l.responseType=b):l.overrideMimeType("text/plain; charset\x3dx-user-defined")),l.send();c||(l.readyState=4,h=e());return h}
function Ua(a,b){var c,d={Z:null,fa:null,ya:null,xa:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f;if("\x3c"==b.charAt(0))throw Error(b);var g=0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.ya=g.load;d.xa=g.exec;if(e=g.bytes)d.Z=e;else if(e=g.words)for(d.Z=Array(2*e.length),f=c=0;c<e.length;c++)d.Z[f++]=e[c]&255,d.Z[f++]=e[c]>>8&255;else if(e=g.longs)for(d.Z=Array(4*e.length),f=c=0;c<e.length;c++)d.Z[f++]=
e[c]&255,d.Z[f++]=e[c]>>8&255,d.Z[f++]=e[c]>>16&255,d.Z[f++]=e[c]>>24&255;else(e=g.data)?d.nk=e:d.Z=g;d.Z&&(d.Z.length?1==d.Z.length&&(x(d.Z[0]),d=null):(x("Empty resource: "+a),d=null));d.fa=g.symbols}catch(h){x("Resource data error ("+a+"): "+h.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){x("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.Z=e)}return d}
function Ta(){return window?window.location.protocol+"//"+window.location.host:"https://www.pcjs.org"}function Va(){if(null==$a){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}$a=a}return $a}function ab(a){if(window)try{var b=window.localStorage.getItem(a)}catch(c){}return b}
function bb(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function cb(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function db(){var a,b=eb("mobile");if(b)return"true"==b;if(cb("Mobi")){if(!a)return!0;(b="!"==a[0])&&(a=a.substr(1));return cb(a)!=b}return!1}
function eb(a){if(!fb){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}fb=c}return fb[a]||fb[a.toLowerCase()]}function gb(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function hb(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function ib(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function jb(a){kb.init.push(a)}
function lb(a){x(a+"\n\nIf it happens again, please send the URL to support@pcjs.org. Thanks.")}function pb(a){if(qb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){lb("An unexpected error occurred: "+c.message)}}function rb(a){!qb&&a?(qb=!0,sb&&tb("init"),ub&&tb("show")):qb=a}function tb(a){kb[a]&&pb(kb[a])}var fb=null,kb={init:[],show:[],exit:[]},sb=!1,ub=!1,qb=!0,Sa=!1,$a=null;ib("onload",function(){sb=!0;pb(kb.init)});ib("onpageshow",function(){ub=!0;pb(kb.show)});
ib(cb("iOS")?"onpagehide":cb("Opera")?"onunload":"onbeforeunload",function(){pb(kb.exit)});
function y(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Rd=b.comment;this.sf=b;this.exports={};this.G=this.bindings={};a=this.id.indexOf(".");0>a?(this.gb="PCjs",this.Tc=this.id):(this.gb=this.id.substr(0,a),this.Tc=this.id.substr(a+1));this.flags={ready:!1,bb:!1,sd:!1,Bk:!1,aa:!1,Ed:!1,error:!1};this.Ic=null;this.flags.error=!1;this.ga=c||0;this.D=this.f=this.C=this.I=null;vb.push(this)}function wb(a,b,c){xb[a]&&b&&(xb[a][b]=c)}
function yb(){return Date.now()||+new Date}function x(a){window&&window.alert(a)}function Eb(a){var b=!1;window&&(b=window.confirm(a));return b}function Fb(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function Gb(a,b){var c=z;b=C(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var h=g.getAttribute("class");if(h)for(var m=h.split(" "),l=0;l<m.length;l++)switch(h=m[l],h){case c+"-binding":(h=Hb(g))&&void 0!==h.binding&&a.ua(h.type,h.binding,g,h.value),l=m.length}}}}function Ib(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<vb.length;b++){var d=vb[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function Jb(a){if(void 0!==a){var b;for(b=0;b<vb.length;b++)if(vb[b].id===a)return vb[b]}return null}function Kb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<vb.length;d++)if(c)c==vb[d]&&(c=null);else if(!(a!=vb[d].type||b&&vb[d].id.indexOf(b)))return vb[d]}return null}function Hb(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){x(c.message+" ("+a+")")}return b}
function C(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function Lb(a){for(var b=!0,c=Mb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=Nb.indexOf(e)&&(f=function(){return function(){Lb(a)}}());var g=Ob[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{b=!1;var h=Kb(d[1],a);if(h)if(g=Pb[e])b=g(h,d[2],d[3]);else{var m=h.exports;if(m&&(g=m[e]))if(b=!0,!f)b=g.call(h,d[2],d[3]);else if(!g.call(h,f,d[2],d[3]))break}}if(!b){x("Script error: '"+e+"' command "+(g?" failed":" not recognized"));break}}c&&!c.length&&delete Mb[a];
return b}k=y.prototype;k.toString=function(){return this.name?this.name:this.id||this.type};
k.ua=function(a,b,c){switch(b){case "clear":return this.G[b]||(this.G[b]=c,c.onclick=function(a){return function(){a.G.print&&(a.G.print.value="")}}(this)),!0;case "print":return this.G[b]||(this.G[b]=c,this.S=function(a){this.v(a,this.type);return!0},c.value="",this.print=function(a){return function(b){Fb(a,b)}}(c),this.v=function(a,b){return function(a,c){a||(a="");if(c!=Qb||"..."!=a.slice(-3))c&&(a=c+": "+a),Fb(b,a+"\n");else{c=b.value;var d=c.lastIndexOf(a);0>d?c+=a+"\n":c=c.substr(0,d)+(a+".")+
c.substr(d+a.length);8192<c.length&&(c=c.substr(c.length-4096));b.value=c;b.scrollTop=b.scrollHeight}}}(this,c)),!0;default:return!1}};k.log=function(){};k.print=function(){};k.v=function(){};k.status=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];this.v(this.type+": "+Ia.apply(va,[a].concat(c instanceof Array?c:qa(ja(c)))))};
k.S=function(a,b,c){if(!b){var d=Kb("Computer",this.id);if(d&&d.flags.Ed)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||x((c?c+": ":"")+a);return!0};function Rb(a,b){a.flags.error=!0;a.S(b)}function Sb(a){return a.flags.error?(a.v(a.toString()+" error"),!0):!1}function Tb(a,b){b&&(a.flags.ready?b():a.Ic=b);return a.flags.ready}function D(a,b){a.flags.error||(a.flags.ready=!1!==b,a.flags.ready&&(b=a.Ic,a.Ic=null,b&&b()))}
function Ub(a,b){a.flags.bb&&(b?a.flags.sd=!0:void 0===b&&a.v(a.toString()+" busy"));return a.flags.bb}function Vb(a,b){if(a.flags.sd)return a.flags.bb=!1,a.flags.sd=!1;if(a.flags.error)return a.v(a.toString()+" error"),!1;a.flags.bb=b;return a.flags.bb}k.Ba=function(){return this.flags.aa=!0};k.Aa=function(a,b){b&&(this.flags.aa=!1);return!0};
function E(a,b){b=void 0===b?0:b;return a.D&&(a!==a.D&&(b=b||a.ga),a=a.D.ga&b,b&4026531840&&b&268435455&&(a&4026531840&&a&268435455||(a=0)),b&&a===b)?!0:!1}function F(a,b,c,d){a.D&&(!0===c||E(a,c|0))&&a.D.message(b,d)}var Qb="progress";window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var xb=window?window.PCjs.Machines:{},vb=window?window.PCjs.Components:[],Mb=window?window.PCjs.Commands:{},Nb=["hold","sleep","wait"],Ob={alert:function(a){x(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},Pb={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var Wb="undefined"!==typeof ArrayBuffer,z="pdp11",Yb="PDPjs",Zb=!1,$b=Wb,ac=!0,gc=!0,hc="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),ic={md:5,qd:144,Vc:8,Cc:{lf:15,Vj:16,kk:32,Wd:64,Da:128,$d:256,Zj:512,ej:1024,Bc:2048,dj:4096,ed:57344,ja:{ed:13}},Ze:{ce:1,Ei:2,mf:3,Gb:28,Ac:32,zc:64,Qd:128,dk:256,Ee:512,$b:1024,Qj:2048,Zd:4096,ik:8192,Oj:16384,Fe:32768,$c:32736},Xe:{Zb:1,va:14,Fb:48,Eb:64,Ya:128,bk:256,gj:512,ij:1024,Ne:2048,od:8192,$c:16384,fb:32768,Gb:4608,
ac:61438,Sa:3967,ja:{va:1,Fb:4}},Ye:{nd:15,cd:16,Xb:8160,pb:57344,ja:{cd:4,Xb:5,pb:13}},va:{Ae:0,cc:2,qb:4,rd:6,Fc:8,Re:10,Ge:12,jk:14}},jc={md:5,qd:112,Vc:4,Qe:"DY",df:{Da:1,va:14,Xa:48,Eb:64,Ya:128,pb:768,Nd:15360,cj:16384,fb:32768,Bi:16254,Yj:128,ac:65535,Sa:1022,ja:{va:1,Xa:4,pb:8}},bf:{Sa:65534},ef:{nf:1,pf:4,qf:16,Wj:65408,Xd:63,Ec:64,bc:65408,Je:3,pj:8,ja:{Ec:6,bc:7}},Dc:{Me:{Cj:0,ak:1,zi:2,Dj:3,Fc:4,Oe:5,fk:6,$j:7},Od:8,Le:16,mj:32,oj:64,Ke:128,nj:256,sj:512,uj:1024,rj:2048,qj:4096,vj:8192,
lj:16384,tj:32768},cf:{$a:63},Nd:{Nj:1024,bj:2048,ce:2048,xj:3072,Ee:4096,Za:5120,$b:8192,Fj:9216},va:{Hj:0,rd:2,rf:4,Fc:6,Ve:8,tf:10,Se:12,Sj:14}},kc={md:5,qd:180,Vc:2,Qe:"DX",gf:{Zb:1,va:14,pd:16,DONE:32,Eb:64,ab:128,INIT:16384,fb:32768,Gb:16128,ac:32992,Sa:16479},Tj:{},kf:{$a:127},jf:{$a:31},hf:{Jd:1,Td:2,ed:4,Yb:64,Da:128},va:{Xc:0,EMPTY:2,cc:4,qb:6,Gb:8,Ue:10,Gc:12,Te:14},Ie:{ad:8,bd:16,vi:24,Pe:32,jj:40,Xj:48,ld:56,Lj:72,Kj:80,Jj:88,Di:96,xi:104,Ij:112,kd:120,Ci:128,wi:136}},lc={48:"DL11R",
52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11",180:"RX11"};kc.ff=["DX",77,1,26,128,1,0,0,128,0];ic.Bc=["RK",203,2,12,512,0,0,0,512,ic.Cc.Bc|ic.Cc.$d|ic.Cc.Wd];jc.$e=["RL",512,2,40,256,0,0,0,256,jc.Dc.Me.Oe|jc.Dc.Od|jc.Dc.Le];z="pdp11";Yb="PDPjs";Zb=!1;$b=Wb;gc=ac=!0;
var mc={cpu:1,trap:2,fault:4,"int":8,bus:16,memory:32,mmu:64,rom:128,device:256,panel:512,keyboard:1024,key:2048,pc11:4096,paper:4096,disk:8192,read:16384,write:32768,rk11:65536,rl11:131072,rx11:262144,dl11:1048576,serial:1048576,kw11:2097152,timer:2097152,speaker:16777216,computer:33554432,buffer:536870912,warn:1073741824,halt:-2147483648};
function nc(a,b){y.call(this,"Panel",a,512);this.u=this.w=0;this.K=b;this.da=this.i=this.Va=this.Ab=0;this.B=this.F=-1;this.g=this.A=!1;this.H=oc;this.j={};this.b={START:[1,1,!0,!1,this.Qf],STEP:[1,1,!1,!1,this.Rf],ENABLE:[1,1,!1,!1,this.Lf],CONT:[1,1,!0,!1,this.Jf],DEP:[0,0,!0,!1,this.Kf],EXAM:[1,1,!0,!1,this.Mf],LOAD:[1,1,!0,!1,this.Of],TEST:[0,0,!0,!1,this.Nf]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.Pf,a];this.D=this.f=this.C=this.I=null;this.exports={hold:this.Ef,toggle:this.jh,reset:this.dh,
set:this.ih};D(this)}r(nc,y);function pc(a,b){return qc(a,a.Ab=b)}k=nc.prototype;k.reset=function(a){this.stop();a&&pc(this,0)};
k.ua=function(a,b,c,d){if(this.I&&this.I.ua(a,b,c,d)||this.f&&this.f.ua(a,b,c,d)||this.D&&this.D.ua(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.G[b]=c,this.w++,!0;default:return"led"==a||"rled"==a?(this.G[b]=c,this.j[b]=d?1:0,this.w++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.G[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(a,
b){return function(){rc(a,b)}}(this,b),a.onmouseup=a.onmouseout=function(a,b){return function(){sc(a,b)}}(this,b),a.ontouchstart=function(a,b){return function(c){rc(a,b);c.preventDefault()}}(this,b),a.ontouchend=function(a,b){return function(){sc(a,b)}}(this,b),!0):y.prototype.ua.call(this,a,b,c,d)}};k.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;tc(b,this,uc);vc(b,this.reset.bind(this));wc(this);xc(this)};
k.Ba=function(a,b){if(!b)if(this.K&&yc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};k.Aa=function(a){return a?this.save():!0};k.save=function(){var a=new H(this);a.set(0,[this.da,this.Ab,this.Va]);return a.data()};k.restore=function(a){if(a=a[0])zc(this,this.da=a[0]),pc(this,a[1]),Ac(this,a[2]);return!0};k.dh=function(){for(var a in this.b){var b=this.b[a];b[1]=b[0]}xc(this);return!0};function Bc(a,b,c){if(a=a.G[b])a.style.backgroundColor=c?"#ff0000":"#000000"}
function wc(a,b){for(var c in a.j)Bc(a,c,null!=b?b:a.j[c])}function Cc(a,b,c){if(a=a.G[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function xc(a){for(var b in a.b)Cc(a,b,a.b[b][1])}function Dc(a,b,c,d){if(a.G[b]){var e=a.D&&a.D.V||8;c=c||0;c=8==e?u(c,d):v(c,d);a.G[b].textContent!=c&&(a.G[b].textContent=c)}}k.Ef=function(a,b,c){if(rc(this,b)){if(c){var d=this;setTimeout(function(){sc(d,b);a&&a()},+c);return!1}sc(this,b)}return!0};
k.ih=function(a,b){if("SR"==a)return Ac(this,wa(b,8));var c=this.b[a];return c?(c[1]=+b?1:0,Cc(this,a,c[1]),!0):!1};k.jh=function(a){return rc(this,a)?(sc(this,a),!0):!1};function rc(a,b){var c=a.b[b];return c?(Cc(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b==Ec&&(a.g=!1),!0):!1}function sc(a,b){var c=a.b[b];c&&(c[2]&&c[3]&&(Cc(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}
k.Qf=function(a){a||this.f.flags.U||(Fc(this.f,this.da),a=this.f,a.C.reset(),Gc(a),this.b[Hc]&&this.b[Hc][1]&&Ic(this.f))};k.Rf=function(){};k.Lf=function(a){a||I(this.f)};k.Jf=function(a){if(!a&&!this.f.flags.U)if(this.b[Hc]&&this.b[Hc][1])Ic(this.f);else{if((a=this.D)&&!Ub(a,!0))Vb(a,!0),Jc(a,0,null),Vb(a,!1);else try{var b=this.f.wc(1);0<b&&(Kc(this.f,b),Lc(this.f,b,!0),Mc(this.f,b))}catch(c){"number"!=typeof c&&(b=c,Rb(this.f,b.stack||b.message))}this.stop();this.I&&Nc(this.I)}};
k.Kf=function(a){if(a&&!this.f.flags.U)if(this.g&&Oc(this),this.g=!0,a=pc(this,this.Va),this.H==oc)Zc(this.C,this.da,a);else{var b=this.f,c=this.da;b.oa++;b.C.Wb($c(b,c,4),a);b.oa--}};k.Mf=function(a){a||this.f.flags.U||(this.g&&Oc(this),this.g=!0,a=this.H==oc?ad(this.C,this.da):bd(this.f,this.da),pc(this,a))};k.Of=function(a){a||this.f.flags.U||zc(this,this.Va)};k.Nf=function(a){a?(this.A=!0,wc(this,!0)):(this.A=!1,wc(this),Ac(this,0))};k.Pf=function(a,b){this.Va=a?this.Va|1<<b:this.Va&~(1<<b)};
function Oc(a){var b=1140>=a.f.ha?8:16,c=65472<=a.da&&a.da<65472+b;b=c?1:2;c=c?15:a.C.H;a.b[cd]&&a.b[cd][1]||(b=-b);zc(a,a.da&~c|a.da+b&c)}function zc(a,b){a.da=b&a.C.H;if(a.B!==a.da){a.B=a.da;b=a.B;for(var c=0;22>c;c++)dd(a,"A"+c,b&1<<c)}}function qc(a,b){a.i=b&65535;if(a.F!==a.i){a.F=a.i;b=a.F;for(var c=0;16>c;c++)dd(a,"D"+c,b&1<<c)}return a.i}function dd(a,b,c){a.j[b]=c;a.A||Bc(a,b,c)}function Ac(a,b){a.Va=b|0;for(b=0;22>b;b++)a.b["S"+b][1]=a.Va&1<<b?1:0;xc(a);return!0}
k.stop=function(){zc(this,this.f.g[7])};k.Cd=function(a){this.da=a};k.setData=function(a,b){b?this.Ab=a:this.i=a};k.Wf=function(a,b){return(b?this.Ab:this.Va)&65535};k.ph=function(a){this.Ab=a};function yc(){for(var a=C(document,z,"panel"),b=0;b<a.length;b++){var c=a[b],d=Hb(c),e=Jb(d.id);e||(e=new nc(d,!0));Gb(e,c)}}var oc=7,Hc="ENABLE",Ec="LOAD",cd="STEP",ed={},uc=(ed[65400]=[null,null,nc.prototype.Wf,nc.prototype.ph,"CNSW"],ed);jb(yc);
function fd(a,b,c){y.call(this,"Bus",a,16);this.f=b;this.D=c;this.T=+a.busWidth||16;this.L=1<<this.T;this.H=this.L-1;this.j=gd;this.g=Math.log2(this.j);this.P=this.j>>2;this.i=this.j-1;this.F=this.L/this.j|0;this.R=this.F-1;this.Oa=[];this.ka=0;this.B=!1;this.M=[];this.vf=[hd,id,jd,kd];this.b=this.u=[];this.A=this.K=this.w=this.N=this.O=0;a=new J(this);ld(a,this.D);this.b=Array(this.F);this.u=Array(this.F);for(b=0;b<this.F;b++)this.b[b]=this.u[b]=a;this.A=this.L-gd;md(this,this.A,gd,nd,this);this.O=
this.N=(this.A&this.H)>>>this.g;this.K=0;this.w=this.H;D(this)}r(fd,y);function od(a,b){if(b!=a.K){for(var c=0;c<a.F;c++)a.u[c]=a.b[c];a.K=0;a.w=a.H;b&&(a.K=b,b=1<<b,a.w=b-1,b-=gd,a.O=(b&a.w)>>>a.g,a.u[a.O]=a.b[a.N])}}k=fd.prototype;k.reset=function(){for(var a=0;a<this.M.length;a++)this.M[a]();od(this,16)};k.Ba=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.Aa=function(a){return a?this.save():!0};k.save=function(){var a=new H(this);a.set(0,pd(this));return a.data()};
k.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&d.length<this.P){var e=this.P,f=0;e=e?Array(e):[];for(var g=0;g<d.length-1;)for(var h=d[g++],m=d[g++];h--;)e[f++]=m;d=e}f=this.b[c];if(!f||!f.restore(d)){x("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function md(a,b,c,d,e){for(var f=b,g=c,h=f>>>a.g;0<g&&h<a.b.length;){var m=a.b[h],l=h*a.j,n=a.j-(f-l);n>g&&(n=g);if(!e&&m&&m.size){if(m.type==d){if(f+g<=m.J)return m.Sb+=m.J-f,m.J=f,!0;if(f>=m.J+m.Sb){n=m.size-(f-l);n>g&&(n=g);m.Sb=f-m.J+n;f=l+a.j;g-=n;h++;continue}}return qd(rd,f,g)}f=new J(a,f,n,a.j,d,e);ld(f,a.D,m);a.b[h++]=f;f=l+a.j;g-=n}return 0>=g?(a.status("Added %dKb %s at %o",c>>10,sd[d],b),!0):qd(td,b,c)}k.Hd=function(a){return this.u[(a&this.w)>>>this.g].zb(a&this.i,a)};
k.vc=function(a){var b=a&this.i,c=(a&this.w)>>>this.g;return gc||b!=this.i?this.u[c].na(b,a):this.u[c++].zb(b,a)|this.u[c&this.R].zb(0,a+1)<<8};k.Id=function(a,b){this.u[(a&this.w)>>>this.g].Cb(a&this.i,b,a)};k.Wb=function(a,b){var c=a&this.i,d=(a&this.w)>>>this.g;gc||c!=this.i?this.u[d].Db(c,b,a):(this.u[d++].Cb(c,b&255,a),this.u[d&this.R].Cb(0,b>>8&255,a+1))};function ud(a,b){return a.b[(b&a.H)>>>a.g]}
function ad(a,b){var c;a.B=!1;a.ka++;var d=b&a.i,e=ud(a,b);gc||d!=a.i?c=e.A(d,b):c=e.j(d,b)|ud(a,b+1).j(0,b+1)<<8;a.ka--;return c}function vd(a,b,c){a.B=!1;a.ka++;ud(a,b).D(b&a.i,c&255,b);a.ka--}function Zc(a,b,c){a.B=!1;a.ka++;var d=b&a.i,e=ud(a,b);gc||d!=a.i?e.B(d,c&65535,b):(e.D(d,c&255,b),ud(a,b+1).D(0,c>>8&255,b+1));a.ka--}
function pd(a){for(var b=0,c=[],d=0;d<a.F;d++){var e=a.b[d];if(e.cb||e.Cf){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,h=0,m=[];g<e.length;){for(var l=e[g],n=g+1;n<e.length&&e[n]===l;)n++;m[h++]=n-g;m[h++]=l;g=n}m.length<e.length&&(e=m)}c[f]=e}}return c}function wd(a){for(var b=xd,c=0,d=0;d<a.b.length;d++){var e=a.b[d];e.type==b&&(c=e.J+e.Sb)}return c}
function yd(a,b,c,d,e,f,g,h,m){for(var l=b==c?-1:0;b<=c;b+=2){var n=b&zd;if(void 0!==a.Oa[n])return x("I/O address already registered: "+v(b,8,!0)),!1;var q=m||"unknown";q&&0<=l&&(q+=l++);a.Oa[n]=[d,e,f,g,q,h||16,!1]}return!0}
function tc(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.f.ha)){var h=g[0]?g[0].bind(b):null,m=g[1]?g[1].bind(b):null,l=g[2]?g[2].bind(b):null,n=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!h&&l&&(h=function(a){return function(b){return a(b)&255}.bind(b)}(l)),!m&&n&&(m=function(a){return function(b,c){return a(b,c)}.bind(b)}(n)));for(var q=g[4],t=g[5]||1,p=0;p<t;p++,f+=2)if(q&&1<t&&(q=g[4]+p),!yd(a,f,f,h,m,l,n,g[7]||b.ga,q||b.Tc))return!1}}return!0}
function vc(a,b){a.M.push(b)}k.Ma=function(a,b,c){this.B=!0;this.ka||(this.D&&E(this.D,4)&&F(this.D,"memory fault ("+c+") on "+K(this.D,a),!0,!0),b&&(this.f.O|=b),this.f.qa(4,0,a))};function Ad(a){var b=a.B;a.B=!1;return b}function qd(a,b,c){x("Memory block error ("+a+": "+v(b)+","+v(c)+")");return!1}var gd=8192,zd=gd-1,rd=1,td=2;
function hd(a,b){var c=-1,d=this.controller,e=d.Oa[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Oa[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return this.f&&E(this.f,16|e[5])&&F(this.f,e[4]+".readByte("+K(this.f,b)+"): "+K(this.f,c),!0,!d.ka),c;d.Ma(b,16,3);c=255;this.f&&E(this.f,16)&&F(this.f,"warning: unconverted read access to byte @"+K(this.f,b)+": "+K(this.f,c),!0,!d.ka);return c}
function id(a,b,c){var d=!1,e=this.controller,f=e.Oa[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Oa[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d?this.f&&E(this.f,16|f[5])&&F(this.f,f[4]+".writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.ka):(e.Ma(c,16,5),this.f&&E(this.f,16)&&F(this.f,"warning: unconverted write access to byte @"+K(this.f,c)+": "+K(this.f,
b),!0,!e.ka))}function jd(a,b){var c=-1,d=this.controller;a=d.Oa[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return this.f&&E(this.f,16|a[5])&&F(this.f,a[4]+".readWord("+K(this.f,b)+"): "+K(this.f,c),!0,!d.ka),c;d.Ma(b,16,2);c=65535;this.f&&E(this.f,16)&&F(this.f,"warning: unconverted read access to word @"+K(this.f,b)+": "+K(this.f,c),!0,!d.ka);return c}
function kd(a,b,c){var d=!1,e=this.controller;a=e.Oa[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d?this.f&&E(this.f,16|a[5])&&F(this.f,a[4]+".writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0,!e.ka):(e.Ma(c,16,4),this.f&&E(this.f,16)&&F(this.f,"warning: unconverted write access to word @"+K(this.f,c)+": "+K(this.f,b),!0,!e.ka))}function L(a){y.call(this,"Device",a,256);this.b={eb:128,Dd:-1}}r(L,y);k=L.prototype;
k.za=function(a,b,c,d){this.C=b;this.I=a;this.f=c;this.D=d;var e=this;this.b.Dd=Bd(c,function(){e.b.eb|=128;e.b.eb&64&&Cd(e.f,e.b.Pa);e.I&&Nc(e.I,1);Dd(e.f,e.b.Dd,1E3/60)});this.b.Pa=Ed(c,64,6,2097152);tc(b,this,Fd);vc(b,this.reset.bind(this));d&&Gd(d,64,function(a){var b=e.f;Id(e,"KIPDR",b.A[0],0,a[0]);Id(e,"KDPDR",b.A[0],8,a[0]);Id(e,"KIPAR",b.L[0],0,a[0]);Id(e,"KDPAR",b.L[0],8,a[0],!0);Id(e,"SIPDR",b.A[1],0,a[0]);Id(e,"SDPDR",b.A[1],8,a[0]);Id(e,"SIPAR",b.L[1],0,a[0]);Id(e,"SDPAR",b.L[1],8,a[0],
!0);Id(e,"UIPDR",b.A[3],0,a[0]);Id(e,"UDPDR",b.A[3],8,a[0]);Id(e,"UIPAR",b.L[3],0,a[0]);Id(e,"UDPAR",b.L[3],8,a[0],!0);b.W&32&&Id(e,"UNIMAP",b.Fa,-1,a[0])});D(this)};function Id(a,b,c,d,e,f){a=a.D;if(!(e&&0>b.indexOf(e.toUpperCase()))){e=0;var g=8,h="",m=!1,l=8;0>d&&(e=22,g=c.length,d=0,m=!0,l=4);for(var n=0;n<g;n++)0==n%l&&(h&&(h+="\n"),h+=b+(m?"["+za(n,2)+"]":"")+":"),h+=" "+K(a,c[d+n],e);a.v(h+(f?"\n":""))}}k.Ba=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};
k.Aa=function(a){return a?this.save():!0};k.reset=function(){this.b.eb=128;Dd(this.f,this.b.Dd,1E3/60,!0)};k.save=function(){var a=new H(this);a.set(0,[this.b.eb]);return a.data()};k.restore=function(a){a=ja(a[0]);this.b.eb=a.next().value;return!0};k.cg=function(){return this.b.eb};k.wh=function(a){this.b.eb=a&192;this.b.eb&64||Jd(this.f,this.b.Pa)};k.eg=function(){return Kd(this.f)};k.yh=function(a){Ld(this.f,a&-129|this.f.R&128)};k.fg=function(){return Md(this.f)};k.gg=function(){return Nd(this.f)};
k.hg=function(){return this.f.W};k.zh=function(a){Od(this.f,a)};k.Tg=function(a){a=a>>1&63;var b=this.f.Fa[a>>1];return a&1?b>>16:b&65535};k.ki=function(a,b){b=b>>1&63;var c=b>>1;this.f.Fa[c]=b&1?this.f.Fa[c]&65535|(a&63)<<16:this.f.Fa[c]&-65536|a&65534};k.Mg=function(a){return this.f.A[1][a>>1&7]};k.di=function(a,b){this.f.A[1][b>>1&7]=a&65295};k.Kg=function(a){return this.f.A[1][(a>>1&7)+8]};k.bi=function(a,b){this.f.A[1][(b>>1&7)+8]=a&65295};k.Lg=function(a){return this.f.L[1][a>>1&7]};
k.ci=function(a,b){b=b>>1&7;this.f.L[1][b]=a;this.f.A[1][b]&=65295};k.Jg=function(a){return this.f.L[1][(a>>1&7)+8]};k.ai=function(a,b){b=(b>>1&7)+8;this.f.L[1][b]=a;this.f.A[1][b]&=65295};k.bg=function(a){return this.f.A[0][a>>1&7]};k.vh=function(a,b){this.f.A[0][b>>1&7]=a&65295};k.$f=function(a){return this.f.A[0][(a>>1&7)+8]};k.th=function(a,b){this.f.A[0][(b>>1&7)+8]=a&65295};k.ag=function(a){return this.f.L[0][a>>1&7]};k.uh=function(a,b){b=b>>1&7;this.f.L[0][b]=a;this.f.A[0][b]&=65295};
k.Zf=function(a){return this.f.L[0][(a>>1&7)+8]};k.sh=function(a,b){b=(b>>1&7)+8;this.f.L[0][b]=a;this.f.A[0][b]&=65295};k.Sg=function(a){return this.f.A[3][a>>1&7]};k.ji=function(a,b){this.f.A[3][b>>1&7]=a&65295};k.Qg=function(a){return this.f.A[3][(a>>1&7)+8]};k.hi=function(a,b){this.f.A[3][(b>>1&7)+8]=a&65295};k.Rg=function(a){return this.f.L[3][a>>1&7]};k.ii=function(a,b){b=b>>1&7;this.f.L[3][b]=a;this.f.A[3][b]&=65295};k.Pg=function(a){return this.f.L[3][(a>>1&7)+8]};
k.gi=function(a,b){b=(b>>1&7)+8;this.f.L[3][b]=a;this.f.A[3][b]&=65295};k.Qb=function(a){a&=7;return this.f.w&2048?this.f.sa[a]:this.f.g[a]};k.Ub=function(a,b){b&=7;this.f.w&2048?this.f.sa[b]=a:this.f.g[b]=a};k.og=function(){return this.f.w&49152?this.f.X[0]:this.f.g[6]};k.Gh=function(a){this.f.w&49152?this.f.X[0]=a:this.f.g[6]=a};k.rg=function(){return this.f.g[7]};k.Jh=function(a){this.f.g[7]=a};k.Rb=function(a){a&=7;return this.f.w&2048?this.f.g[a]:this.f.sa[a]};
k.Vb=function(a,b){b&=7;this.f.w&2048?this.f.g[b]=a:this.f.sa[b]=a};k.pg=function(){return 1==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[1]};k.Hh=function(a){1==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[1]=a};k.qg=function(){return 3==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[3]};k.Ih=function(a){3==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[3]=a};k.Yf=function(a){return this.f.sc[a-65504>>1]};k.rh=function(a,b){this.f.sc[b-65504>>1]=a};k.te=function(a){return 65520==a?(wd(this.C)>>6)-1:0};
k.ye=function(){};k.Og=function(){return 1};k.fi=function(){};k.Xf=function(){return this.f.O};k.qh=function(){this.f.O=0};k.dg=function(){return this.f.pc};k.xh=function(a,b){b&1||(a&=255);this.f.pc=a};k.ig=function(a,b){return b?0:this.f.mb};k.Ah=function(a){Pd(this.f,a)};k.Ng=function(a,b){return b?0:this.f.Ea&65280};k.ei=function(a){this.f.Ea=a|255};k.ng=function(){return Zd(this.f)};k.Fh=function(a){$d(this.f,a)};k.xe=function(a,b){E(this)&&F(this,"writeIgnored("+u(b)+"): "+u(a),!0,!0)};
var M={},Fd=(M[61568]=[null,null,L.prototype.Tg,L.prototype.ki,"UNIMAP",64,1170],M[62592]=[null,null,L.prototype.Mg,L.prototype.di,"SIPDR",8,1145,64],M[62608]=[null,null,L.prototype.Kg,L.prototype.bi,"SDPDR",8,1145,64],M[62624]=[null,null,L.prototype.Lg,L.prototype.ci,"SIPAR",8,1145,64],M[62640]=[null,null,L.prototype.Jg,L.prototype.ai,"SDPAR",8,1145,64],M[62656]=[null,null,L.prototype.bg,L.prototype.vh,"KIPDR",8,1140,64],M[62672]=[null,null,L.prototype.$f,L.prototype.th,"KDPDR",8,1145,64],M[62688]=
[null,null,L.prototype.ag,L.prototype.uh,"KIPAR",8,1140,64],M[62704]=[null,null,L.prototype.Zf,L.prototype.sh,"KDPAR",8,1145,64],M[62798]=[null,null,L.prototype.hg,L.prototype.zh,"MMR3",1,1145,64],M[65382]=[null,null,L.prototype.cg,L.prototype.wh,"LKS"],M[65402]=[null,null,L.prototype.eg,L.prototype.yh,"MMR0",1,1140,64],M[65404]=[null,null,L.prototype.fg,L.prototype.xe,"MMR1",1,1145,64],M[65406]=[null,null,L.prototype.gg,L.prototype.xe,"MMR2",1,1140,64],M[65408]=[null,null,L.prototype.Sg,L.prototype.ji,
"UIPDR",8,1140,64],M[65424]=[null,null,L.prototype.Qg,L.prototype.hi,"UDPDR",8,1145,64],M[65440]=[null,null,L.prototype.Rg,L.prototype.ii,"UIPAR",8,1140,64],M[65456]=[null,null,L.prototype.Pg,L.prototype.gi,"UDPAR",8,1145,64],M[65472]=[null,null,L.prototype.Qb,L.prototype.Ub,"R0SET0"],M[65473]=[null,null,L.prototype.Qb,L.prototype.Ub,"R1SET0"],M[65474]=[null,null,L.prototype.Qb,L.prototype.Ub,"R2SET0"],M[65475]=[null,null,L.prototype.Qb,L.prototype.Ub,"R3SET0"],M[65476]=[null,null,L.prototype.Qb,
L.prototype.Ub,"R4SET0"],M[65477]=[null,null,L.prototype.Qb,L.prototype.Ub,"R5SET0"],M[65478]=[null,null,L.prototype.og,L.prototype.Gh,"R6KERNEL"],M[65479]=[null,null,L.prototype.rg,L.prototype.Jh,"R7KERNEL"],M[65480]=[null,null,L.prototype.Rb,L.prototype.Vb,"R0SET1",1,1145],M[65481]=[null,null,L.prototype.Rb,L.prototype.Vb,"R1SET1",1,1145],M[65482]=[null,null,L.prototype.Rb,L.prototype.Vb,"R2SET1",1,1145],M[65483]=[null,null,L.prototype.Rb,L.prototype.Vb,"R3SET1",1,1145],M[65484]=[null,null,L.prototype.Rb,
L.prototype.Vb,"R4SET1",1,1145],M[65485]=[null,null,L.prototype.Rb,L.prototype.Vb,"R5SET1",1,1145],M[65486]=[null,null,L.prototype.pg,L.prototype.Hh,"R6SUPER",1,1145],M[65487]=[null,null,L.prototype.qg,L.prototype.Ih,"R6USER",1,1145],M[65504]=[null,null,L.prototype.Yf,L.prototype.rh,"CTRL",8,1170],M[65520]=[null,null,L.prototype.te,L.prototype.ye,"LSIZE",1,1170],M[65522]=[null,null,L.prototype.te,L.prototype.ye,"HSIZE",1,1170],M[65524]=[null,null,L.prototype.Og,L.prototype.fi,"SYSID",1,1170],M[65526]=
[null,null,L.prototype.Xf,L.prototype.qh,"ERR",1,1170],M[65528]=[null,null,L.prototype.dg,L.prototype.xh,"MBR",1,1170],M[65530]=[null,null,L.prototype.ig,L.prototype.Ah,"PIR"],M[65532]=[null,null,L.prototype.Ng,L.prototype.ei,"SLR"],M[65534]=[null,null,L.prototype.ng,L.prototype.Fh,"PSW"],M);
jb(function(){for(var a=C(document,z,"device"),b=0;b<a.length;b++){var c=a[b];var d=Hb(c);switch(d.type){case "default":d=new L(d);Gb(d,c);break;case "pc11":d=new ae(d);Gb(d,c);break;case "rl11":d=new be(d);Gb(d,c);break;case "rk11":d=new N(d);Gb(d,c);break;case "rx11":d=new ce(d),Gb(d,c)}}});
function J(a,b,c,d,e,f){this.C=a;this.id=de+=2;this.b=null;this.J=b;this.Sb=c;this.size=d||0;this.type=e||ee;this.I=e==fe;this.f=this.controller=null;this.zb=this.j=this.yd;this.na=this.A=this.zd;this.Cb=this.D=this.Tb;this.Db=this.B=this.Rc;this.G=this.i=0;ld(this);this.cb=this.Cf=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.b=a[0],ge(this,f.vf);else if(Wb)this.u=new ArrayBuffer(this.size),this.w=new DataView(this.u,0,this.size),this.g=new Uint8Array(this.u,0,this.size),this.F=new Uint16Array(this.u,
0,this.size>>1),this.b=new Int32Array(this.u,0,this.size>>2),ge(this,he?ie:je);else{a=this.b=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;ge(this,ke)}else ge(this)}k=J.prototype;k.save=function(){var a;if(this.controller)var b=null;else if(Wb)for(b=Array(this.size>>2),a=0;a<b.length;a++)b[a]=this.w.getInt32(a<<2,!0);else b=this.b;return b};
k.restore=function(a){if(this.controller)return null==a;if(a&&this.size==a.length<<2){var b;if(Wb)for(b=0;b<a.length;b++)this.w.setInt32(b<<2,a[b],!0);else this.b=a;return this.cb=!0}return!1};function ge(a,b){b||(b=le);me(a,b,void 0);ne(a,b,void 0)}function me(a,b,c){c&&a.G||(a.zb=b[0]||a.yd,a.na=b[2]||a.zd);if(c||void 0===c)a.j=b[0]||a.yd,a.A=b[2]||a.zd}function ne(a,b,c){c&&a.i||(a.Cb=!a.I&&b[1]||a.Tb,a.Db=!a.I&&b[3]||a.Rc);if(c||void 0===c)a.D=b[1]||a.Tb,a.B=b[3]||a.Rc}
k.xb=function(a,b){b?0===this.i++&&ne(this,oe,!1):0===this.G++&&me(this,oe,!1)};function pe(a,b){b?0===--a.i&&(a.Cb=a.I?a.Tb:a.D,a.Db=a.I?a.Rc:a.B):0===--a.G&&(a.zb=a.j,a.na=a.A)}function ld(a,b,c){a.f=b;a.G=a.i=0;c&&((a.G=c.G)&&me(a,oe,!1),(a.i=c.i)&&ne(a,oe,!1))}k.yd=function(a,b){this.f&&E(this.f,32)&&F(this.f,"attempt to read invalid address "+K(this.f,b),!0);this.C.Ma(b,32,2);return 255};
k.Tb=function(a,b,c){this.f&&E(this.f,32)&&F(this.f,"attempt to write "+K(this.f,b)+" to invalid addresses "+K(this.f,c),!0);this.C.Ma(c,32,4)};k.zd=function(a,b){return this.zb(a++,b++)|this.zb(a,b)<<8};k.Rc=function(a,b,c){this.Cb(a++,b&255,c++);this.Cb(a,b>>8,c)};k.Vf=function(a){return this.b[a>>2]>>>((a&3)<<3)&255};k.Zg=function(a,b){ac&&a&1&&this.C.Ma(b,64,2);b=a>>2;a=(a&3)<<3;var c=this.b[b]>>a;return 24>a?c&65535:c&255|(this.b[b+1]&255)<<8};
k.oh=function(a,b){var c=a>>2;a=(a&3)<<3;this.b[c]=this.b[c]&~(255<<a)|b<<a;this.cb=!0};k.oi=function(a,b,c){ac&&a&1&&this.C.Ma(c,64,4);c=a>>2;a=(a&3)<<3;24>a?this.b[c]=this.b[c]&~(65535<<a)|b<<a:(this.b[c]=this.b[c]&16777215|b<<24,c++,this.b[c]=this.b[c]&-256|b>>8);this.cb=!0};k.Tf=function(a,b){this.f&&null!=this.J&&qe(this.f,this.J+a);return this.j(a,b)};k.Vg=function(a,b){this.f&&null!=this.J&&qe(this.f,this.J+a,2);return this.A(a,b)};
k.mh=function(a,b,c){this.f&&null!=this.J&&re(this.f,this.J+a);this.I?this.Tb(a,b,c):this.D(a,b,c)};k.mi=function(a,b,c){this.f&&null!=this.J&&re(this.f,this.J+a,2);this.I?this.Tb(a,b,c):this.B(a,b,c)};k.Sf=function(a){return this.g[a]};k.Uf=function(a,b){a=this.g[a];this.f&&E(this.f,32)&&F(this.f,"Memory.readByte("+K(this.f,b)+"): "+K(this.f,a),!0);return a};k.Ug=function(a,b){ac&&a&1&&this.C.Ma(b,64,2);return this.w.getUint16(a,!0)};
k.Yg=function(a,b){ac&&a&1&&this.C.Ma(b,64,2);a=!gc&&a&1?this.g[a]|this.g[a+1]<<8:this.F[a>>1];this.f&&E(this.f,32)&&F(this.f,"Memory.readWord("+K(this.f,b)+"): "+K(this.f,a),!0);return a};k.lh=function(a,b){this.g[a]=b;this.cb=!0};k.nh=function(a,b,c){this.g[a]=b;this.cb=!0;this.f&&E(this.f,32)&&F(this.f,"Memory.writeByte("+K(this.f,c)+","+K(this.f,b)+")",!0)};k.li=function(a,b,c){ac&&a&1&&this.C.Ma(c,64,4);this.w.setUint16(a,b,!0);this.cb=!0};
k.ni=function(a,b,c){ac&&a&1&&this.C.Ma(c,64,4);!gc&&a&1?(this.g[a]=b,this.g[a+1]=b>>8):this.F[a>>1]=b;this.cb=!0;this.f&&E(this.f,32)&&F(this.f,"Memory.writeWord("+K(this.f,c)+","+K(this.f,b)+")",!0)};var ee=0,xd=1,fe=2,nd=4,sd=["NONE","RAM","ROM","VID","H/W"],de=0,le=[],ke=[J.prototype.Vf,J.prototype.oh,J.prototype.Zg,J.prototype.oi],oe=[J.prototype.Tf,J.prototype.mh,J.prototype.Vg,J.prototype.mi];
if(Wb)var je=[J.prototype.Sf,J.prototype.lh,J.prototype.Ug,J.prototype.li],ie=[J.prototype.Uf,J.prototype.nh,J.prototype.Yg,J.prototype.ni];var se;if(Wb){var te=new ArrayBuffer(2);(new DataView(te)).setUint16(0,256,!0);se=256===(new Uint16Array(te))[0]}else se=!1;var he=se;
function ue(a,b){y.call(this,"CPU",a,1);b=+a.cycles||b;var c=+a.multiplier||1;this.Wc=0;this.Uc=b;this.kb=c;this.gd=Math.round(this.Uc/1E4)/100;this.tb=this.gd*this.kb;this.hd=this.lc=this.wb=this.tc=0;this.flags.U=this.flags.Nc=!1;this.flags.pa=a.autoStart;"string"==typeof this.flags.pa&&(this.flags.pa="true"==this.flags.pa);this.flags.Jb=!1;this.jc=this.Kb=0;this.kc=+a.csStart;this.Ib=+a.csInterval;this.Mb=+a.csStop;this.ea=[];this.Vd=this.eh.bind(this);this.lb=this.Ia=this.jb=this.b=this.ia=this.Ha=
this.ic=this.ib=this.Nb=this.jd=this.sb=0;this.ra=null;D(this)}r(ue,y);k=ue.prototype;k.za=function(a,b,c,d){this.I=a;this.C=b;this.D=d;this.ra=a.i;for(a=0;a<ve.length;a++)(b=this.G[ve[a]])&&this.I.ua("",ve[a],b);D(this)};k.reset=function(){};k.save=function(){return null};k.restore=function(){return!1};
k.Ba=function(a,b){var c=we(this.I,"autoStart");null!=c?this.flags.pa="true"==c?!0:"false"==c?!1:!!c:null==this.flags.pa&&(this.flags.pa=!this.D&&void 0===this.G.run);if(!b){if(a){xe(this);if(!this.restore(a))return!1;ye(this)}else this.reset();this.D?(a=this.D,b=this.flags.pa,a.Fa=!0,a.v("Type ? for help with PDPjs Debugger commands"),ze(a),b||Ae(a),a.wa&&(b=a.wa,a.wa=null,Be(a,b))):this.status("No debugger detected");this.flags.pa||this.v("CPU will not be auto-started "+(this.ra?"(click Run to start)":
"(type 'go' to start)"))}return!0};k.Aa=function(a){return a?this.save():!0};k.pa=function(){return this.flags.U?!0:this.flags.pa?Ic(this):!1};k.me=function(){return 0};function ye(a){void 0===a.kc&&(a.kc=0);void 0===a.Ib&&(a.Ib=-1);void 0===a.Mb&&(a.Mb=-1);a.flags.Jb=0<=a.kc&&0<a.Ib;a.flags.Jb&&(a.jc=0,a.Kb=a.kc-a.lb)}
function Mc(a,b){if(a.flags.Jb){var c=!1;a.jc=a.jc+a.me()|0;a.Kb-=b;0>=a.Kb&&(a.Kb+=a.Ib,c=!0);0<=a.Mb&&a.Mb<=Ce(a)&&(a.Ib=a.Mb=-1,ye(a),I(a),c=!0);c&&a.v(Ce(a)+" cycles: checksum\x3d"+v(a.jc))}}
k.ua=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.G[b]=c,!0;case "run":return this.G[b]=c,c.onclick=function(){var a;if(a=d.I)if(a=d.I,a.flags.aa)a=!0;else{var b=null,c,h=Ib(a.id);for(c=0;c<h.length&&(b=h[c],b===a||b.flags.ready);c++);if(c==h.length)for(c=0;c<h.length&&(b=h[c],b===a||b.flags.aa);c++);c==h.length&&(b=a);x("The "+b.type+" component ("+b.id+") is not "+(b.flags.ready?"powered yet":"ready yet"+(b.Ic?" (waiting for notification)":""))+".");a=!1}a&&(d.flags.U?
I(d):Ic(d))},!0;case "speed":return this.G[b]=c,!0;case "setSpeed":return this.G[b]=c,c.onclick=function(){De(d,d.kb<<1,!0)},c.textContent=this.tb.toFixed(2)+"Mhz",!0}return!1};function Lc(a,b,c){a.lb+=b;c&&(a.jb=a.b=a.ia=0)}function Ee(a,b){var c=1;b&&1<a.kb&&a.sb&&(c=a.sb/a.gd);a.hd=Math.round(1E3/Fe);a.lc=Math.floor(a.Uc/Fe*c);b||(a.wb=a.lc);a.tc=0}function Ce(a){return a.lb+a.Ia+a.jb-a.b}function xe(a){a.sb=0;a.jd=0;a.lb=a.Ia=a.jb=a.b=a.ia=0;ye(a);De(a,1)}
function De(a,b,c){var d=!1;if(void 0!==b){.8>a.sb/a.tb?b=1:d=!0;a.kb=b;b=a.gd*a.kb;if(a.tb!=b){a.tb=b;b=a.tb.toFixed(2)+"Mhz";var e=a.G.setSpeed;e&&(e.textContent=b);a.v("target speed: "+b)}c&&a.I&&Ge(a.I)}Lc(a,a.Ia);a.Ia=0;a.Ha=yb();a.ib=0;Ee(a);return d}function Bd(a,b){var c=a.ea.length;a.ea.push([-1,b]);return c}function Dd(a,b,c,d){0<=b&&b<a.ea.length&&(d||0>a.ea[b][0])&&(c=a.Uc*a.kb/1E3*c|0,a.flags.U&&(c+=He(a)),a.ea[b][0]=c)}
function Ie(a,b){for(var c=a.ea.length-1;0<=c;c--){var d=a.ea[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function Je(a){for(var b=[],c=0;c<a.ea.length;c++)b.push(a.ea[c][0]);return b}function Kc(a,b){for(var c=a.ea.length-1;0<=c;c--){var d=a.ea[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function He(a,b){var c=a.jb-=a.b;a.b=a.ia=0;b&&(a.jb=0);return c}
k.eh=function(){if(this.flags.U){this.tc>=this.Uc&&Ee(this,!0);this.Nb=0;this.ic=yb();if(this.ib){var a=this.ic-this.ib;a>this.hd&&(this.Ha+=a,this.Ha>this.ic&&(this.Ha=this.ic))}try{do{var b=Ie(this,this.flags.Jb?1:this.lc);try{this.wc(b)}catch(e){if("number"!=typeof e)throw e;}b=He(this,!0);this.Nb+=b;this.Ia+=b;Mc(this,b);Kc(this,b);this.wb-=b;if(0>=this.wb){this.wb+=this.lc;++this.jd>=Ke&&(this.I&&Nc(this.I,void 0),this.jd=0);break}}while(this.flags.U)}catch(e){I(this);this.I&&this.I.stop(yb(),
Ce(this));Rb(this,e.stack||e.message);return}if(this.flags.U){a=setTimeout;b=this.Vd;this.ib=yb();var c=this.hd;this.Nb&&(c=Math.round(c*this.Nb/this.lc));c-=this.ib-this.ic;var d=this.ib-this.Ha;d&&(this.sb=Math.round(this.Ia/(10*d))/100,864E5<=d&&(this.lb=0,De(this)));if(0>c||this.sb<this.tb)-1E3>c&&(this.Ha-=c),c=0;this.tc+=this.Nb;this.ib+=c;a(b,c)}}};
function Ic(a,b){if(Sb(a))return!1;if(a.flags.U)return a.v(a.toString()+" busy"),!1;De(a);a.flags.U=!0;a.flags.Nc=!0;var c=a.G.run;c&&(c.textContent="Halt");a.I&&(b&&Ge(a.I,!0),a.I.start(a.Ha,Ce(a)));a.D||a.status("Started");setTimeout(a.Vd,0);return!0}k.wc=function(){return 0};function I(a,b){var c=!1;if(a.flags.U){He(a);Lc(a,a.Ia);a.Ia=0;a.flags.U=!1;if(c=a.G.run)c.textContent="Run";a.I&&a.I.stop(yb(),Ce(a));c=!0;a.D||a.status("Stopped")}a.flags.complete=b;return c}var Fe=30,Ke=15,ve=["power","reset"];
function Le(a){var b=+a.model||1170;ue.call(this,a,6666667);this.ha=b;this.Pc=+a.addrReset||0;this.Ja=this.w=this.M=this.B=this.F=this.K=this.H=0;this.g=this.sa=this.X=[];this.L=this.A=this.Fa=this.sc=[];this.Ra=this.N=this.Pd=this.ub=this.vb=this.ob=this.hb=this.O=this.pc=this.mb=this.Ea=this.R=this.qc=this.rc=this.W=this.i=0;this.Sd=[4,2,0,1];this.uc=0;this.Ud=255;1120>=this.ha?(this.Yd=Me.bind(this),this.Hb=this.zf,this.uc=8,this.Ud=-1,this.be=255,this.ae=0):(this.Yd=Ne.bind(this),this.Hb=this.Af,
this.be=~(1792|(1140>=this.ha?2048:0))&65535,this.ae=1140<this.ha?2048:0);this.yc=this.xc=this.oa=0;this.P=null;this.hc=[];this.ec=this.Yc=this.le;this.fc=this.Zc=this.pe;this.Oc=this.dd=this.ve;this.gc=this.fd=this.we;this.Ga=this.rb=this.mc=this.oc=0;this.wa=this.oe;this.na=this.Ad;this.Db=this.Fd;this.u=this.j=this.Sc=this.T=this.Y=0;this.flags.complete=!1}r(Le,ue);k=Le.prototype;
k.za=function(a,b,c,d){ue.prototype.za.call(this,a,b,c,d);this.Yc=b.Hd.bind(b);this.Zc=b.vc.bind(b);this.dd=b.Id.bind(b);this.fd=b.Wb.bind(b)};k.Ba=function(a,b){for(var c=192,d=0;d<this.hc.length;d++){var e=this.hc[d];0>e.Bb&&(e.Bb=c,c+=4)}return ue.prototype.Ba.call(this,a,b)};
k.reset=function(){this.status("Model %d",this.ha);this.flags.U&&I(this);this.B=65536;this.F=32768;this.K=65535;this.H=32768;this.w=15;this.g=[0,0,0,0,0,0,0,this.Pc,-1,-2,-3,-4,-5,-6,-7,-8];this.sa=[0,0,0,0,0,0];this.X=[0,0,0,0];this.L=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.A=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,
65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Fa=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.sc=[0,0,0,0,0,0,0,0];this.M=0;this.Ja=-1;this.u=this.j=this.Sc=this.T=this.Y=this.i=this.pc=0;Gc(this);xe(this);this.flags.error=!1;ue.prototype.reset.call(this)};function Gc(a){a.R=0;a.qc=0;a.rc=0;a.W=0;a.O=0;a.mb=0;a.Ea=255;a.ub=0;a.vb=0;a.ob=0;a.hb=262143;a.Ra=a.g[7];a.N=0;a.P=null;a.C&&(Oe(a),a.Pd=wd(a.C))}
function Oe(a){a.ec=a.Yc;a.fc=a.Zc;a.Oc=a.dd;a.gc=a.fd;a.mc&&(a.ec=a.le,a.fc=a.pe);a.oc&&(a.Oc=a.ve,a.gc=a.we);a.ub?(a.Ga=65536,a.rb=a.W&16?4186112:253952,a.wa=a.oe,a.na=a.mc?a.Xg:a.Ad,a.Db=a.oc?a.ri:a.Fd,od(a.C,a.W&16?22:18)):(a.Ga=0,a.rb=57344,a.wa=a.Df,a.na=a.mc?a.Wg:a.ue,a.Db=a.oc?a.pi:a.ze,od(a.C,16))}function Kd(a){var b=a.R;b&57344||(b=b&-3199|a.vb<<5|a.ob<<1);return b}
function Ld(a,b){b&=-3073;if(a.R!=b){b&57344&&!(a.R&57344)&&(a.qc=a.N>>16&65535,a.rc=a.N&65535);a.R=b;a.vb=(b&96)>>5;a.ob=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.ub!=c&&(a.ub=c,Oe(a))}}function Md(a){a.R&57344||(a.qc=a.N>>16&65535);a=a.qc;a&65280&&(a=(a<<8|a>>8)&65535);return a}function Nd(a){a.R&57344||(a.rc=a.N&65535);return a.rc}function Od(a,b){1170>a.ha&&(b&=-49);a.W!=b&&(a.W=b,a.hb=b&16?4194303:262143,Oe(a))}
function Pe(a,b,c,d){a.Pc=b;Fc(a,b);$d(a,0);a.C.reset();Gc(a);if(c){a.g[0]=d||0;for(b=1;5>=b;b++)a.g[b]=0;a.g[6]=1024;a.flags.aa?a.flags.U||Ic(a):a.flags.pa=!0}else a.D&&a.flags.aa?I(a)||a.I.flags.reset||(ze(a.D),Nc(a.I,-1)):!1===c&&I(a);!a.flags.U&&a.ra&&a.ra.stop()}k.me=function(){return 0};
k.save=function(){var a=new H(this);a.set(0,[this.g,this.sa,this.X,this.L,this.A,this.Fa,this.sc,this.O,this.pc,this.mb,this.Ea,this.vb,this.ob,this.Ra,this.i,this.N,this.Ja,this.xc,this.yc,this.Pc]);a.set(1,[Zd(this),Kd(this),Md(this),Nd(this),this.W]);a.set(2,[this.lb,this.kb,this.flags.pa]);a.set(3,Qe(this));a.set(4,Je(this));return a.data()};
k.restore=function(a){var b=ja(a[0]);this.g=b.next().value;this.sa=b.next().value;this.X=b.next().value;this.L=b.next().value;this.A=b.next().value;this.Fa=b.next().value;this.sc=b.next().value;this.O=b.next().value;this.pc=b.next().value;this.mb=b.next().value;this.Ea=b.next().value;this.vb=b.next().value;this.ob=b.next().value;this.Ra=b.next().value;this.i=b.next().value;this.N=b.next().value;this.Ja=b.next().value;this.xc=b.next().value;this.yc=b.next().value;this.Pc=b.next().value;b=a[1];$d(this,
b[0]);Ld(this,b[1]);this.qc=b[2];this.rc=b[3];Od(this,b[4]);b=a[2];this.lb=b[0];De(this,b[1]);this.flags.pa=b[2];b=a[3];for(var c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.hc.length;d++){var e=this.hc[d];if(e.Bb===b[c]){d=e;break a}}d=null}d&&(d.next=this.P,this.P=d)}a=a[4];for(b=0;b<this.ea.length&&b<a.length;b++)this.ea[b][0]=a[b];return!0};function Re(a){return a.B&65536?1:0}function Se(a){return a.F&32768?2:0}function Te(a){return a.K&65535?0:4}function Ue(a){return a.H&32768?8:0}
function Ve(a,b){var c=a.g[7];a.g[7]=c+b&65535;return c}function We(a,b,c){c&&(Fc(a,a.g[7]+(b<<24>>23)),a.b-=2);a.b-=3}function Fc(a,b){a.g[7]=b&65535}function Ed(a,b,c,d){b={Bb:b,priority:c,message:d||0,name:lc[b],next:null};a.hc.push(b);return b}function Xe(a,b){var c=a.P;if(c==b)a.P=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.P&&(a.i|=1)}
function Cd(a,b){if(b){if(b!=a.P){var c=a.P;if(!c||c.priority<=b.priority)b.next=c,a.P=b;else{do{var d=c.next;if(!d||d.priority<=b.priority){b.next=d;c.next=b;break}c=d}while(c)}}a.i|=1;b.message&&E(a,b.message|8)&&F(a,"setIRQ(vector\x3d"+u(b.Bb)+",priority\x3d"+b.priority+")",!0,!0)}}function Jd(a,b){b&&(Xe(a,b),b.message&&E(a,b.message|8)&&F(a,"clearIRQ(vector\x3d"+u(b.Bb)+",priority\x3d"+b.priority+")",!0,!0))}function Qe(a){var b=[];for(a=a.P;a;)b.push(a.Bb),a=a.next;return b}
function Ye(a){return a.i&64?(a.qa(168,64,-6),!0):a.i&32?(a.qa(4,32,-5),!0):a.i&16?(a.qa(12,16,-7),!0):!1}function Zd(a){return a.w=a.w&63728|Ue(a)|Te(a)|Se(a)|Re(a)}function $d(a,b){b&=a.be;a.H=b<<12;a.K=~b&4;a.F=b<<14;a.B=b<<16;if((b^a.w)&a.ae)for(var c=a.sa.length;0<=--c;){var d=a.g[c];a.g[c]=a.sa[c];a.sa[c]=d}a.M=b>>14&3;c=a.w>>14&3;a.M!=c&&(a.X[c]=a.g[6],a.g[6]=a.X[a.M]);a.w=b;a.i&=-3;a.i|=a.P?2:1}function Pd(a,b){if(b&=65024){var c=b>>9;do b+=34;while(c>>=1);a.i|=1}a.mb=b}
k.Ca=function(a){this.H=this.K=a;this.F=0};k.nb=function(a,b){this.H=this.K=this.B=a;this.F=b||0};function Ze(a,b){a.H=a.K=a.B=b;a.F=a.H^a.B>>1}function $e(a,b,c,d){a.H=a.K=a.B=b;a.F=(c^d)&(d^b)}
k.qa=function(a,b,c){if(!this.oa){0>this.Ja?this.Ja=Zd(this):this.M||(c=-4);-4==c&&(this.i&256&&(c=-1),this.i|=256,this.O|=4,this.g[6]=a=4);if(-1!=c){this.N=a|4143316992;this.M=0;var d=this.na(a|this.Ga),e=this.na(a+2&65535|this.Ga);$d(this,e&-12289|this.Ja>>2&12288);af(this,this.Ja);af(this,this.g[7]);Fc(this,d)}this.b-=5;this.i&=~(b|19);this.i|=129;this.Ja=-1;this.xc=c;this.yc=a;-1==c&&I(this);if(-4<=c)throw a;}};
function bf(a){var b=cf(a),c=cf(a);a.w&49152&&(c=c&-225|a.w&63712);Fc(a,b);$d(a,c);a.i&=-17}function df(a,b){var c=b>>13&31;31>c&&(b=a.W&32?a.Fa[c]+(b&8191)&4194303:b&-3932161);return b}
function ef(a,b,c){var d=[];if(c){c=df(a,b);var e=b>>13&31;d.push(c);d.push(e);a.W&32&&(d.push(a.Fa[e]),d.push(b&8191))}else if(a.ub){e=a.M<<1;var f=b>>13;7<f&&(e|=1);a.W&a.Sd[a.M]||(f&=7);b&=8191;var g=a.L[a.M][f]<<6;c=g+b&a.hb;3932160<=c&&(c=df(a,c));d.push(c);d.push(b);d.push(e);d.push(f&7);d.push(g);d.push(a.hb)}else c=b&65535,57344<=c&&(c|=a.rb),d.push(c);return d}
function $c(a,b,c){if(!(c&a.ub)){var d=b&65535;57344<=d&&(d|=a.rb);return d}var e=b>>13;a.W&a.Sd[a.M]||(e&=7);var f=a.A[a.M][e];d=(a.L[a.M][e]<<6)+(b&8191)&a.hb;3932160<=d&&(d=df(a,d));if(a.oa)return d;d>=a.Pd&&d<a.rb?(a.O|=32,a.qa(4,0,d)):d&1&&!(c&1)&&(a.O|=64,a.qa(4,0,d));var g=0;switch(f&7){case 1:g=4096;case 2:f|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:f|=c&4?192:128;break;default:g=32768}32512!=(f&32520)&&(f&8?f&32512&&(b&8128)<(f>>2&8128)&&(g|=16384):(b&8128)>(f>>2&
8128)&&(g|=16384));a.A[a.M][e]=f;if(d!=(4194170&a.hb)||a.M)a.vb=a.M,a.ob=e;g&&(g&57344&&(0<=a.Ja&&(g|=128),a.R&57344||(g|=a.R&4096|a.vb<<5|a.ob<<1,Ld(a,a.R&-61695|g&61694)),a.qa(168,64,-2)),a.R&61440||!(d<(4191360&a.hb)||d>(4194239&a.hb))||(a.R|=4096,a.R&512&&(a.i|=64)));return d}function cf(a){var b=a.na(a.g[6]|a.Ga);a.g[6]=a.g[6]+2&65535;return b}function af(a,b){var c=a.g[6]-2&65535;a.g[6]=c;a.N=a.N&65535|(a.N&-65536)<<8|16121856;a.i&256||a.Hb(4,-2,c);a.Db(c,b)}
function ff(a,b,c,d){var e=d&8?0:a.Ga;switch(b){case 0:return a.qa(4,0,-3),0;case 1:return 6==c&&a.Hb(d,0,a.g[6]),a.b-=3,7==c?a.g[c]:a.g[c]|e;case 2:var f=2;var g=a.g[c];6==c&&a.Hb(d,f,g);7!=c&&(g|=e,6>c&&d&1&&(f=1));a.b-=3;break;case 3:f=2;g=a.g[c];7!=c&&(g|=e);g=a.na(g);g|=e;a.b-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);g=a.g[c]+f&65535;6==c&&a.Hb(d,f,g);7!=c&&(g|=e);a.b-=4;break;case 5:f=-2;g=a.g[c]-2&65535;7!=c&&(g|=e);g=a.na(g)|e;a.b-=8;break;case 6:return g=a.na(Ve(a,2)),g=g+a.g[c]&65535,6==c&&
a.Hb(d,0,g),a.b-=6,g|e;case 7:return g=a.na(Ve(a,2)),g=g+a.g[c]&65535,g=a.na(g|a.Ga),a.b-=10,g|e}a.g[c]=a.g[c]+f&65535;a.N=a.N&65535|(a.N&-65536)<<8|(f<<3&248|c)<<16;return g}k.zf=function(a,b,c){!this.M&&0>=b&&c<=this.Ea&&(this.i|=32)};k.Af=function(a,b,c){this.M||(65534<=c&&(c|=-65536),a&4&&c<=this.Ea&&(c<=this.Ea-32?this.qa(4,0,-4):(this.O|=8,this.i|=32)))};k.le=function(a){this.D&&qe(this.D,a,1);return this.Yc(a)};k.pe=function(a){this.D&&qe(this.D,a,2);return this.Zc(a)};
k.ve=function(a,b){this.D&&re(this.D,a,1);this.dd(a,b)};k.we=function(a,b){this.D&&re(this.D,a,2);this.fd(a,b)};function bd(a,b){a.oa++;b=a.C.vc($c(a,b,2));a.oa--;return b}function gf(a,b){(b?--a.oc:--a.mc)||Oe(a)}k.Df=function(a,b,c){return ff(this,a,b,c)};k.oe=function(a,b,c){return $c(this,ff(this,a,b,c),c)};k.ue=function(a){return this.C.vc(this.Ra=a)};k.Wg=function(a){this.D&&qe(this.D,a,2);return this.ue(a)};k.Ad=function(a){return this.C.vc(this.Ra=$c(this,a,2))};
k.Xg=function(a){this.D&&qe(this.D,a,2);return this.Ad(a)};k.ze=function(a,b){this.C.Wb(this.Ra=a,b)};k.pi=function(a,b){this.D&&re(this.D,a,2);this.ze(a,b)};k.Fd=function(a,b){this.C.Wb(this.Ra=$c(this,a,4),b)};k.ri=function(a,b){this.D&&re(this.D,a,2);this.Fd(a,b)};function hf(a,b,c){var d=a.j=b&7;(b=a.u=(b&56)>>3)?(d=ff(a,b,d,2),c&65536||61440!==(a.w&61440)&&(d&=65535),a.M=a.w>>12&3,c=a.na(d|c&a.Ga),a.M=a.w>>14&3):c=6!=d||(a.w>>2&12288)===(a.w&12288)?a.g[d]:a.X[a.w>>12&3];return c}
function jf(a,b,c,d){a.N=a.N&65535|1441792;var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=ff(a,b,e,4),c&65536||(e&=65535),a.M=a.w>>12&3,e=$c(a,e|c&65536,4),a.M=a.w>>14&3,a.gc(e,d)):6!=e||(a.w>>2&12288)===(a.w&12288)?a.g[e]=d:a.X[a.w>>12&3]=d}function Bf(a,b){b>>=6;var c=a.Y=b&7;return(b=a.T=(b&56)>>3)?a.ec(a.wa(b,c,3)):a.g[c+a.uc]&a.Ud}function Cf(a,b){var c;b>>=6;var d=a.Y=b&7;(b=a.T=(b&56)>>3)?c=a.fc(a.wa(b,d,2)):c=a.g[d+a.uc];return c}function Df(a,b){var c=a.j=b&7;b=a.u=(b&56)>>3;return ff(a,b,c,8)}
function Ef(a,b){var c=a.j=b&7;return(b=a.u=(b&56)>>3)?a.ec(a.wa(b,c,3)):a.g[c]&255}function Ff(a,b){var c,d=a.j=b&7;(b=a.u=(b&56)>>3)?c=a.fc(a.wa(b,d,2)):c=a.g[d];return c}function Gf(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.Sc=a.wa(b,e,7),c=0>c?a.g[-c-1]&255:c,a.Oc(e,d.call(a,c,a.ec(e))),e&1&&a.b--):(b=a.g[e],c=0>c?a.g[-c-1]&255:c,a.g[e]=b&65280|d.call(a,c,b&255))}
function P(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.wa(b,e,6),a.gc(e,d.call(a,0>c?a.g[-c-1]:c,a.fc(e)))):a.g[e]=d.call(a,0>c?a.g[-c-1]:c,a.g[e])}function Hf(a,b,c,d,e){var f=a.j=b&7;(b=a.u=(b&56)>>3)?(d=a.wa(b,f,5),e.call(a,(c=0>c?a.g[-c-1]&255:c)<<8),a.Oc(d,c),d&1&&a.b--):(c?(c=0>c?a.g[-c-1]&255:c,a.g[f]=a.g[f]&~d|c<<24>>24&d):a.g[f]&=~d,e.call(a,c<<8))}
function If(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.wa(b,e,4),d.call(a,c=0>c?a.g[-c-1]:c),a.gc(e,c)):(a.g[e]=c=0>c?a.g[-c-1]:c,d.call(a,c))}
k.wc=function(a){this.flags.complete=!0;var b=this.D?Jf(this.D)?1:this.flags.Nc?-1:0:0,c=a?this.flags.Nc?0:1:-1;this.flags.Nc=!1;this.jb=this.b=a;this.i=this.i&-5|(b?4:0);do{if(this.i){if(this.i&4){if(Kf(this.D,this.g[7],c)){I(this);break}++b||(this.i&=-5);c||c++}if(a=this.i&11)if(a=!1,this.i&2){var d=160,e=(this.mb&224)>>5,f=this.P&&this.P.priority>e?this.P:null;f&&(d=f.Bb,e=f.priority);e>(this.w&224)>>5?(this.i&8&&(Ve(this,2),this.i&=-9),this.qa(d,0,-10),e=!0):e=!1;e&&(f&&Xe(this,f),a=!0);this.P||
this.mb||(this.i&=-3)}else this.i&1&&this.i++;if(a){if(this.i&4&&Kf(this.D,this.g[7],c)){I(this);break}if(0>c)break}if(this.i&112&&Ye(this)){if(this.i&4&&Kf(this.D,this.g[7],c)){I(this);break}if(0>c)break}}this.i=this.i&15|this.w&16;a=this.N=this.g[7];f=this.na(a);this.g[7]=a+2&65535;this.Yd(f)}while(0<this.b);return this.flags.complete?this.jb-this.b:!1===this.flags.complete?-1:0};jb(function(){for(var a=C(document,z,"cpu"),b=0;b<a.length;b++){var c=a[b],d=Hb(c);d=new Le(d);Gb(d,c)}});
function Lf(a,b){var c=b+a;this.H=this.K=this.B=c;this.F=(a^c)&(b^c);return c&65535}function Mf(a,b){var c=b+a,d=c<<8;this.H=this.K=this.B=d;this.F=(a<<8^d)&(b<<8^d);return c&255}function Nf(a,b){a=b<<1;Ze(this,a);return a&65535}function Of(a,b){a=b<<1;Ze(this,a<<8);return a&255}function Pf(a,b){a=b&32768|b>>1|b<<16;Ze(this,a);return a&65535}function Qf(a,b){a=b&128|b>>1|b<<8;Ze(this,a<<8);return a&255}function Rf(a,b){a=b&~a;this.Ca(a);return a}function Sf(a,b){a=b&~a;this.Ca(a<<8);return a}
function Tf(a,b){a|=b;this.Ca(a);return a}function Uf(a,b){a|=b;this.Ca(a<<8);return a}function Vf(a,b){a=~b|65536;this.nb(a);return a&65535}function Wf(a,b){a=~b|256;this.nb(a<<8);return a&255}function Xf(a,b){this.H=this.K=a=b-a;this.F=b&(b^a);return a&65535}function Yf(a,b){a=b-a;var c=a<<8;b<<=8;this.H=this.K=c;this.F=b&(b^c);return a&255}function Zf(a,b){this.H=this.K=a=b+a;this.F=a&(b^a);return a&65535}function $f(a,b){a=b+a;var c=a<<8;this.H=this.K=c;this.F=c&(b<<8^c);return a&255}
function ag(a,b){a=-b;this.nb(a,a&b&32768);return a&65535}function bg(a,b){a=-b;this.nb(a<<8,(a&b&128)<<8);return a&255}function cg(a,b){a=b<<1|this.B>>16&1;Ze(this,a);return a&65535}function dg(a,b){a=b<<1|this.B>>16&1;Ze(this,a<<8);return a&255}function eg(a,b){a=(this.B&65536|b)>>1|b<<16;Ze(this,a);return a&65535}function fg(a,b){a=((this.B&65536)>>8|b)>>1|b<<8;Ze(this,a<<8);return a&255}function gg(a,b){var c=b-a;$e(this,c,a,b);return c&65535}
function hg(a,b){var c=b-a;$e(this,c<<8,a<<8,b<<8);return c&255}function ig(a,b){this.H=this.K=b&65280;this.F=this.B=0;return(b<<8|b>>8)&65535}function jg(a,b){a^=b;this.Ca(a);return a&65535}function kg(a){P(this,a,Cf(this,a),Lf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}
function lg(a){var b=Ff(this,a);a=a>>6&7;var c=this.g[a];c&32768&&(c|=4294901760);this.B=this.F=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.B=c<<17-b,c>>=b;else if(b)if(16<b)this.F=c,c=0;else{this.B=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.F=32768)}this.g[a]=c&65535;this.H=this.K=c;this.b-=(this.u?6:7)+b}
function mg(a){var b=Ff(this,a);a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.B=this.F=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.B=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.B=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.F=32768)):d=c;this.g[a]=d>>16&65535;this.g[a|1]=d&65535;this.H=d>>16;this.K=d>>16|d;this.b-=(this.u?6:7)+b}function ng(a){We(this,a,!Re(this))}function og(a){We(this,a,Re(this))}
function pg(a){P(this,a,Cf(this,a),Rf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function qg(a){Gf(this,a,Bf(this,a),Sf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function rg(a){P(this,a,Cf(this,a),Tf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function sg(a){Gf(this,a,Bf(this,a),Uf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}
function tg(a){var b=Cf(this,a);a=Ff(this,a);this.Ca((0>b?this.g[-b-1]:b)&a);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function ug(a){var b=Bf(this,a);a=Ef(this,a);this.Ca(((0>b?this.g[-b-1]&255:b)&a)<<8);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function vg(a){We(this,a,Te(this))}function wg(a){We(this,a,!Ue(this)==!Se(this))}function xg(a){We(this,a,!Te(this)&&!Ue(this)==!Se(this))}function yg(a){We(this,a,!Re(this)&&!Te(this))}
function zg(a){We(this,a,Te(this)||!Ue(this)!=!Se(this))}function Ag(a){We(this,a,Re(this)||Te(this))}function Bg(a){We(this,a,!Ue(this)!=!Se(this))}function Cg(a){We(this,a,Ue(this))}function Dg(a){We(this,a,!Te(this))}function Eg(a){We(this,a,!Ue(this))}function Fg(){this.qa(12,0,-9)}function Gg(a){We(this,a,!0)}function Hg(a){We(this,a,!Se(this))}function Ig(a){We(this,a,Se(this))}function Jg(a){a&1&&(this.B=0);a&2&&(this.F=0);a&4&&(this.K=1);a&8&&(this.H=0);this.b-=5}
function Kg(a){var b=Cf(this,a);a=Ff(this,a);var c=(b=0>b?this.g[-b-1]:b)-a;$e(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function Lg(a){var b=Bf(this,a);a=Ef(this,a);var c=(b=(0>b?this.g[-b-1]&255:b)<<8)-(a<<=8);$e(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}
function Mg(a){var b=Ff(this,a);if(b){a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.B=this.F=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.g[a]=d&65535,this.g[a|1]=c-d*b&65535,this.K=d>>16|d,this.H=d>>16):(this.F=32768,this.K=d>>15|d,this.H=c>>16,-1===b&&65534===this.g[a]&&(this.g[a]=this.g[a|1]=1));this.b-=53}else this.K=this.H=0,this.F=32768,this.B=65536,this.b-=7}function Ng(){this.qa(24,0,-9);this.b-=20}
function Og(){this.w&49152?(this.O|=128,this.qa(4,0,-8)):(this.ra&&1120==this.ha&&this.ra.setData(this.g[0],!0),this.D?Pg(this.D):I(this));this.b-=7}function Qg(){this.qa(16,0,-9);this.b-=20}var Rg=[0,7,7,10,7,11,9,13];function Sg(a){this.ia=this.b;Fc(this,Df(this,a));this.b=this.ia-Rg[this.u]}var Tg=[0,14,14,17,14,18,16,20];function Ug(a){this.ia=this.b;var b=Df(this,a);a=a>>6&7;af(this,this.g[a]);this.g[a]=this.g[7];Fc(this,b);this.b=this.ia-Tg[this.u]}
var Vg=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];function Wg(a){var b=Cf(this,a);this.ia=this.b;If(this,a,b,this.Ca);this.b=this.ia-Vg[(this.T?8:0)+this.u]+(7!=this.j||this.u?0:2)}function Xg(a){var b=Bf(this,a);Hf(this,a,b,65535,this.Ca);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}var Yg=[7,13,13,17,14,18,17,21];
function Zg(a){var b=Ff(this,a);a=a>>6&7;b=(b<<16>>16)*(this.g[a]<<16>>16);this.g[a]=b>>16&65535;this.g[a|1]=b&65535;b|=0;this.H=b>>16;this.K=this.H|b;this.F=0;this.B=-32768>b||32767<b?65536:0;this.b-=23}function $g(){this.b-=5}function ah(){this.w&49152||(this.C.reset(),Gc(this),this.ra&&this.ra.setData(this.g[0],!0));this.b-=667}function bh(a){if(a&8)Q.call(this,a);else{var b=cf(this);a&=7;7==a?Fc(this,b):(Fc(this,this.g[a]),this.g[a]=b);this.b-=9}}function ch(){bf(this);this.b-=13}
function dh(a){a&1&&(this.B=65536);a&2&&(this.F=32768);a&4&&(this.K=0);a&8&&(this.H=32768);this.b-=5}function eh(a){var b=(a&448)>>6;if(this.g[b]=this.g[b]-1&65535)Fc(this,this.g[7]-((a&63)<<1)),this.b+=1;this.b-=6}function fh(a){P(this,a,Cf(this,a),gg);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function gh(a){P(this,a,0,ig);this.b-=this.u?9:3+(7==this.j?2:0)}function hh(){this.qa(28,0,-9)}
function ih(){this.ra&&(this.ra.Cd(this.g[7],!0),this.ra.setData(this.g[0],!0));this.i|=8;Ve(this,-2);this.b-=3}function jh(a){P(this,a,this.g[(a>>6&7)+this.uc],jg);this.b-=this.u?9:3+(7==this.j?2:0)}function Q(a){var b;if(b=this.D)b=this.D,E(b,1)?(F(b,"undefined opcode "+K(b,a),!0,!0),b=Pg(b)):b=!1;b||this.qa(8,0,-9)}function Me(a){kh[a>>12].call(this,a)}function lh(a){mh[a>>6&3].call(this,a)}function nh(a){oh[a>>6&3].call(this,a)}function ph(a){qh[a>>6&3].call(this,a)}
function rh(a){sh[a&15].call(this,a)}function th(a){uh[a&15].call(this,a)}function vh(a){wh[a>>6&3].call(this,a)}function xh(a){yh[a>>6&3].call(this,a)}function zh(a){Ah[a>>6&3].call(this,a)}
var kh=[function(a){Bh[a>>8&15].call(this,a)},Wg,Kg,tg,pg,rg,kg,Q,function(a){Ch[a>>8&15].call(this,a)},Xg,Lg,ug,qg,sg,fh,Q],Bh=[function(a){Dh[a>>4&15].call(this,a)},Gg,Dg,vg,wg,Bg,xg,zg,Ug,Ug,lh,nh,ph,Q,Q,Q],mh=[function(a){If(this,a,0,this.nb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Vf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Zf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,1,Xf);this.b-=this.u?9:3+(7==this.j?2:0)}],oh=[function(a){P(this,a,0,ag);
this.b-=this.u?11:6},function(a){P(this,a,Re(this)?1:0,Lf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,Re(this)?1:0,gg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=Ff(this,a);this.nb(a);this.b-=this.u?4:3+(7==this.j?2:0)}],qh=[function(a){P(this,a,0,eg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,cg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Pf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){P(this,a,0,Nf);this.b-=this.u?9:3+(7==this.j?2:0)}],Dh=
[function(a){Eh[a&15].call(this,a)},Q,Q,Q,Sg,Sg,Sg,Sg,bh,Q,rh,th,gh,gh,gh,gh],Eh=[Og,ih,ch,Fg,Qg,ah,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q],sh=[$g,function(){this.B=0;this.b-=5},function(){this.F=0;this.b-=5},Jg,function(){this.K=1;this.b-=5},Jg,Jg,Jg,function(){this.H=0;this.b-=5},Jg,Jg,Jg,Jg,Jg,Jg,Jg],uh=[$g,function(){this.B=65536;this.b-=5},function(){this.F=32768;this.b-=5},dh,function(){this.K=0;this.b-=5},dh,dh,dh,function(){this.H=32768;this.b-=5},dh,dh,dh,dh,dh,dh,dh],Ch=[Eg,Cg,yg,Ag,Hg,Ig,ng,og,Ng,hh,vh,xh,
zh,Q,Q,Q],wh=[function(a){Hf(this,a,0,255,this.nb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Gf(this,a,0,Wf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Gf(this,a,1,$f);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Gf(this,a,1,Yf);this.b-=this.u?9:3+(7==this.j?2:0)}],yh=[function(a){Gf(this,a,0,bg);this.b-=this.u?11:6},function(a){Gf(this,a,Re(this)?1:0,Mf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Gf(this,a,Re(this)?1:0,hg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=Ef(this,
a);this.nb(a<<8);this.b-=this.u?4:3+(7==this.j?2:0)}],Ah=[function(a){Gf(this,a,0,fg);this.b-=this.u?9+(this.Sc&1):3+(7==this.j?2:0)},function(a){Gf(this,a,0,dg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Gf(this,a,0,Qf);this.b-=this.u?9+(this.Sc&1):3+(7==this.j?2:0)},function(a){Gf(this,a,0,Of);this.b-=this.u?9:3+(7==this.j?2:0)}];function Ne(a){Fh[a>>12].call(this,a)}
var Fh=[function(a){Gh[a>>8&15].call(this,a)},Wg,Kg,tg,pg,rg,kg,function(a){Hh[a>>8&15].call(this,a)},function(a){Ih[a>>8&15].call(this,a)},Xg,Lg,ug,qg,sg,fh,Q],Gh=[function(a){Jh[a>>4&15].call(this,a)},Gg,Dg,vg,wg,Bg,xg,zg,Ug,Ug,lh,nh,ph,function(a){Kh[a>>6&3].call(this,a)},Q,Q],Kh=[function(a){a=this.g[7]+((a&63)<<1)&65535;var b=this.na(a|this.Ga);Fc(this,this.g[5]);this.g[6]=a+2&65535;this.g[5]=b;this.b-=8},function(a){a=hf(this,a,0);this.Ca(a);af(this,a);this.b-=11},function(a){var b=cf(this);
this.ia=this.b;this.Ca(b);jf(this,a,0,b);this.b=this.ia-Yg[this.u]},function(a){If(this,a,Ue(this)?65535:0,this.Ca);this.b-=this.u?9:3+(7==this.j?2:0)}],Jh=[function(a){Lh[a&15].call(this,a)},Q,Q,Q,Sg,Sg,Sg,Sg,bh,function(a){!(a&8)||1145>this.ha?Q.call(this,a):(this.w&49152||(this.w=this.w&-225|(a&7)<<5,this.i|=1,this.i&=-3),this.b-=5)},rh,th,gh,gh,gh,gh],Lh=[Og,ih,function(){bf(this);this.i|=this.w&16;this.b-=13},Fg,Qg,ah,ch,function(a){Q.call(this,a)},Q,Q,Q,Q,Q,Q,Q,Q],Hh=[Zg,Zg,Mg,Mg,lg,lg,mg,mg,
jh,jh,Q,Q,Q,Q,eh,eh],Ih=[Eg,Cg,yg,Ag,Hg,Ig,ng,og,Ng,hh,vh,xh,zh,function(a){1145>this.ha?Q.call(this,a):Mh[a>>6&3].call(this,a)},Q,Q],Mh=[function(a){Q.call(this,a)},function(a){a=hf(this,a,65536);this.Ca(a);af(this,a);this.b-=11},function(a){var b=cf(this);this.ia=this.b;this.Ca(b);jf(this,a,65536,b);this.b=this.ia-Yg[this.u]},function(a){Q.call(this,a)}];
function Nh(a){y.call(this,"ROM",a,128);this.fa=this.g=null;this.u=+a.addr;this.b=+a.size;this.w=!1;this.i=a.alias;"string"==typeof this.i&&(this.i=eval(this.i));this.j=a.file;this.A=Ba(this.j);if(this.j){a=this.j;var b=Ca(this.A);"json"!=b&&"hex"!=b&&(a=Ta()+"/api/v1/dump?file\x3d"+this.j+"\x26format\x3dbytes\x26decimal\x3dtrue");var c=this;Ra(a,null,!0,function(a,b,f){f?(c.S("Unable to load ROM resource (error "+f+": "+a+")"),c.j=null):(wb(c.gb,a,b),(a=Ua(a,b))?(c.g=a.Z,c.fa=a.fa):c.j=null);Oh(c)})}}
r(Nh,y);k=Nh.prototype;k.za=function(a,b,c,d){this.C=b;this.f=c;this.D=d;Oh(this)};k.Ba=function(){this.fa&&(this.D&&Ph(this.D,this.id,this.u,this.b,this.fa),delete this.fa);return!0};k.Aa=function(){return!0};
function Oh(a){if(!Tb(a)){if(a.j){if(!a.g||!a.C)return;a.b||(a.b=a.g.length);if(a.g.length!=a.b)Rb(a,"ROM size ("+v(a.g.length,8,!0)+") does not match specified size ("+v(a.b,8,!0)+")");else{a:{var b=a.u;if(57344<=b&&b<57344+gd){var c={};c=(c[b]=[Nh.prototype.Gg,Nh.prototype.Yh,null,null,null,a.b>>1],c);if(tc(a.C,a,c)){a.status("Added %d-byte ROM at %o",a.b,b);b=a.w=!0;break a}}else if(md(a.C,b,a.b,fe)){for(c=0;c<a.g.length;c++)vd(a.C,b+c,a.g[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.i?
b.push(a.i):null!=a.i&&a.i.length&&(b=a.i);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.C,g=d.b,h=[],m=d.u>>>f.g;0<g&&m<f.b.length;)h.push(f.b[m++]),g-=f.j;f=d.C;d=d.b;g=0;for(e>>>=f.g;0<d&&e<f.b.length;){m=h[g++];if(!m)break;f.b[e++]=m;d-=f.j}}a.w||delete a.g}}}D(a)}}k.Gg=function(a){return this.g[a-this.u]};k.Yh=function(){};jb(function(){for(var a=C(document,z,"rom"),b=0;b<a.length;b++){var c=a[b],d=Hb(c);d=new Nh(d);Gb(d,c)}});
function Qh(a){y.call(this,"RAM",a);this.fa=this.g=null;this.i=+a.addr;this.j=+a.size;this.ya=a.load;this.xa=a.exec;null!=this.ya&&(this.ya=+this.ya);null!=this.xa&&(this.xa=+this.xa);this.u=this.A=!1;this.b=a.file;this.w=Ba(this.b);if(this.b){a=this.b;var b=Ca(this.w);"json"!=b&&"hex"!=b&&(a=Ta()+"/api/v1/dump?file\x3d"+this.b+"\x26format\x3dbytes\x26decimal\x3dtrue");var c=this;Ra(a,null,!0,function(a,b,f){f?(c.S("Unable to load RAM resource (error "+f+": "+a+")"),c.b=null):(wb(c.gb,a,b),(a=Ua(a,
b))?(c.g=a.Z,c.fa=a.fa,null==c.ya&&(c.ya=a.ya),null==c.xa&&(c.xa=a.xa)):c.b=null);Rh(c)})}}r(Qh,y);Qh.prototype.za=function(a,b,c,d){this.C=b;this.f=c;this.D=d;Rh(this)};Qh.prototype.Ba=function(a,b){this.fa&&(this.D&&Ph(this.D,this.id,this.i,this.j,this.fa),delete this.fa);b||this.reset();return!0};Qh.prototype.Aa=function(){return!0};
function Rh(a){if(a.C&&(!a.u&&a.j&&(md(a.C,a.i,a.j,xd)?a.u=!0:a.j=0),!Tb(a))){if(!a.u)x("No RAM allocated");else if(a.b){if(!a.g)return;Sh(a,a.g,a.ya,a.xa,a.i)?a.status('Loaded image "%s"',a.w):a.S('Error loading image "'+a.w+'"')}a.A=!0;D(a)}}
Qh.prototype.reset=function(){if(this.u&&!this.A){var a=this.C,b=this.i,c=this.j,d=b&a.i;for(b>>>=a.g;0<c&&b<a.b.length;){var e=a.b[b],f=d,g=c,h=0;f=f||0;h=(h||0)&255;void 0===g&&(g=e.size);if(Wb&&e.g)for(d=f;g--&&d<e.g.length;d++)e.g[d]=h;else for(d=f;g--&&d<e.size;d++)e.D(f,h,e.J+f);c-=a.j;b++;d=0}this.g&&Sh(this,this.g,this.ya,this.xa,this.i,!this.D)}this.A=!1};
function Sh(a,b,c,d,e,f){var g=!1,h=!1;if(null==c)for(var m=0;m<b.length-1;){var l=b[m]&255|(b[m+1]&255)<<8;if(l)if(l&255){var n=m;if(1!=l){F(a,"invalid signature ("+Aa(l)+") at offset "+Aa(n),4096);break}if(m+6>=b.length){F(a,"invalid block at offset "+Aa(n),4096);break}m+=2;var q=b[m++]&255|(b[m++]&255)<<8,t=b[m++]&255|(b[m++]&255)<<8;l+=(q&255)+(q>>8)+(t&255)+(t>>8);for(var p=m,w=q-=6;0<q&&m<b.length;)l+=b[m++]&255,q--;if(0!=q||m>=b.length){F(a,"insufficient data for block at offset "+Aa(n),4096);
break}l+=b[m++]&255;if(l&255){F(a,"invalid checksum ("+v(l,2,!0)+") for block at offset "+Aa(n),4096);break}if(w)for(F(a,"loading "+Aa(w)+" bytes at "+Aa(t)+"-"+Aa(t+w),4096);w--;)vd(a.C,t++,b[p++]&255);else t&1?g=!0:null==d&&(d=t),null!=d&&F(a,"starting address: "+Aa(d),4096);h=!0}else m++;else m+=2}if(!h&&(null==c&&(c=e),null!=c)){for(e=0;e<b.length;e++)vd(a.C,c+e,b[e]);h=!0}if(h){if(null==d||g)I(a.f),f=!1;null!=d&&Pe(a.f,d,f)}return h}
jb(function(){for(var a=C(document,z,"ram"),b=0;b<a.length;b++){var c=a[b],d=Hb(c);d=new Qh(d);Gb(d,c)}});function Th(a){y.call(this,"Keyboard",a,1024);D(this)}r(Th,y);Th.prototype.ua=function(){return!1};Th.prototype.za=function(a,b,c,d){this.I=a;this.f=c;this.D=d};jb(function(){for(var a=C(document,z,"keyboard"),b=0;b<a.length;b++){var c=a[b],d=Hb(c);d=new Th(d);Gb(d,c)}});
function Uh(a){y.call(this,"SerialPort",a,1048576);this.L=+a.adapter;this.R=+a.baudReceive||9600;this.Y=+a.baudTransmit||9600;this.K=a.upperCase;"string"==typeof this.K&&(this.K="true"==this.K);this.u=this.w=null;this.W=+a.tabSize;this.T=+a.charBOL;this.A=0;this.H=!0;this.O=this.M=null;this.P=this.X=-1;this.B=this.b=this.g=0;this.j=[];a=a.binding;if("console"==a)this.w="";else if(a){var b=Kb("Panel",this.id);b&&(b=b.G[a])&&this.ua("",a,b)}this.i=this.F=this.N=null;this.exports={connect:this.qe,receiveData:this.Jc,
receiveStatus:this.bh,setConnection:this.hh}}r(Uh,y);k=Uh.prototype;
k.ua=function(a,b,c){if(!a||"textarea"==a){var d=this;this.G[b]=this.u=c;c.onkeydown=function(a){a=a||window.event;var b=0,c=a.keyCode;8==c?b=a.altKey?ua.Kd:ua.Yb:46==c?b=ua.Kd:a.ctrlKey&&c>=ua.Gd&&c<=ua.uf&&(b=c-(ua.Gd-ua.Be));b&&(a.preventDefault&&a.preventDefault(),d.Jc(b));return!0};c.onkeypress=function(a){a=a||window.event;if(!a.metaKey){var b=a.which||a.keyCode;a.altKey&&b==ua.De&&(b=ua.Ce);d.Jc(b);a.preventDefault&&a.preventDefault()}return!0};c.onpaste=function(a){a.stopPropagation&&a.stopPropagation();
a.preventDefault&&a.preventDefault();(a=a.clipboardData||window.clipboardData)&&d.Jc(a.getData("Text"))};c.removeAttribute("readonly");return!0}return!1};
k.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;var e=this;this.O=Ed(this.f,this.L?-1:48,4,1048576);this.P=Bd(this.f,function(){var a=-1;e.j.length&&(a=e.j.shift()&255,F(e,"receiveByte("+v(a,2,!0)+")"),e.K&&97<=a&&122>a&&(a-=32),Dd(e.f,e.P,1E3/Math.round(e.R/10)));0<=a&&(e.B=a,e.b&128?e.B|=49152:e.b|=128,e.b&64&&Cd(c,e.O))});this.M=Ed(this.f,this.L?-1:52,4,1048576);this.X=Bd(this.f,function(){e.g|=128;e.g&64&&Cd(c,e.M)});tc(b,this,Vh,this.L?64832+8*(this.L-1)-65392:0);vc(b,this.reset.bind(this));
D(this)};k.qe=function(a){if(!this.i){var b=we(this.I,"connection");if(b){var c=b.split("-\x3e");if(2==c.length){var d=Oa(c[0]);if(d!=this.Tc)return;c=Oa(c[1]);if(this.i=Jb(c)){var e=this.i.exports;if(e){var f=e.connect;f&&f.call(this.i,this.H);if(this.F=e.receiveData){this.H=a;this.N=e.receiveStatus;this.status("Connected %s.%s to %s",this.gb,d,c);return}}}}this.status("Unable to establish connection: %s",b)}}};
k.Ba=function(a,b){if(!b)if(this.qe(this.H),!a)this.reset();else if(!this.restore(a))return!1;return!0};k.Aa=function(a){return a?this.save():!0};k.reset=function(){Wh(this)};k.save=function(){var a=new H(this);a.set(0,[this.B,this.b,this.g,this.j]);return a.data()};k.restore=function(a){return Wh(this,a[0])};function Wh(a,b){b||(b=[0,8192,128,a.j]);b=ja(b);a.B=b.next().value;a.b=b.next().value;a.g=b.next().value;a.j=b.next().value;return!0}
k.Jc=function(a){if("number"==typeof a)this.j.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.j.push(b)}else this.j=this.j.concat(a);Dd(this.f,this.P,1E3/Math.round(this.R/10));return!0};k.bh=function(a){var b=this.b;this.b&=-12289;a&32&&(this.b|=8192);a&256&&(this.b|=4096);b!=this.b&&(this.b|=32768,this.b&32&&Cd(this.f,this.O))};k.hh=function(a,b){return this.i?!1:(this.i=a,this.F=b,!0)};
k.tg=function(){var a=this.b&65534;this.b&=-32769;return a};k.Lh=function(a){var b=a^this.b;this.b=this.b&-112|a&111;this.N&&b&6&&(b=0,b=this.H?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.N.call(this.i,b))};k.sg=function(){this.b&=-129;return this.B};k.Kh=function(){};k.ah=function(){return this.g};k.ti=function(a){this.g&128&&(a&64?Cd(this.f,this.M):Jd(this.f,this.M));this.g=this.g&-70|a&69};k.$g=function(){return 0};
k.si=function(a){a&=255;this.F&&this.F.call(this.i,a);a&=127;if(this.u)if(13==a)this.A=0;else if(8==a)this.u.value=this.u.value.slice(0,-1),0<this.A&&this.A--;else{if(a){var b;13!=a&&10!=a&&(b=Pa[a]);b=b?"\x3c"+b+"\x3e":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.W||8,c=a-this.A%a,this.W&&(b=Ha("",c)));this.T&&!this.A&&c&&(b=String.fromCharCode(this.T)+b);this.u.value+=b;this.u.scrollTop=this.u.scrollHeight;this.A+=c}}else if(null!=this.w){if(10==a||1024<=this.w.length)this.v(this.w),
this.w="";10!=a&&(this.w+=String.fromCharCode(a))}Dd(this.f,this.X,1E3/Math.round(this.Y/10));this.g&=-129};var Xh={},Vh=(Xh[65392]=[null,null,Uh.prototype.tg,Uh.prototype.Lh,"RCSR"],Xh[65394]=[null,null,Uh.prototype.sg,Uh.prototype.Kh,"RBUF"],Xh[65396]=[null,null,Uh.prototype.ah,Uh.prototype.ti,"XCSR"],Xh[65398]=[null,null,Uh.prototype.$g,Uh.prototype.si,"XBUF"],Xh);jb(function(){for(var a=C(document,z,"serial"),b=0;b<a.length;b++){var c=a[b],d=Hb(c);d=new Uh(d);Gb(d,c)}});
function ae(a){y.call(this,"PC11",a,4096);this.M=Yh(this,a.autoMount);this.g=0;this.T=+a.baudReceive||3600;this.w=this.b=0;this.K=32768;this.i=this.P=0;this.B=[];this.A=Zh;this.j=$h;this.L=this.u="";this.Z=this.ya=this.xa=null;this.O=-1;this.N=!db()&&window&&"FileReader"in window;this.F=null;this.R=-1;this.H=null}r(ae,y);function Yh(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){x(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}k=ae.prototype;
k.ua=function(a,b,c){var d=this,e=$h;switch(b){case "listTapes":return this.G[b]=c,c.onchange=function(){var a=d.G.descTape,b=c.options[c.selectedIndex];if(a&&b){var e={};if(b=b.getAttribute("data-value"))try{e=eval("("+b+")")}catch(m){x("PC11 option error: "+m.message)}b=e.desc;void 0===b&&(b="");e=e.href;void 0!==e&&(b='\x3ca href\x3d"'+e+'" target\x3d"_blank"\x3e'+b+"\x3c/a\x3e");a.innerHTML=b}},!0;case "descTape":return this.G[b]=c,!0;case "readTape":e=ai;case "loadTape":return e||(e=bi),this.G[b]=
c,c.onclick=function(){var a=d.G.listTapes;a&&ci(d,a.options[a.selectedIndex].text,a.value,e)},!0;case "mountTape":if(!this.N){c.parentNode.removeChild(c);break}this.G[b]=c;c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length});c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;ci(d,Ba(b,!0),b,bi,a)}return!1};return!0;case di:return this.G[b]=c,!0}return!1};
k.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;this.H=ei(a);var e=this;if(a=Yh(this,we(this.I,"autoMount")))for(var f in a)"PTR"==f&&(this.M[f]=a[f]);this.F=Ed(this.f,56,4,4096);this.R=Bd(this.f,function(){1!=(e.b&32769)||e.b&128||(e.i<e.B.length?(e.w=e.B[e.i]&255,E(e)&&F(e,e.type+".advanceReader("+e.i+"): "+v(e.w,2,!0),!0),e.i++,fi(e,e.i/e.B.length*100)):e.b|=32768,e.b|=128,e.b&=-2049,e.b&64&&Cd(e.f,e.F))});tc(b,this,gi);vc(b,this.reset.bind(this));hi(this,"None",Zh,!0);this.N&&hi(this,
"Local Tape",ii);hi(this,"Remote Tape",ji);ki(this)||D(this)};k.Ba=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.Aa=function(a){return a?this.save():!0};k.reset=function(){this.b&=-2241;this.w=0};function ki(a){a.g=0;var b=a.M.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.G.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=Ba(c,!0)}c&&b?li(a,b,c,bi,!0):mi(a)}return!!a.g}
function ci(a,b,c,d,e){if(c)if(c==ii)a.S('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==ji){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=Ba(c);a.status('Attempting to load %s as "%s"',c,b);a.A=ji}else a.A=c;li(a,b,c,d,!1,e)}else ni(a,!1)}
function li(a,b,c,d,e,f){var g=-1;if(a.u.toLowerCase()!=c.toLowerCase()||a.j!=d)g++,ni(a,!0),a.flags.bb?a.S("PC11 busy"):(e&&(a.g++,E(a)&&F(a,"auto-loading tape: "+b)),a.load(b,c,d,f)?g++:a.flags.bb=!0);g&&oi(a,a.L,a.u,a.j,a.Z,a.ya,a.xa)}
k.load=function(a,b,c,d){var e=this,f=b;if(d){var g=new FileReader;g.onload=function(){var d=g.result;d&&(d=new Uint8Array(d,0,d.byteLength),oi(e,a,b,c,d),e.A=ii);e.flags.bb=!1;mi(e)};g.readAsArrayBuffer(d);return!1}0>b.indexOf("/api/v1/dump")&&(d=Ca(b),f="json"==d||"gz"==d?encodeURI(b):Ta()+"/api/v1/dump?path\x3d"+encodeURIComponent(b)+"\x26format\x3djson");return!!Ra(f,null,!0,function(d,f,g){var h=0>g&&!!e.I&&!e.I.flags.aa;g?e.S('Unable to load tape "'+a+'" (error '+g+": "+d+")",h):(wb(e.gb,d,
f),(d=Ua(d,f))&&oi(e,a,b,c,d.Z,d.ya,d.xa));e.flags.bb=!1;e.g&&(e.g--,e.g||D(e));mi(e)})};function hi(a,b,c,d){if((a=a.G.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function mi(a){var b=a.G.listTapes;if(b&&b.options){a=a.A||a.u;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}function fi(a,b){b|=0;if(b!==a.O){var c=a.G[di];c&&(c=(c=C(c,pi))&&c[0])&&c.style&&(c.style.width=b+"%");a.O=b}}
function oi(a,b,c,d,e,f,g){a.L=b;a.u=c;a.j=d;a.Z=e;a.ya=f;a.xa=g;d==ai?a.H&&Sh(a.H,e,f,g,null,!1)?a.status('Read tape "%s"',b):a.S('No valid memory address for tape "'+b+'"'):(a.i=0,a.B=e,a.b&=-32769,a.status('Loaded tape "%s" (%d bytes)',b,e.length),fi(a,0))}function ni(a,b){if(a.u||!1===b)a.L="",a.u="",b||(a.j&&a.status(a.j==bi?"tape detached":"tape unloaded"),a.A=Zh,a.j=$h,mi(a))}k.save=function(){return(new H(this)).data()};k.restore=function(){return!0};k.mg=function(){return this.b&65534};
k.Eh=function(a){a&1&&(this.b&32768?(a&=-2,this.b&64&&Cd(this.f,this.F)):(this.b&=-129,this.b|=2048,this.w=0,Dd(this.f,this.R,1E3/Math.round(this.T/10))));this.b=this.b&-66|a&65};k.lg=function(){this.b&=-129;this.b|=2048;return this.w};k.Dh=function(){};k.kg=function(){return this.K};k.Ch=function(a){this.K=this.K&-65|a&64};k.jg=function(){return this.P};k.Bh=function(a){this.P=a&255};
var Zh="",ii="?",ji="??",$h=0,bi=1,ai=2,di="readProgress",pi="pcjs-progress-bar",qi={},gi=(qi[65384]=[null,null,ae.prototype.mg,ae.prototype.Eh,"PRS"],qi[65386]=[null,null,ae.prototype.lg,ae.prototype.Dh,"PRB"],qi[65388]=[null,null,ae.prototype.kg,ae.prototype.Ch,"PPS"],qi[65390]=[null,null,ae.prototype.jg,ae.prototype.Bh,"PPB"],qi);
function ri(a,b,c){y.call(this,"Disk",{id:a.gb+".disk"+v(++si,4)},8192);this.controller=a;this.I=a.I;this.D=a.D;this.u=b;this.Wa=b.name;this.Na=this.Bd="";this.vd=b.vd;this.ca=this.la=this.ma=this.ta=this.mode=0;this.b=[];this.i=null;this.j=!1;this.create(c,b.ca,b.la,b.ma,b.ta);this.g=this.w=null;D(this)}r(ri,y);k=ri.prototype;k.za=function(a,b,c,d){this.D=d};
k.create=function(a,b,c,d,e){this.mode=a;this.ca=b;this.la=c;this.ma=d;this.ta=e;this.b=[];if("preload"!=this.mode){a=Array(this.ca);for(b=0;b<a.length;b++){c=Array(this.la);for(d=0;d<c.length;d++){e=Array(this.ma);for(var f=1;f<=e.length;f++)e[f-1]=ti(null,b,d,f,this.ta,0);c[d]=e}a[b]=c}this.b=a}this.i=null};
k.load=function(a,b,c,d,e){var f=b;if(this.g)return!0;this.Wa=a;this.Na=b;this.Bd=Ba(b);var g=this;this.g=d;this.w=e||this.controller;if(c){var h=new FileReader;h.onload=function(){var a=h.result,b=a?a.byteLength:0,c=ta[b];if(c){g.ca=c[0];g.la=c[1];g.ma=c[2];g.ta=c[3]||512;var d=g.ta>>2;var e=c=0;a=new DataView(a,0,b);g.b=Array(g.ca);for(b=0;b<g.b.length;b++)for(var f=g.b[b]=Array(g.la),w=0;w<f.length;w++)for(var B=f[w]=Array(g.ma),A=0;A<B.length;A++){for(var G=ti(null,b,w,A+1,g.ta,0),Hd=G.data,Xb=
0;Xb<d;Xb++,e+=4){var ca=Hd[Xb]=a.getInt32(e,!0);c=c+ca&-1}G.Ka=d;B[A]=G}g.i=c;d=g}else g.S("Unrecognized disk format ("+b+" bytes)");g.g&&(g.g.call(g.controller,g.u,d,g.Wa,g.Na),g.g=null)};h.readAsArrayBuffer(c);return!0}0>b.indexOf("/api/v1/dump")&&(a=Ca(b),"json"==a||"gz"==a?f=encodeURI(b):(c="path",d="\x26mbhd\x3d10",!b.indexOf("http:")||!b.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(a)?(c="disk",d="\x26mbhd\x3d0"):Da(b,"/")&&(c="dir"),f=Ta()+"/api/v1/dump?"+c+"\x3d"+encodeURIComponent(b)+
(this.vd?"":d)+"\x26format\x3djson"));return!!Ra(f,null,!0,function(a,b,c){ui(g,a,b,c)})};
function ui(a,b,c,d){var e=null,f=0>d&&!!a.I&&!a.I.flags.aa;a.j=!1;if(d)a.controller.S('Unable to load disk "'+a.Wa+'" (error '+d+": "+b+")",f);else{wb(a.controller.gb,b,c);try{if(0<Ba(a.Bd,!0).toLowerCase().indexOf("-readonly"))a.j=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.j=!0)}var h;"\x3c"==c.substr(0,1)?h=["Missing disk image: "+a.Wa]:h=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):
eval("("+c+")");if(h.length)if(1==h.length)x(h[0]);else{a.ca=h.length;a.la=h[0].length;a.ma=h[0][0].length;var m=h[0][0][0];a.ta=m&&m.length||512;for(d=c=0;d<a.ca;d++)for(f=0;f<a.la;f++)for(g=0;g<a.ma;g++)if(m=h[d][f][g]){var l=m.length;void 0===l&&(l=m.length=512);l>>=2;var n=m.pattern;void 0===n&&(n=m.pattern=0);var q=m.data;if(void 0===q){var t=m.bytes;if(void 0!==t&&t.length){for(var p=l<<2,w=t.length;w<p;w++)t[w]=n;vi(m,t)}else q=[],n=m.pattern=n|n<<8|n<<16|n<<24,m.data=q;delete m.bytes}ti(m,
d,f);for(p=0;p<q.length;p++)c=c+q[p]&-1}a.b=h;a.i=c;e=a}else x("Empty disk image: "+a.Wa)}catch(B){x("Disk image error ("+b+"): "+B.message)}}a.g&&(a.g.call(a.w,a.u,e,a.Wa,a.Na),a.g=null)}function ti(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.yk=b;a.zk=c;a.Ua=a.Ka=0;a.cb=!1;return a}
k.seek=function(a,b,c,d,e){d=null;var f=this.u,g=this.b[a];if(g){var h=g[b];if(!h&&f.wf&&b<f.la)for(h=g[b]=Array(f.xf),g=0;g<h.length;g++)h[g]=ti(null,a,b,g+1,f.re,0);if(h){for(g=0;g<h.length;g++)if(h[g]&&h[g].sector==c){d=h[g];break}!d&&f.wf&&9==f.ge&&(d=h[g]=ti(null,a,b,f.ge,f.re,0))}}e&&e(d,!1);return d};function vi(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
k.read=function(a,b){var c=-1;if(a&&b<a.length){c=a.data;var d=b>>2;c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255}return c};k.write=function(a,b,c){if(this.j)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.Ka?f<a.Ua?(a.Ka+=a.Ua-f,a.Ua=f):f>=a.Ua+a.Ka&&(a.Ka+=f-(a.Ua+a.Ka)+1):(a.Ua=f,a.Ka=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
k.save=function(){var a=0,b=[];b[a++]=[this.Na,this.i,this.ca,this.la,this.ma,this.ta];if(!this.j)for(var c=this.b,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.Ka){for(var h=[],m=0,l=g.Ua,n=g.Ua+g.Ka;l<n;)h[m++]=g.data[l++];b[a++]=[d,e,f,g.Ua,h]}}return b};
k.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.b.length&&6<=e.length?this.create("local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.i&&e[1]!=this.i&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.i+")",b=-2));for(this.b.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],h=g[f++],m=g[f++],l=g[f++];if(h>=this.b.length||m>=this.b[h].length||l>=this.b[h][m].length){c="sector (CHS\x3d"+h+":"+m+":"+l+") out of range ("+
b+" changes applied)";b=-1;break}if(this.j){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(h=this.b[h][m][l]){for(m=h.data.length;m<e;)h.data[m++]=h.pattern;m=0;h.Ua=e;for(h.Ka=f.length;e<g;)h.data[e++]=f[m++];b++}}}0>b&&-2!=b&&this.controller.S("Unable to restore disk '"+this.Wa+": "+c);return b};var si=0;
function wi(a,b,c,d,e,f){y.call(this,a,b,c);this.M=xi(this,b.autoMount);this.L=0;this.P=d;this.R=e;this.T=f;this.O=d.Vc;this.g=Array(this.O);this.N=!db()&&window&&"FileReader"in window;this.A=[];this.Pa=null;this.exports={bootDisk:this.he,loadDisk:this.xd,selectDrive:this.gh,wait:this.kh}}r(wi,y);function xi(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){x(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}k=wi.prototype;
k.ua=function(a,b,c){var d=this;switch(b){case "listDisks":return this.G[b]=c,c.onchange=function(){Yi(d)},!0;case "descDisk":case "listDrives":return this.G[b]=c,c.onchange=function(){var a=wa(c.value,10);null!=a&&$i(d,a)},!0;case "loadDisk":return this.G[b]=c,c.onclick=function(){d.xd()},!0;case "bootDisk":return this.G[b]=c,c.onclick=function(){d.he()},!0;case "saveDisk":if(!this.N){c.parentNode.removeChild(c);break}this.G[b]=c;c.onclick=function(){var a=d.G.listDrives;if(a&&a.options&&d.g)if(a=
d.g[wa(a.value,10)||0]){var b=a.ba;if(b){a=b.tk();b=b.Bd.replace(".json",".img");var c=null,h;"string"!=typeof a?"function"==typeof Blob&&"undefined"!=typeof URL&&URL&&"function"==typeof URL.createObjectURL&&(h=URL.createObjectURL(new Blob([a],{type:"application/octet-stream"}))):h="data:application/octet-stream;base64,"+a;h?(b&&(c=document.createElement("a"),"string"!=typeof c.download&&(c=null)),c?(c.href=h,c.download=b,document.body.appendChild(c),c.click(),document.body.removeChild(c),h="Check your Downloads folder for "+
b+"."):(window.open(h),h="Check your browser for a new window/tab containing the requested data"+(b?" ("+b+")":"")+".")):h="Operation unsupported by your browser.";x(h)}else d.S("No disk loaded in drive.")}else d.S("No disk drive selected.")};return!0;case "mountDisk":if(this.N)return this.G[b]=c,c.addEventListener("change",function(){var a=c.children[0];a.children[1].disabled=!a.children[0].files.length}),c.onsubmit=function(a){if(a=a.currentTarget[1].files[0]){var b=a.name;d.xd(Ba(b,!0),b,a)}return!1},
!0;c.parentNode.removeChild(c)}return!1};k.za=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;if(a=xi(this,we(this.I,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.M[e]=a[e]);this.reset();this.Pa=Ed(this.f,this.P.qd,this.P.md,this.ga);tc(b,this,this.T);vc(b,this.reset.bind(this));aj(this,"None",bj,!0);this.N&&aj(this,"Local Disk",cj);aj(this,"Remote Disk",dj);ej(this)||D(this)};
k.Ba=function(a,b){if(!b){if(!a){if(this.reset(),this.I.M){this.A=[];for(a=0;a<this.g.length;a++)fj(this,a,!0);ej(this,!0)}}else if(!this.restore(a))return!1;if(a=this.G.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;b<this.O;b++){var c=document.createElement("option");c.value=b;c.text=this.g[b].Lc||"---";a.appendChild(c)}0<this.O&&(a.value="0",$i(this,0))}}return!0};k.Aa=function(a){return a?this.save():!0};k.reset=function(){this.yb();gj(this)};
k.save=function(){var a=new H(this);a.set(0,this.Mc());a.set(1,hj(this));a.set(2,ij(this));return a.data()};k.restore=function(a){var b=!0;this.yb(a[0])||(b=!1);var c=a[1];c&&(this.A=c);gj(this,a[2])||(b=!1);return b};k.yb=function(){return!0};k.Mc=function(){return[]};
function gj(a,b){for(var c=0;c<a.g.length;c++){var d=a.g[c];void 0===d&&(d=a.g[c]={});var e=a,f=d;d=c;var g=a.R,h=b&&b[c],m=0;f.Ob=d;f.name=e.Tc;f.Hc=f.Lb=!1;f.dc=null;f.vd=!0;f.Lc=g[m++]+d;f.ca=g[m++];f.la=g[m++];f.ma=g[m++];f.ta=g[m++];f.Ff=g[m++];f.Gf=g[m++];f.Hf=g[m++];f.yf=g[m++];f.status=g[m];f.rk=0;f.qk=0;f.ge=1;f.xf=f.ma;f.re=f.ta;f.Ak=0;f.Ik=null;f.ba||(f.Na="");h&&(m=h[1],g=h[2],h[0]?(f=m,h=g,g=e.g[d],fj(e,d,!0),g.Lb=!0,d=new ri(e,g,"preload"),e.je(g,d,f,h,!0)):jj(e,d,m,g,!0)?f.ba&&g&&kj(e,
m,g,f.ba):D(e,!1))}return!0}function ij(a){for(var b=[],c=0;c<a.g.length;c++){var d=a.g[c];b.push([d.Lb,d.Wa,d.Na])}return b}function hj(a){for(var b=0;b<a.g.length;b++){var c=a.g[b];c.ba&&lj(a,c.Na,c.ba)}return a.A}
function ej(a,b){b||(a.L=0);for(var c in a.M){var d=a.M[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.G.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var h=f.options[g];if(h.value==e){f=h.text;break a}}f=Ba(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.g.length)){!jj(a,g,f,e,!0)&&b&&D(a,!1);continue}a.S("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.L}
k.xd=function(a,b,c){if(!a&&!b){var d=this.G.listDisks;d&&d.options&&(a=d.options[d.selectedIndex].text,b=d.value)}d=(d=this.G.listDrives)&&wa(d.value,10);if(void 0===d||0>d||d>=this.g.length)return this.S("Unable to load the selected drive"),!1;if(!b)return fj(this,d),!0;if(b==cj)return this.S('Use "Choose File" and "Mount" to select and load a local disk.'),!1;if(b==dj){b=window.prompt("Enter the URL of a remote disk image.","")||"";if(!b)return!1;a=Ba(b);this.status('Attempting to load %s as "%s"',
b,a)}jj(this,d,a,b,!1,c);return!0};k.he=function(){var a,b=this.G.listDrives;b=b&&wa(b.value,10);if(null==b||0>b||b>=this.g.length||!(a=this.g[b]))return this.S("Unable to boot the selected drive"),!1;if(!a.ba)return this.S("Load a disk into the drive first"),!1;Pe(this.f,0,!0,b);return(a=this.Pb(a,a.Ff,a.Gf,a.Hf,a.yf,0,2))?(this.S("Unable to read the boot sector ("+a+")"),!1):!0};
function jj(a,b,c,d,e,f){var g=-1,h=a.g[b];h.Na.toLowerCase()!=d.toLowerCase()&&(g++,fj(a,b,!0),h.Hc?a.S(a.type+" busy"):(h.Hc=!0,e&&(h.ud=!0,a.L++,E(a)&&F(a,"auto-loading disk: "+c)),h.Lb=!!f,(new ri(a,h,"preload")).load(c,d,f,a.je)&&g++));return g}
k.je=function(a,b,c,d,e){a.Hc=!1;b&&(b.ca>a.ca||b.la>a.la)&&(this.S('Disk "'+c+'" too large for drive '+(this.g[a.Ob].Lc||"---")),b=null);b?(a.ba=b,a.Wa=c,a.Na=d,this.se(a.Ob),kj(this,c,d,b),this.S('Loaded disk "'+c+'" in drive '+(this.g[a.Ob].Lc||"---"),a.ud||e),this.I&&Ge(this.I)):a.Lb=!1;a.ud&&(a.ud=!1,--this.L||D(this));$i(this,a.Ob);a.dc&&(a.dc(),a.dc=null)};
function aj(a,b,c,d){if((a=a.G.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function $i(a,b,c){var d=!1;if(0<=b&&b<a.g.length){var e=a.g[b],f=a.G.listDisks;a=a.G.listDrives;if(f&&a&&f.options&&a.options){if(c)for(c=0;c<a.options.length;c++)if(wa(a.options[c].value,10)==e.Ob){a.selectedIndex!=c&&(a.selectedIndex=c);d=!0;break}c=wa(a.value,10);e=e.Lb?cj:e.Na;if(!isNaN(c)&&c==b){for(c=0;c<f.options.length;c++)if(f.options[c].value==e){f.selectedIndex!=c&&(f.selectedIndex=c);d=!0;break}c==f.options.length&&(f.selectedIndex=0)}}}return d}
k.gh=function(a){var b=this.G.listDrives;if(b&&b.options)for(var c=b.options.length,d=0;d<c;d++)if(b.options[d].textContent==a){var e=wa(b.options[d].value,10);if(0<=e)return $i(this,e,!0)}return!1};
function Yi(a){var b=a.G.listDisks,c=a.G.descDisk,d=b.options&&b.options[b.selectedIndex];if(c&&d){b={};if(d=d.getAttribute("data-value"))try{b=eval("("+d+")")}catch(e){x(a.type+" option error: "+e.message)}a=b.desc;void 0===a&&(a="");b=b.href;void 0!==b&&(a='\x3ca href\x3d"'+b+'" target\x3d"_blank"\x3e'+a+"\x3c/a\x3e");c.innerHTML=a}}k.kh=function(a){for(var b=0;b<this.g.length;b++){var c=this.g[b];if(c&&c.Hc)return c.dc||(c.dc=a),!1}return!0};
function fj(a,b,c){var d=a.g[b];if(d.ba||!1===c)lj(a,d.Na,d.ba),d.Wa="",d.Na="",d.ba=null,d.Lb=!1,c||(a.S("Drive "+(a.g[b].Lc||"---")+" unloaded",c),$i(a,b))}function kj(a,b,c,d){var e;for(e=0;e<a.A.length;e++)if(a.A[e][1]==c){d.restore(a.A[e][2]);return}a.A[e]=[b,c,[]]}function lj(a,b,c){var d;for(d=0;d<a.A.length;d++)if(a.A[d][1]==b){a.A[d][2]=c.save();break}}k.se=function(){};k.Pb=function(){return-1};k.Qc=function(){return-1};var bj="",cj="?",dj="??";
function N(a){wi.call(this,"RK11",a,65536,ic,ic.Bc,mj);this.F=this.i=this.b=this.w=this.u=this.j=this.B=0}r(N,wi);k=N.prototype;k.yb=function(a){a||(a=[nj.Bc|nj.$d|nj.Wd,0,R.Ya,0,0,0,0]);a=ja(a);this.F=a.next().value;this.i=a.next().value;this.b=a.next().value;this.w=a.next().value;this.u=a.next().value;this.j=a.next().value;this.B=a.next().value;return!0};k.Mc=function(){return[this.F,this.i,this.b,this.w,this.u,this.j,this.B]};
k.Pb=function(a,b,c,d,e,f,g,h,m){var l=0;a=a.ba;var n=null;a||(l=S.Qd,e=0);for(;e;){if(!n){if(b>=a.ca){l=S.zc;break}n=a.seek(b,c,d+1);if(!n){l=S.Zd;break}var q=0;++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b))}var t,p;if(0>(t=a.read(n,q++))||0>(p=a.read(n,q++))){l=S.Ac;break}if(!h&&(Zc(this.C,df(this.f,f),t|p<<8),Ad(this.C))){l=S.$b;break}q>=a.ta&&(n=null);f+=g;e--}return m?m(l,b,c,d,e,f):l};
k.Qc=function(a,b,c,d,e,f,g,h,m){var l=0;a=a.ba;var n=null;a||(l=S.Qd,e=0);for(;e;){var q=ad(this.C,df(this.f,f));if(Ad(this.C)){l=S.$b;break}if(!n){if(b>=a.ca){l=S.zc;break}n=a.seek(b,c,d+1,!0);if(!n){l=S.Zd;break}var t=0;++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b))}if(h){var p,w;if(0>(p=a.read(n,t++))||0>(w=a.read(n,t++))){l=S.Ac;break}if(q!=(p|w<<8)){l=S.ce;break}}else if(!a.write(n,t++,q&255)||!a.write(n,t++,q>>8)){l=S.Ac;break}t>=a.ta&&(n=null);f+=g;e--}return m?m(l,b,c,d,e,f):l};
k.We=function(a,b,c,d,e,f){this.u=f&65535;this.b=this.b&~R.Fb|f>>16-R.ja.Fb&R.Fb;this.w=65536-e&65535;this.j=this.j&~oj.nd|d&oj.nd;this.i|=a;pj(this);return!0};function pj(a){a.b&=~R.fb;a.i&&(a.i|=S.Fe,a.b|=R.fb,a.i&S.$c&&(a.b|=R.$c),E(a)&&F(a,a.type+": ERROR: "+u(a.i)))}k.yg=function(){return this.F};k.Qh=function(){};k.zg=function(){return this.i};k.Rh=function(){};k.vg=function(){return this.b&R.ac};
k.Nh=function(a){this.b=this.b&~R.Sa|a&R.Sa;if(this.b&R.Zb){a=!0;var b,c="",d=(this.j&oj.pb)>>oj.ja.pb,e=this.g[d];this.b&=~(R.Ya|R.od);this.i&=~S.mf;switch(b=this.b&R.va){case qj.Ae:E(this)&&F(this,this.type+": CRESET("+d+")",!0);this.i=this.j=0;this.b=R.Ya;break;case qj.Re:c="RCHK";case qj.qb:c||(c="READ");var f=this.Pb;case qj.rd:c||(c="WCHK");case qj.cc:c||(c="WRITE");f||(f=this.Qc);var g=(this.j&oj.Xb)>>oj.ja.Xb;var h=(this.j&oj.cd)>>oj.ja.cd;var m=this.j&oj.nd;var l=65536-this.w&65535;var n=
(this.b&R.Fb)<<16-R.ja.Fb|this.u;var q=this.b&R.Ne?0:2;E(this)&&F(this,this.type+": "+c+"("+g+":"+h+":"+m+") "+u(n)+"--"+u(n+(l<<1)),!0,!0);if(g>=e.ca){this.i|=S.zc;break}if(m>=e.ma){this.i|=S.Ac;break}a=f.call(this,e,g,h,m,l,n,q,b>=qj.rd,this.We.bind(this));break;case qj.Fc:g=(this.j&oj.Xb)>>oj.ja.Xb;E(this)&&F(this,this.type+": SEEK("+g+")",!0);g<e.ca?this.b|=R.od:this.i|=S.zc;break;case qj.Ge:E(this)&&F(this,this.type+": DRESET("+d+")");this.i=this.j=0;this.b=R.Ya|R.od;break;default:E(this)&&F(this,
this.type+": UNSUPPORTED("+b+")")}this.F=e.status|(e.ba?nj.Da:0)|d<<nj.ja.ed|this.j&nj.lf;pj(this);a&&(this.b&=~R.Zb,this.b|=R.Ya,this.b&R.Eb&&Cd(this.f,this.Pa))}};k.Ag=function(){return this.w};k.Sh=function(a){this.w=a};k.ug=function(){return this.u};k.Mh=function(a){this.u=a};k.wg=function(){return this.j};k.Oh=function(a){this.j=a};k.xg=function(){return this.B};k.Ph=function(a){this.B=a};
var nj=ic.Cc,S=ic.Ze,R=ic.Xe,oj=ic.Ye,qj=ic.va,rj={},mj=(rj[65280]=[null,null,N.prototype.yg,N.prototype.Qh,"RKDS"],rj[65282]=[null,null,N.prototype.zg,N.prototype.Rh,"RKER"],rj[65284]=[null,null,N.prototype.vg,N.prototype.Nh,"RKCS"],rj[65286]=[null,null,N.prototype.Ag,N.prototype.Sh,"RKWC"],rj[65288]=[null,null,N.prototype.ug,N.prototype.Mh,"RKBA"],rj[65290]=[null,null,N.prototype.wg,N.prototype.Oh,"RKDA"],rj[65294]=[null,null,N.prototype.xg,N.prototype.Ph,"RKDB"],rj);
function be(a){wi.call(this,"RL11",a,131072,jc,jc.$e,sj);this.b=this.B=this.i=this.j=this.w=this.u=0}r(be,wi);k=be.prototype;k.yb=function(a){a||(a=[U.Da|U.Ya,0,0,0,0,0]);a=ja(a);this.b=a.next().value;this.B=a.next().value;this.i=a.next().value;this.j=a.next().value;this.w=a.next().value;this.u=a.next().value;return!0};k.Mc=function(){return[this.b,this.B,this.i,this.j,this.w,this.u]};
k.Pb=function(a,b,c,d,e,f,g,h,m){g=0;a=a.ba;h=null;a||(g=tj.Za,e=0);for(;e;){if(!h){h=a.seek(b,c,d+1);if(!h){g=tj.Za;break}var l=0}var n,q;if(0>(n=a.read(h,l++))||0>(q=a.read(h,l++))){g=tj.Za;break}Zc(this.C,df(this.f,f),n|q<<8);if(Ad(this.C)){g=tj.$b;break}f+=2;e--;if(l>=a.ta&&(h=null,++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b>=a.ca)))){g=tj.Za;break}}return m?m(g,b,c,d,e,f):g};
k.Qc=function(a,b,c,d,e,f,g,h,m){g=0;a=a.ba;h=null;a||(g=tj.Za,e=0);for(;e;){var l=ad(this.C,df(this.f,f));if(Ad(this.C)){g=tj.$b;break}f+=2;e--;if(!h){h=a.seek(b,c,d+1,!0);if(!h){g=tj.Za;break}var n=0}if(!a.write(h,n++,l&255)||!a.write(h,n++,l>>8)){g=tj.Za;break}if(n>=a.ta&&(h=null,++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b>=a.ca)))){g=tj.Za;break}}return m?m(g,b,c,d,e,f):g};
k.af=function(a,b,c,d,e,f){this.B=f&65535;this.b=this.b&~U.Xa|f>>16-U.ja.Xa&U.Xa;this.u=f>>16&uj.$a;this.j=this.i=b<<vj.ja.bc|(c?vj.Ec:0)|d&vj.Xd;this.w=65536-e&65535;a&&(this.b=this.b|a|U.fb);return!0};k.Dg=function(){return this.b&U.ac};
k.Vh=function(a){this.b=this.b&~U.Sa|a&U.Sa;this.u=this.u&60|(a&U.Xa)>>U.ja.Xa;if(!(this.b&U.Ya)){a=!0;var b="",c=this.g[(this.b&U.pb)>>U.ja.pb],d=c.ba;this.b&=~U.Da;switch(this.b&U.va){case wj.rf:this.w&xj.Od&&(this.b&=U.Da|U.va|U.Xa);this.w=c.status|this.j&vj.Ec|(d&&512==d.ca?xj.Ke:0);break;case wj.Fc:if((this.i&vj.Je)==vj.nf){var e=this.i&vj.bc;b=(this.i&vj.qf)<<2;this.j=this.i&vj.pf?this.j+e:this.j-e;this.i=this.j=this.j&vj.bc|b}break;case wj.Ve:this.w=this.j;break;case wj.Se:b="READ",e=this.Pb;
case wj.tf:b||(b="WRITE");e||(e=this.Qc);var f=this.i>>vj.ja.bc;var g=this.i&vj.Ec?1:0;var h=this.i&vj.Xd;!d||f>=d.ca||h>=d.ma?this.b=this.b|tj.Za|U.fb:(a=65536-this.w&65535,d=(this.u&uj.$a)<<16|this.B,E(this)&&F(this,this.type+": "+b+"("+f+":"+g+":"+h+") "+u(d)+"--"+u(d+(a<<1)),!0,!0),a=e.call(this,c,f,g,h,a,d,2,!1,this.af.bind(this)))}a&&(this.b=this.b|U.Da|U.Ya,this.b&U.Eb&&Cd(this.f,this.Pa))}};k.Bg=function(){return this.B};k.Th=function(a){this.B=a&yj.Sa};k.Eg=function(){return this.i};
k.Wh=function(a){this.i=a};k.Fg=function(){return this.w};k.Xh=function(a){this.w=a};k.Cg=function(){return this.u};k.Uh=function(a){this.u=a&uj.$a;this.b=this.b&~U.Xa|(this.u&3)<<U.ja.Xa};
var U=jc.df,yj=jc.bf,vj=jc.ef,xj=jc.Dc,uj=jc.cf,tj=jc.Nd,wj=jc.va,zj={},sj=(zj[63744]=[null,null,be.prototype.Dg,be.prototype.Vh,"RLCS"],zj[63746]=[null,null,be.prototype.Bg,be.prototype.Th,"RLBA"],zj[63748]=[null,null,be.prototype.Eg,be.prototype.Wh,"RLDA"],zj[63750]=[null,null,be.prototype.Fg,be.prototype.Xh,"RLMP"],zj[63752]=[null,null,be.prototype.Cg,be.prototype.Uh,"RLBE"],zj);
function ce(a){wi.call(this,"RX11",a,262144,kc,kc.ff,Aj);this.H=this.F=this.i=this.K=this.b=this.B=0;this.j=V.Gb;this.u=0;this.w=Array(128).fill(0)}r(ce,wi);k=ce.prototype;k.yb=function(a){a?(a=ja(a),this.b=a.next().value,this.B=a.next().value,this.H=a.next().value,this.F=a.next().value,this.i=a.next().value,this.K=a.next().value,this.j=a.next().value,this.u=a.next().value,this.w=a.next().value):(this.B=this.b=0,this.F=this.H=1,this.K=this.i=0,this.j=V.qb,this.u=0,Jd(this.f,this.Pa),Bj(this));return!0};
k.Mc=function(){return[this.b,this.B,this.H,this.F,this.i,this.K,this.j,this.u,this.w]};k.se=function(a){0==a&&this.yb()};function Cj(a,b){b&&(a.K=b,a.B=a.i,a.b|=W.fb);a.j=V.Gb;a.b|=W.DONE;a.b&W.Eb&&Cd(a.f,a.Pa)}
k.Pb=function(a,b,c,d,e,f,g,h,m){h=0;var l=a.ba,n=null;E(this)&&F(this,this.type+".readData("+b+":"+c+":"+d+") "+u(f)+"--"+u(f+(e<<1)),!0,!0);l||(h=a.Ob?Dj.bd:Dj.ad,e=0);for(;e;){if(!n){if(b>=l.ca){h=Dj.Pe;break}n=l.seek(b,c,d+1);if(!n){h=Dj.ld;break}var q=0;++d>=l.ma&&(d=0,++c>=l.la&&(c=0,++b))}var t;if(0>(a=l.read(n,q++))||0>(t=l.read(n,q++))){h=Dj.kd;break}Zc(this.C,df(this.f,f),a|t<<8);q>=l.ta&&(n=null);f+=g;e--}return m?m(h,b,c,d,e,f):h};
function Bj(a){var b=0,c=a.b&W.pd?1:0,d=a.g[c];d=d&&d.ba;var e=a.H&Ej.$a,f=a.F&Fj.$a;a.i&=~(Gj.Jd|Gj.Td|Gj.Yb|Gj.Da);if(d)if(a.i|=Gj.Da,E(a)&&F(a,a.type+".readSector("+e+":0:"+f+")",!0,!0),c=d.seek(e,0,f,!0)){e=0;for(f=a.w.length;e<f;){var g=d.read(c,e);if(0>g){b=Dj.kd;break}a.w[e++]=g}c.Bf&&(a.i|=Gj.Yb)}else b=Dj.ld;else b=c?Dj.bd:Dj.ad;Cj(a,b)}
k.Hg=function(a,b){a=this.b;if(!b)switch(a&=W.ac,this.j){case V.Xc:case V.EMPTY:this.u<this.w.length&&(this.b|=W.ab);break;case V.qb:case V.cc:case V.Gc:2>this.u&&(this.b|=W.ab)}return a};
k.Zh=function(a){this.b=this.b&~W.Sa|a&W.Sa;if(this.b&W.INIT)this.yb();else if(this.b&W.Zb&&this.j==V.Gb)switch(this.j=this.b&W.va,this.b&=~(W.Zb|W.ab|W.DONE|W.fb),Jd(this.f,this.Pa),E(this)&&F(this,this.type+".processCommand("+Hj[this.j>>1]+")",!0,!0),this.j){case V.Xc:case V.EMPTY:case V.qb:case V.cc:case V.Gc:this.u=0;break;case V.Ue:a=this.g[this.b&W.pd?1:0];this.i&=~Gj.Da;a&&a.ba&&(this.i|=Gj.Da);this.B=this.i;Cj(this);break;case V.Te:this.B=this.K,Cj(this)}else this.b&W.Eb?this.b&W.DONE&&Cd(this.f,
this.Pa):Jd(this.f,this.Pa)};k.Ig=function(a,b){if(!b)switch(this.j){case V.EMPTY:this.b&W.ab&&(this.b&=~W.ab,this.B=this.w[this.u]&255,E(this)&&F(this,this.type+".readByte("+this.u+"): "+v(this.B,2,!0),!0,!0),++this.u>=this.w.length&&Cj(this))}return this.B};
k.$h=function(a){switch(this.j){case V.Xc:this.b&W.ab&&(this.b&=~W.ab,this.w[this.u]=a&255,E(this)&&F(this,this.type+".writeByte("+this.u+","+v(a,2,!0)+")",!0,!0),++this.u>=this.w.length&&Cj(this));break;case V.qb:case V.cc:case V.Gc:if(this.b&W.ab)switch(this.b&=~W.ab,this.u++){case 0:this.F=a;break;case 1:if(this.H=a,this.j==V.qb)Bj(this);else{var b=this.j==V.Gc,c=0,d=this.b&W.pd?1:0,e=this.g[d];e=e&&e.ba;var f=this.H&Ej.$a,g=this.F&Fj.$a;this.i&=~(Gj.Jd|Gj.Td|Gj.Yb|Gj.Da);if(e)if(this.i|=Gj.Da,
E(this)&&F(this,this.type+".writeSector("+f+":0:"+g+")",!0,!0),d=e.seek(f,0,g,!0))for(b&&(d.Bf=!0),b=0,f=this.w.length;b<f;){if(!e.write(d,b,this.w[b]&255)){c=Dj.kd;break}b++}else c=Dj.ld;else c=d?Dj.bd:Dj.ad;Cj(this,c)}}}this.B=a};var W=kc.gf,Ej=kc.kf,Fj=kc.jf,Gj=kc.hf,V=kc.va,Dj=kc.Ie,Hj="FILL EMPTY WRITE READ UNUSED RDSTAT WRDEL RDERR".split(" "),Ij={},Aj=(Ij[65144]=[null,null,ce.prototype.Hg,ce.prototype.Zh,"RXCS"],Ij[65146]=[null,null,ce.prototype.Ig,ce.prototype.$h,"RXDB"],Ij);
function Jj(a){y.call(this,"Debugger",a);this.V=+a.base||16;this.O=["{","}"];this.ha=["[","]"];this.Ra=this.A=0;this.R=!1;this.w=-1;this.u=[];this.i={}}r(Jj,y);Jj.prototype.ne=function(){return-1};Jj.prototype.wd=function(){};
function Kj(a,b,c,d){if(c)if(b){0>a.w&&a.u.length&&(a.w=0);if(0>a.w||b!=a.u[a.w])a.u.splice(0,0,b),a.w=0;a.w--}else a.R?b="end":b=a.u[a.w+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(Oa(b.substring(c,f))),c=f+1}}return a}
function Lj(a,b,c){var d=a;b=b||32;if(c)if(32==b)d=a>>>0;else if(32>b)d=a&(1<<b)-1;else{if(b=Math.pow(2,b),0>a||a>=b)d=a%b,0>d&&(d+=b)}else 32>=b?d=a<<32-b>>32-b:(b=Math.pow(2,b-1),a>=b?(d=a%b,(a/b|0)&1&&(d-=b)):a<-b&&(d=a%b,((-a-1)/b|0)&1?d&&(d+=b):d||(d-=b)));a!=d&&(a=d);return a}
function Mj(a,b,c){for(c=void 0===c?-1:c;c--&&b.length;){var d=b.pop();if(2>a.length)return!1;var e=a.pop();var f=a.pop();switch(d){case "*":f*=e;break;case "/":if(!e)return!1;f=Math.trunc(f/e);break;case "^/":if(!e)return!1;f%=e;break;case "+":f+=e;break;case "-":f-=e;break;case "\x3c\x3c":f<<=e;break;case "\x3e\x3e":f>>=e;break;case "\x3e\x3e\x3e":f>>>=e;break;case "\x3c":f=f<e?1:0;break;case "\x3c\x3d":f=f<=e?1:0;break;case "\x3e":f=f>e?1:0;break;case "\x3e\x3d":f=f>=e?1:0;break;case "\x3d\x3d":f=
f==e?1:0;break;case "!\x3d":f=f!=e?1:0;break;case "\x26":f&=e;break;case "!":case "|":f|=e;break;case "^!":f|=e;break;case "\x26\x26":f=f&&e?1:0;break;case "||":f=f||e?1:0;break;case ",,":f=Lj(f,18,!0)*Math.pow(2,18)+Lj(e,18,!0);break;case "_":case "^_":"^_"==d&&(e=35-(e&255));e&&(f=Lj(f,0,!0),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));break;default:return!1}a.push(Lj(f))}return!0}
function Nj(a,b,c,d,e,f){var g,h=!1,m=0,l=[],n=[],q=a.V;for(a.V=e;c<d;){var t=b[c++].trim();var p=c<d?b[c++]:"";if(t)var w=Oj(a,t,void 0,f,m);else if("{"==p){t=1;for(w=c;c<d;)if(c++,p=c<b.length?b[c++]:"","{"==p)t++;else if("}"==p&&!--t)break;w=Nj(a,b,w,c-1,a.V,f);null!=w&&m&&(w=Pj(w,m));t=c<d?b[c++].trim():"";p=c<d?b[c++]:""}else{if(" "==p)continue;if("^B"==p){a.V=2;continue}if("^O"==p){a.V=8;continue}if("^D"==p){a.V=10;continue}if(!(m&-1073741824)){if("+"==p)continue;if("-"==p){m=m<<2|1;continue}if("~"==
p||"^-"==p){m=m<<2|2;continue}if("^L"==p){m=m<<2|3;continue}}h=!0;break}if(void 0===w)if(f)f.push(t),w=0;else{h=!0;f=[];break}l.push(Lj(w));if(" "==p)if(c<b.length-1&&!b[c])c++,p=b[c++];else{h=!0;break}if(!p)break;m="\x3c"==a.O[0]?Qj:Rj;if(!m[p]){h=!0;break}n.length&&m[p]<=m[n[n.length-1]]&&Mj(l,n,1);n.push(p);a.V="^_"==p?10:e;m=0}if(h||!Mj(l,n)||1!=l.length)h=!0;h?f||a.v("parse error ("+(t||p)+")"):g=l.pop();a.V=q;return g}
function Sj(a,b,c,d,e){for(var f;0<=(f=b.indexOf(c));){for(var g=0,h=f+1,m=e;h<b.length;){var l=b[h++];if(l==c){m=-1;break}if(!m)break;m--;l=l.charCodeAt(0);7==d?l&=127:l=l-32&63;g=Lj(g*Math.pow(2,d)+l,d*e,!0)}if(0<=m){a.v("parse error ("+c+b+c+")");return}b=b.substr(0,f)+K(a,g,-1)+b.substr(h)}return b}
function Tj(a,b,c){var d=void 0,e=!1===c;c=Array.isArray(c)?c:void 0;if(b){"{"!=a.O[0]&&(b=b.split(a.O[0]).join("{").split(a.O[1]).join("}"));b=Sj(a,b,'"',7,5);if(!b)return d;b=Sj(a,b,"'",6,6);if(!b)return d;16!=a.V&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=Nj(a,b,0,b.length,a.V,c);void 0!==d&&e&&Uj(a,null,d)}return d}
function Pj(a,b){for(;b;){var c;switch(b&3){case 1:a=-Lj(a);break;case 2:a|=-1;break;case 3:for(c=35;0<=c&&!(a&Math.pow(2,c));)c--;a=35-c}b>>>=2}return a}
function Oj(a,b,c,d,e){e=void 0===e?0:e;var f=Array.isArray(d)?d:void 0;if(void 0!=b){var g=a.ne(b);if(0<=g)g=a.wd(g);else if(g=b,a.i[g]?g=a.i[g].value:(g=g.substr(0,6),g=a.i[g]&&a.i[g].value),void 0!=g){var h=a.i[b]&&a.i[b].fh;h&&(f?f.push(h):(f=Tj(a,h,d),void 0!==f?g+=f:(d||a.v("undefined "+(c||"value")+": "+b+" ("+h+")"),g=void 0)))}else g=wa(b,1<b.length||10<a.V?a.V:10);void 0!=g?g=Lj(Pj(g,e)):d||a.v("invalid "+(c||"value")+": "+b)}else d||a.v("missing "+(c||"value"));return g}
function Uj(a,b,c){var d=!1;if(void 0!==c){d=!0;var e=8==a.V?K(a,c,32,8,1)+"  "+c+".":K(a,c,32,16,1)+"  "+K(a,c,32,8,1)+"  "+K(a,c,32,2,8)+"  "+c+".";32<=c&&127>c&&(e+=" '"+String.fromCharCode(c)+"'")}a.v((null!=b?b+": ":"")+e);return d}function Vj(a,b){var c=0;if(a.i){if(b)return Uj(a,b,a.i[b]&&a.i[b].value);b=Object.keys(a.i);b.sort();for(var d=0;d<b.length;d++)Uj(a,b[d],a.i[b[d]].value),c++}return 0<c}
function K(a,b,c,d,e){c=void 0===c?0:c;e=void 0===e?0:e;switch((void 0===d?0:d)||a.V){case 2:a=ya(b,0<c?c:0,e);break;case 8:a=u(b,0<c?(c+2)/3|0:0,!!e);break;case 10:a=za(b,0<c?Math.ceil(.3*c):0);break;default:a=v(b,0<c?c+3>>2:0,!!e)}return c=0>c?a.replace(/^0+([0-9A-F]+)$/i,"$1"):a}
var Rj={"||":5,"\x26\x26":6,"!":7,"|":7,"^!":8,"\x26":9,"!\x3d":10,"\x3d\x3d":10,"\x3e\x3d":11,"\x3e":11,"\x3c\x3d":11,"\x3c":11,"\x3e\x3e\x3e":12,"\x3e\x3e":12,"\x3c\x3c":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},Qj={",,":1,"||":5,"\x26\x26":6,"!\x3d":10,"\x3d\x3d":10,"\x3e\x3d":11,"\x3e":11,"\x3c\x3d":11,"\x3c":11,"\x3e\x3e\x3e":12,"\x3e\x3e":12,"\x3c\x3c":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"\x26":15,_:19,"^_":19,"{":20,"}":20};
function Wj(a){Jj.call(this,a);this.Fa=!1;this.O=["(",")"];this.ha=[];this.K=X();this.Ea=X();this.P=X();this.B=[];this.b=this.M=this.H=[];Xj(this);this.T=this.ea=0;this.j=[];this.ra=void 0;Yj(this);this.D=this;this.ia={};this.ga=0;this.W=null;this.N=[];Zj(this,a.messages);this.wa=a.commands;this.Ia=ak;this.X=[];this.L=0;this.Ja=this.sa=null;this.A=this.Ha=this.Ga=this.Y=this.oa=0;this.g=this.F=null;var b=this;window?void 0===window[z]&&(window[z]=function(a){return Be(b,a)}):void 0===global[z]&&(global[z]=
function(a){return Be(b,a)})}r(Wj,Jj);function bk(a){a=a&&a.J;null==a&&(a=-1);return a}function X(a,b,c){return{J:void 0===a?null:a,La:void 0===b?!1:b,Ta:!1,V:c}}k=Wj.prototype;k.Cd=function(a,b){a.J=b;a.Ta=!1;a.V=void 0};function ck(a){return[a.J,a.La,a.V,a.Ta,a.Kc]}function dk(a,b){var c=X(b[0],b[1],b[2]);c.Ta=b[3];b[4]&&(c.ee=Kj(a,c.Kc=b[4]));return c}
k.za=function(a,b,c,d){this.C=b;this.I=a;this.f=c;this.g=a.i;(a=we(a,"messages"))&&Zj(this,a);1140>this.f.ha&&(this.X=this.X.concat(ek));1145>this.f.ha&&(this.X=this.X.concat(fk));Gd(this,16,function(a){a:{var b=d.C.b,c=a[0],e=a=0,m=b.length;if(c){a=bk(gk(d,c));if(-1===a){d.v("invalid address: "+c);break a}e=a>>>d.C.g;m=1}d.v("blockid   physical   blockaddr  used    size    type");d.v("--------  ---------  ---------  ------  ------  ----");c=-1;for(var l=0;m--;){var n=b[e];n.type==c?l++||d.v("..."):
(c=n.type,l=sd[c],n&&d.v(v(n.id,8)+"  %"+v(e<<d.C.g,8)+"  %"+v(n.J,8)+"  "+Aa(n.Sb)+"  "+Aa(n.size)+"  "+l),c!=ee&&(c=-1),l=0);a+=d.C.j;e++}}});D(this)};
k.ua=function(a,b,c){var d=this;switch(b){case "debugInput":return this.F=this.G[b]=c,c.onkeydown=function(a){if(13==a.keyCode){var b=d.F.value;d.F.value="";Be(d,b,!0)}else if(27==a.keyCode)d.F.value=b="";else if(38==a.keyCode?(b=null,d.w<d.u.length-1&&(b=d.u[++d.w])):40==a.keyCode&&(0<d.w?b=d.u[--d.w]:(b="",d.w=-1)),null!=b){var c=b.length;d.F.value=b;d.F.setSelectionRange(c,c)}null!=b&&a.preventDefault&&a.preventDefault()},!0;case "debugEnter":return this.G[b]=c,hb(c,function(){if(d.F){var a=d.F.value;
d.F.value="";Be(d,a,!0);return!0}return!1}),!0;case "step":return this.G[b]=c,hb(c,function(a){var b=!1;Ub(d,!0)||(Vb(d,!0),b=Jc(d,a?1:0,null),Vb(d,!1));return b}),!0}return!1};function Ae(a){if(a.F){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.F.focus();window&&window.scrollTo(b,c)}}k.Ld=function(a,b){var c=255,d=bk(a);-1!==d&&(a.La||65535<d?(c=this.C,d=df(this.f,d),c.B=!1,c.ka++,d=ud(c,d).j(d&c.i,d),c.ka--):(c=this.f,c.oa++,d=c.C.Hd($c(c,d,3)),c.oa--),c=d,b&&hk(a,b));return c};
k.Qa=function(a,b){var c=65535,d=bk(a);-1!==d&&(c=a.La||65535<d?ad(this.C,df(this.f,d)):bd(this.f,d),b&&hk(a,b));return c};k.Md=function(a,b,c){var d=bk(a);if(-1!==d){if(a.La||65535<d)vd(this.C,df(this.f,d),b);else{var e=this.f;e.oa++;e.C.Id($c(e,d,5),b);e.oa--}c&&hk(a,c);Nc(this.I,-1)}};k.He=function(a,b,c){var d=bk(a);if(-1!==d){if(a.La||65535<d)Zc(this.C,df(this.f,d),b);else{var e=this.f;e.oa++;e.C.Wb($c(e,d,4),b);e.oa--}c&&hk(a,c);Nc(this.I,-1)}};
function gk(a,b,c){c=(c?a.K:a.Ea).J;var d;if(void 0!==b){a:{var e=a.O[0];c=a.O[1];var f="("==e||"{"==e||"["==e?"\\":"";var g="["==e?"\\":"";for(g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);){var h=Tj(a,f[1]);if(void 0===h){b=void 0;break a}b=b.replace(e+f[1]+c,null!=h?K(a,h):"undefined")}if(a.ha.length)for(e=a.ha[0],c=a.ha[1],f="("==e||"{"==e||"["==e?"\\":"",g="["==e?"\\":"",g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);)b=b.replace("["+f[1]+"]","unimplemented");for(;e=b.match(/\$([a-z]+)/i);){c=
null;switch(e[1].toLowerCase()){case "ops":c=a.Ra}if(null==c)break;b=b.replace(e[0],c.toString())}}if("%"==b.charAt(0)){var m=!0;b=b.substr(1)}e=b;var l;a:{c=a.C;f=e.toUpperCase();for(n in c.Oa)if(g=+n,c.Oa[g][4]==f){var n=c.A+g;break a}n=null}if(null==n&&e.match(/^[a-z_][a-z0-9_]*$/i))for(e=e.toUpperCase(),c=0;c<a.B.length;c++)if(f=a.B[c].fa[e],null!=f){n=f.o;break}null!=n&&(l=X(n));if(e=l)return e;0<=b.indexOf("0x")?d=16:0<=b.indexOf("0o")?d=8:0<=b.indexOf(".")&&(d=10);c=Tj(a,b)}null!=c&&(e=X(c,
m,d));return e}function ik(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.ee=Kj(a,b.Kc=c[2]))}function hk(a,b){null!=a.J&&(a.J+=b||1)}function jk(a,b){return(b.La?"%":"")+K(a,b.J)}
function Zj(a,b){a.D=a;a.ga=1073741824;a.W=null;a.N=[];b=Kj(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in mc){a:{var d=void 0;if(Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}}0<=d&&(a.ga|=mc[c],a.v(c+" messages enabled"))}}function Gd(a,b,c){for(var d in mc)if(b==mc[d]){a.ia[d]=c;break}}
k.ne=function(a){a=a.toUpperCase();var b=kk[a];null==b&&(b=-1,"R"==a.charAt(0)&&(b=+a.charAt(1),0>b||7<b))&&(b=-1);return b};function lk(a,b){if(b<mk||a.g)var c=nk[b];return c||""}
k.wd=function(a){if(0<=a)if(8>a)var b=this.f.g[a];else if(16>a)b=this.f.sa[a-8];else if(20>a)b=this.f.X[a-16];else{var c=this.f,d=this.g;switch(a){case ok:b=Zd(this.f);break;case pk:b=c.mb;break;case qk:b=c.O;break;case rk:b=c.Ea&65280;break;case sk:b=Kd(c);break;case tk:b=Md(c);break;case uk:b=Nd(c);break;case vk:b=c.W;break;case mk:d&&(b=d.da);break;case wk:d&&(b=d.Ab);break;case xk:d&&(b=d.Va)}}return b};
k.message=function(a,b){b&&(a+=" @"+jk(this,X(this.f.N&65535)));if(!this.W||a!=this.W)if(this.W=a,this.ga&536870912)this.N.push(a);else{var c;if(this.ga&-2147483648&&this.f&&(c=this.f.flags.U)||Ub(this,!0))yk(this),c&&(a+=" (cpu halted)");this.v(a);this.f&&(a=this.f,He(a),a.wb=0,a.I&&Nc(a.I,void 0))}};
function Yj(a){var b;if(!Jf(a))a.j&&a.j.length&&a.v("instruction history buffer freed"),a.T=0,a.j=[];else if(!a.j||!a.j.length){a.j=Array(zk);for(b=0;b<a.j.length;b++)a.j[b]=X();a.T=0;a.v("instruction history buffer allocated")}}function Ak(a,b,c){if(!Bk(a,c))return!1;Ic(a.f,b);return!0}
function Jc(a,b,c,d){if(!Bk(a))return!1;var e="";null===c&&(e=(c=!a.sa||"tr"==a.sa)?"tr":"t");a.A=0;b||Jf(a)&&Kf(a,a.f.g[7],0);try{b=Ie(a.f,b);var f=a.f.wc(b);0<f&&(Kc(a.f,f),a.A+=f,Lc(a.f,f,!0),Mc(a.f,f),a.Y++)}catch(g){"number"!=typeof g&&(b=g,a.A=0,Rb(a.f,b.stack||b.message))}!1!==d&&(a.g&&a.g.stop(),Nc(a.I,-1));ze(a,c||!1,e);return 0<a.A}function yk(a,b){a.f&&I(a.f,b)}
function ze(a,b,c){if(a.Fa){void 0===b&&(b=!0);c&&a.v(Ck+c);c=a.f;if(c=c.i&128?c.yc|c.xc<<8:0){var d=c>>8;a.v("trapped to "+K(a,c&255,8)+" ("+(0>d?hc[-d]:K(a,d))+")")}a.K=X(a.f.g[7]);b&&1!=a.L?Dk(a):Ek(a)}}function Bk(a,b){var c;(c=!a.f||!Tb(a.f))||(c=a.f,c.flags.aa?c=!0:(c.v(c.toString()+" not powered"),c=!1),c=!c);return c||a.f.flags.U?(b||a.v("cpu busy or unavailable, command ignored"),!1):!Sb(a.f)}k.Ba=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};
k.Aa=function(a,b){b&&this.v(a?"suspending":"shutting down");return a?this.save():!0};k.reset=function(a){Yj(this);this.Y=0;this.W=null;this.A=0;this.K=X(this.f.g[7]);this.flags.U=!1;Fk(this);a||ze(this)};k.save=function(){var a=new H(this);a.set(0,ck(this.K));a.set(1,ck(this.P));a.set(2,[this.u,this.R,this.ga]);a.set(3,this.B);return a.data()};
k.restore=function(a){var b=0;void 0!==a[2]&&(this.K=dk(this,a[b++]),this.P=dk(this,a[b++]),this.u=a[b][0],"string"==typeof this.u&&(this.u=[this.u]),this.R=a[b][1],this.ga|=a[b][2]);a[3]&&(this.B=a[3]);return!0};k.start=function(a,b){this.L||this.v("running");this.flags.U=!0;this.Ga=a;this.Ha=b};
k.stop=function(a,b){if(this.flags.U){this.flags.U=!1;this.A=b-this.Ha;if(!this.L){b="stopped";if(this.A){a-=this.Ga;var c=0<a?Math.round(1E3*this.A/a):0;b+=" (";Jf(this)&&(b+=this.Y+" instructions, ",this.Y=0);b+=this.A+" cycles, "+a+" ms, "+c+" hz)"}else E(this,-2147483648)&&(b+=" (use the 't' command to execute blocked faults)");this.v(b)}ze(this,!0);Ae(this);Fk(this,this.f.g[7]);this.W=null}};function Jf(a){return 1<a.b.length||!!a.ea}
function Kf(a,b,c){var d=-1;c||(d=bd(a.f,b),0==d&&(a.f.N&65535)==b&&(b=Ve(a.f,2)));if(0<c&&(a.ea&&!--a.ea||Gk(a,b,1,a.b)))return!0;0<=c&&a.j.length&&(a.Y++,0>d&&(d=bd(a.f,b)),65535!=(d&65535)&&(a.Cd(a.j[a.T],b),++a.T==a.j.length&&(a.T=0)));return!1}function Pg(a){var b=a.f;if(b.flags.U)throw Fc(b,a.f.N&65535),yk(a),-1;return!1}function qe(a,b,c){Gk(a,b,c||1,a.M)&&yk(a,!1)}function re(a,b,c){Gk(a,b,c||1,a.H)&&yk(a,!1)}
function Xj(a){var b;a.b=["bp"];if(void 0!==a.M)for(b=1;b<a.M.length;b++){var c=a.M[b];var d=bk(c);c.La?(c=a.C,pe(c.b[d>>>c.g],!1)):gf(a.f,!1)}a.M=["br"];if(void 0!==a.H)for(b=1;b<a.H.length;b++)c=a.H[b],d=bk(c),c.La?(c=a.C,pe(c.b[d>>>c.g],!0)):gf(a.f,!0);a.H=["bw"];a.oa=0;a.ea=0}
k.xb=function(a,b,c){var d=!0;c||Hk(this,a,b,!1,!0);if(a!=this.b){var e=bk(b);if(-1===e)this.v("invalid address: "+jk(this,b)),d=!1;else{var f=a==this.H;65535<e&&(b.La=!0);if(b.La){var g=this.C;g.b[e>>>g.g].xb(e&g.i,f)}else e=this.f,(f?e.oc++:e.mc++)||Oe(e)}}d&&(a.push(b),c?b.Ta=!0:(Ik(this,a,a.length-1,"set"),Yj(this)))};
function Hk(a,b,c,d,e){var f=!1;c=bk(c);for(var g=1;g<b.length;g++){var h=b[g];if(c==bk(h)&&(!d||h.Ta)){f=!0;h.Ta||e||Ik(a,b,g,"cleared");b.splice(g,1);b!=a.b&&(b=b==a.H,h.La?(d=a.C,pe(d.b[c>>>d.g],b)):gf(a.f,b));h.Ta||Yj(a);break}}return f}function Jk(a,b){for(var c=1;c<b.length;c++)Ik(a,b,c);return b.length-1}function Ik(a,b,c,d){c=b[c];a.v(b[0]+" "+jk(a,c)+(d?" "+d:c.Kc?' "'+c.Kc+'"':""))}
function Fk(a,b){if(void 0!==b)Gk(a,b,1,a.b,!0),a.L=0;else for(b=1;b<a.b.length;b++){var c=a.b[b];if(c.Ta){if(!Hk(a,a.b,c,!0))break;b=0}}}
function Gk(a,b,c,d,e){var f=!1;if(!a.oa++)for(var g=1;!f&&g<d.length;g++){var h=d[g];if(!e||h.Ta)for(var m=bk(h)&(d==a.b?65535:-1),l=0;l<c;l++)if(b+l==m){var n;f=!0;h.Ta&&(Hk(a,d,h,!0),e=!0);if(n=h.ee){f=!1;for(var q=0;q<n.length;q++)if(!Kk(a,n[q],!0)){if(n[q].indexOf("if")){f=!0;break}for(var t=q+1;t<n.length&&n[t].indexOf("else");t++)q++;if(t==n.length){f=!0;break}}a.f.flags.U||(f=!0)}if(f){e||Ik(a,d,g,"hit");break}}}a.oa--;return f}
function Lk(a,b,c,d){var e=X(b.J),f=a.Qa(b,2),g,h;for(h in a.Ia)if(g=a.Ia[h][f&h])break;g||(g=Mk);var m=g[0];0<=a.X.indexOf(m)&&(g=Mk,m=g[0]);var l=h="",n=Nk[m],q=g.length-1;m||q||(h=K(a,f));for(m=1;m<=q;m++){var t=g[m];if(void 0!==t){var p=a;var w=t;t=b;var B="";var A=w&Ok;if(A==Y)t=t.J+((f&255)<<24>>23)&65535,B=K(p,t);else if(A==Pk)t=t.J-((f&63)<<1)&65535,B=K(p,t);else if(A==Qk)B=K(p,f&7,3);else if(A==Rk)B=K(p,f&63,6);else if(A==Sk)B=K(p,f&255,8);else if(A=f&w,w&Tk&&(A>>=6,w>>=6),w&Z){w=null;var G=
A&Uk;switch(A&Vk){case 0:B=lk(p,G);break;case 8:B="@"+lk(p,G);w=Wk(p,p.f.g[G]);break;case 16:7>G?B="("+lk(p,G)+")+":(A=p.Qa(t,2),B="#"+K(p,A,-1));break;case 24:7>G?B="@("+lk(p,G)+")+":(A=p.Qa(t,2),B="@#"+K(p,A,-1),w=Wk(p,A));break;case 32:B="-("+lk(p,G)+")";break;case 40:B="@-("+lk(p,G)+")";break;case 48:A=p.Qa(t,2);B=K(p,A,-1)+"("+lk(p,G)+")";7==G&&(B=K(p,A=A+t.J&65535),w=Wk(p,A));break;case 56:A=p.Qa(t,2),B="@"+K(p,A)+"("+lk(p,G)+")",7==G&&(B="@"+K(p,A=A+t.J&65535),w=Wk(p,bd(p.f,A)))}w&&(B=[B,w])}p=
B;if(!p||!p.length){h="INVALID";break}"string"!=typeof p&&(l=p[1],p=p[0]);0<h.length&&(h+=",");h+=p||"???"}}f="";g=jk(a,e)+":";if(-1!==e.J&&-1!==b.J){do if(f+=" "+K(a,a.Qa(e,2)),null==e.J)break;while(e.J!=b.J)}g+=Ha(f,24);g+=Ha(n,5);h&&(g+=" "+h);if(c||l)g=Ha(g,60)+";"+(c||""),g=a.f.flags.Jb?g+("cycles\x3d"+Ce(a.f).toString()+" cs\x3d"+v(a.f.jc)):g+(null!=d?"\x3d"+d.toString():""),l&&(";"!=g.slice(-1)&&(g+=" "),g+=l);return g}
function Wk(a,b){b=ef(a.f,b)[0];b>=a.f.rb&&b<a.C.A&&(b=b-a.f.rb+a.C.A);var c=a.C;a=null;b>=c.A&&(b=c.Oa[b&zd])&&(a=b[4]);return a}function Xk(a,b){switch(b){case "N":a=Ue(a.f);break;case "Z":a=Te(a.f);break;case "V":a=Se(a.f);break;case "C":a=Re(a.f);break;default:a=0}return b.charAt(0)+(a?"1":"0")+" "}function Yk(a,b){var c=lk(a,b);c&&(c+="\x3d"+K(a,a.wd(b))+" ");return c}
function Zk(a,b){var c,d="";for(c=0;6>c;c++)d+=Yk(a,c);d=d+"\n"+(Yk(a,6)+Yk(a,7));d+=Yk(a,ok)+Yk(a,pk)+Yk(a,rk);d+=Xk(a,"T")+Xk(a,"N")+Xk(a,"Z")+Xk(a,"V")+Xk(a,"C");b&&(b=d,c=Yk(a,sk)+Yk(a,tk),c+=Yk(a,uk)+Yk(a,vk)+Yk(a,qk),c=c+"\n"+(Yk(a,xk)+Yk(a,mk)+Yk(a,wk)),d=b+("\n"+c));return d}k.ie=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Ph(a,b,c,d,e){var f=[],g;for(g in e){var h=e[g];"number"==typeof h&&(e[g]=h={o:h});var m=h.o,l=h.a;if(void 0!==m){var n=f;m=[m>>>0,g];var q=Qa(n,m,a.ie);0>q&&n.splice(-(q+1),0,m)}l&&(h.a=l.replace(/''/g,'"'))}a.B.push({Hk:b,J:c,If:d,fa:e,fe:f})}function $k(a,b,c){var d=[],e=bk(b)>>>0;for(b=0;b<a.B.length;b++){var f=a.B[b],g=f.J>>>0,h=f.If;if(e>=g&&e<g+h){e=Qa(f.fe,[e-g],a.ie);0<=e?al(a,b,e,d):c&&(e=~e,al(a,b,e-1,d),al(a,b,e,d));break}}return d}
function al(a,b,c,d){var e={},f=a.B[b].fe,g=0,h=null;0<=c&&c<f.length&&(g=f[c][0],h=f[c][1]);h&&(e=a.B[b].fa[h],h="."==h.charAt(0)?null:e.l||h);d.push(h);d.push(g);d.push(e.a);d.push(e.c)}function bl(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return Vj(a)||a.v("no variables"),!0;if(!c[2])return Vj(a,c[1]);if(!c[3])return delete a.i[c[1]],!0;b=Tj(a,c[3]);return void 0!==b?(a.i[c[1]]={value:b,fh:void 0},!0):!1}a.v("invalid assignment:"+b);return!1}
function cl(a,b,c){var d=null;if(b=gk(a,b,!0)){var e=$k(a,b,!0);if(e.length){var f;if(e[0]){var g="";(f=b.J-e[1])&&(g=" + "+Aa(f));f=e[0]+" ("+K(a,e[1])+")"+g;c&&a.v(f);d=f}4<e.length&&e[4]&&(g="",(f=e[5]-b.J)&&(g=" - "+Aa(f)),f=e[4]+" ("+K(a,e[5])+")"+g,c&&a.v(f),d||(d=f))}else c&&a.v("no symbols")}return d}
function Dk(a,b){var c;if(b&&"?"==b[1])a.v("register commands:"),a.v("\tr\tdump registers"),a.v("\trm\tdump misc registers"),a.v("\trx [#]\tset flag or register x to [#]");else{var d=!1,e=a.f;null==c&&(c=!0);if(null!=b&&1<b.length){var f=b[1];if("m"==f)d=!0;else{var g=f.indexOf("\x3d");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.v("missing value for "+b[1]);return}g=Tj(a,b);if(void 0===g)return;b=f.toUpperCase();switch(b){case "SP":case "R6":e.g[6]=g&65535;break;case "PC":case "R7":Fc(e,
g);a.K=X(e.g[7]);break;case "N":e.H=g?32768:0;break;case "Z":e.K=g?0:1;break;case "V":e.F=g?32768:0;break;case "C":e.B=g?65536:0;break;case "PS":$d(e,g);break;case "PI":Pd(e,g);break;case "ER":e.O=g;d=!0;break;case "SL":e.Ea=g|255;break;case "M0":Ld(e,g);d=!0;break;case "M3":Od(e,g);d=!0;break;case "AR":a.g&&(d=a.g,zc(d,d.da=g));d=!0;break;case "DR":a.g&&pc(a.g,g);d=!0;break;case "SR":a.g&&Ac(a.g,g);d=!0;break;default:if("R"==b.charAt(0)&&(b=+b.charAt(1),0<=b&&6>b)){e.g[b]=g&65535;break}a.v("unknown register: "+
f);return}Nc(a.I);a.v("updated registers:")}}a.v(Zk(a,d));c&&(a.K=X(e.g[7]),Ek(a,jk(a,a.K)))}}function dl(a,b){b=Oa(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.v(c[2]):Uj(a,null,c[2].charCodeAt(0)):Tj(a,b,!1)}
function el(a,b,c){if("?"==c)a.v("trace commands:"),a.v("\tt  [#]\ttrace # instructions"),a.v("\ttr [#]\ttrace # instructions with register updates"),a.v("\ttc [#]\ttrace # cycles"),a.v("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Oj(a,c,void 0,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.sa=b;gb(c,function(){return Vb(a,!0)&&Jc(a,e,d,!1)},function(){a.g&&a.g.stop();Nc(a.I,-1);Vb(a,!1)})}}
function Ek(a,b,c,d){if(b=gk(a,b,!0)){void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Oj(a,c.substr(1)),null!=c&&(d=c);else{d=gk(a,c,!0);if(!d||d.J<b.J)return;e=d.J-b.J;if(256<e){a.v("range too large");return}d=-1}c=0;for(var f;0<e&&d--;){f=Ub(a,!1)||a.L?a.A:null;var g=null!=f?"cycles":null,h=$k(a,b),m=b.J;if(h[0]&&d&&(!c&&d||0>h[0].indexOf("+"))){var l=h[0]+":";h[2]&&(l+=" "+h[2]);a.v(l)}h[3]&&(g=h[3],f=null);f=Lk(a,b,g,f);a.v(f);a.K=b;e-=b.J-m;c++}}}
function Kk(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.v(Ck+b):(a.R&&(a.v("ended assemble at "+jk(a,a.P)),a.K=a.P,a.R=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.W=null;if(Tb(a)&&0<b.length){a.R&&(b="a "+jk(a,a.P)+" "+b);var f=!1,g=b.replace(/ +/g," ").split(" ");g[0]=g[0].toLowerCase();if(g&&g.length)for(var h=g[0],m=h.charAt(0),l=1;l<h.length;l++){var n=h.charAt(l);if("?"==m||"r"==m||"a">n||"z"<n){g[0]=h.substr(l);g.unshift(h.substr(0,l));break}}switch(g[0].charAt(0)){case "a":var q=
gk(a,g[1],!0);if(q)if(a.P=q,void 0===g[2])a.v("begin assemble at "+jk(a,q)),a.R=!0,Nc(a.I);else{a.v("not supported yet");var t=[];if(t.length){for(var p=0;p<t.length;p++)a.Md(q,t[p],1);a.v(Lk(a,a.P))}}break;case "b":a:{var w=g[0],B=g[1],A=b;if("?"==B)a.v("breakpoint commands:"),a.v("\tbp #\tset exec breakpoint"),a.v("\tbr #\tset read breakpoint"),a.v("\tbw #\tset write breakpoint"),a.v("\tbc #\tclear breakpoint (* to clear all)"),a.v("\tbl\tlist all breakpoints"),a.v("\tbn [#]\tbreak after # instruction(s)");
else{var G=w.charAt(1);if("l"==G){var Hd=Jk(a,a.b);Hd+=Jk(a,a.M);(Hd+=Jk(a,a.H))||a.v("no breakpoints")}else if("n"==G){var Xb=+B||0;B&&(a.ea=Xb);a.v("break after "+Xb+" instruction(s)")}else if(void 0===B)a.v("missing breakpoint address");else{var ca=X();if("*"!=B&&(ca=gk(a,B,!0),!ca))break a;"c"==G?null==ca.J?(Xj(a),a.v("all breakpoints cleared")):Hk(a,a.b,ca)||Hk(a,a.M,ca)||Hk(a,a.H,ca)||a.v("breakpoint missing: "+jk(a,ca)):null!=ca.J&&(ik(a,ca,A),"p"==G?a.xb(a.b,ca):"r"==G?a.xb(a.M,ca):"w"==G?
a.xb(a.H,ca):a.v("unknown breakpoint command: "+G))}}}break;case "c":var yi=a.I;yi.w&&(yi.w.value="");break;case "d":a:{var bc,mb=g[0],Wa=g[1],nb=g[2],Cl=g[3];if("?"==Wa){var cc="";for(bc in mc)a.ia[bc]&&(cc&&(cc+=","),cc+=bc);cc+=",state,symbols";a.v("dump memory commands:");a.v("\tda [a]        dump info for address a");a.v("\tdb [a] [n]    dump n bytes at address a");a.v("\tdw [a] [n]    dump n words at address a");a.v("\tdd [a] [n]    dump n dwords at address a");a.v("\tds [a] [n]    dump n words at address a as JSON");
a.v("\tdh [p] [n]    dump n instructions from history position p");cc.length&&a.v("dump extension commands:\n\t"+cc)}else if("state"==Wa){var kf=fl(a.I,!0);if("console"==nb)console.log(kf);else{var zi=a.I;zi.w&&(zi.w.value="");kf&&a.v(kf)}}else if("symbols"==Wa)for(var lf=0;lf<a.B.length;lf++){var mf=a.B[lf],dc;for(dc in mf.fa)if("."!=dc.charAt(0)){var Ai=mf.fa[dc].o;if(void 0!==Ai){var Bi=mf.fa[dc].l;Bi&&(dc=Bi);a.v(K(a,Ai)+" "+dc)}}}else{if("d"==mb){for(bc in mc)if(g[1]==bc){var Ci=a.ia[bc];Ci?
(g.shift(),g.shift(),Ci(g)):a.v("no dump registered for "+Wa);break a}Wa||(mb=a.Ja||"dw")}else a.Ja=mb;if("dh"==mb){var Di=Wa,Ei=nb,Fi="",Gi=0,Ja=a.T,Xa=a.j;if(Xa.length){var Ea=+Di||a.ra,Pc=+Ei||10;isNaN(Ea)?Ea=Pc:Fi="more ";Ea>Xa.length&&(a.v("note: only "+Xa.length+" available"),Ea=Xa.length);Ja-=Ea;0>Ja&&(null==Xa[Xa.length-1].J?(Ea=Ja+Ea,Ja=0):Ja+=Xa.length);var nf=[];"call"==Ei&&(Pc=1E5,nf=["CALL"]);for(void 0!==Di&&a.v(Ea+" instructions earlier:");0<Pc&&Ja!=a.T;){var Hi=Xa[Ja++];if(null==Hi.J)break;
var Qc=X(Hi.J),Dl=Ea--,Ii=Lk(a,Qc,"history",Dl);(!nf.length||0<=Ii.indexOf(nf[0]))&&a.v(Ii);Qc.td&&(Ja+=Qc.td,Pc-=Qc.td,Ea-=Qc.td);Ja>=Xa.length&&(Ja=0);a.ra=Ea;Gi++;Pc--}}Gi||(a.v("no "+Fi+"history available"),a.ra=void 0)}else{var ra=gk(a,Wa);if(ra)if("da"==mb){var of=ra.La||65535<ra.J,O=ef(a.f,ra.J||0,of);a.v(Ha("",of?12:19)+ya(ra.J,of?22:17,3)+"  "+u(ra.J,8));6>O.length?(2<O.length&&(a.v("    OFFSET:             "+ya(O[3],13,3)+"  "+u(O[3],8)),a.v("UNIMAP["+za(O[1],2)+"]: "+ya(O[2],22,3)+"  "+
u(O[2],8))),a.v("  PHYSICAL: "+ya(O[0],22,3)+"  "+u(O[0],8))):(a.v("    OFFSET:             "+ya(O[1],13,3)+"  "+u(O[1],8)),a.v("+   "+gl[O[2]]+"PAR"+O[3]+": "+ya(O[4],22,3)+"  "+u(O[4],8)),a.v("\x26  MMUMASK: "+ya(O[5],22,3)+"  "+u(O[5],8)),a.v("\x3d PHYSICAL: "+ya(O[0],22,3)+"  "+u(O[0],8)))}else{var zb=0,pf="ds"==mb;if(nb){if("l"==nb.charAt(0))nb=nb.substr(1)||Cl,zb=Oj(a,nb);else{var Ji=gk(a,nb);Ji&&(zb=Ji.J-ra.J)}0>zb&&(zb=0);65536<zb&&(zb=65536)}var Fl=a.V;ra.V&&(a.V=ra.V);for(var Ab="dd"==mb?
4:"db"==mb?1:2,Qd=Ab*zb||128,qf=pf?16:a.V,Gl=(Qd+qf-1)/qf|0||1,Bb="";Gl--&&0<Qd;){var Cb="",Ki="";Wa=jk(a,ra);for(var Rd=qf,Sd=0,Td=0;0<Rd&&0<Qd;){var ec=1,rf=1==Ab?a.Ld(ra,ec):a.Qa(ra,ec=2);Sd|=rf<<(Td<<3);Td+=ec;Td==Ab&&(pf?(Cb&&(Cb+=","),Cb+="0x"+v(Sd,Ab<<1)):(Cb+=K(a,Sd,Ab<<3),Cb+=1==Ab?9==Rd?"-":" ":"  "),Sd=Td=0);Rd-=ec;for(Qd-=ec;1==Ab&&ec--;){var sf=rf&255;Ki+=32<=sf&&127>sf?String.fromCharCode(sf):".";rf>>=8}}Bb&&(Bb+="\n");Bb=pf?Bb+(Cb+","):Bb+(Wa+":  "+Cb+(0==Rd?" "+Ki:""))}Bb&&a.v(Bb);
a.Ea=ra;a.V=Fl}}}}break;case "e":if("else"==g[0])break;var tf=g[0],uf=g[1];if("eb"==tf){var Rc=1;var Li=255;var Mi=a.Ld;var Ni=a.Md}else"e"==tf||"ew"==tf?(Rc=2,Li=65535,Mi=a.Qa,Ni=a.He):uf=null;if(null==uf)a.v("edit memory commands:"),a.v("\teb [a] [...]  edit bytes at address a"),a.v("\tew [a] [...]  edit words at address a");else{var Ud=gk(a,uf);if(Ud)for(var Vd=2;Vd<g.length;Vd++){var Sc=Tj(a,g[Vd]);if(void 0===Sc){a.v("unrecognized value: "+g[Vd]);break}Sc&~Li&&a.v("warning: "+v(Sc)+" exceeds "+
Rc+"-byte value");a.v("changing "+jk(a,Ud)+(E(a,16)?"":" from "+K(a,Mi.call(a,Ud),Rc<<3))+" to "+K(a,Sc,Rc<<3));Ni.call(a,Ud,Sc,Rc)}}break;case "g":a:{var Oi=g[1],Hl=b;if(void 0!==Oi){var vf=gk(a,Oi,!0);if(!vf)break a;ik(a,vf,Hl);a.xb(a.b,vf,!0)}Ak(a,!0,c)}break;case "h":a.flags.U?(c||a.v("halting"),yk(a)):Ub(a,!0)||c||a.v("already halted");break;case "i":if("if"==g[0]){var Tc=b.substr(2);Tc=Oa(Tc);if(Tj(a,Tc)){c||a.v("true: "+Tc);var Pi=!0}else c||a.v("false: "+Tc),Pi=!1;Pi||(d=!1);break}f=!0;break;
case "k":var Il=g[0];if("?"==g[1])a.v("stack trace commands:"),a.v("\tk\tshow frame addresses"),a.v("\tks\tshow symbol information");else{var wf=0,xf=X(),Uc=X(a.f.g[6]);for(a.v("stack trace for "+jk(a,Uc));10>wf;){for(var Db=null,Jl=256;65536>Uc.J>>>0;){xf.J=a.Qa(Uc,2);if(null==Uc.J||!Jl--)break;if(!(xf.J&1)){for(var Kl=a,Wd=xf,Qi=null,Vc=Wd.J,Ri=Vc,yf=1;6>=yf&&Vc;yf++){if(2<yf){Wd.J=Vc;var Xd=Lk(Kl,Wd);if(0<=Xd.indexOf("JSR")){var Si=Xd.indexOf(" ");if(Vc+(Xd.indexOf(" ",Si+1)-Si-1)/2==Ri){Qi=Xd;
break}}}Vc-=2}Wd.J=Ri;if(Db=Qi)break}}if(!Db||null==Db)break;var Ti=null;if("ks"==Il){var Ui=Db.match(/[0-9A-F]+$/);Ui&&(Ti=cl(a,Ui[0]))}Db=Ha(Db,50)+"  ;"+(Ti||"stack\x3d"+jk(a,Uc));a.v(Db);wf++}wf||a.v("no return addresses found")}break;case "l":if("ln"==g[0]){cl(a,g[1],!0);break}f=!0;break;case "m":a:{var Ya,Za=null,T=g[1];"?"==T&&(T=void 0);if(void 0!==T){var ob=0;if("all"==T)ob=1610610687,T=null;else if("on"==T)Za=!0,T=null;else if("off"==T)Za=!1,T=null;else{"keys"==T&&(T="key");"kbd"==T&&(T=
"keyboard");for(Ya in mc)if(T==Ya){ob=mc[Ya];Za=!!(a.ga&ob);break}if(!ob){a.v("unknown message category: "+T);break a}}if(ob)if("on"==g[2])a.ga|=ob,Za=!0;else if("off"==g[2]&&(a.ga&=~ob,Za=!1,536870912==ob)){for(var Vi=1E3<=a.N.length?a.N.length-1E3:0;Vi<a.N.length;)a.v(a.N[Vi++]);a.N=[]}}var Ll=0,Wc="";for(Ya in mc)if(!T||T==Ya){var Ml=!!(a.ga&mc[Ya]);if(null===Za||Za==Ml)Wc&&(Wc+=","),++Ll%10||(Wc+="\n\t"),"key"==Ya&&(Ya="keys"),Wc+=Ya}void 0===T&&a.v("message commands:\n\tm [category] [on|off]\tturn categories on/off");
a.v((null!==Za?Za?"messages on:  ":"messages off: ":"message categories:\n\t")+(Wc||"none"));Yj(a)}break;case "p":if("print"==g[0]){dl(a,b.substr(5));break}var Nl=g[0];if("?"==g[1])a.v("step commands:"),a.v("\tp\tstep over instruction"),a.v("\tpr\tstep over instruction with register update");else{var Wi="pr"==Nl?1:0,Xi=1+Wi;if(a.L)a.v("step in progress");else{var Yd=X(a.f.g[7]),fc=a.Qa(Yd);3==fc||4==fc||34816==(fc&65280)||32256==(fc&65024)||35072==(fc&65280)?(a.L=Xi,hk(Yd,2)):2048==(fc&65024)&&(Lk(a,
Yd),a.L=Xi);a.L?(a.xb(a.b,Yd,!0),Ak(a)||(a.I&&Ge(a.I),a.L=0)):el(a,Wi?"tr":"t")}}break;case "r":if("reset"==b){a.I&&a.I.reset();break}Dk(a,g);break;case "s":a:switch(g[1]){case "base":if(g[2]){var Xc=+g[2];if(8==Xc||10==Xc||16==Xc)a.V=Xc;else{a.v("invalid base: "+Xc);break}}a.v("default base: "+a.V);break;case "cs":var Yc;void 0!==g[3]&&(Yc=+g[3]);switch(g[2]){case "int":a.f.Ib=Yc;break;case "start":a.f.kc=Yc;break;case "stop":a.f.Mb=Yc;break;default:a.v("unknown cs option");break a}void 0!==Yc&&
ye(a.f);a.v("checksums "+(a.f.flags.Jb?"enabled":"disabled"));break;case "sp":void 0!==g[2]&&(De(a.f,+g[2])||a.v("warning: using 1x multiplier, previous target not reached"));a.v("target speed: "+(a.f.tb.toFixed(2)+"Mhz")+" ("+a.f.kb+"x)");break;default:if(g[1]){a.v("unknown option: "+g[1]);break}case "?":a.v("debugger options:"),a.v("\tbase #\t\tset default base to #"),a.v("\tcs int #\tset checksum cycle interval to #"),a.v("\tcs start #\tset checksum cycle start count to #"),a.v("\tcs stop #\tset checksum cycle stop count to #"),
a.v("\tsp #\t\tset speed multiplier to #")}break;case "t":el(a,g[0],g[1]);break;case "u":Ek(a,g[1],g[2],8);break;case "v":if("var"==g[0]){bl(a,b.substr(3))||(d=!1);break}if("ver"==g[0]){a.v((Yb||"PDP11")+" version 1.74.1 ("+a.f.ha+",RELEASE"+($b?",TYPEDARRAYS":Zb?",BYTEARRAYS":",LONGARRAYS")+")");a.v(window?window.navigator.userAgent:"");break}f=!0;break;case "?":if(g[1]){dl(a,b.substr(1));break}var zf="commands:",Af;for(Af in hl)zf+="\n"+Ha(Af,9)+hl[Af];Jf(a)||(zf+="\nnote: history disabled if no exec breakpoints");
a.v(zf);break;default:f=!0}f&&(a.v("unknown command: "+b),d=!1)}}catch(Zi){a.v("debugger error: "+(Zi.stack||Zi.message)),d=!1}return d}function Be(a,b,c){b=Kj(a,b,c);for(var d in b)if(!Kk(a,b[+d]))return!1;return!0}
var hl={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Nk=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),
ok=20,pk=21,qk=22,rk=23,sk=24,tk=25,uk=26,vk=27,mk=28,wk=29,xk=30,kk={SP:6,PC:7,PS:ok,PI:pk,ER:qk,SL:rk,M0:sk,M1:tk,M2:uk,M3:vk,AR:mk,DR:wk,SR:xk},nk="R0 R1 R2 R3 R4 R5 SP PC A0 A1 A2 A3 A4 A5 A6 A7 S0 S1 S2 S3 PS PI ER SL M0 M1 M2 M3 AR DR SR".split(" "),gl="KI KD SI SD ?? ?? UI UD".split(" "),Uk=7,Vk=56,Z=Vk|Uk,Tk=4032,Y=4096,Pk=8192,Qk=12288,Rk=24576,Sk=32768,Ok=61440,ak={61440:{4096:[62,Tk,Z],8192:[47,Tk,Z],12288:[18,Tk,Z],16384:[14,Tk,Z],20480:[16,Tk,Z],24576:[3,Tk,Z],36864:[63,Tk,Z],40960:[48,
Tk,Z],45056:[19,Tk,Z],49152:[15,Tk,Z],53248:[17,Tk,Z],57344:[94,Tk,Z]},65024:{2048:[57,448,Z],28672:[100,Z,448],29184:[101,Z,448],29696:[102,Z,448],30208:[103,Z,448],30720:[104,448,Z],32256:[105,448,Pk]},65280:{256:[27,Y],512:[24,Y],768:[10,Y],1024:[11,Y],1280:[22,Y],1536:[12,Y],1792:[20,Y],32768:[25,Y],33024:[23,Y],33280:[13,Y],33536:[21,Y],33792:[28,Y],34048:[29,Y],34304:[8,Y],34560:[9,Y],34816:[106,Sk],35072:[107,Sk]},65472:{64:[56,Z],192:[95,Z],2560:[39,Z],2624:[49,Z],2688:[53,Z],2752:[51,Z],
2816:[67,Z],2880:[1,Z],2944:[77,Z],3008:[97,Z],3072:[73,Z],3136:[71,Z],3200:[6,Z],3264:[4,Z],3328:[58,Rk],3392:[60,Z],3456:[65,Z],3520:[96,Z],35328:[40,Z],35392:[50,Z],35456:[54,Z],35520:[52,Z],35584:[68,Z],35648:[2,Z],35712:[78,Z],35776:[98,Z],35840:[74,Z],35904:[72,Z],35968:[7,Z],36032:[5,Z],36096:[66,Z],36160:[59,Z],36224:[64,Z],36288:[61,Z]},65528:{128:[76,Uk],152:[108,Qk]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],
166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],191:[79]}},Mk=[0],ek=[58,60,65,96,110,100,101,102,103,104,105],fk=[108,59,64],zk=1E3,Ck="\x3e\x3e ";jb(function(){for(var a=C(document,z,"debugger"),b=0;b<a.length;b++){var c=a[b],d=Hb(c);d=new Wj(d);Gb(d,c)}});
function il(a,b,c){y.call(this,"Computer",a,33554432);this.flags.aa=!1;this.O=null;jl(this,b);this.L=we(this,"autoPower",a,6);this.j=0;this.T=+a.busWidth||+a.buswidth;this.H=this.A=this.K=null;this.F=this.R=!1;this.B=this.u=null;this.P=this.M=this.N=!1;this.url=we(this,"url")||"";(Math.random()+.1).toString(36);this.g=kl(this);if(this.f=Kb("CPU",this.id)){this.D=Kb("Debugger",this.id);this.C=new fd({id:this.gb+".bus",busWidth:this.T},this.f,this.D);var d=Ib(this.id);if(this.w=(this.i=Kb("Panel",this.id))&&
this.i.G.print)for(b=0;b<d.length;b++){var e=d[b];e.S=this.i.S;e.print=this.i.print;e.v=this.i.v}this.v(Yb+" v1.74.1\nCopyright \u00a9 2012-2019 Jeff Parsons \x3cJeff@pcjs.org\x3e\nLicense: GPL version 3 or later (http://gnu.org/licenses/gpl.html)");this.v("Portions adapted from the PDP-11/70 Emulator by Paul Nankervis \x3chttp://skn.noip.me/pdp11/pdp11.html\x3e");for(b=0;b<d.length;b++)e=d[b],e.za&&e.za(this,this.C,this.f,this.D);b=null;e=we(this,"resume",a);void 0!==e&&(1<e.length?b=this.A=e:this.b=
parseInt(e,10));var f;if(a=we(this,"state")||(f=!0,a.state))this.K=b=a,f||(this.F=!0,this.b=ll),this.b&&(this.B=new H(this,"1.74.1"),this.B.load()?b=null:delete this.B);!b&&this.b&&(b=ml(this))&&(this.F=!0);if(b){var g=this;Ra(b,null,!0,function(a,b,c){c?(g.A=null,g.F=!1,g.S("Unable to load machine state from server (error "+c+(b?": "+Oa(b):"")+")")):(g.H=b,g.R=!0);D(g)})}else D(this);this.G.power||(this.L=!0);!c&&this.L&&this.wait(this.nc)}else x("Unable to find CPU component")}r(il,y);
function jl(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){x(d.message+" ("+c+")")}}a.O=b}function we(a,b,c,d){var e=b.toLowerCase();e=eb(b)||eb(e);void 0===e&&a.O&&(e=a.O[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}k=il.prototype;
k.wait=function(a,b){for(var c=this,d=Ib(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!Tb(f)){Tb(f,function(){c.wait(a,b)});return}}a.call(this,b)};function nl(a,b){var c=new H(a,"1.74.1",ol);if(c.load()&&pl(c)){var d=c.get(ql),e=b?b.get(ql):"unknown";d!=e&&(a.S("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}
k.nc=function(a){void 0===a&&(a=this.b||(this.H?rl:ll));if(!this.j){this.j++;var b=!1,c=!1;this.N=!1;var d=this.B||new H(this,"1.74.1");if(a==sl)b=!0;else if(a>ll){if(d.load(this.H)){this.u=new H(this,"1.74.1",tl);this.u.load()&&(ul(),a=vl,wl(this.u));this.u.set(ql,Ia("%T",new Date));this.u.store();var e=this.b&&!this.F;if(a==rl||Eb("Click OK to restore the previous "+Yb+" machine state, or CANCEL to reset the machine.")){if(c=pl(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?d.load(g):("error"==
f&&"no machine state"!=g?(this.S("Error: "+g),"unable to verify user"==g&&(bb(xl,""),this.g=null)):this.v(f+": "+g),wl(d),d.load()?(c=pl(d),e=!0):c=!1))}e&&nl(this,c?d:null)}else a==vl&&d.clear()}else nl(this);delete this.H;delete this.B}e=Ib(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.f&&(c=yl(this,g,d,b,c));b=[d,a,c];a!=sl?this.wait(this.ke,b):this.ke(b)}};
function yl(a,b,c,d,e){if(!b.flags.aa){b.flags.aa=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/-[0-9]+\./i,".")))),"string"===typeof f&&(f=null),!b.Ba(f,d)&&f&&(x("Unable to restore state for "+b.type),a.K&&!a.R?(c.clear(),a.b=ll,window&&window.location.reload()):a.N=!0,b.Ba(null),e=!1),!d&&b.Rd){var g=b.Rd.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(h){x("Error restoring state for "+b.type+" ("+h.message+")")}}return e}
k.ke=function(a){var b=a[0],c=0>a[1];a=a[2];this.P=!0;this.flags.aa=!0;var d=this.G.power;d&&(d.textContent="Shutdown");this.f&&(yl(this,this.f,b,c,a),Nc(this,-2),this.f.pa());this.N&&(ul(),b.clear());!c&&this.u&&(this.u.clear(),delete this.u);this.j=0};function ul(){lb("There may be a problem with your "+Yb+" machine.")}
function fl(a,b,c){var d="none";if(a.j)return null;a.j--;var e=new H(a,"1.74.1"),f=new H(a,"1.74.1",ol),g=Ia("%T",new Date);f.set(ql,g);e.set(ql,g);e.set(zl,"1.74.1");e.set(Al,window?window.location.href:null);e.set(Bl,window?window.navigator.userAgent:"");if(a.f&&a.f.Aa){c&&(b&&(a.f.flags.pa=a.f.flags.U),I(a.f));var h=a.f.Aa(b,c);"object"===typeof h&&e.set(a.f.id,h);c&&(a.f.flags.aa=!1,!1===h&&(d=null))}g=Ib(a.id);for(var m=0;m<g.length;m++){var l=g[m];l.flags.aa&&(l.Aa&&(h=l.Aa(b,c),"object"===
typeof h&&e.set(l.id,h)),c&&(l.flags.aa=!1,!1===h&&(d=null)))}d&&(c?(g=h=!1,b?(a.g&&El(a,a.g,e.toString()),f.store()&&e.store()||(d=null,h=g=!0)):a.b&&(h=!0,g=a.b==Ol),h&&e.clear(g)):d=e.toString());c&&(a.flags.aa=!1,b=a.G.power)&&(b.textContent="Power");a.j=0;return d}
k.reset=function(){this.flags.reset=!0;this.C&&this.C.reset&&(F(this,"Resetting "+this.C.type),this.C.reset());this.f&&this.f.reset&&(F(this,"Resetting "+this.f.type),this.f.reset());for(var a=Ib(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.C&&c!==this.f&&c.reset&&(F(this,"Resetting "+c.type),c.reset())}this.flags.reset=!1;Nc(this,-1)};k.start=function(a,b){for(var c=Ib(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}Nc(this,-1)};
k.stop=function(a,b){for(var c=Ib(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}Nc(this,-1)};
function Nc(a,b){if(a.f){var c=a.f,d=b||0,e=c.G.speed;e&&(0>=d||30<=(c.Wc+=d))&&(e.textContent=c.flags.U?c.sb.toFixed(2)+"Mhz":"Stopped",c.Wc=0)}if(a.i&&(a=a.i,b=b||0,a.w)){c=a.f.flags.U;d=!!(a.f.i&8);if(0>=b||60<=(a.u+=b)){for(e=0;e<a.f.g.length;e++)Dc(a,"R"+e,a.f.g[e]);e=Zd(a.f);Dc(a,"PS",e);Dc(a,"NF",e&8?1:0,1);Dc(a,"ZF",e&4?1:0,1);Dc(a,"VF",e&2?1:0,1);Dc(a,"CF",e&1?1:0,1);a.u=0}-1>b?a.da=a.f.g[7]:0<b&&c&&!d&&(a.da=a.f.Ra);zc(a,a.da);qc(a,a.Ab);b=a.f;b=b.ub?b.W&16?1:2:4;dd(a,"B22",b&1);dd(a,"B18",
b&2);dd(a,"B16",b&4)}}
k.ua=function(a,b,c){var d=this;switch(b){case "power":return this.G[b]=c,c.onclick=function(){d.j||(d.flags.aa?fl(d,!1,!0):d.wait(d.nc))},!0;case "reset":return this.G[b]=c,c.onclick=function(){if(d.flags.aa&&!d.j)if(d.b&&!d.A){var a=Eb("Click OK to save changes to this "+Yb+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");fl(d,a,!0);!a&&d.K?window&&window.location.reload():(a||(d.M=!0),d.nc(ll),d.M=!1)}else d.reset(),d.f&&!d.D&&d.f.pa()},!0;case "save":if(Da(window?window.location.hostname:
"localhost","pcjs.org"))c.parentNode.removeChild(c);else return this.G[b]=c,c.onclick=function(){var a=kl(d,!0);if(a){var b=!!(d.b&&!d.A||d.K),c=fl(d,b);b?El(d,a,c):d.S("Resume disabled, machine state not saved")}},!0}return!1};
function kl(a,b){var c=a.g;c||((c=ab(xl),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Pl(a,c))||a.S("The user ID is invalid.")):b&&a.S("Browser local storage is not available"));return c}
function Pl(a,b){a.g=null;b=Ra(Ta()+"/api/v1/user?req\x3dverify\x26user\x3d"+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(bb(xl,b.data),a.g=b.data)}catch(d){x(d.message+" ("+c+")")}return a.g}function ml(a){var b=null;a.g&&(b=Ta()+"/api/v1/user?req\x3dload\x26user\x3d"+a.g+"\x26state\x3d"+Ql(a,"1.74.1"));return b}
function El(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Ql(a,"1.74.1");d.data=c;b=Ra(Ta()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.S("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.S(c),bb(xl,""),a.g=null)}}
function ei(a){var b;a=Ib(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function Ge(a,b){if(a.w){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.w.focus();!b&&window&&window.scrollTo(c,d)}}var tl="failsafe",ol="validate",ql="timestamp",zl="version",Al="url",Bl="browser",xl="user",sl=-1,ll=0,rl=1,vl=2,Ol=3;
jb(function(){for(var a=C(document,z+"-machine"),b=0;b<a.length;b++){var c=a[b],d=Hb(c);c=C(c,z,"computer");for(var e=0;e<c.length;e++){var f=c[e],g=Hb(f);g=new il(g,d,!0);Gb(g,f);g.L&&g.wait(g.nc)}}});kb.show.push(function(){for(var a=C(document,z,"computer"),b=0;b<a.length;b++){var c=Hb(a[b]);if(c=Kb("Computer",c.id))c.flags.Ed=!1,c.P&&!c.flags.aa&&c.nc(sl)}});
kb.exit.push(function(){for(var a=C(document,z,"computer"),b=0;b<a.length;b++){var c=Hb(a[b]);if(c=Kb("Computer",c.id))c.flags.Ed=!0,c.flags.aa&&fl(c,!(!c.b||c.A),!0)}});function H(a,b,c){this.id=a.id;this.b="";this.f={};this.g=this.C=!1;this.key=Ql(a,b,c);wl(this,a.sf)}k=H.prototype;k.set=function(a,b){try{this.f[a]=b}catch(c){}};k.get=function(a){return this.f[a]||null};k.data=function(){return this.f};
k.load=function(a){return a?(this.b=a,this.g=!0,this.C=!1,!0):this.g?!0:Va()&&(a=ab(this.key))?(this.b=a,this.g=!0):!1};function pl(a){var b=!0;if(!a.C)try{a.f=JSON.parse(a.b),a.C=!0}catch(c){x(c.message||c),b=!1}return b}k.store=function(){var a=!0;if(Va()){var b=JSON.stringify(this.f);bb(this.key,b)||(x("Unable to store "+b.length+" bytes in browser local storage"),a=!1)}return a};k.toString=function(){return this.f?JSON.stringify(this.f):this.b};
function wl(a,b){a.b="";a.f={};a.g=a.C=!1;b&&a.set("parms",b)}k.clear=function(a){wl(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function Ql(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Rl=0;
function Sl(a,b,c,d,e,f,g,h){g("Loading "+a+"...");Ra(a,null,!0,function(m,l,n){n?(l||(l="unable to load "+a+" ("+n+")"),h(l,null)):Tl(l,a,b,c,d,e,f,g,h)})}
function Tl(a,b,c,d,e,f,g,h,m){function l(a,h){if(h)m(h,null);else{if(c){wb(c,b,a);(h=b)&&0>h.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(h=window.location.pathname+h);e?"}"==e.slice(-1)?(e=e.slice(0,-1),1<e.length&&(e+=",")):e='{state:"'+e+'",':e="{";e+='url:"'+h+'"}';"object"==typeof resources&&(h=null);e=e.replace(/\$/g,"$$$$");if(f){var l=a.match(/(<machine[^>]*\sclass=)(['"])(.*?)(\2.*?>)/);l&&(a=a.replace(l[0],l[1]+l[2]+f+l[4]),f="")}a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,
"$1$2"+c+"$2"+(f?' class\x3d"'+f+'"':"")+(e?" parms\x3d'"+e+"'":"")+(h?' url\x3d"'+h+'"':""))}g||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+d+"$2"));h=null;if("\x3c"==a.charAt(0))try{g||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(h=new window.ActiveXObject("Microsoft.XMLDOM"),h.async=!1,h.loadXML(a)):h=(new window.DOMParser).parseFromString(a,
"text/xml")}catch(p){h=null,a=p.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);m(a,h)}}a?g?Ul(a,h,l):l(a,""):m("no data"+(b?" for file: "+b:""),null)}
function Ul(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");Ra(e,null,!0,function(f,g,h){if(h||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+h+")");else{if(f=d[3])if(h=g.match(new RegExp("\x3c"+d[1]+"[^\x3e]*\x3e"))){for(var m=h[0],l,n=/( [a-z]+=)(['"])(.*?)\2/gi;l=n.exec(f);)m=0>m.toLowerCase().indexOf(l[1].toLowerCase())?m.replace("\x3e",l[0]+"\x3e"):m.replace(new RegExp(l[1]+"(['\"])(.*?)\\1"),l[0]);h[0]!=m&&(g=g.replace(h[0],m))}else{c(a,"missing \x3c"+
d[1]+"\x3e in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],g);Ul(a,b,c)}})}else c(a,"")}
function Vl(a,b,c,d,e,f){function g(a){if(void 0===l){var b=m&&C(m,"machine-warning");l=b&&b[0]||m}l&&(l.innerHTML=Fa(a))}function h(a){g("Error: "+a);n&&(--Rl||rb(!0));n=!1}var m,l,n=!0;c||(c="machine.xml",d||(d="components.xsl"));Rl++;xb[b]={};try{if(m=document.getElementById(b)){var q;if("object"==typeof resources&&(q=resources.css)){var t=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.type="text/css";p.styleSheet?p.styleSheet.cssText=q:p.appendChild(document.createTextNode(q));
t.appendChild(p)}d||(q=a,"pdp"==a.substr(0,3)&&(q="pdpjs"),d="/versions/"+q+"/1.74.1/components.xsl");q=function(e,f){f?Sl(d||"","",a,"","",!1,g,function(a,e){if(e)if(wb(b,d||"",a),g("Processing "+c+"..."),window.ActiveXObject||"ActiveXObject"in window)(e=f.transformNode(e))?(m.outerHTML=e,--Rl||rb(!0)):h("transformNodeToObject failed");else if(document.implementation&&document.implementation.createDocument){a=new XSLTProcessor;a.importStylesheet(e);var l=a.transformToFragment(f,document);if(l){var n=
m.parentNode;if(n){a=e=0;var p=m.getBoundingClientRect();0>p.bottom&&(e=window.scrollX,a=window.scrollY);n.replaceChild(l,m);(m=document.getElementById(b))&&0>p.bottom&&(l=m.getBoundingClientRect(),a=window.performance&&window.performance.navigation.type==window.performance.navigation.TYPE_RELOAD?0:a+Math.ceil(l.height-p.height),window.scrollTo(e,a));--Rl||rb(!0)}else h("invalid machine element: "+b)}else h("transformToFragment failed")}else h("unable to transform XML: unsupported browser");else h(a)}):
h(e)};"\x3c"!=c.charAt(0)?Sl(c,b,a,e||"",f||"",!0,g,q):Tl(c,"",b,a,e||"",f||"",!1,g,q)}else h("missing machine element: "+b)}catch(w){h(w.message)}return n}window.embedPDP10=function(a,b,c,d,e){rb(!1);return Vl("pdp10",a,b,c,d,e)};window.embedPDP11=function(a,b,c,d,e){rb(!1);return Vl("pdp11",a,b,c,d,e)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete Mb[c],d=!0;else if("string"==typeof f&&!Mb[c]){d=!0;e=Mb;for(var g=c,h=f.length,m=[],l=[],n="",q=null,t=0;t<h;t++){var p=f[t];if('"'==p||"'"==p)q&&p!=q?n+=p:(q?q=null:q=p,n&&(l.push(n),n=""));else{if(!q){if("\r"==p||"\n"==p)p=";";if(" "==p||"\t"==p||";"==p){n&&(l.push(n),n="");";"==p&&l.length&&(m.push(l),l=[]);continue}}n+=p}}n&&l.push(n);l.length&&m.push(l);e[g]=m;Lb(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=Kb(d,c+".machine"))&&(h=g.exports)&&(h=h[e]))return h.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=rb;window.sendEvent=tb;})()
//# sourceMappingURL=pdp11.js.map
