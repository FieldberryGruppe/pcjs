(function(){/*
 https://www.pcjs.org/modules/devices/lib/webio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/device.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/defs.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/numio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/stdio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/dbgio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/memory.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/ports.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/input.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/led.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/monitor.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/ram.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/rom.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/time.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/vt100/chips.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/vt100/kbd.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/vt100/video.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu8080.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/dbg8080.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/machine.js (C) Jeff Parsons 2012-2019
*/
var f;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ca(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:aa(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ea="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},fa;
if("function"==typeof Object.setPrototypeOf)fa=Object.setPrototypeOf;else{var ha;a:{var ia={Ad:!0},ja={};try{ja.__proto__=ia;ha=ja.Ad;break a}catch(a){}ha=!1}fa=ha?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=fa;
function m(a,b){a.prototype=ea(b.prototype);a.prototype.constructor=a;if(ka)ka(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Cj=b.prototype}var la="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ma="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function na(a,b){if(b){var c=ma;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&la(c,a,{configurable:!0,writable:!0,value:b})}}na("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});na("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});na("Number.parseInt",function(a){return a||parseInt});
function oa(){oa=function(){};ma.Symbol||(ma.Symbol=pa)}function qa(a,b){this.a=a;la(this,"description",{configurable:!0,writable:!0,value:b})}qa.prototype.toString=function(){return this.a};var pa=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new qa("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function ra(){oa();var a=ma.Symbol.iterator;a||(a=ma.Symbol.iterator=ma.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&la(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return sa(aa(this))}});ra=function(){}}function sa(a){ra();a={next:a};a[ma.Symbol.iterator]=function(){return this};return a}
function ta(a,b){ra();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}na("Array.prototype.keys",function(a){return a?a:function(){return ta(this,function(b){return b})}});
na("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});var va,wa=new ArrayBuffer(2);(new DataView(wa)).setUint16(0,256,!0);va=256===(new Uint16Array(wa))[0];function xa(){}var q={};q.Defs=xa;function ya(){}m(ya,xa);
function za(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var g;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(g=parseInt(a,b))){e&&(0>g&&(g+=Math.pow(2,36)),g=0<e?g*Math.pow(2,e):Math.trunc(g/Math.pow(2,-e)));var h=g}}return h}
function Ba(a,b,c,d,e){d=void 0===d?0:d;var g=void 0===g?0:g;var h="",k="",l=-1;c||(c=a.ea||10);d&&(l=Math.ceil(d/Math.log2(c)));if(void 0==e)switch(c){case 8:e="0o";break;case 16:e="0x";break;case 10:k=".";default:e=""}isNaN(b)||"number"!=typeof b?(b=void 0,e=k=""):(0>b&&-1<b&&(b=-1),d&&(0>b&&(b+=Math.pow(2,d)),b>=Math.pow(2,d)&&(l=Math.ceil(Math.log(b)/Math.log(c)))));for(a=g||-1;l--;){a||(h=","+h,a=g);if(void 0==b){if(h="?"+h,0>l)break}else{d=b%c;d+=0<=d&&9>=d?48:55;h=String.fromCharCode(d)+h;
if(!b&&0>l)break;b=Math.trunc(b/c)}a--}return e+h+k}function Ca(a,b){var c=a/t|0,d=b/t|0;return(a&b)==(b|0)&&(c&d)==d}var t=Math.pow(2,32);q.NumIO=ya;function Da(){}m(Da,ya);f=Da.prototype;f.flush=function(){var a=Ea;Ea="";this.La(a)};f.wi=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return void 0===b[0]?new Date(Date.now()):"string"===typeof b[0]?new Date(b[0]+" "+(b[1]||"00:00:00 GMT")):void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,ca(b)))};
f.La=function(a,b){b||(b=a.lastIndexOf("\n"),0<=b&&(console.log(Ea+a.substr(0,b)),Ea="",a=a.substr(b+1)));Ea+=a};function u(a,b,c){a.La(b+"\n",c)}f.K=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];this.La(this.H.apply(this,[a].concat(ca(c))))};
f.H=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),g=0,h;for(h=0;h<e.length-6;h+=6){d+=e[h];var k=e[h+5],l="ACDFHIMNSTWYbdfjcsoXx%".indexOf(k);if(0>l)d+="%"+e[h+1]+e[h+2]+e[h+3]+e[h+4]+k;else{if(g<c.length){var n=c[g];"%"!=k&&g++}else n=c[c.length-1];var p=e[h+1],y=e[h+2];"*"==y?(y=n,n=g<c.length?c[g++]:c[c.length-1]):y=+y||0;var v=e[h+3];v=v?+v.substr(1):-1;var r=0<=p.indexOf("#"),w=0<=p.indexOf("0"),
x=null,z=0,C="";l=12>l&&"object"!=typeof n?this.wi(n):n;switch(k){case "C":n=r?"#":"";d+=isNaN(l.getTime())?void 0:this.H(this.H("%%%sW, %%%sF %%%sD, %%%sY",n),l);continue;case "D":n=r?l.getUTCDate():l.getDate();k="d";break;case "A":case "H":case "I":n=r?l.getUTCHours():l.getHours();"A"==k?(n=12>n?"am":"pm",k="s"):("I"==k&&(n=n?12<n?n-12:n:12),k="d");break;case "F":case "M":n=r?l.getUTCMonth():l.getMonth();"F"==k?(n=Fa[n],k="s"):(n++,k="d");break;case "N":n=r?l.getUTCMinutes():l.getMinutes();k="d";
break;case "S":n=r?l.getUTCSeconds():l.getSeconds();k="d";break;case "T":n=r?"#":"";d+=isNaN(l.getTime())?void 0:this.H(this.H("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",n),l);continue;case "W":n=Ga[r?l.getUTCDay():l.getDay()];k="s";break;case "Y":n=r?l.getUTCFullYear():l.getFullYear(),0<v&&(n%=Math.pow(10,v),v=-1),k="d"}switch(k){case "b":d+=n?"true":"false";break;case "d":n=Math.trunc(n);case "f":n=+n;k=n+"";0<=v&&(k=n.toFixed(v));k.length<y&&(w?(0>n&&(y--,k=k.substr(1)),k=("0000000000"+k).slice(-y),
0>n&&(k="-"+k)):k=("          "+k).slice(-y));d+=k;break;case "j":d+=JSON.stringify(n,null,y||void 0);break;case "c":n="string"==typeof n?n[0]:String.fromCharCode(n);case "s":if(void 0!==n)for("string"!=typeof n&&(n=n.toString()),0<=v&&(n=n.substr(0,v));n.length<y;)n=0<=p.indexOf("-")?n+" ":" "+n;d+=n;break;case "o":z=8,r&&(C="0");case "X":x=Ha;case "x":k="";z||(z=16);!C&&r&&(C="0x");x||(x=Ia);"string"==typeof n&&(n=Number.parseInt(n,n.match(/(^0x|[a-f])/i)?16:10));w&&!y&&(y=Math.abs(n),y=255>=y?
2:65535>=y?4:4294967295>=y?8:9,y+=C.length);y-=C.length;do v=n&z-1,n>>>=16==z?4:3,w||!k||v||n?k=x[v]+k:(C&&(k=C+k,C=""),0<y&&(k=" "+k));while(0<--y||n);d+=C+k;break;case "%":d+="%";break;default:d+="(unimplemented printf type %"+k+")"}}}return d+=e[h]};var Ea="",Ia="0123456789abcdef",Ha="0123456789ABCDEF",Ga="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Fa="January February March April May June July August September October November December".split(" ");q.StdIO=Da;
var Ja=0,A={all:0xffffffffffff,buffer:0x800000000000};function Ka(){this.aa={};this.Ba=[];this.sa=0;this.status="OK"}var La;m(Ka,Da);
Ka.prototype.Ma=function(a,b){var c=this;switch(a){case Ma.Gc:b.onclick=function(){var d=c.Na(Ma.ab,!0);d&&(d.value="")};break;case Ma.ab:b.value="",b.addEventListener("keydown",function(d){d=d||window.event;var e=d.which||d.keyCode;if(e){var g=!1,h,k=b.value,l=k.lastIndexOf("\n");e==B.mb&&b.selectionStart<=l+1&&(g=!0);e==B.kc?(g=!0,0<c.sa&&(h=c.Ba[--c.sa])):e==B.Gb&&(g=!0,c.sa<c.Ba.length&&(h=c.Ba[++c.sa]||""));g&&d.preventDefault();void 0!=h&&(b.value=k.substr(0,l+1)+h)}}),b.addEventListener("keypress",
function(d){d=d||window.event;var e=d.which||d.keyCode;if(e){e=String.fromCharCode(e);var g=b.value,h=g.lastIndexOf("\n");b.selectionStart<=h&&b.setSelectionRange(g.length,g.length);d.stopPropagation();"@"==e&&0<c.sa&&h+1==g.length&&(b.value+=c.Ba[--c.sa],e="\r");"\r"==e&&(d.preventDefault(),g=b.value+="\n",b.blur(),b.focus(),(d=Na(c,g.slice(g.lastIndexOf("\n",g.length-2)+1,-1)||""))&&u(c,d.replace(/\n$/,""),!1))}})}};Ka.prototype.Na=function(a){return this.aa[a]};
function Oa(a){var b=Pa.Cb;return Qa[a.S]&&Qa[a.S][b]}function Ra(a,b,c){if(a){do{for(var d=0;d<Sa.length;d++){var e=Sa[d];if(c){if(e+=c,b+e in a)return e}else if(e=e?e+b[0].toUpperCase():b[0],e+=b.substr(1),e in a)return e}if(0>b.indexOf("screen"))break;b=b.replace("screen","Screen")}while(1)}return null}function Ta(a){var b=Ua;return a.T.bindings&&a.T.bindings[b]}function Va(a){if(a=a.aa[Wa])var b=a.textContent;return b}function Xa(a,b,c){a=+a||0;a<b&&(a=b);a>c&&(a=c);return a}
function D(a,b,c){a=a.T[b];void 0===a?a=c:(b=typeof c,typeof a!=b&&("boolean"==b?a=!!a:"number"==typeof c&&(a=+a)));return a}function Ya(a,b){var c=0,d=null,e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){4===e.readyState&&(d=e.responseText,200==e.status||!e.status&&d.length&&"file:"==(window?window.location.protocol:"file:")||(c=e.status||-1));b(a,d,e.readyState,c)};e.open("GET",a,!0);e.send()}
function Za(){var a,b=La;if(!b){b={};if(window){a||(a=window.location.search.substr(1));for(var c,d=/\+/g,e=/([^&=]+)=?([^&]*)/g;c=e.exec(a);)b[decodeURIComponent(c[1].replace(d," ")).trim()]=decodeURIComponent(c[2].replace(d," ")).trim()}La=b}return b}function $a(a){if(void 0===ab.lb){var b=!1;if(window)try{window.localStorage.setItem(ab.Wa,ab.Wa),b=window.localStorage.getItem(ab.Wa)==ab.Wa,window.localStorage.removeItem(ab.Wa)}catch(c){u(a,c.message),b=!1}ab.lb=b}return!!ab.lb}
function bb(a){a=void 0===a?0:a;1<a&&a%2&&a--;a=a||0;return-1==(a|1)||Ca(Ja,a)?!0:!1}function cb(a){if(window){var b=window.navigator.userAgent;return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function db(a){var b=null;if($a(a)){var c;if(window)try{(c=window.localStorage.getItem(a.S))&&(b=JSON.parse(c))}catch(d){u(a,d.message)}}return b}
function eb(a){if(window){var b=window.onresize;window.onresize="function"!==typeof b?a:function(){b&&b();a()}}}function fb(a){return"true"==a||"on"==a?!0:"false"==a||"off"==a?!1:void 0}
function Na(a,b){b=void 0===b?"?":b;try{if(b=b.trim())a.sa<a.Ba.length&&b==a.Ba[a.sa]?a.sa++:(a.Ba.push(b),a.sa=a.Ba.length);var c=b.split(" "),d=c[0],e=Oa(a);switch(d[0]){case "m":if("?"==d[1]){var g="";gb.forEach(function(p){g+=p+"\n"});g&&(g="message commands:\n"+g);break}g="";var h=void 0;d=c[c.length-1].toLowerCase();var k=fb(d);void 0!=k&&c.pop();1>=c.length&&(void 0!=k&&(h=k,k=void 0),c[1]="all");"all"==c[1]&&(c=Object.keys(A));for(e=1;e<c.length;e++){d=c[e];var l=A[d];if(!l){g+="unrecognized message: "+
d+"\n";break}void 0!=k&&hb(a,l,k);if(void 0==h||h==bb(l))g+=a.H("%8s: %b\n",d,bb(l))}bb(0x800000000000)&&(g+="all messages will be buffered until buffer is turned off\n");g||(g="no messages\n");break;case "?":g="",ib.forEach(function(p){g+=p+"\n"}),g&&(g="default commands:\n"+g);default:if(c.unshift(b),e)for(a=0;a<e.length;a++){var n=e[a](c);if(void 0!=n){g=g?g+n:n;break}}}}catch(p){g="error: "+p.message+"\n"}return g}
Ka.prototype.La=function(a,b){void 0==b&&(b=bb(0x800000000000));if(!b){var c=this.Na(Ma.ab,!0);if(c){c.value+=a;8192<c.value.length&&(c.value=c.value.substr(c.value.length-4096));c.scrollTop=c.scrollHeight;c.setSelectionRange(c.value.length,c.value.length);return}}Da.prototype.La.call(this,a,b)};Ka.prototype.K=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d=0;"number"==typeof a&&(d=a,a=c.shift());bb(d)&&Da.prototype.K.call.apply(Da.prototype.K,[this,a].concat(ca(c)))};
function jb(a,b){if($a(a)){b=JSON.stringify(b);try{window.localStorage.setItem(a.S,b)}catch(c){u(a,c.message)}}}function kb(a,b,c){if(a=a.aa[b])a.textContent=c}function hb(a,b,c){var d=!1;c?(c=Ja,Ja=(c|b)+(c/t|0|b/t|0)*t):(d=Ca(Ja,0x800000000000)&&Ca(b,0x800000000000),c=Ja,Ja=(c&~b)+((c/t|0)&~(b/t|0))*t);d&&a.flush()}
var Ma={Gc:"clear",ab:"print"},ib=["\u2191 \u2193\t\trecall commands","@\t\trepeat last command","m?\t\tmessage commands"],gb=["m\t\tdisplay all messages","m on\t\tdisplay all active messages","m off\t\tdisplay all inactive messages","m all [on|off]\tturn all messages on or off","m ... [on|off]\tturn selected messages on or off"],Pa={Cb:"command"},lb={list:[],zd:"version"},ab={lb:void 0,Wa:"PCjs.localStorage"},B={mb:8,gc:9,$c:10,nb:13,xd:16,Jc:17,Ni:18,pj:19,Fc:20,Lc:27,ec:32,rj:33,qj:34,Oi:35,$i:36,
Tb:37,kc:38,$b:39,Xi:39,Gb:40,Ui:44,sj:44,aj:45,Kc:46,Wi:46,Zi:47,ZERO:48,ONE:49,ic:50,hc:51,Lb:52,Kb:53,dc:54,cc:55,Hb:56,Wb:57,Yc:59,Xc:61,zb:65,Ab:66,Bb:67,Eb:68,E:69,Jb:70,Nb:71,Ob:72,Pb:73,Qb:74,Rb:75,Sb:76,Ub:77,Vb:78,Xb:79,Yb:80,Q:81,Zb:82,ac:83,fc:84,jc:85,lc:86,mc:87,nc:88,oc:89,pc:90,Hc:91,Vi:91,Ti:92,tj:93,Yi:93,bd:96,hj:96,Si:96,cd:97,fj:97,dd:98,ej:98,ed:99,lj:99,fd:100,ij:100,gd:101,cj:101,hd:102,nj:102,jd:103,gj:103,kd:104,oj:104,ld:105,mj:105,kj:106,bj:107,nd:109,md:110,dj:111,Mc:112,
Nc:113,Oc:114,Pc:115,Qc:116,Rc:117,Sc:118,Tc:119,Uc:120,Pi:121,Qi:122,Ri:123,jj:144,vj:145,Wc:173,bc:186,Ib:187,Ic:188,Fb:189,rd:190,yd:191,Cc:192,Zc:219,Dc:220,vd:221,ud:222,Vc:224},mb={},nb=(mb[B.Yc]=B.bc,mb[B.Xc]=B.Ib,mb[B.Wc]=B.Fb,mb[B.Vc]=B.Hc,mb),E={},ob=(E[B.mb]="\b",E[B.gc]="\t",E[B.$c]="\n",E[B.nb]="\r",E[B.ec]=" ",E[B.ZERO]="0",E[B.ONE]="1",E[B.ic]="2",E[B.hc]="3",E[B.Lb]="4",E[B.Kb]="5",E[B.dc]="6",E[B.cc]="7",E[B.Hb]="8",E[B.Wb]="9",E[B.zb]="A",E[B.Ab]="B",E[B.Bb]="C",E[B.Eb]="D",E[B.E]=
"E",E[B.Jb]="F",E[B.Nb]="G",E[B.Ob]="H",E[B.Pb]="I",E[B.Qb]="J",E[B.Rb]="K",E[B.Sb]="L",E[B.Ub]="M",E[B.Vb]="N",E[B.Xb]="O",E[B.Yb]="P",E[B.Q]="Q",E[B.Zb]="R",E[B.ac]="S",E[B.fc]="T",E[B.jc]="U",E[B.lc]="V",E[B.mc]="W",E[B.nc]="X",E[B.oc]="Y",E[B.pc]="Z",E[B.Tb]="Left",E[B.$b]="Right",E),Sa=["","moz","ms","webkit"],Qa={};q.WebIO=Ka;A.addr=1;A.bus=2;A.ports=8;A.memory=4;A.cpu=16;A.video=32;A.monitor=64;A.screen=128;A.timer=256;A.event=512;A.key=1024;A.mouse=2048;A.touch=2048;A.warn=4096;A.halt=8192;
function F(a,b,c,d){Ka.call(this);this.S=a;this.$=b;pb(this,c);this.version=d||2;qb[this.S]||(qb[this.S]=[]);qb[this.S][this.$]&&this.K("warning: machine configuration contains multiple '%s' devices\n",this.$);qb[this.S][this.$]=this;this.Za={};this.R=this.ra=void 0}m(F,Ka);
function pb(a,b){b=void 0===b?{}:b;if(b.overrides){var c=Za();for(g in c)if(0<=b.overrides.indexOf(g)){var d=c[g];if(d.match(/^[+-]?[0-9.]+$/))var e=Number.parseInt(d,10);else"true"==d?e=!0:"false"==d?e=!1:(e=d,d='"'+d+'"');b[g]=e;u(a,"overriding "+a.$+" property '"+g+"' with "+d)}}a.T=b;c=b.bindings;var g=Array.isArray(c);for(var h in c){d=c[h];if(g)h=d;else if(d.match(/^[0-9]+$/)){e=+d;a.aa[h]=[];do{d=h+e++;d=document.getElementById(d);if(!d)break;a.aa[h].push(d)}while(1);continue}if(e=document.getElementById(d))a.aa[h]=
e,a.Ma(h,e)}if(a.version){h="";c=rb(a,a.S);if(c.version!=a.version){h="Machine";var k=c.version}else b.version&&b.version>a.version&&(h="Config",k=b.version);h&&(k="Error: "+a.H("%s Device version (%3.2f) incompatible with %s version (%3.2f)",b.xj,a.version,h,k)+"\n\nClearing your browser's cache may resolve the issue.",(b=lb.zd)&&0>lb.list.indexOf(b)&&(alert(k),lb.list.push(b)),u(a,k))}}function sb(a,b,c,d){a.Za[b]={get:c.bind(a),set:d.bind(a)}}
function tb(a,b){var c;try{var d=qb[a.S];if(d)for(c in d){var e=d[c];"Machine"!=e.T["class"]&&b(e)}}catch(g){a.K("error while enumerating device '%s': %s\n",c,g.message)}}F.prototype.Na=function(a,b){b=void 0===b?!1:b;var c=Ka.prototype.Na.call(this,a,b);if(void 0===c&&b){b=qb[this.S];for(var d in b)if(c=b[d].aa[a])break;c||(c=null);this.aa[a]=c}return c};function rb(a,b,c){var d=qb[a.S];d=d&&d[b]||null;if(!d&&(void 0===c||c))throw Error(a.H("unable to find device with ID '%s'",b));return d}
function G(a,b,c){var d=null,e=qb[a.S];if(e)for(var g in e)if(e[g].T["class"]==b){if(d){d=null;break}d=e[g]}if(!d&&(void 0===c||c))throw Error(a.H("unable to find device with class '%s'",b));return d}function ub(a,b){return(a=a.Za[b])&&a.get()}F.prototype.tc=function(){};
F.prototype.K=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if("number"==typeof a&&bb(a)&&(void 0===this.ra&&(this.ra=G(this,"Debugger")),this.ra&&this.ra.tc(a),Ja&1&&(void 0===this.R&&(this.R=G(this,"CPU")),this.R))){a=c.shift();c=this.H.apply(this,[a].concat(ca(c))).trim();Ka.prototype.K.call(this,"%s at %#0x\n",c,this.R.ib);return}Ka.prototype.K.call.apply(Ka.prototype.K,[this,a].concat(ca(c)))};function vb(a,b){(a=qb[a.S])&&delete a[b]}
function wb(a,b,c){(a=a.Za[b])&&a.set(c)}var qb={};q.Device=F;
function xb(a,b,c){F.call(this,a,b,c);this.type="static"==c.type?yb:zb;this.xa=c.addrWidth||16;this.i=Math.pow(2,this.xa);this.h=this.i-1|0;this.b=c.blockSize||1024;this.b>this.i&&(this.b=this.i);this.m=this.i/this.b|0;this.c=Math.log2(this.b)|0;this.g=(1<<this.c)-1;this.f=c.dataWidth||8;this.j=Math.pow(2,this.f)-1;this.l=!1!==c.littleEndian;this.a=Array(this.m);a=new Ab(a,b+"[NONE]",{size:this.b,bus:this.$});for(b=0;b<this.i;b+=this.b)Bb(this,b,this.b,Cb.NONE,a);Db(this)}m(xb,F);
function Bb(a,b,c,d,e){for(var g=0,h=b>>>a.c;0<c&&h<a.a.length;){var k=h*a.b,l=a.b-(b-k);l>c&&(l=c);var n=a.a[h];if(b!=k||l!=a.b||n&&n.type!=Cb.NONE)return!1;n=a.$+"["+Ba(a,b,16,a.xa)+"]";if(e)if(e.size==a.b)b=e;else{var p=void 0;if(e.values&&(p=e.values.slice(g,g+l),p.length!=l))return!1;b=new Ab(a.S,n,{type:d,ia:b,size:l,bus:a.$,values:p})}else b=new Ab(a.S,n,{type:d,ia:b,size:l,bus:a.$});a.a[h]=b;b=k+a.b;c-=l;g+=l;h++}return!0}
function Eb(a,b){for(var c=Cb.wd,d=0,e=0;e<a.a.length;e++){var g=a.a[e];g&&g.type&c&&(b(g),d++)}return d}f=xb.prototype;f.ja=function(){};f.ub=function(a){return a&&this.ta(a)?!0:!1};f.Ya=function(a){this.va(a)};f.ta=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if(!(c.type<=Cb.bb)&&c.ta){var d=a.shift();if(!c.ta(d))return!1}}return!0};f.va=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if(!(c.type<=Cb.bb)&&c.va){var d=[];c.va(d);a.push(d)}}};
f.xi=function(a){return this.a[a>>>this.c].Z(a&this.g)};f.Ji=function(a,b){this.a[a>>>this.c].ca(a&this.g,b)};f.yi=function(a){return a&1?this.Z(a+1&this.h)|this.Z(a)<<this.f:this.a[a>>>this.c].ua(a&this.g)};f.zi=function(a){return a&1?this.Z(a)|this.Z(a+1&this.h)<<this.f:this.a[a>>>this.c].ua(a&this.g)};f.Ki=function(a,b){a&1?(this.ca(a,b>>this.f),this.ca(a+1&this.h,b&this.j)):this.a[a>>>this.c].da(a&this.g,b)};
f.Li=function(a,b){a&1?(this.ca(a,b&this.j),this.ca(a+1&this.h,b>>this.f)):this.a[a>>>this.c].da(a&this.g,b)};function Db(a){a.Z=a.xi;a.ca=a.Ji;a.l?(a.ua=a.zi,a.da=a.Li):(a.ua=a.yi,a.da=a.Ki)}f.jb=function(a,b){return this.a[a>>>this.c].jb(b)?(Db(this),!0):!1};f.wb=function(a,b){return this.a[a>>>this.c].wb(b)?(Db(this),!0):!1};f.kb=function(a,b){return this.a[a>>>this.c].kb(b)?(Db(this),!0):!1};f.yb=function(a,b){return this.a[a>>>this.c].yb(b)?(Db(this),!0):!1};var yb=0,zb=1;q.Bus=xb;
function Fb(a,b,c){F.call(this,a,b,c);this.ea=16;this.w=1;this.s=["(",")"];this.L=this.j=0;this.l={};a=this.R=G(this,"CPU");a.ra=this;this.Za=a.Za;this.N=G(this,"Input",!1);this.M=rb(this,this.R.T.busIO,!1);this.b=rb(this,this.R.T.busMemory);this.o=this.b.xa;this.O=Math.pow(2,this.o)-1|0;this.v=0;this.c=[];for(var d in H)this.c[H[d]]=[];this.h=[];this.h[H.Aa]=this.b;this.h[H.Xa]=this.b;this.h[H.Ua]=this.M;this.h[H.Va]=this.M;this.f=[];this.f[H.Aa]=this.Ed.bind(this);this.f[H.Xa]=this.Fd.bind(this);
this.f[H.Ua]=this.Cd.bind(this);this.f[H.Va]=this.Dd.bind(this);this.a=[];this.i=0;this.time=G(this,"Time");this.time.M.push(this.Ii.bind(this));this.u=Gb();this.m=0;this.g=[];d=this.Ld.bind(this);a=Pa.Cb;Qa[this.S]||(Qa[this.S]={});Qa[this.S][a]||(Qa[this.S][a]=[]);Qa[this.S][a].push(d)}m(Fb,F);function Hb(a,b,c){b.W=b.W+c&a.b.h}function Gb(a){a=void 0===a?0:a;var b=Ib.sd;return"number"==typeof a?{W:a,vb:-1,type:b}:{W:a.W,vb:a.vb,type:a.type}}
function Jb(a,b){if(b){var c=0,d=b.charAt(c);var e=Gb();switch(d){case "&":c++;break;case "#":c++;e.type=Ib.td;break;case "%":c++,d=b.charAt(c),"%"==d?c++:e.type=Ib.LINEAR}d=b.indexOf(":");0<=d&&(c=Kb(a,b.substring(c,d)),void 0!=c&&(e.vb=c),c=d+1);e.W=Kb(a,b.substring(c))&a.O}return e}function Lb(a,b,c){a.i++;var d=a.b.Z(b.W);c&&Hb(a,b,c);a.i--;return d}function Mb(a,b,c){if(32>=a.o)return b&c;b=Nb(a,b,0,!0);c=Nb(a,c,0,!0);return((b/t|0)&(c/t|0))*t+((b&c)>>>0)}
function Ob(a,b,c){if(32>=a.o)return b^c;b=Nb(a,b,0,!0);c=Nb(a,c,0,!0);return((b/t|0)^(c/t|0))*t+((b^c)>>>0)}
function Pb(a,b,c,d){for(d=void 0===d?-1:d;d--&&c.length;){var e=c.pop();if(2>b.length)return!1;var g=b.pop();var h=b.pop();switch(e){case "*":h*=g;break;case "/":if(!g)return!1;h=Math.trunc(h/g);break;case "^/":if(!g)return!1;h%=g;break;case "+":h+=g;break;case "-":h-=g;break;case "<<":h<<=g;break;case ">>":h>>=g;break;case ">>>":h>>>=g;break;case "<":h=h<g?1:0;break;case "<=":h=h<=g?1:0;break;case ">":h=h>g?1:0;break;case ">=":h=h>=g?1:0;break;case "==":h=h==g?1:0;break;case "!=":h=h!=g?1:0;break;
case "&":h=Mb(a,h,g);break;case "!":case "|":e=h;32>=a.o?h=e|g:(e=Nb(a,e,0,!0),g=Nb(a,g,0,!0),h=(e/t|0|g/t|0)*t+((e|g)>>>0));break;case "^!":h=Ob(a,h,g);break;case "&&":h=h&&g?1:0;break;case "||":h=h||g?1:0;break;case ",,":h=Nb(a,h,18,!0)*Math.pow(2,18)+Nb(a,g,18,!0);break;case "_":case "^_":"^_"==e&&(g=35-(g&255));g&&(h=Nb(a,h,0,!0),h=0<g?h*Math.pow(2,g):Math.trunc(h/Math.pow(2,-g)));break;default:return!1}b.push(Nb(a,h))}return!0}
function Qb(a,b,c,d,e,g){var h,k=!1,l=0,n=[],p=[],y=a.ea;for(a.ea=e;c<d;){var v=b[c++].trim();var r=c<d?b[c++]:"";if(v){var w=void 0;var x=a;var z=v,C=g;l=void 0===l?0:l;if(void 0!=z){w=ub(x,z.toUpperCase());if(void 0==w)if(w=z,x.l[w]?w=x.l[w].value:(w=w.substr(0,6),w=x.l[w]&&x.l[w].value),void 0!=w){if(z=x.l[z]&&x.l[z].Bj)C?C.push(z):(C=Kb(x,z,C),void 0!==C?w+=C:w=void 0)}else w=za(z,1<z.length||10<x.ea?x.ea:10);void 0!=w&&(w=Nb(x,Sb(x,w,l)))}x=w}else if("{"==r){v=1;for(x=c;c<d;)if(c++,r=c<b.length?
b[c++]:"","{"==r)v++;else if("}"==r&&!--v)break;x=Qb(a,b,x,c-1,a.ea,g);null!=x&&l&&(x=Sb(a,x,l));v=c<d?b[c++].trim():"";r=c<d?b[c++]:""}else{if(" "==r)continue;if("^B"==r){a.ea=2;continue}if("^O"==r){a.ea=8;continue}if("^D"==r){a.ea=10;continue}if(!(l&-1073741824)){if("+"==r)continue;if("-"==r){l=l<<2|1;continue}if("~"==r||"^-"==r){l=l<<2|2;continue}if("^L"==r){l=l<<2|3;continue}}k=!0;break}if(void 0===x)if(g)g.push(v),x=0;else{k=!0;g=[];break}n.push(Nb(a,x));if(" "==r)if(c<b.length-1&&!b[c])c++,
r=b[c++];else{k=!0;break}if(!r)break;x="<"==a.s[0]?Tb:Ub;if(!x[r]){k=!0;break}p.length&&x[r]<=x[p[p.length-1]]&&Pb(a,n,p,1);p.push(r);a.ea="^_"==r?10:e;l=0}if(k||!Pb(a,n,p)||1!=n.length)k=!0;k?g||u(a,"parse error ("+(v||r)+")"):h=n.pop();a.ea=y;return h}
function Vb(a,b,c,d,e){for(var g;0<=(g=b.indexOf(c));){for(var h=0,k=g+1,l=e;k<b.length;){var n=b[k++];if(n==c){l=-1;break}if(!l)break;l--;n=n.charCodeAt(0);7==d?n&=127:n=n-32&63;h=Nb(a,h*Math.pow(2,d)+n,d*e,!0)}if(0<=l){u(a,"parse error ("+c+b+c+")");return}b=b.substr(0,g)+Ba(a,h)+b.substr(k)}return b}
function Kb(a,b,c){var d=void 0;if(b){"{"!=a.s[0]&&(b=b.split(a.s[0]).join("{").split(a.s[1]).join("}"));b=Vb(a,b,'"',7,5);if(!b)return d;b=Vb(a,b,"'",6,6);if(!b)return d;16!=a.ea&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=Qb(a,b,0,b.length,a.ea,c)}return d}
function Sb(a,b,c){for(;c;){var d;switch(c&3){case 1:b=-Nb(a,b);break;case 2:b=Ob(a,b,-1);break;case 3:for(d=35;0<=d&&!Mb(a,b,Math.pow(2,d));)d--;b=35-d}c>>>=2}return b}function Nb(a,b,c,d){var e=b;c=c||a.o;if(d)if(32==c)e=b>>>0;else if(32>c)e=b&(1<<c)-1;else{if(a=Math.pow(2,c),0>b||b>=a)e=b%a,0>e&&(e+=a)}else 32>=c?e=b<<32-c>>32-c:(a=Math.pow(2,c-1),b>=a?(e=b%a,(b/a|0)&1&&(e-=a)):b<-a&&(e=b%a,((-b-1)/a|0)&1?e&&(e+=a):e||(e-=a)));b!=e&&(b=e);return b}f=Fb.prototype;
f.rc=function(a){function b(k){for(var l=0;l<k.length;l++)if(void 0!=k[l])return!1;return!0}if(-1>a)return Wb(this,this.rc);var c="";if(0<=a){var d=this.a[a];if(void 0!=d){c=d>>8;d&=255;var e=this.h[c];if(e){var g=this.c[c],h=g[d];h>=t&&(h=h-t|0);(c&1?e.yb(h,this.f[c]):e.kb(h,this.f[c]))?(g[d]=void 0,this.a[a]=void 0,b(g)&&(g.length=0,b(this.a)&&(this.a.length=0)),c=this.H("%2d: %s %#0*x cleared\n",a,Xb[c],(e.xa>>2)+2,h),--this.v):c=this.H("invalid break address: %#0x\n",h)}else c="invalid bus"}else c=
this.H("invalid break index: %d\n",a)}else c="missing break index\n";return c};
f.sb=function(a,b){b=void 0===b?!1:b;if(-1>a)return Wb(this,this.sb,b);if(0<=a){var c=this.a[a];if(void 0!=c){var d=!0,e=c>>8;c&=255;var g=this.c[e],h=g[c];if(void 0!=h){var k=b?"enabled":"disabled";if(h<t){var l=h;b?d=!1:h=(h>>>0)+t}else l=h-t|0,b?h=l:d=!1;b=this.h[e];d?(g[c]=h,a=this.H("%2d: %s %#0*x %s\n",a,Xb[e],l,(b.xa>>2)+2,k)):a=this.H("%2d: %s %#0*x already %s\n",a,Xb[e],l,(b.xa>>2)+2,k)}else a=this.H("no break address at index: %d\n",a)}else a=this.H("invalid break index: %d\n",a)}else a=
"missing break index\n";return a};function Wb(a,b,c){for(var d="",e=0;e<a.a.length;e++)void 0!=a.a[e]&&(d+=b.call(a,e,c));d||(d="no break addresses found");return d}function Yb(a){for(var b="",c=0;c<a.a.length;c++){var d=a.a[c];if(void 0!=d){var e=d>>8;d=a.c[e][d&255];var g="enabled";d>=t&&(g="disabled",d=d-t|0);b+=a.H("%2d: %s %#0*x %s\n",c,Xb[e],(a.h[e].xa>>2)+2,d,g)}}b||(b="no break addresses found\n");return b}
function Zb(a,b,c){function d(l,n){var p;for(p=0;p<a.a.length&&void 0!=a.a[p];p++);a.a[p]=l<<8|n;return p}function e(l,n){var p=l.indexOf(n.W);0>p&&(p=l.indexOf((n.W>>>0)+t));if(0<=p)p=-(p+1);else{for(p=0;p<l.length&&void 0!=l[p];p++);l[p]=n.W}return p}c=void 0===c?H.Aa:c;var g="";if(b){var h;if(g=a.h[c]){var k=e(a.c[c],b);0<=k?(h=c&1?g.wb(b.W,a.f[c]):g.jb(b.W,a.f[c]))?(k=d(c,k),g=a.H("%2d: %s %#0*x set\n",k,Xb[c],(g.xa>>2)+2,b.W),a.v++||(g+=$b(a,!0))):(g=a.H("invalid break address: %#0x\n",b.W),
a.c[c][k]=void 0):g=a.H("%s %#0x already set\n",Xb[c],b.W)}else g="invalid bus"}else g="missing break address\n";return g}function ac(a,b){0<=b&&(a.j=b);var c="instruction break count: "+(0<a.j?a.j:"disabled")+"\n";0<b&&!a.g.length&&(c+=$b(a,!0));return c}function bc(a,b){var c;if(b){var d=fb(b);void 0!=d?a.L=d?0xffffffffffff:0:c=a.H("unrecognized message option: %s\n",b)}c||(c=a.H("break on message: %b\n",!!a.L));return c}
f.Cd=function(a,b,c){this.i||(void 0==a?cc(this,this.H("break on unknown input %#0x: %#0x",b,c)):(a+=b,0<=this.c[H.Ua].indexOf(a)&&cc(this,this.H("break on input %#0x: %#0x",a,c))))};f.Dd=function(a,b,c){this.i||(void 0==a?cc(this,this.H("break on unknown output %#0x: %#0x",b,c)):(a+=b,0<=this.c[H.Va].indexOf(a)&&cc(this,this.H("break on output %#0x: %#0x",a,c))))};
f.Ed=function(a,b,c){this.i||(void 0==a?cc(this,this.H("break on unknown read %#0x: %#0x",b,c)):(a+=b,this.g.length&&(b=this.R.ib,0<this.j&&a==b&&(--this.j||cc(this,this.H("break on instruction count"))),a-b&-4||(this.g[this.m++]=a,this.m==this.g.length&&(this.m=0))),0<=this.c[H.Aa].indexOf(a)&&cc(this,this.H("break on read %#0x: %#0x",a,c))))};
f.Fd=function(a,b,c){this.i||(void 0==a?cc(this,this.H("break on unknown write %#0x: %#0x",b,c)):(a+=b,0<=this.c[H.Xa].indexOf(a)&&cc(this,this.H("break on write %#0x: %#0x",a,c))))};function cc(a,b){u(a,b);dc(a.time)}function ec(a,b){return Ba(a,b.W,a.ea,a.b.xa,"")}
function fc(a,b){var c=void 0===c?10:c;var d="";0>b&&(b=c);b=a.m-b;0>b&&(b+=a.g.length);for(var e,g=[];0<=b&&b<a.g.length&&0<c;){var h=a.g[b++];if(b==a.g.length){if(d)break;b=0}if(void 0!=h||g.length){e||(e=Gb(h));if(h!=e.W||g.length==a.w)Hb(a,e,-g.length),d+=a.xb(e,g),c--;void 0!=h&&(e.W=h,g.push(Lb(a,e,1)))}}return d||"no history"}function gc(a,b,c){var d=[],e="";for(b="number"==typeof b?Gb(b):b;c--;){for(Hb(a,b,d.length);d.length<a.w;)d.push(Lb(a,b,1));Hb(a,b,-d.length);e+=a.xb(b,d)}return e}
function hc(a,b,c,d,e){var g="";c||(c=a.b.f);var h=c>>3;d||(d=128);var k=0,l=d+15>>4||1,n=4==h?16:a.ea;"y"==e&&(n=h,l=d,k=8*h);b||(b=a.u);for(;l--&&0<d;){var p=e=0,y,v="",r="",w=ec(a,b);for(y=n;0<y&&0<d;y--){var x=Lb(a,b,1);e|=x<<(p++<<3);p==h&&(v+=Ba(a,e,0,c,""),v+=1==h?9==y?"-":" ":" ",k&&(r+=Ba(a,e,2,c,"")),e=p=0);k||(r+=32<=x&&127>x?String.fromCharCode(x):".");d--}g&&(g+="\n");g+=w+"  "+v+" "+r}a.u=b;return g}
function ic(a){var b=[];tb(a,function(c){c.Ya&&c.Ya(b);c.od&&c.od(b)});return JSON.stringify(b,null,2)}function jc(a,b,c){for(var d=0,e="",g=0;void 0!=b&&g<c.length;g++){var h=Lb(a,b);if(void 0==h)break;var k=a,l=b,n=c[g];k.i++;k.b.ca(l.W,n);k.i--;e+=a.H("%#06x: %#0x changed to %#0x\n",b.W,h,c[g]);Hb(a,b,1);d++}d||(e+=a.H("%d locations updated\n",d));a.time.update();return e}
function $b(a,b){var c="";void 0!=b&&(Eb(a.b,function(d){b?a.b.jb(d.ia,a.f[H.Aa]):a.b.kb(d.ia,a.f[H.Aa])})&&(a.m=0,a.g=b?Array(kc):[]),c+=a.H("instruction history %s\n",a.g.length?"enabled":"disabled"));return c}f.tc=function(a){Ca(this.L,a)&&cc(this,this.H("break on message"))};
f.Ld=function(a){var b="",c=[];var d=a[1];if("*"==a[2])var e=-2;else{e=za(a[2]);void 0==e&&(e=-1);var g=Jb(this,a[2])}var h=0;a[3]&&(h=za(a[3].substr("l"==a[3][0]?1:0))||8);for(var k=3;k<a.length;k++)c.push(za(a[k],16));switch(d[0]){case "b":"c"==d[1]?b=this.rc(e):"d"==d[1]?b=this.sb(e):"e"==d[1]?b=this.sb(e,!0):"i"==d[1]?b=Zb(this,g,H.Ua):"l"==d[1]?b=Yb(this):"m"==d[1]?b=bc(this,a[2]):"n"==d[1]?b=ac(this,e):"o"==d[1]?b=Zb(this,g,H.Va):"r"==d[1]?b=Zb(this,g,H.Aa):"w"==d[1]?b=Zb(this,g,H.Xa):(b="break commands:\n",
lc.forEach(function(l){b+=l+"\n"}));break;case "d":if("b"!=d[1]&&d[1])if("w"==d[1])c=16;else if("d"==d[1])c=32;else{"h"==d[1]?b=fc(this,e):"s"==d[1]?b=ic(this):(b="dump commands:\n",mc.forEach(function(l){b+=l+"\n"}));break}else c=8;b=hc(this,g,c,h,d[2]);break;case "e":b=jc(this,g,c);break;case "g":this.time.start()?(void 0!=g&&Zb(this,g),this.N&&nc(this.N)):b="already started\n";break;case "h":dc(this.time)||(b="already stopped\n");break;case "p":a.shift();a.shift();d=a.join(" ");b+=this.H("%s = %s\n",
d,Ba(this,Kb(this,d)));break;case "r":if(d=d.substr(1).toUpperCase()){if(void 0==ub(this.R,d)){b+=this.H("unrecognized register: %s\n",d);break}void 0!=g&&wb(this.R,d,g.W)}b+=this.R.toString();break;case "s":g=fb(a[2]);if("h"==d[1]){if(this.v||0<this.j)g=void 0;b=$b(this,g)}else b="set commands:\n",oc.forEach(function(l){b+=l+"\n"});break;case "t":h=za(a[2],10)||1;pc(this.time,h);break;case "u":h||(h=8);g||(g=this.u);b+=gc(this,g,h);this.u=g;break;case "?":b="debugger commands:\n";qc.forEach(function(l){b+=
l+"\n"});break;default:b=void 0}void 0==b&&a[0]&&(b="unrecognized command '"+a[0]+"' (try '?')\n");return b};f.xb=function(a,b){var c=this;return this.H("%s %02x         unsupported\n",ec(this,a),function(){var d=b.shift();Hb(c,a,1);return d}())};f.Ii=function(a){a&&!this.time.a&&(this.R.La(this.R.toString()),(a=this.Na(Ma.ab,!0))&&a.focus())};
var qc="b?\t\tbreak commands;d?\t\tdump commands;e [addr] ...\tedit memory;g [addr]\trun (to addr);h\t\thalt;p [expr]\tparse expression;r? [value]\tdisplay/set registers;s?\t\tset commands;t [n]\t\tstep (n instructions);u [addr] [n]\tunassemble (at addr)".split(";"),lc="bc [n|*]\tclear break address;bd [n|*]\tdisable break address;be [n|*]\tenable break address;bl [n]\t\tlist break addresses;bi [addr]\tbreak on input;bo [addr]\tbreak on output;br [addr]\tbreak on read;bw [addr]\tbreak on write;bm [on|off]\tbreak on message;bn [count]\tbreak on instruction count".split(";"),
mc="db  [addr]\tdump bytes (8 bits);dw  [addr]\tdump words (16 bits);dd  [addr]\tdump dwords (32 bits);d*y [addr]\tdump values in binary;dh  [n] [l]\tdump instruction history buffer;ds\t\tdump machine state".split(";"),oc=["sh [on|off]\tset instruction history"],Ib={LINEAR:1,sd:0,td:2,uj:0},H={Aa:0,Xa:1,Ua:2,Va:3},rc={},Xb=(rc[H.Aa]="br",rc[H.Xa]="bw",rc[H.Ua]="bi",rc[H.Va]="bo",rc),sc={qd:"PC"},kc=1E5,Ub={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,
">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},Tb={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20};q.DbgIO=Fb;
function Ab(a,b,c){F.call(this,a,b,c);this.ia=c.addr;this.size=c.size;this.type=c.type||Cb.NONE;this.f=(a=this.T.bus)?rb(this,a):G(this,a="Bus");if(!this.f)throw Error(this.H("unable to find bus '%s'",a));this.a=this.f.f;this.h=Math.pow(2,this.a)-1;this.c=!1!==this.f.l;this.values=this.N=this.g=this.M=null;a=this.Qa;b=this.Ta;var d=this.Bi,e=this.Mi;if(this.f.type==yb){b=this.wc;d=this.c?this.Fi:this.Ei;e=this.Ac;var g;if(g=8==this.a)g=rb(this,this.S),g=!1!==(g&&g.T&&g.T.ArrayBuffer);g&&(this.g=new ArrayBuffer(this.size),
this.M=new DataView(this.g,0,this.size),this.values=new Uint8Array(this.g,0,this.size),this.N=new Uint16Array(this.g,0,this.size>>1),new Int32Array(this.g,0,this.size>>2),d=this.c==va?this.Ci:this.Di)}this.m=!1;tc(this,c.values);switch(this.type){case Cb.NONE:this.Z=this.Oa;this.ca=this.Sa;this.ua=this.Ai;this.da=this.Sa;break;case Cb.bb:this.Z=a;this.ca=this.Sa;this.ua=d;this.da=this.Sa;break;case Cb.cb:this.Z=a,this.ca=b,this.ua=d,this.da=e}this.o=this.s=0;this.v=this.L=this.u=this.w=null}
m(Ab,F);function tc(a,b){if(!a.values)b?a.values=b:a.values=Array(a.size).fill(a.h);else if(b)for(var c=0;c<a.size;c++)a.values[c]=b[c]}f=Ab.prototype;f.ja=function(){this.type>=Cb.cb&&this.values.fill(0)};f.Oa=function(){return this.h};f.Ai=function(a){return this.c?this.Oa(a)|this.Oa(a+1)<<this.a:this.Oa(a+1)|this.Oa(a)<<this.a};f.Qa=function(a){return this.values[a]};f.Bi=function(a){return this.c?this.Qa(a)|this.Qa(a+1)<<this.a:this.Qa(a+1)|this.Qa(a)<<this.a};
f.Ei=function(a){return this.values[a+1]|this.values[a]<<this.a};f.Fi=function(a){return this.values[a]|this.values[a+1]<<this.a};f.Ci=function(a){return this.N[a>>>1]};f.Di=function(a){return this.M.getUint16(a,this.c)};f.Sa=function(){};f.Ta=function(a,b){this.values[a]=b};f.wc=function(a,b){this.values[a]=b;this.m=!0;this.ca=this.Ta};f.Mi=function(a,b){this.c?(this.Ta(a,b&this.h),this.Ta(a+1,b>>this.a)):(this.Ta(a,b>>this.a),this.Ta(a+1,b&this.h))};
f.zc=function(a,b){this.values[a]=b>>this.a;this.values[a+1]=b&this.h};f.Bc=function(a,b){this.values[a]=b&this.h;this.values[a+1]=b>>this.a};f.xc=function(a,b){this.N[a>>>1]=b};f.yc=function(a,b){this.M.setUint16(a,b,this.c)};f.Ac=function(a,b){this.g?this.c==va?(this.xc(a,b),this.da=this.xc):(this.yc(a,b),this.da=this.yc):this.c?(this.Bc(a,b),this.da=this.Bc):(this.zc(a,b),this.da=this.zc)};
f.jb=function(a){if(!this.o){var b=this;this.o=1;this.j=a;this.u=this.Z;this.v=this.ua;this.Z=function(c){var d=b.u(c);b.j(b.ia,c,d);return d};this.ua=function(c){var d=b.v(c);b.j(b.ia,c,d);b.j(b.ia,c+1,d);return d};return!0}return this.j==a?(this.o++,!0):!1};f.wb=function(a){if(!this.s){var b=this;this.s=1;this.l=a;this.w=this.ca;this.L=this.da;this.ca=function(c,d){b.l(b.ia,c,d);b.w(c,d)};this.da=function(c,d){b.l(b.ia,c,d);b.l(b.ia,c+1,d);b.L(c,d)};return!0}return this.l==a?(this.s++,!0):!1};
f.kb=function(a){return this.o&&this.j==a?(--this.o||(this.Z=this.u,this.ua=this.v,this.u=this.v=this.j=void 0),!0):!1};f.yb=function(a){return this.s&&this.l==a?(--this.s||(this.ca=this.w,this.da=this.L,this.w=this.L=this.l=void 0),!0):!1};f.ta=function(a){var b=a.shift();if(this.$==b){this.m=a.shift();a.shift();a=a.shift();var c=this.size;c=void 0===c?0:c;if(a.length!=c){b=0;c=c?Array(c):[];for(var d=0;d<a.length-1;)for(var e=a[d++],g=a[d++];e--;)c[b++]=g;a=c}tc(this,a);return!0}return!1};
f.va=function(a){a.push(this.$);a.push(this.m);a.push(!1);for(var b=this.values,c=0,d=0,e=[];c<b.length;){for(var g=b[c],h=c+1;h<b.length&&b[h]===g;)h++;e[d++]=h-c;e[d++]=g;c=h}a.push(e.length>=b.length?b:e)};var Cb={NONE:1,bb:2,cb:4,wd:14,wj:12};q.Memory=Ab;function uc(a,b,c){Ab.call(this,a,b,c);Bb(this.f,c.addr,c.size,c.type,this);this.b={};this.i={}}m(uc,Ab);
function vc(a,b,c,d,e){if(c){if(a.b[b])throw Error(a.H("input port %#0x already registered",b));a.b[b]=c.bind(e||a)}if(d){if(a.i[b])throw Error(a.H("output port %#0x already registered",b));a.i[b]=d.bind(e||a)}}uc.prototype.Oa=function(a){var b=this.ia+a,c=this.b[b];return c?c(b):Ab.prototype.Oa.call(this,a)};uc.prototype.Sa=function(a,b){var c=this.ia+a,d=this.i[c];d?d(c,b):Ab.prototype.Sa.call(this,a,b)};q.Ports=uc;
function wc(a,b,c){F.call(this,a,b,c);this.pa=this.O=null;this.time=G(this,"Time");this.oa=G(this,"Machine");this.Pa=D(this,"drag",!1);this.na=D(this,"scroll",!1);this.Fa=D(this,"hexagonal",!1);this.f=D(this,"buttonDelay",0);this.j=!1;a=this.T.map;this.c=this.g=this.h=null;if(a)if(a.length)this.c=a;else for(this.g={},b=Object.keys(a),c=0;c<b.length;c++){var d=[],e=b[c],g=a[e];"string"==typeof g?g=[g]:void 0==g.length&&(d=g.grid,g=g.keys,"string"==typeof g&&(g=[g]));this.g[e]={keys:g,Aj:d,state:0}}this.b=
null;(a=this.aa[xc])&&yc(this,a,this.Na(zc,!0),this.T.location);this.U=[];this.X=[];this.ja()}m(wc,F);function Ac(a,b){a.O=b}function Bc(a){var b=Cc;a.h||(a.h=b,a.ob=Dc(a.time,"timerAutoRelease",function(){Ec(a)}))}function Fc(a,b,c){for(var d=0;d<a.U.length;d++){var e=a.U[d];e.id==b&&e.sc(b,c)}}
function yc(a,b,c,d){d=void 0===d?[]:d;a.qb=d[0]||0;a.rb=d[1]||0;a.i=d[2]||b.clientWidth;a.s=d[3]||b.clientHeight;a.u=d[4]||1;a.L=d[5]||1;a.Ia=d[6]||b.naturalWidth||a.i;a.Ka=d[7]||b.naturalHeight||a.s;a.Ea=d[8]||0;a.za=d[9]||0;a.Ha=d[10]||0;a.Ja=d[11]||0;a.c?(a.w=a.c.length,a.m=a.c[0].length):(a.m=a.u,a.w=a.L,a.u=a.L=0);a.fa=a.i/(a.m+a.m*a.u)|0;a.ka=a.s/(a.w+a.w*a.L)|0;a.Ga=a.fa*a.u|0;a.ma=a.ka*a.L|0;a.o=a.M=-1;Gc(a,b);Hc(a,b);a.time&&(a.f&&(a.wa=Dc(a.time,"timerInputRelease",function(){0>a.o&&0>
a.M&&Ic(a,-1,-1)})),a.c||a.g||a.h)&&(a.f&&(a.pb=Dc(a.time,"timerKeyRelease",function(){Jc(a)})),a.l=0,a.N="",a.v=[],Kc(a,c?document:b),!a.b&&c&&(a.b=c))}function Lc(a){a.f?Mc(a.time,a.pb,a.f):Jc(a)}
function Kc(a,b){b.addEventListener("keydown",function(c){c=c||window.event;var d=document.activeElement;if(!a.b||d==a.b){d=c.which||c.keyCode;var e=Nc(a,d,!0);a.K(1536,"onKeyDown(keyCode=%#04x): %5.2f (%s)\n",d,Date.now()/1E3%60,e?"used":"unused");e&&c.preventDefault()}});b.addEventListener("keypress",function(c){c=c||window.event;var d=c.which||c.charCode,e=Nc(a,d);a.K(1536,"onKeyPress(charCode=%#04x): %5.2f (%s)\n",d,Date.now()/1E3%60,e?"used":"unused");e&&c.preventDefault()});b.addEventListener("keyup",
function(c){c=c||window.event;var d=document.activeElement;a.b&&d!=a.b||(c=c.which||c.keyCode,Nc(a,c,!1),a.K(1536,"onKeyUp(keyCode=%#04x): %5.2f (ignored)\n",c,Date.now()/1E3%60))})}
function Gc(a,b){b.addEventListener("mousedown",function(c){if(!a.j){if(a.b){var d=window.scrollX,e=window.scrollY;a.b.focus();window.scrollTo(d,e)}c.button||Oc(a,b,Pc,c)}});b.addEventListener("mousemove",function(c){a.j||Oc(a,b,Qc,c)});b.addEventListener("mouseup",function(c){a.j||c.button||Oc(a,b,Rc,c)});b.addEventListener("mouseout",function(c){a.j||(0>a.o?Oc(a,b,Qc,c):Oc(a,b,Rc,c))})}
function Hc(a,b){b.addEventListener("touchstart",function(c){a.na&&(a.j=!0);Oc(a,b,Pc,c)});b.addEventListener("touchmove",function(c){Oc(a,b,Qc,c)});b.addEventListener("touchend",function(c){Oc(a,b,Rc,c)})}function Ec(a){for(var b=0,c=-1;b<a.a.length;){if(a.a[b].eb){var d=a.a[b].keyCode,e=Sc-(Date.now()-a.a[b].tb);if(0<e){if(0>c||c>e)c=e}else{Nc(a,d,!1);b=0;continue}}b++}0<=c&&Mc(a.time,a.ob,c)}
function Nc(a,b,c){var d=void 0===d?!1:d;if(void 0!=c){var e=nb[b]||b;var g=ob[b]}else e=0,g=String.fromCharCode(b).toUpperCase();if(a.c){if(!1===c)return!0;for(var h=0;h<a.c.length;h++)for(var k=a.c[h],l=0;l<k.length;l++)if(0<=k[l].split("|").indexOf(g))return a.l?16>a.v.length&&a.v.push(b):(a.l=1,a.N=g,Ic(a,l,h),Fc(a,g,!0),Lc(a)),!0}if(a.g&&void 0!=c)for(b=Object.keys(a.g),h=0;h<b.length;h++)if(k=b[h],0<=a.g[k].keys.indexOf(g))return Fc(a,k,c),a.g[k].state=c?1:0,!0;if(a.h&&a.h[e]){a:{for(g=0;g<
a.a.length;g++)if(a.a[g].keyCode==e)break a;g=-1}if(c)0>g?a.a.push({keyCode:e,tb:Date.now(),eb:d}):(a.a[g].tb=Date.now(),a.a[g].eb=d),d&&Ec(a);else if(0<=g){if(!a.a[g].eb&&(c=a.a[g].tb)&&Date.now()-c<Sc)return a.a[g].eb=!0,Ec(a),!0;a.a.splice(g,1)}}return!1}function Jc(a){1==a.l?(a.l++,Fc(a,a.N,!1),a.N="",Ic(a,-1,-1),Lc(a)):(a.l=0,a.v.length&&Nc(a,a.v.shift()))}wc.prototype.ja=function(){this.a=[];this.ba=this.qa=-1};
function Oc(a,b,c,d){var e=-1,g=-1,h=!1,k;if(c<Rc){d=d||window.event;if(d.targetTouches&&d.targetTouches.length){var l=d.targetTouches[0].pageX;var n=d.targetTouches[0].pageY;h=1<d.targetTouches.length}else l=d.pageX,n=d.pageY;var p=k=0;var y=b;do isNaN(y.offsetLeft)||(k+=y.offsetLeft,p+=y.offsetTop);while(y=y.offsetParent);l=a.Ia/b.offsetWidth*(l-k)|0;n=a.Ka/b.offsetHeight*(n-p)|0;var v=l-a.qb;var r=n-a.rb;p=k=!1;y=l>=a.Ea&&l<a.Ea+a.Ha&&n>=a.za&&n<a.za+a.Ja;if(0<=v&&v<a.i&&0<=r+a.ma||y)if(h||a.na||
d.preventDefault(),0<=v&&v<a.i&&0<=r&&r<a.s){p=!0;d=a.i/a.m|0;var w=a.s/a.w|0,x=v/d|0,z=r/w|0;!a.Fa||z&1||(v-=d>>1,x=v/d|0,x==a.m-1&&(v=-1));w=z*w+(a.ma>>1);v-=x*d+(a.Ga>>1);r-=w;0<=v&&v<a.fa&&0<=r&&r<a.ka&&(e=x,g=z,k=!0)}}v=v||0;r=r||0;d=b.offsetWidth;b=b.offsetHeight;if(c==Pc||c==Rc)for(x=0;x<a.X.length;x++)z=a.X[x],c==Rc?z.sc(z.id,!1):(w=r/(b/z.zj|0)|0,(v/(d/z.yj|0)|0)==z.Dj&&w==z.Ej&&z.sc(z.id,!0));if(!h)if(c==Pc)a.o=l,a.M=n,p?(Ic(a,e,g),k&&a.f&&Mc(a.time,a.wa,a.f,!0)):y&&a.oa.ha();else if(c==
Qc)0<=a.o&&0<=a.M&&a.Pa?Ic(a,e,g):a.O&&a.O(e,g);else if(c==Rc){if(c=a.f)c=a.time,e=a.wa,c=c.a&&0<e&&e<=c.b.length?0<=c.b[e-1].ga:!1;c||Ic(a,-1,-1);a.o=a.M=-1}else u(a,"unrecognized action: "+c)}function nc(a){a.b&&a.oa.a&&a.b.focus()}function Ic(a,b,c){if(b!=a.ba||c!=a.qa)a.ba=b,a.qa=c,a.pa&&a.pa(b,c)}var Pc=1,Qc=2,Rc=3,zc="power",xc="surface",Sc=50;q.Input=wc;
function Tc(a,b,c){F.call(this,a,b,c);a=this.aa[Uc];if(!a)throw Error("LED binding for '"+Uc+"' missing: '"+this.T.aa[Uc]+"'");b=document.createElement("canvas");if(!b||!b.getContext)throw a.innerHTML="LED device requires HTML5 canvas support",Error("LED device requires HTML5 canvas support");this.type=Xa(D(this,"type",Vc),Wc,Xc);this.f=Yc[this.type][0];this.j=Yc[this.type][1];this.width=D(this,"width",this.f);this.height=D(this,"height",this.j);this.g=D(this,"cols",1);this.s=this.g+D(this,"colsExtra",
0);this.U=D(this,"rows",1);this.w=this.U+D(this,"rowsExtra",0);this.ba=this.width*this.g;this.M=this.height*this.U;this.i=Zc("black",0);this.c=$c(this.T.color)||this.i;this.na=Zc(this.c,1,.25);this.ma=Zc(this.c,1,2);this.h=$c(this.T.backgroundColor);this.oa=D(this,"fixed",!1);this.oa||(b.style.width="100%",b.style.height="auto");this.ka=D(this,"hexagonal",!1);this.pa=D(this,"highlight",!0);this.L=D(this,"persistent",this.type<Xc);b.setAttribute("width",this.ba.toString());b.setAttribute("height",
this.M.toString());b.style.backgroundColor=this.i;a.appendChild(b);this.fa=b.getContext("2d");if(this.l=document.createElement("canvas"))this.l.width=this.X=this.f*this.g,this.l.height=this.m=this.j*this.U,this.b=this.l.getContext("2d");this.qa=(this.w+1)*this.s*4;this.a=Array(this.qa);this.wa=this.g<this.s?4*(this.s-this.g):0;this.u=this.v=!1;this.o=this.O=0;this.N=-1;var d=this;this.time=G(this,"Time");ad(this.time,function(e){bd(d,!1,e)})}m(Tc,F);
function cd(a){for(var b=a.a,c=0;c<b.length;c+=4){var d=a,e=b,g=c;e[g]=d.type<Xc?dd:" ";e[g+1]=d.c==d.i?null:d.c;e[g+2]=0;e[g+3]=ed}a.u=a.v=!0;bd(a,!0)}function fd(a){a.h?(a.b.fillStyle=a.h,a.b.fillRect(0,0,a.X,a.m)):a.b.clearRect(0,0,a.X,a.m)}
function bd(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(a.u||b){if(a.type<Xc){var d=0;if(!a.L||b)fd(a);else if(a.o){d=a.g-a.o;var e=a.f*d;a.b.drawImage(a.l,a.f*a.o,0,e,a.m,0,0,e,a.m)}for(var g=e=0;g<a.w;g++){for(var h=0;h<a.g;h++){var k=a.a[e],l=a.a[e+1]||a.i,n=a.pa&&e==a.N;if(a.a[e+3]&ed||n||b){if(h>=d)a:{var p=a,y=k;k=l;var v=h;l=g;var r=n;v=void 0===v?0:v;l=void 0===l?0:l;r=void 0===r?!1:r;var w=0;if(p.ka&&!(l&1)&&(w=p.f>>1,v==p.g-1))break a;if(k&&k!=p.c){r=r?Zc(k,1,2):k;var x=Zc(k,1,.25)}else r=
r?p.ma:p.c,x=p.na;k=!1;y=y?r:x;r==p.i&&(y=p.h,k=!0);r=v*p.f+w;x=l*p.j;p.L&&(v=v*p.f+w,l*=p.j,p.h?(p.b.fillStyle=p.h,p.b.fillRect(v,l,p.f,p.j)):p.b.clearRect(v,l,p.f,p.j));p.b.fillStyle=y;l=gd[p.type];3==l.length?(p.b.beginPath(),p.b.arc(r+l[0],x+l[1],l[2],0,2*Math.PI),k?(p.b.globalCompositeOperation="destination-out",p.b.fill(),p.b.globalCompositeOperation="source-over"):p.b.fill()):p.b.fillRect(r+l[0],x+l[1],l[2],l[3])}a.a[e+3]=n?a.a[e+3]|ed:a.a[e+3]&~ed}e+=4}e+=a.wa}a.o=0}else{b="";for(d=0;d<a.a.length;d+=
4)b+=a.a[d]||" ",a.a[d+3]&hd&&(b+=".");fd(a);for(g=e=d=0;d<b.length;d++){l=b[d];"."==l&&e&&e--;h=a;n=e;p=g;n=void 0===n?0:n;p=void 0===p?0:p;if(l=id[l])for(k=0;k<l.length;k++)if(v=h,w=jd[l[k]]){y=(void 0===n?0:n)*v.f;r=(void 0===p?0:p)*v.j;v.b.fillStyle=v.c;v.b.beginPath();if(3==w.length)v.b.arc(y+w[0],r+w[1],w[2],0,2*Math.PI);else for(x=0;x<w.length;x+=2)x?v.b.lineTo(y+w[x],r+w[x+1]):v.b.moveTo(y+w[x],r+w[x+1]);v.b.closePath();v.b.fill()}if(++e==a.g&&(e=0,++g==a.w))break}}a.fa.globalCompositeOperation=
a.h&&a.c!=a.i?"source-over":"copy";a.fa.drawImage(a.l,0,0,a.X,a.m,0,0,a.ba,a.M);a.u=!1;a.N=-1}else a.L||a.v||(!c||!a.O||c-a.O>=(1E3/60|0))&&cd(a);a.v=!1;c&&(a.O=c)}function $c(a){return(a=a||void 0)&&kd[a]||a}
function Zc(a,b,c){b=void 0===b?1:b;c=void 0===c?1:c;if(a){var d=[];a=kd[a]||a;var e=a;var g=16;var h=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);h||(g=10,h=e.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+|)\)$/i));if(h){for(e=1;e<h.length;e++)d[e-1]=Number.parseInt(h[e],g);d.length=e-1;g=!0}else g=!1;if(g){a="rgba(";for(g=0;3>g;g++)h=Math.round(d[g]*c),h=0>h?0:255<h?255:h,a+=h+",";a+=(g<d.length?d[g]:b)+")"}}return a}
Tc.prototype.ta=function(a){var b=a.shift(),c=a.shift();a=a.shift();if(b==this.c&&c==this.h&&a&&a.length==this.a.length){this.a=a;for(b=0;b<=this.a.length-4;b+=4)this.a[b+1]==this.i&&(this.a[b+1]=null);bd(this,!0);return!0}return!1};Tc.prototype.va=function(a){this.a&&(a.push(this.c),a.push(this.h),a.push(this.a))};
var Wc=0,Vc=1,Xc=3,Uc="container",kd={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",
darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",
goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",
slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},dd=0,hd=1,ed=128,ld={},gd=(ld[Wc]=[4,4,4],ld[Vc]=[16,16,14],ld[2]=[2,2,28,28],ld),Yc=[[8,8],[32,32],[32,32],[96,128]],jd={A:[30,8,79,8,67,19,37,19],B:[83,10,77,52,67,46,70,22],C:[77,59,71,100,61,89,64,64],D:[28,
91,58,91,69,104,15,104],E:[18,59,28,64,25,88,12,100],F:[24,10,34,21,31,47,18,52],G:[24,56,34,50,60,50,71,56,61,61,33,61],P:[80,102,8]},id={" ":[],0:"ABCDEF".split(""),1:["B","C"],2:["A","B","D","E","G"],3:["A","B","C","D","G"],4:["B","C","F","G"],5:["A","C","D","F","G"],6:"ACDEFG".split(""),7:["A","B","C"],8:"ABCDEFG".split(""),9:"ABCDFG".split(""),A:"ABCEFG".split(""),B:["C","D","E","F","G"],C:["A","D","E","F"],D:["B","C","D","E","G"],E:["A","D","E","F","G"],F:["A","E","F","G"],"-":["G"],".":["P"]};
q.LED=Tc;
function md(a,b,c){F.call(this,a,b,c);var d=this;this.Ea=document.fullscreenEnabled||cb("Edge/");this.m=c.monitorWidth||640;this.h=c.monitorHeight||480;if(a=this.aa[nd.Db])this.b=a;else throw Error("unable to find monitor container: "+nd.Db);var e=this.aa[nd.Ec];e||(e=document.createElement("canvas"),e.setAttribute("class","pcjs-monitor"),e.setAttribute("width",c.monitorWidth),e.setAttribute("height",c.monitorHeight),e.style.backgroundColor=c.monitorColor||"black",a.appendChild(e));this.c=e;this.g=
b=e.getContext("2d");cb("MSIE")&&(a.onresize=function(l,n,p,y){return function(){n.style.height=(l.clientWidth*y/p|0)+"px"}}(a,e,c.monitorWidth,c.monitorHeight),a.onresize());var g=+(c.aspect||Za().aspect);g&&.3<=g&&3.33>=g&&(eb(function(l,n,p){return function(){n.style.height=(l.clientWidth/p|0)+"px"}}(a,e,g)),window.onresize());if(this.T.touchtype){var h=document.createElement("textarea");h.setAttribute("class","pcjs-overlay");cb("iOS")&&(h.setAttribute("autocorrect","off"),h.setAttribute("autocapitalize",
"off"),h.style.fontSize="16px");a.appendChild(h)}if(this.s=G(this,"Input",!1))this.rb=h||a,yc(this.s,this.rb,this.Na(od,!0));this.ob=this.m;this.pb=this.h;h=c.smoothing;(e=Za().smoothing)&&(h="true"==e);this.wa=h;this.Ja=Ra(b,"imageSmoothingEnabled");if(this.a=c.monitorRotate)this.a=this.a%360,0<this.a&&(this.a-=360),-90!=this.a?(this.K("unsupported monitor rotation: %d\n",this.a),this.a=0):(b.translate(0,this.h),b.rotate(this.a*Math.PI/180),b.scale(this.h/this.m,this.m/this.h));if(b=this.aa[nd.Mb])if(c=
Ra(a,"requestFullscreen")){a.fb=a[c];if(c=Ra(document,"on","fullscreenchange")){var k=Ra(document,"fullscreenElement");document.addEventListener(c,function(){pd(d,null!=document[k])},!1)}(c=Ra(document,"on","fullscreenerror"))&&document.addEventListener(c,function(){pd(d)},!1)}else this.K("Full-screen API not available\n"),b.parentNode.removeChild(b)}m(md,F);md.prototype.Ma=function(a,b){var c=this;switch(a){case nd.Mb:b.onclick=function(){c.fb()}}F.prototype.Ma.call(this,a,b)};
function qd(a){a.g&&(a.g.fillStyle="black",a.g.fillRect(0,0,a.c.width,a.c.height))}
md.prototype.fb=function(){var a=!1;if(this.b){if(this.b.fb){a="100%";if(screen&&screen.width&&screen.height){var b=screen.width/screen.height,c=this.m/this.h;b>c&&(a=Math.round(c/b*100)+"%")}this.Ea?(this.c.style.width=a,this.c.style.height="auto",this.c.style.display="block",this.c.style.margin="auto"):(this.b.style.width=a,this.b.style.height="auto");this.b.style.backgroundColor="black";this.b.fb();a=!0}this.s&&nc(this.s)}return a};
function pd(a,b){!b&&a.b&&(a.Ea?a.c.style.width=a.c.style.height="":a.b.style.width=a.b.style.height="")}md.prototype.ha=function(a){a?(rd(this),sd(this)):qd(this)};md.prototype.ja=function(){qd(this)};var nd={Ec:"canvas",Db:"container",Mb:"fullScreen"};q.Monitor=md;function td(a,b,c){c.type=Cb.cb;Ab.call(this,a,b,c);Bb(this.f,c.addr,c.size,c.type,this)}m(td,Ab);q.RAM=td;
function ud(a,b,c){c.type=Cb.bb;Ab.call(this,a,b,c);c.revision&&(this.status="revision "+c.revision+" "+this.status);Bb(this.f,c.addr,c.size,c.type,this);if(q.LED&&this.aa[Ua]){var d=this;this.i=Math.pow(2,Math.ceil(Math.log2(this.values.length)/2));this.O=this.values.length/this.i|0;this.b=new Tc(a,b+"LEDs",{"class":"LED",bindings:{container:Ta(this)},type:Vc,cols:this.i,rows:this.O,color:D(this,"colorROM","green"),backgroundColor:D(this,"backgroundColorROM","black"),persistent:!0}),cd(this.b);this.U=
new wc(a,b+"Input",{"class":"Input",location:[0,0,this.b.ba,this.b.M,this.i,this.O],bindings:{surface:Ta(this)}});this.X=Va(this)||"";Ac(this.U,function(e,g){if(d.R){var h=d.X;0<=e&&0<=g&&(e=g*d.i+e,g=d.R,h=g.ra&&gc(g.ra,d.ia+e,1)||"");kb(d,Wa,h)}})}}m(ud,Ab);
ud.prototype.ta=function(a){var b=!0,c=a.shift();if(c&&this.b){var d=c.length;this.b.a.length==d?(this.b.a=c,bd(this.b,!0)):(this.K("inconsistent saved LED state (%d), unable to load\n",d),b=!1)}a.length&&(d=(a=a.shift())&&a.length||-1,this.values.length==d?this.values=a:(this.K("inconsistent saved ROM state (%d), unable to load\n",d),b=!1));return b};ud.prototype.ha=function(){this.R||(this.R=G(this,"CPU"))};
ud.prototype.Qa=function(a){if(this.b){var b=this.b,c=ed;c=(void 0===c?0:c)&129;var d=4*((a/this.i|0)*b.s+a%this.i);if(d<=b.a.length-4){if(1!==b.a[d]||(b.a[d+3]&129)!==c)b.a[d]=1,b.a[d+3]=b.a[d+3]&-130|c|ed,b.u=!0;b.N=d;b.v=!0;b.o=0}}return this.values[a]};ud.prototype.va=function(a){this.b&&(a.push(this.b.a),a.push(this.values))};var Ua="array",Wa="cellDesc";q.ROM=ud;
function vd(a,b,c){F.call(this,a,b,c);this.qa=D(this,"cyclesMinimum",1E5);this.Ha=D(this,"cyclesMaximum",3E6);this.U=Xa(D(this,"cyclesPerSecond",65E4),this.qa,this.Ha);this.L=Xa(D(this,"yieldsPerSecond",wd),30,120);this.Ia=Xa(D(this,"yieldsPerUpdate",xd),1,this.L);this.na=(this.v=D(this,"clockByFrame",120>=this.U))||D(this,"requestAnimationFrame",!0);this.za=this.Fa=this.fa=1;this.oa=this.U/1E4/100;this.h=this.m=this.oa*this.fa;this.s=0;this.ka=Math.round(1E3/this.L);this.ma=[];this.u=[];this.b=[];
this.M=[];this.Ea=this.a=this.N=this.l=!1;this.w=this.g=0;this.Ka=this.Gi.bind(this);this.Ja=this.qc.bind(this);this.wa=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.setTimeout).bind(window);if(this.v)this.f=this.Ga=0;else{var d=this;Dc(this,"timerYield",function(){yd(d)},this.ka)}this.X=this.O=this.j=0;zd(this)||Ad(this,this.za)}m(vd,F);function ad(a,b){a.ma.push(b)}f=vd.prototype;
f.Ma=function(a,b){var c=this;switch(a){case Bd:b.onclick=function(){Cd(c)&&(c.a?dc(c):c.start())};break;case Dd:b.onclick=function(){pc(c)};break;case Ed:b.addEventListener("mousedown",function(){c.l=!0}),b.addEventListener("mouseup",function(){zd(c);c.l=!1}),b.addEventListener("mousemove",function(){c.l&&zd(c)}),b.addEventListener("change",function(){c.l=!0;zd(c);c.l=!1})}F.prototype.Ma.call(this,a,b)};
function Dc(a,b,c,d){d=void 0===d?-1:d;var e=a.b.length+1;a.b.push({id:b,Bd:c,gb:d,ga:-1});0<=d&&Mc(a,e,d);return e}f.qc=function(a){if(this.v){if(!this.a)return;Fd(this);try{this.N=!1;do Gd(this,Hd(this,Id(this,Jd(this))));while(this.a&&!this.N)}catch(c){u(this,c.message);dc(this);return}Kd(this)}for(var b=0;b<this.ma.length;b++)this.ma[b](a);this.a&&this.na&&this.wa(this.Ja)};function Ld(a){var b=a.h/a.oa;if(!b||b>a.fa)b=a.fa;a.Pa=a.U/a.L*b;a.Fa=b}
function Id(a,b){a.O=a.j=b;if(!a.u.length)return a.j=0,a.O;for(var c=0;0<a.j;)c<a.u.length?b=a.u[c++](b)||1:c=b=0,a.j-=b;return a.O-a.j}function Hd(a,b){b=void 0===b?a.O-a.j:b;if(a.v){if(!a.a){if(a.f)for(var c=0;c<a.u.length;c++)a.u[c](-1);a.f=b}a.f-=b;1>a.f&&yd(a)}a.O=a.j=0;a.ba+=b;a.X+=b;a.a||(a.X=0);return b}function Md(a,b){return Math.ceil(a.U*a.Fa/1E3*(void 0===b?1E3:b))}
function Jd(a,b){b=void 0===b?0:b;if(b){var c=b;a.f+=b}else for(c=a.f,1>c&&(c=a.f+=a.Ga),c|=0,b=a.b.length;0<b;b--){var d=a.b[b-1];!(0>d.ga)&&c>d.ga&&(c=d.ga)}return c}function Nd(a){1<=a?a=a.toFixed(2)+"Mhz":(a=Math.round(1E6*a),a=999>=a?a+"Hz":Math.ceil(a/1E3)+"Khz");return a}function Cd(a){return a.Ea?!0:(u(a,"not powered"),!1)}function Gd(a,b){if(1<=b)for(var c=a.b.length;0<c;c--){var d=a.b[c-1];0>d.ga||(d.ga-=b,0>=d.ga&&(d.ga=-1,d.Bd(),0<=d.gb&&Mc(a,c,d.gb)))}}f.ha=function(a){this.Ea=a};
function pc(a,b){Cd(a)&&(a.a?u(a,"already running"):a.g?dc(a):Od(a,b))}function yd(a){a.N=!0;var b=a.s,c=Md(a);c>=a.L?a.s++:a.s+=Math.ceil(a.L/c);a.s>=a.Ia&&b<a.Ia&&a.update();a.s>=a.L&&(a.s=0)}
f.Gi=function(){this.w=0;if(this.a){Fd(this);try{this.N=!1;do{for(var a=Md(this,this.ka),b=this.b.length;0<b;b--){var c=this.b[b-1];!(0>c.ga)&&a>c.ga&&(a=c.ga)}Gd(this,Hd(this,Id(this,a)))}while(this.a&&!this.N)}catch(d){u(this,d.message);dc(this);return}this.a&&(this.w=setTimeout(this.Ka,Kd(this)),this.na||this.qc())}};function zd(a){var b=a.aa[Ed];return b?(Ad(a,Math.floor((b.value-b.min)/(b.max-b.min)*(a.Ha-a.qa)+a.qa)/a.U),!0):!1}
function Ad(a,b){void 0!==b&&(!a.l&&0<a.h&&a.h<.9*a.m&&(b=a.za),a.fa=b,b=a.oa*a.fa,a.m!=b&&(a.m=b,kb(a,Pd,Nd(a.m))),a.h=a.m);a.v&&(a.Ga=1E6*a.h/60+1E-8,a.f=0);a.X=0;a.c=a.i=0;Ld(a);for(b=a.b.length;0<b;b--){var c=a.b[b-1];0<=c.gb&&Mc(a,b,c.gb,!0)}}function Mc(a,b,c,d){0<b&&b<=a.b.length&&(b=a.b[b-1],d||0>b.ga)&&(c=Md(a,c),a.a&&(c+=Hd(a)),b.ga=c)}function Fd(a){Ld(a);a.ba=0;a.pa=0;a.o=Date.now();a.c||(a.c=a.o);if(a.i){var b=a.o-a.i;b>a.ka&&(a.c+=b,a.c>a.o&&(a.c=a.o))}}
function Kd(a){a.i=Date.now();a.pa&&(a.c+=a.pa,a.o+=a.pa);var b=a.ka;a.ba&&(b=Math.round(b*a.ba/a.Pa));b-=a.i-a.o;var c=a.i-a.c;c&&(a.h=a.X/(10*c)/100);0>b?(-1E3>b&&(a.c-=b),b=0):a.h<a.m&&(b=0);a.i+=b;a.K(256,"after running %d cycles, resting for %dms\n",a.ba,b);return b}f.start=function(){if(this.a||this.g)return!1;this.w&&(clearTimeout(this.w),this.w=0);this.a=!0;this.c=this.i=0;this.update(!0);this.v||(this.w=setTimeout(this.Ka,0));this.na&&this.wa(this.Ja);return!0};
function Od(a,b){b=void 0===b?1:b;a.a||(b&&!a.g&&(a.g=b),a.g&&(a.g--,Gd(a,Hd(a,Id(a,Jd(a,1)))),a.update(!1),a.g&&setTimeout(function(){Od(a,0)},0)))}function dc(a){return a.g?(a.g=0,a.update(!0),!0):a.a?(a.a=!1,Hd(a),a.update(!0),!0):!1}
f.update=function(a){a&&(this.a?u(this,"started with "+Nd(this.m)+" target"):u(this,"stopped"));kb(this,Bd,this.a?"Halt":"Run");kb(this,Dd,this.g?"Stop":"Step");this.l||kb(this,Pd,this.a&&this.h?Nd(this.h):"Stopped");for(var b=0;b<this.M.length;b++)this.M[b](void 0!=a)};var Bd="run",Pd="speed",Dd="step",Ed="throttle",wd=120,xd=60;q.Time=vd;function Qd(a,b,c){F.call(this,a,b,c);this.time=G(this,"Time");this.ports=G(this,"Ports");for(var d in Rd)a=Rd[d],vc(this.ports,+d,a[0],a[1],this);this.ja()}
m(Qd,F);f=Qd.prototype;f.ha=function(){};
f.ja=function(){this.o=Sd;this.c=Td|Ud;this.g=Vd;this.h=Wd;this.b=Xd;this.l=Yd;this.u=Zd;this.s=$d;this.m=this.i=this.a=this.j=0;this.f=[11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11776,11784,11918,11776,11984,11888,11776,11808,11776,12E3,12E3,11901,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};function ae(a){var b=0,c=0,d=~a.j;for(a=0;10>a;a++)d&1&&(b=9-a),d>>=1;for(a=0;10>a;a++)d&1&&(c=9-a),d>>=1;return 10*b+c}
f.Id=function(a){var b=this.c;b&=~be;if((Md(this.time)&64)<<1&&(b|=be,b!=this.c)){var c=this.i&1;var d=this.i>>1&7;switch(d){case ce:break;case de:this.j=this.j<<1|c;break;case ee:c=ae(this);this.f[c]=fe;this.K(8,"doNVRCommand(): erase data at addr %#06x\n",c);break;case ge:this.a=this.a<<1|c;break;case he:c=ae(this);d=this.a&fe;this.f[c]=d;this.K(8,"doNVRCommand(): write data %#06x to addr %#06x\n",d,c);break;case ie:c=ae(this);d=this.f[c];null==d&&(d=fe);this.a=d;this.K(8,"doNVRCommand(): read data %#06x from addr %#06x\n",
d,c);break;case je:this.a<<=1;this.m=this.a&fe+1;break;default:this.K(8,"doNVRCommand(): unrecognized command %#04x\n",d)}}b&=~ke;this.m&&(b|=ke);b&=~le;this.v&&this.v.Kd()&&(b|=le);b&=~me;this.w&&this.w.Kd()&&(b|=me);this.c=b;this.K(8,"inFlags(%#04x): %#04x\n",a,b);return b};f.ri=function(a,b){this.K(8,"outBrightness(%#04x): %#04x\n",a,b);this.o=b};f.ui=function(a,b){this.K(8,"outNVRLatch(%#04x): %#04x\n",a,b);this.i=b};
f.ti=function(a,b){this.K(8,"outDC012(%#04x): %#04x\n",a,b);a=b&3;switch(b>>2&3){case 0:this.b=this.b&-4|a;break;case 1:this.b=this.b&-13|a<<2;this.video&&(b=this.video,a=this.b,b.K("updateScrollOffset(%d)\n",a),b.O!==a&&((b.O=a)?b.Pa(!0):b.fa=!0));break;case 2:switch(a){case 0:this.l=~this.l;break;case 2:case 3:this.u=3-a}break;case 3:this.s=a}};
f.si=function(a,b){this.K(8,"outNDC011(%#04x): %#04x\n",a,b);b&ne?(b&=oe,this.h!=b&&(this.h=b,this.video&&(a=this.video,b=this.h==oe?50:60,a.K("updateRate(%d)\n",b),a.Ha=b))):(b&=pe,this.g!=b&&(this.g=b,this.video&&(a=this.g==pe?132:80,b=this.video,b.K("updateDimensions(%d,%d)\n",a,80<a&&this.c&Td?14:24),b.i=a,b.Y=b.na,80<a&&b.Y--,qe(b)&&re(b))))};
f.ta=function(a){var b=a.shift();return this.$==b?(this.o=a.shift(),this.c=a.shift(),this.g=a.shift(),this.h=a.shift(),this.b=a.shift(),this.l=a.shift(),this.u=a.shift(),this.s=a.shift(),this.j=a.shift(),this.a=a.shift(),this.i=a.shift(),this.m=a.shift(),this.f=a.shift(),!0):!1};f.va=function(a){a.push(this.$);a.push(this.o);a.push(this.c);a.push(this.g);a.push(this.h);a.push(this.b);a.push(this.l);a.push(this.u);a.push(this.s);a.push(this.j);a.push(this.a);a.push(this.i);a.push(this.m);a.push(this.f)};
var me=1,Td=2,Ud=4,ke=32,be=64,le=128,Sd=0,pe=16,ne=32,oe=48,Vd=0,Wd=32,Xd=0,Yd=0,Zd=0,$d=0,ge=0,de=1,je=2,he=4,ee=5,ie=6,ce=7,fe=16383,Rd={66:[Qd.prototype.Id,Qd.prototype.ri],98:[null,Qd.prototype.ui],162:[null,Qd.prototype.ti],194:[null,Qd.prototype.si]};q.Chips=Qd;function se(a,b,c){F.call(this,a,b,c);this.time=G(this,"Time");this.ports=G(this,"Ports");for(var d in te)a=te[d],vc(this.ports,+d,a[0],a[1],this);this.h=G(this,"Input");Bc(this.h);this.ja()}m(se,F);f=se.prototype;
f.ha=function(){this.R||(this.R=G(this,"CPU"))};f.ja=function(){this.c=ue;this.b=ve;this.f=!1;this.g=0;this.a=-1};f.Jd=function(a){var b=this.b;if(0<=this.a){var c=this.h;var d=this.a,e=0;d<c.a.length&&(d=c.a[d].keyCode,e=c.h?c.h[d]:d);(c=e)?(this.a++,c&128&&(c&=127)):(this.a=-1,c=we);this.b=c;xe(this.R)}this.K(8,"inUARTAddress(%#04x): %#04x\n",a,b);return b};f.vi=function(a,b){this.K(8,"outUARTStatus(%#04x): %#04x\n",a,b);this.c=b;this.f=!0;this.g=Md(this.time);b&ye&&(this.a=0,xe(this.R))};
f.ta=function(a){var b=a.shift();return this.$==b?(this.c=a.shift(),this.b=a.shift(),this.f=a.shift(),this.g=a.shift(),!0):!1};f.va=function(a){a.push(this.$);a.push(this.c);a.push(this.b);a.push(this.f);a.push(this.g)};
var ve=127,we=127,ye=64,ue=0,I={},Cc=(I[B.mb]=3,I[B.Yb]=5,I[B.Xb]=6,I[B.oc]=7,I[B.fc]=8,I[B.mc]=9,I[B.Q]=10,I[B.$b]=16,I[B.vd]=20,I[B.Zc]=21,I[B.Pb]=22,I[B.jc]=23,I[B.Zb]=24,I[B.E]=25,I[B.ONE]=26,I[B.Tb]=32,I[B.Gb]=34,I[B.Rc]=35,I[B.Cc]=36,I[B.Fb]=37,I[B.Wb]=38,I[B.cc]=39,I[B.Lb]=40,I[B.hc]=41,I[B.Lc]=42,I[B.kc]=48,I[B.Oc]=49,I[B.Mc]=50,I[B.Kc]=51,I[B.Ib]=52,I[B.ZERO]=53,I[B.Hb]=54,I[B.dc]=55,I[B.Kb]=56,I[B.ic]=57,I[B.gc]=58,I[B.jd]=64,I[B.Pc]=65,I[B.Nc]=66,I[B.bd]=67,I[B.Sc]=68,I[B.Dc]=69,I[B.Sb]=
70,I[B.Rb]=71,I[B.Nb]=72,I[B.Jb]=73,I[B.zb]=74,I[B.kd]=80,I[B.nb]=81,I[B.dd]=82,I[B.cd]=83,I[B.ud]=85,I[B.bc]=86,I[B.Qb]=87,I[B.Ob]=88,I[B.Eb]=89,I[B.ac]=90,I[B.md]=96,I[B.Qc]=97,I[B.gd]=98,I[B.fd]=99,I[B.nb]=100,I[B.rd]=101,I[B.Ic]=102,I[B.Vb]=103,I[B.Ab]=104,I[B.nc]=105,I[B.Tc]=106,I[B.ld]=112,I[B.ed]=113,I[B.hd]=114,I[B.nd]=115,I[B.yd]=117,I[B.Ub]=118,I[B.ec]=119,I[B.lc]=120,I[B.Bb]=121,I[B.pc]=122,I[B.Uc]=123,I[B.Jc]=124,I[B.xd]=125,I[B.Fc]=126,I),te={130:[se.prototype.Jd,se.prototype.vi]};
q.Keyboard=se;
function ze(a,b,c){md.call(this,a,b,c);this.N=c.bufferAddr;this.qb=c.bufferRAM;this.i=c.bufferWidth;this.o=c.bufferHeight;this.na=this.Y=c.cellWidth||1;this.V=c.cellHeight||1;this.u=null;this.qa=!1;this.za=c.bufferBits||1;this.Ga=c.interruptRate;this.Ia=c.refreshRate||60;this.oa=this.m/this.i|0;this.pa=this.h/this.o|0;1<this.V&&(this.o++,this.O=0,this.fa=!1);this.j=rb(this,c.bus);qe(this);this.u=c.fontROM;re(this);this.R=G(this,"CPU");this.time=G(this,"Time");this.Ka=Dc(this.time,this.$,this.Pa.bind(this));
this.time.M.push(this.pd.bind(this));Mc(this.time,this.Ka,1E3/Math.max(this.Ia,this.Ga))}m(ze,md);ze.prototype.ha=function(a){md.prototype.ha.call(this,a);this.R||(this.R=G(this,"CPU"))};
function qe(a){a.U=a.i*a.Y;a.X=a.o*a.V;var b=a.U,c=a.X;a.L=0;if(!a.qb&&(a.L=(a.U*a.za>>3)*a.X,!Bb(a.j,a.N,a.L,Cb.cb)))return!1;rd(a,(a.i+1)*a.o);a.w=document.createElement("canvas");a.w.width=b;a.w.height=c;a.ma=a.w.getContext("2d");a.l={};a.ad=1<<a.za;a.M=Array(a.ad);a.M[0]=[0,0,0,255];a.M[1]=[255,255,255,255];a.Ha=60;a.ka=!1;a.v=Array(a.i);a.Ja&&(a.g[a.Ja]=null==a.wa?!1:a.wa);return!0}
function re(a){a.u&&(a.qa=!0,a.l[Ae]=[Be(a,a.Y,a.V),Be(a,a.Y,a.V,a.ka)],a.l[Ce]=[Be(a,2*a.Y,a.V),Be(a,2*a.Y,a.V,a.ka)],a.l[De]=a.l[Ee]=[Be(a,2*a.Y,2*a.V),Be(a,2*a.Y,2*a.V,a.ka)])}
function Be(a,b,c,d){var e=8>=a.na?8:16,g=8<e?15:0,h=a.u.length/e,k=!1===d,l={Y:b,V:c};l.canvas=document.createElement("canvas");l.canvas.width=16*b;l.canvas.height=h/16*c;l.context=l.canvas.getContext("2d");for(var n=l.context.createImageData(b,c),p=0;p<h;p++){for(var y=0,v=y;y<a.V;y++){var r=p*e+(g+y&e-1);r=d&&8==y?255:a.u[r];for(var w=0;w<c/a.V;w++){for(var x=0,z=0,C=z;z<a.Y;z++){var ua=r&128>>(7<z?7:z);x=a.qa&&!ua&&x?x:ua;for(var ba=0;ba<b/a.Y;ba++){k&&(x=!x);var V=n,da=C+v*V.width,Aa=a.M[x?1:
0];da*=Aa.length;V.data[da]=Aa[0];V.data[da+1]=Aa[1];V.data[da+2]=Aa[2];V.data[da+3]=Aa[3];C++}x=ua}v++}}l.context.putImageData(n,(p&15)*b,(p>>4)*c)}return l}function rd(a,b){a.ba=!1;b&&(a.Fa=b,void 0===a.f||a.f.length!=a.Fa)&&(a.f=Array(a.Fa))}
ze.prototype.Pa=function(a){var b=!0;if(!a){if(b&&this.ba&&this.L){var c=this.j,d=this.N,e=this.L,g=!0,h=d>>>c.c;for(d=c.b-(d&c.g);0<e&&h<c.a.length;){var k=c.a[h];k.m?(k.m=!1,k.ca=k.wc,k.da=k.Ac,k=!0):k=!1;k&&(g=!1);e-=d;d=c.b;h++}g&&(b=!1)}Mc(this.time,this.Ka,1E3/Math.max(this.Ia,this.Ga))}b&&sd(this,a)};
function sd(a,b){for(var c=0,d,e=-1,g=60==a.Ha?2:5,h=0,k=0,l=-1,n=a.N;c<a.o;){var p=0,y=n,v=a.i;d=e;for(d!=Ae&&(v>>=1);;){var r=a.j.Z(y++);if((r&Fe)==Fe){r=a.j.Z(y++);e=r&Ge;n=(r&He)<<8|a.j.Z(y);n+=r&Ie?Je:Ke;break}if(p<v)a.v[p++]=r;else break}if(g)g--;else{for(;p<a.v.length;)a.v[p++]=0;if(0<=d)for(y=a.ba&&a.f[h]==v,a.f[h++]=v,v=0;v<p;v++){var w=a.v[v];if(!y||w!==a.f[h]){a.f[l=h]=w;r=a;var x=a.ma;var z=w&127;if(w=r.l[d][w&128?1:0]){var C=(z&15)*w.Y,ua=(z>>4)*w.V,ba=w.Y,V=w.V;if(x){var da=v*r.Y;var Aa=
c*r.V;var Rb=r.Y;z=r.V}else da=v*r.oa,Aa=c*r.pa,Rb=r.oa,z=r.pa;w.Y>r.Y&&(da*=2,Rb*=2);w.V>r.V&&(d==Ee&&(ua+=r.V),V=r.V);x?x.drawImage(w.canvas,C,ua,ba,V,da,Aa,Rb,z):r.g.drawImage(w.canvas,C,ua,ba,V,da,Aa,Rb,z)}k++}h++}c++}}a.ba=!0;!b&&a.fa&&1==k&&(a.f[l]=-1,k=0);a.fa=!1;(k||b)&&a.ma&&a.g.drawImage(a.w,0,a.O,a.U,a.X-a.V,0,0,a.ob,a.pb)}ze.prototype.pd=function(){this.time.a||sd(this)};var Ae=96,Ce=64,De=32,Ee=0,Fe=127,He=15,Ie=16,Ge=96,Je=8192,Ke=16384;q.Video=ze;
function Le(a,b,c){F.call(this,a,b,c);var d=this;Me(this);this.U=[this.Da,this.zf,this.Uh,this.hf,this.af,this.Le,this.Og,this.rh,this.Da,this.Ge,this.wf,this.Se,this.bf,this.Me,this.Pg,this.yh,this.Da,this.Af,this.Vh,this.jf,this.cf,this.Ne,this.Qg,this.oh,this.Da,this.He,this.xf,this.Te,this.df,this.Oe,this.Rg,this.ph,this.Da,this.Bf,this.Rh,this.kf,this.ef,this.Pe,this.Sg,this.Fe,this.Da,this.Ie,this.yf,this.Ue,this.ff,this.Qe,this.Tg,this.oe,this.Da,this.Cf,this.Th,this.lf,this.gf,this.Re,this.Ug,
this.Wh,this.Da,this.Je,this.vf,this.Ve,this.$e,this.Ke,this.Ng,this.pe,this.Mf,this.Nf,this.Of,this.Pf,this.Qf,this.Rf,this.Sf,this.Lf,this.Uf,this.Vf,this.Wf,this.Xf,this.Yf,this.Zf,this.$f,this.Tf,this.bg,this.cg,this.dg,this.eg,this.fg,this.gg,this.hg,this.ag,this.jg,this.kg,this.lg,this.mg,this.ng,this.og,this.pg,this.ig,this.rg,this.sg,this.tg,this.ug,this.vg,this.wg,this.xg,this.qg,this.zg,this.Ag,this.Bg,this.Cg,this.Dg,this.Eg,this.Fg,this.yg,this.Hg,this.Ig,this.Jg,this.Kg,this.Lg,this.Mg,
this.Ye,this.Gg,this.Ef,this.Ff,this.Gf,this.Hf,this.If,this.Jf,this.Kf,this.Df,this.Wd,this.Xd,this.Yd,this.Zd,this.$d,this.ae,this.be,this.Vd,this.Od,this.Pd,this.Qd,this.Rd,this.Sd,this.Td,this.Ud,this.Nd,this.Yh,this.Zh,this.$h,this.ai,this.bi,this.ci,this.di,this.Xh,this.Jh,this.Kh,this.Lh,this.Mh,this.Nh,this.Oh,this.Ph,this.Ih,this.ee,this.fe,this.ge,this.he,this.ie,this.je,this.ke,this.de,this.hi,this.ii,this.ji,this.ki,this.li,this.mi,this.ni,this.gi,this.Wg,this.Xg,this.Yg,this.Zg,this.$g,
this.ah,this.bh,this.Vg,this.re,this.se,this.te,this.ue,this.ve,this.we,this.xe,this.qe,this.uh,this.gh,this.qf,this.uc,this.ze,this.lh,this.ce,this.zh,this.Hh,this.vc,this.uf,this.uc,this.Ee,this.hb,this.Md,this.Ah,this.th,this.hh,this.pf,this.eh,this.ye,this.mh,this.ei,this.Bh,this.qh,this.vc,this.mf,this.Ze,this.me,this.hb,this.Qh,this.Ch,this.xh,this.ih,this.tf,this.pi,this.De,this.nh,this.le,this.Dh,this.wh,this.fh,this.sf,this.fi,this.Be,this.hb,this.oi,this.Eh,this.vh,this.jh,this.rf,this.We,
this.Ae,this.kh,this.dh,this.Fh,this.sh,this.Sh,this.nf,this.Xe,this.ne,this.hb,this.Ce,this.Gh];this.a=this.M=0;this.O=G(this,"Input",!1);this.N=rb(this,this.T.busIO);this.L=rb(this,this.T.busMemory);this.time=G(this,"Time");this.time.u.push(this.Gd.bind(this));this.time.M.push(this.Hi.bind(this));this.ra=void 0;sb(this,"A",function(){return d.b},function(e){return d.b=e&255});sb(this,"B",function(){return d.c},function(e){return d.c=e&255});sb(this,"C",function(){return d.f},function(e){return d.f=
e&255});sb(this,"D",function(){return d.g},function(e){return d.g=e&255});sb(this,"E",function(){return d.h},function(e){return d.h=e&255});sb(this,"H",function(){return d.i},function(e){return d.i=e&255});sb(this,"L",function(){return d.j},function(e){return d.j=e&255});sb(this,"CF",function(){return Ne(d)?1:0},function(e){d.l=e?d.l|256:d.l&255});sb(this,"PF",function(){return Oe(d)?1:0},function(e){e?Oe(d)||(d.o^=1):Oe(d)&&(d.o^=1)});sb(this,"AF",function(){return Pe(d)?1:0},function(e){d.u=e?~d.o&
16|d.u&-17:d.o&16|d.u&-17});sb(this,"ZF",function(){return Qe(d)?1:0},function(e){d.l=e?d.l&-256:d.l|255});sb(this,"SF",function(){return Re(d)?1:0},function(e){e?Re(d)||(d.o^=192):Re(d)&&(d.o^=192)});sb(this,"IF",function(){return d.s&Se?1:0},function(e){d.s=e?d.s|Se:d.s&~Se});sb(this,"BC",this.Ca,this.$a);sb(this,"DE",this.ya,this.Ra);sb(this,"HL",this.J,this.la);sb(this,sc.qd,this.Hd,this.I)}m(Le,F);f=Le.prototype;
f.Gd=function(a){a=void 0===a?0:a;if(0>a)return this.M=0;try{if(this.a=0,this.M=a,Te(this))for(;this.a<=this.M;)this.ib=this.m,this.U[J(this)].call(this)}catch(b){this.m=this.ib,u(this,b.message),dc(this.time)}return this.a};
f.ta=function(a){a=a.shift();if(!a||!a.length)return u(this,"invalid saved state"),!1;var b=a.shift(),c=a.shift();if(b!=this.$||2!==(c|0))return this.K("CPU state mismatch (%s %3.2f)\n",b,c),!1;try{this.b=a.shift(),this.c=a.shift(),this.f=a.shift(),this.g=a.shift(),this.h=a.shift(),this.i=a.shift(),this.j=a.shift(),this.I(a.shift()),this.v=a.shift()&65535,Ue(this,a.shift()),this.w=a.shift()}catch(d){return u(this,"CPU state error: "+d.message),!1}return!0};
f.va=function(a){var b=[];b.push(this.$);b.push(2);b.push(this.b);b.push(this.c);b.push(this.f);b.push(this.g);b.push(this.h);b.push(this.i);b.push(this.j);b.push(this.m);b.push(this.v);b.push(Ve(this));b.push(this.w);a.push(b)};f.ub=function(a){return a&&this.ta(a)?!0:!1};f.ha=function(a){a?(this.time.start(),this.O&&nc(this.O)):dc(this.time)};f.ja=function(){u(this,"reset");Me(this);this.time.a||this.La(this.toString())};f.Ya=function(a){this.va(a)};f.Da=function(){this.a+=4};
f.zf=function(){this.$a(K(this));this.a+=10};f.Uh=function(){We(this,this.Ca(),this.b);this.a+=7};f.hf=function(){this.$a(this.Ca()+1);this.a+=5};f.af=function(){this.c=Xe(this,this.c);this.a+=5};f.Le=function(){this.c=Ye(this,this.c);this.a+=5};f.Og=function(){this.c=J(this);this.a+=7};f.rh=function(){var a=this.b<<1;this.b=a&255|a>>8;Ze(this,a&256);this.a+=4};f.Ge=function(){var a;this.la(a=this.J()+this.Ca());Ze(this,a>>8&256);this.a+=10};f.wf=function(){this.b=L(this,this.Ca());this.a+=7};
f.Se=function(){this.$a(this.Ca()-1);this.a+=5};f.bf=function(){this.f=Xe(this,this.f);this.a+=5};f.Me=function(){this.f=Ye(this,this.f);this.a+=5};f.Pg=function(){this.f=J(this);this.a+=7};f.yh=function(){var a=this.b<<8&256;this.b=(a|this.b)>>1;Ze(this,a);this.a+=4};f.Af=function(){this.Ra(K(this));this.a+=10};f.Vh=function(){We(this,this.ya(),this.b);this.a+=7};f.jf=function(){this.Ra(this.ya()+1);this.a+=5};f.cf=function(){this.g=Xe(this,this.g);this.a+=5};
f.Ne=function(){this.g=Ye(this,this.g);this.a+=5};f.Qg=function(){this.g=J(this);this.a+=7};f.oh=function(){var a=this.b<<1;this.b=a&255|Ne(this);Ze(this,a&256);this.a+=4};f.He=function(){var a;this.la(a=this.J()+this.ya());Ze(this,a>>8&256);this.a+=10};f.xf=function(){this.b=L(this,this.ya());this.a+=7};f.Te=function(){this.Ra(this.ya()-1);this.a+=5};f.df=function(){this.h=Xe(this,this.h);this.a+=5};f.Oe=function(){this.h=Ye(this,this.h);this.a+=5};f.Rg=function(){this.h=J(this);this.a+=7};
f.ph=function(){var a=this.b<<8;this.b=(Ne(this)<<8|this.b)>>1;Ze(this,a&256);this.a+=4};f.Bf=function(){this.la(K(this));this.a+=10};f.Rh=function(){var a=K(this);this.L.da(a,this.J()&65535);this.a+=16};f.kf=function(){this.la(this.J()+1);this.a+=5};f.ef=function(){this.i=Xe(this,this.i);this.a+=5};f.Pe=function(){this.i=Ye(this,this.i);this.a+=5};f.Sg=function(){this.i=J(this);this.a+=7};
f.Fe=function(){var a=0,b=Ne(this);if(Pe(this)||9<(this.b&15))a|=6;if(b||154<=this.b)a|=96,b=$e;this.b=af(this,a);Ze(this,b?256:0);this.a+=4};f.Ie=function(){var a;this.la(a=this.J()+this.J());Ze(this,a>>8&256);this.a+=10};f.yf=function(){this.la(bf(this,K(this)));this.a+=16};f.Ue=function(){this.la(this.J()-1);this.a+=5};f.ff=function(){this.j=Xe(this,this.j);this.a+=5};f.Qe=function(){this.j=Ye(this,this.j);this.a+=5};f.Tg=function(){this.j=J(this);this.a+=7};
f.oe=function(){this.b=~this.b&255;this.a+=4};f.Cf=function(){this.v=K(this)&65535;this.a+=10};f.Th=function(){We(this,K(this),this.b);this.a+=13};f.lf=function(){this.v=this.v+1&65535;this.a+=5};f.gf=function(){var a=this.J();We(this,a,Xe(this,L(this,a)));this.a+=10};f.Re=function(){var a=this.J();We(this,a,Ye(this,L(this,a)));this.a+=10};f.Ug=function(){We(this,this.J(),J(this));this.a+=10};f.Wh=function(){this.l|=256;this.a+=4};
f.Je=function(){var a;this.la(a=this.J()+this.v);Ze(this,a>>8&256);this.a+=10};f.vf=function(){this.b=L(this,K(this));this.a+=13};f.Ve=function(){this.v=this.v-1&65535;this.a+=5};f.$e=function(){this.b=Xe(this,this.b);this.a+=5};f.Ke=function(){this.b=Ye(this,this.b);this.a+=5};f.Ng=function(){this.b=J(this);this.a+=7};f.pe=function(){Ze(this,Ne(this)?0:256);this.a+=4};f.Mf=function(){this.a+=5};f.Nf=function(){this.c=this.f;this.a+=5};f.Of=function(){this.c=this.g;this.a+=5};
f.Pf=function(){this.c=this.h;this.a+=5};f.Qf=function(){this.c=this.i;this.a+=5};f.Rf=function(){this.c=this.j;this.a+=5};f.Sf=function(){this.c=L(this,this.J());this.a+=7};f.Lf=function(){this.c=this.b;this.a+=5};f.Uf=function(){this.f=this.c;this.a+=5};f.Vf=function(){this.a+=5};f.Wf=function(){this.f=this.g;this.a+=5};f.Xf=function(){this.f=this.h;this.a+=5};f.Yf=function(){this.f=this.i;this.a+=5};f.Zf=function(){this.f=this.j;this.a+=5};f.$f=function(){this.f=L(this,this.J());this.a+=7};
f.Tf=function(){this.f=this.b;this.a+=5};f.bg=function(){this.g=this.c;this.a+=5};f.cg=function(){this.g=this.f;this.a+=5};f.dg=function(){this.a+=5};f.eg=function(){this.g=this.h;this.a+=5};f.fg=function(){this.g=this.i;this.a+=5};f.gg=function(){this.g=this.j;this.a+=5};f.hg=function(){this.g=L(this,this.J());this.a+=7};f.ag=function(){this.g=this.b;this.a+=5};f.jg=function(){this.h=this.c;this.a+=5};f.kg=function(){this.h=this.f;this.a+=5};f.lg=function(){this.h=this.g;this.a+=5};
f.mg=function(){this.a+=5};f.ng=function(){this.h=this.i;this.a+=5};f.og=function(){this.h=this.j;this.a+=5};f.pg=function(){this.h=L(this,this.J());this.a+=7};f.ig=function(){this.h=this.b;this.a+=5};f.rg=function(){this.i=this.c;this.a+=5};f.sg=function(){this.i=this.f;this.a+=5};f.tg=function(){this.i=this.g;this.a+=5};f.ug=function(){this.i=this.h;this.a+=5};f.vg=function(){this.a+=5};f.wg=function(){this.i=this.j;this.a+=5};f.xg=function(){this.i=L(this,this.J());this.a+=7};
f.qg=function(){this.i=this.b;this.a+=5};f.zg=function(){this.j=this.c;this.a+=5};f.Ag=function(){this.j=this.f;this.a+=5};f.Bg=function(){this.j=this.g;this.a+=5};f.Cg=function(){this.j=this.h;this.a+=5};f.Dg=function(){this.j=this.i;this.a+=5};f.Eg=function(){this.a+=5};f.Fg=function(){this.j=L(this,this.J());this.a+=7};f.yg=function(){this.j=this.b;this.a+=5};f.Hg=function(){We(this,this.J(),this.c);this.a+=7};f.Ig=function(){We(this,this.J(),this.f);this.a+=7};
f.Jg=function(){We(this,this.J(),this.g);this.a+=7};f.Kg=function(){We(this,this.J(),this.h);this.a+=7};f.Lg=function(){We(this,this.J(),this.i);this.a+=7};f.Mg=function(){We(this,this.J(),this.j);this.a+=7};f.Ye=function(){this.a+=7;this.w|=cf;Hd(this.time);this.s&Se&&!bb(8192)||(this.I(this.m-1),dc(this.time))};f.Gg=function(){We(this,this.J(),this.b);this.a+=7};f.Ef=function(){this.b=this.c;this.a+=5};f.Ff=function(){this.b=this.f;this.a+=5};f.Gf=function(){this.b=this.g;this.a+=5};
f.Hf=function(){this.b=this.h;this.a+=5};f.If=function(){this.b=this.i;this.a+=5};f.Jf=function(){this.b=this.j;this.a+=5};f.Kf=function(){this.b=L(this,this.J());this.a+=7};f.Df=function(){this.a+=5};f.Wd=function(){this.b=af(this,this.c);this.a+=4};f.Xd=function(){this.b=af(this,this.f);this.a+=4};f.Yd=function(){this.b=af(this,this.g);this.a+=4};f.Zd=function(){this.b=af(this,this.h);this.a+=4};f.$d=function(){this.b=af(this,this.i);this.a+=4};f.ae=function(){this.b=af(this,this.j);this.a+=4};
f.be=function(){this.b=af(this,L(this,this.J()));this.a+=7};f.Vd=function(){this.b=af(this,this.b);this.a+=4};f.Od=function(){this.b=df(this,this.c);this.a+=4};f.Pd=function(){this.b=df(this,this.f);this.a+=4};f.Qd=function(){this.b=df(this,this.g);this.a+=4};f.Rd=function(){this.b=df(this,this.h);this.a+=4};f.Sd=function(){this.b=df(this,this.i);this.a+=4};f.Td=function(){this.b=df(this,this.j);this.a+=4};f.Ud=function(){this.b=df(this,L(this,this.J()));this.a+=7};
f.Nd=function(){this.b=df(this,this.b);this.a+=4};f.Yh=function(){this.b=M(this,this.c);this.a+=4};f.Zh=function(){this.b=M(this,this.f);this.a+=4};f.$h=function(){this.b=M(this,this.g);this.a+=4};f.ai=function(){this.b=M(this,this.h);this.a+=4};f.bi=function(){this.b=M(this,this.i);this.a+=4};f.ci=function(){this.b=M(this,this.j);this.a+=4};f.di=function(){this.b=M(this,L(this,this.J()));this.a+=7};f.Xh=function(){this.b=M(this,this.b);this.a+=4};f.Jh=function(){this.b=ef(this,this.c);this.a+=4};
f.Kh=function(){this.b=ef(this,this.f);this.a+=4};f.Lh=function(){this.b=ef(this,this.g);this.a+=4};f.Mh=function(){this.b=ef(this,this.h);this.a+=4};f.Nh=function(){this.b=ef(this,this.i);this.a+=4};f.Oh=function(){this.b=ef(this,this.j);this.a+=4};f.Ph=function(){this.b=ef(this,L(this,this.J()));this.a+=7};f.Ih=function(){this.b=ef(this,this.b);this.a+=4};f.ee=function(){this.b=ff(this,this.c);this.a+=4};f.fe=function(){this.b=ff(this,this.f);this.a+=4};
f.ge=function(){this.b=ff(this,this.g);this.a+=4};f.he=function(){this.b=ff(this,this.h);this.a+=4};f.ie=function(){this.b=ff(this,this.i);this.a+=4};f.je=function(){this.b=ff(this,this.j);this.a+=4};f.ke=function(){this.b=ff(this,L(this,this.J()));this.a+=7};f.de=function(){this.b=ff(this,this.b);this.a+=4};f.hi=function(){this.b=gf(this,this.c);this.a+=4};f.ii=function(){this.b=gf(this,this.f);this.a+=4};f.ji=function(){this.b=gf(this,this.g);this.a+=4};
f.ki=function(){this.b=gf(this,this.h);this.a+=4};f.li=function(){this.b=gf(this,this.i);this.a+=4};f.mi=function(){this.b=gf(this,this.j);this.a+=4};f.ni=function(){this.b=gf(this,L(this,this.J()));this.a+=7};f.gi=function(){this.b=gf(this,this.b);this.a+=4};f.Wg=function(){this.b=hf(this,this.c);this.a+=4};f.Xg=function(){this.b=hf(this,this.f);this.a+=4};f.Yg=function(){this.b=hf(this,this.g);this.a+=4};f.Zg=function(){this.b=hf(this,this.h);this.a+=4};
f.$g=function(){this.b=hf(this,this.i);this.a+=4};f.ah=function(){this.b=hf(this,this.j);this.a+=4};f.bh=function(){this.b=hf(this,L(this,this.J()));this.a+=7};f.Vg=function(){this.b=hf(this,this.b);this.a+=4};f.re=function(){M(this,this.c);this.a+=4};f.se=function(){M(this,this.f);this.a+=4};f.te=function(){M(this,this.g);this.a+=4};f.ue=function(){M(this,this.h);this.a+=4};f.ve=function(){M(this,this.i);this.a+=4};f.we=function(){M(this,this.j);this.a+=4};
f.xe=function(){M(this,L(this,this.J()));this.a+=7};f.qe=function(){M(this,this.b);this.a+=4};f.uh=function(){Qe(this)||(this.I(jf(this)),this.a+=6);this.a+=5};f.gh=function(){this.$a(jf(this));this.a+=10};f.qf=function(){var a=K(this);Qe(this)||this.I(a);this.a+=10};f.uc=function(){this.I(K(this));this.a+=10};f.ze=function(){var a=K(this);Qe(this)||(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.lh=function(){N(this,this.Ca());this.a+=11};f.ce=function(){this.b=af(this,J(this));this.a+=7};
f.zh=function(){N(this,this.m);this.I(0);this.a+=11};f.Hh=function(){Qe(this)&&(this.I(jf(this)),this.a+=6);this.a+=5};f.vc=function(){this.I(jf(this));this.a+=10};f.uf=function(){var a=K(this);Qe(this)&&this.I(a);this.a+=10};f.Ee=function(){var a=K(this);Qe(this)&&(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.hb=function(){var a=K(this);N(this,this.m);this.I(a);this.a+=17};f.Md=function(){this.b=df(this,J(this));this.a+=7};f.Ah=function(){N(this,this.m);this.I(8);this.a+=11};
f.th=function(){Ne(this)||(this.I(jf(this)),this.a+=6);this.a+=5};f.hh=function(){this.Ra(jf(this));this.a+=10};f.pf=function(){var a=K(this);Ne(this)||this.I(a);this.a+=10};f.eh=function(){var a=J(this);this.N.ca(a,this.b);this.a+=10};f.ye=function(){var a=K(this);Ne(this)||(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.mh=function(){N(this,this.ya());this.a+=11};f.ei=function(){this.b=M(this,J(this));this.a+=7};f.Bh=function(){N(this,this.m);this.I(16);this.a+=11};
f.qh=function(){Ne(this)&&(this.I(jf(this)),this.a+=6);this.a+=5};f.mf=function(){var a=K(this);Ne(this)&&this.I(a);this.a+=10};f.Ze=function(){var a=J(this);this.b=this.N.Z(a)&255;this.a+=10};f.me=function(){var a=K(this);Ne(this)&&(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.Qh=function(){this.b=ef(this,J(this));this.a+=7};f.Ch=function(){N(this,this.m);this.I(24);this.a+=11};f.xh=function(){Oe(this)||(this.I(jf(this)),this.a+=6);this.a+=5};f.ih=function(){this.la(jf(this));this.a+=10};
f.tf=function(){var a=K(this);Oe(this)||this.I(a);this.a+=10};f.pi=function(){var a=jf(this);N(this,this.J());this.la(a);this.a+=18};f.De=function(){var a=K(this);Oe(this)||(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.nh=function(){N(this,this.J());this.a+=11};f.le=function(){this.b=ff(this,J(this));this.a+=7};f.Dh=function(){N(this,this.m);this.I(32);this.a+=11};f.wh=function(){Oe(this)&&(this.I(jf(this)),this.a+=6);this.a+=5};f.fh=function(){this.I(this.J());this.a+=5};
f.sf=function(){var a=K(this);Oe(this)&&this.I(a);this.a+=10};f.fi=function(){var a=this.J();this.la(this.ya());this.Ra(a);this.a+=5};f.Be=function(){var a=K(this);Oe(this)&&(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.oi=function(){this.b=gf(this,J(this));this.a+=7};f.Eh=function(){N(this,this.m);this.I(40);this.a+=11};f.vh=function(){Re(this)||(this.I(jf(this)),this.a+=6);this.a+=5};f.jh=function(){var a=jf(this);Ue(this,a&kf|this.s&~kf);this.b=a>>8;this.a+=10};
f.rf=function(){var a=K(this);Re(this)||this.I(a);this.a+=10};f.We=function(){this.s&=~Se;this.a+=4};f.Ae=function(){var a=K(this);Re(this)||(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.kh=function(){N(this,Ve(this)&kf|this.b<<8);this.a+=11};f.dh=function(){this.b=hf(this,J(this));this.a+=7};f.Fh=function(){N(this,this.m);this.I(48);this.a+=11};f.sh=function(){Re(this)&&(this.I(jf(this)),this.a+=6);this.a+=5};f.Sh=function(){this.v=this.J()&65535;this.a+=5};
f.nf=function(){var a=K(this);Re(this)&&this.I(a);this.a+=10};f.Xe=function(){this.s|=Se;this.a+=4;Te(this)};f.ne=function(){var a=K(this);Re(this)&&(N(this,this.m),this.I(a),this.a+=6);this.a+=11};f.Ce=function(){M(this,J(this));this.a+=7};f.Gh=function(){N(this,this.m);this.I(56);this.a+=11};function Me(a){a.b=0;a.c=0;a.f=0;a.g=0;a.h=0;a.i=0;a.j=0;a.v=0;a.I(a.X);a.ib=a.m;Ue(a,0);a.w=lf}f.Ca=function(){return this.c<<8|this.f};f.$a=function(a){this.c=a>>8&255;this.f=a&255};
f.ya=function(){return this.g<<8|this.h};f.Ra=function(a){this.g=a>>8&255;this.h=a&255};f.J=function(){return this.i<<8|this.j};f.la=function(a){this.i=a>>8&255;this.j=a&255};f.Hd=function(){return this.m};f.I=function(a){this.m=a&65535};function Ne(a){return a.l&256?$e:0}function Ze(a,b){a.l=a.l&255|b}function Oe(a){return mf[a.o&255]?nf:0}function Pe(a){return(a.o^a.u)&16?of:0}function Qe(a){return a.l&255?0:pf}function Re(a){return a.o&128?qf:0}
function Ve(a){return a.s&~rf|Re(a)|Qe(a)|Pe(a)|Oe(a)|Ne(a)}function Ue(a,b){a.l=a.o=a.u=0;b&$e&&(a.l|=256);b&nf||(a.o|=1);b&of&&(a.u|=16);b&pf||(a.l|=255);b&qf&&(a.o^=192);a.s=a.s&~(rf|Se)|b&Se|sf}function af(a,b){a.u=a.b^b;return a.o=(a.l=a.b+b)&255}function df(a,b){a.u=a.b^b;return a.o=(a.l=a.b+b+(a.l&256?1:0))&255}function ff(a,b){a.l=a.o=a.u=a.b&b;(a.b|b)&8&&(a.u^=16);return a.l}function Ye(a,b){a.u=b^255;b=a.o=b+255&255;a.l=a.l&-256|b;return b}
function Xe(a,b){a.u=b;b=a.o=b+1&255;a.l=a.l&-256|b;return b}function hf(a,b){return a.o=a.l=a.u=a.b|b}function M(a,b){b^=255;a.u=a.b^b;return a.o=(a.l=a.b+b+1^256)&255}function ef(a,b){b^=255;a.u=a.b^b;return a.o=(a.l=a.b+b+(a.l&256?0:1)^256)&255}function gf(a,b){return a.o=a.l=a.u=a.b^b}function L(a,b){return a.L.Z(b)|0}function bf(a,b){return a.L.ua(b)}function We(a,b,c){a.L.ca(b,c&255)}function J(a){var b=L(a,a.m);a.I(a.m+1);return b}function K(a){var b=bf(a,a.m);a.I(a.m+2);return b}
function jf(a){var b=bf(a,a.v);a.v=a.v+2&65535;return b}function N(a,b){a.v=a.v-2&65535;a.L.da(a.v,b&65535)}function Te(a){if(a.time.a&&a.w&tf&&a.s&Se){var b;for(b=0;8>b&&!(a.w&1<<b);b++);a.w&=~(0>b?255:1<<b);a.s&=~Se;a.w&=~cf;a.U[uf|b<<3].call(a)}return a.w&cf?(Hd(a.time),!1):!0}function xe(a){a.w|=2;a.s&Se&&Hd(a.time)}
f.toString=function(){return this.H("A=%02X BC=%04X DE=%04X HL=%04X SP=%04X I%d S%d Z%d A%d P%d C%d\n%s",this.b,this.Ca(),this.ya(),this.J(),this.v,this.s&Se?1:0,Re(this)?1:0,Qe(this)?1:0,Pe(this)?1:0,Oe(this)?1:0,Ne(this)?1:0,this.ra&&gc(this.ra,this.m,1)||"")};f.Hi=function(){};
var $e=1,sf=2,nf=4,of=16,pf=64,qf=128,kf=255,Se=512,rf=$e|nf|of|pf|qf,mf=[1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,
0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1],lf=0,tf=255,cf=256,uf=199;q.CPU=Le;function vf(a,b,c){Fb.call(this,a,b,c);this.style=wf;this.w=3}m(vf,Fb);
vf.prototype.xb=function(a,b){function c(ba,V){var da=xf[ba];g.style==wf&&V&yf&&(ba==zf&&(da="HL"),da="["+da+"]");return da}function d(ba){switch(ba&Af){case O:var V=Ba(g,e(),16,8,"");break;case Bf:V=Ba(g,(e()|e()<<8)<<24>>24,16,16,"");break;case Cf:V=Ba(g,e()|e()<<8,16,16,"");break;default:return"imm("+Ba(g,ba,16,16,"")+")"}g.style==wf&&ba&yf?V="["+V+"]":ba&Df||(V=(g.style==Ef?"$":"0x")+V);return V}function e(){var ba=b.shift();k+=Ba(g,ba,16,8,"");Hb(g,a,1);return ba}for(var g=this,h=ec(this,a),
k="",l=e(),n=Ff[l],p="",y=(this.style!=wf?Gf:Hf)[n[0]],v=n.length-1,r=If,w,x=1;x<=v;x++){var z="";w=n[x];if(void 0!==w&&!(w&P&&this.style==Ef)){var C=w&Jf;if(C){var ua=w&Af;ua?r=ua:w|=r;w&Kf||(w|=1==x?Lf:Mf);C&Q?z=d(w):C&Df?z=c((w&Nf)>>8,w):C&Of&&(z=(l>>3&7).toString());if(!z||!z.length){p="INVALID";break}0<p.length&&(p+=",");p+=z||"???"}}}return this.H("%s %-9s%s %-7s %s\n",h,k,w&Pf?"*":" ",y,p)};
var Ef=8080,wf=8086,Gf="NONE ACI ADC ADD ADI ANA ANI CALL CC CM CNC CNZ CP CPE CPO CZ CMA CMC CMP CPI DAA DAD DCR DCX DI EI HLT IN INR INX JMP JC JM JNC JNZ JP JPE JPO JZ LDA LDAX LHLD LXI MOV MVI NOP ORA ORI OUT PCHL POP PUSH RAL RAR RET RC RM RNC RNZ RP RPE RPO RZ RLC RRC RST SBB SBI SHLD SPHL STA STAX STC SUB SUI XCHG XRA XRI XTHL".split(" "),Hf="NONE ADC ADC ADD ADD AND AND CALL CALLC CALLS CALLNC CALLNZ CALLNS CALLP CALLNP CALLZ NOT CMC CMP CMP DAA ADD DEC DEC CLI STI HLT IN INC INC JMP JC JS JNC JNZ JNS JP JNP JZ MOV MOV MOV MOV MOV MOV NOP OR OR OUT JMP POP PUSH RCL RCR RET RETC RETS RETNC RETNZ RETNS RETP RETNP RETZ ROL ROR RST SBB SBB MOV MOV MOV MOV STC SUB SUB XCHG XOR XOR XCHG".split(" "),
zf=6,xf="B C D E H L M A BC DE HL SP PC PS PSW".split(" "),Af=15,Jf=240,Nf=3840,Kf=61440,If=0,O=1,Bf=2,Cf=3,Df=16,Q=32,yf=64,Of=128,R=1792|Df|O,S=0|Df|O,T=256|Df|O,U=512|Df|O,W=768|Df|O,X=1024|Df|O,Y=1280|Df|O,Z=zf<<8|Df|O|yf,Qf=2048|Df|Cf,Rf=2304|Df|Cf,Sf=2560|Df|Cf,Tf=2816|Df|Cf,Uf=3584|Df|Cf,Mf=4096,Lf=8192,P=16384,Pf=32768,Ff=[[45],[42,Qf,Q],[71,Qf|yf,R|P],[29,Qf],[28,S],[22,S],[44,S,Q],[63],[45,Pf],[21,Sf|P,Qf],[40,R|P,Qf|yf],[23,Qf],[28,T],[22,T],[44,T,Q],[64],[45,Pf],[42,Rf,Q],[71,Rf|yf,R|
P],[29,Rf],[28,U],[22,U],[44,U,Q],[52],[45,Pf],[21,Sf|P,Rf],[40,R|P,Rf|yf],[23,Rf],[28,W],[22,W],[44,W,Q],[53],[45,Pf],[42,Sf,Q],[68,51|yf,Sf|P],[29,Sf],[28,X],[22,X],[44,X,Q],[20],[45,Pf],[21,Sf|P,Sf],[41,Sf|P,51|yf],[23,Sf],[28,Y],[22,Y],[44,Y,Q],[16,R|P],[45,Pf],[42,Tf,Q],[70,51|yf,R|P],[29,Tf],[28,Z],[22,Z],[44,Z,Q],[72],[45,Pf],[21,Sf|P,Tf],[39,R|P,51|yf],[23,Tf],[28,R],[22,R],[44,R,Q],[17],[43,S,S],[43,S,T],[43,S,U],[43,S,W],[43,S,X],[43,S,Y],[43,S,Z],[43,S,R],[43,T,S],[43,T,T],[43,T,U],[43,
T,W],[43,T,X],[43,T,Y],[43,T,Z],[43,T,R],[43,U,S],[43,U,T],[43,U,U],[43,U,W],[43,U,X],[43,U,Y],[43,U,Z],[43,U,R],[43,W,S],[43,W,T],[43,W,U],[43,W,W],[43,W,X],[43,W,Y],[43,W,Z],[43,W,R],[43,X,S],[43,X,T],[43,X,U],[43,X,W],[43,X,X],[43,X,Y],[43,X,Z],[43,X,R],[43,Y,S],[43,Y,T],[43,Y,U],[43,Y,W],[43,Y,X],[43,Y,Y],[43,Y,Z],[43,Y,R],[43,Z,S],[43,Z,T],[43,Z,U],[43,Z,W],[43,Z,X],[43,Z,Y],[26],[43,Z,R],[43,R,S],[43,R,T],[43,R,U],[43,R,W],[43,R,X],[43,R,Y],[43,R,Z],[43,R,R],[3,R|P,S],[3,R|P,T],[3,R|P,U],[3,
R|P,W],[3,R|P,X],[3,R|P,Y],[3,R|P,Z],[3,R|P,R],[2,R|P,S],[2,R|P,T],[2,R|P,U],[2,R|P,W],[2,R|P,X],[2,R|P,Y],[2,R|P,Z],[2,R|P,R],[73,R|P,S],[73,R|P,T],[73,R|P,U],[73,R|P,W],[73,R|P,X],[73,R|P,Y],[73,R|P,Z],[73,R|P,R],[66,R|P,S],[66,R|P,T],[66,R|P,U],[66,R|P,W],[66,R|P,X],[66,R|P,Y],[66,R|P,Z],[66,R|P,R],[5,R|P,S],[5,R|P,T],[5,R|P,U],[5,R|P,W],[5,R|P,X],[5,R|P,Y],[5,R|P,Z],[5,R|P,R],[76,R|P,S],[76,R|P,T],[76,R|P,U],[76,R|P,W],[76,R|P,X],[76,R|P,Y],[76,R|P,Z],[76,R|P,R],[46,R|P,S],[46,R|P,T],[46,R|P,
U],[46,R|P,W],[46,R|P,X],[46,R|P,Y],[46,R|P,Z],[46,R|P,R],[18,R|P,S],[18,R|P,T],[18,R|P,U],[18,R|P,W],[18,R|P,X],[18,R|P,Y],[18,R|P,Z],[18,R|P,R],[58],[50,Qf],[34,51],[30,51],[11,51],[51,Qf],[4,R|P,Q|O],[65,Of],[62],[54],[38,51],[30,51|Pf],[15,51],[7,51],[1,R|P,Q|O],[65,Of],[57],[50,Rf],[33,51],[48,Q|O,R|P],[10,51],[51,Rf],[74,R|P,Q|O],[65,Of],[55],[54,Pf],[31,51],[27,R|P,Q|O],[8,51],[7,51|Pf],[67,R|P,Q|O],[65,Of],[61],[50,Sf],[37,51],[78,Tf|yf|P,Sf|P],[14,51],[51,Sf],[6,R|P,Q|O],[65,Of],[60],[49,
Sf],[36,51],[75,Sf|P,Rf|P],[13,51],[7,51|Pf],[77,R|P,Q|O],[65,Of],[59],[50,Uf],[35,51],[24],[12,51],[51,Uf],[47,R|P,Q|O],[65,Of],[56],[69,Tf|P,Sf|P],[32,51],[25],[9,51],[7,51|Pf],[19,R|P,Q|O],[65,Of]];q.Debugger=vf;
function Vf(a,b){F.call(this,a,a);var c=this;this.i=this.a=!1;this.b="";this.h=this.g=!1;b=b.trim();"{"==b[0]?Wf(this,b):(this.b=b,Ya(this.b,function(d,e,g,h){4==g&&(!h&&e?(Wf(c,e),Xf(c)):c.K("error (%d) loading configuration: %s\n",h,d))}));window.addEventListener("load",function(){c.h=!0;Xf(c)});window.addEventListener((cb("iOS")?"pagehide":cb("Opera")?"unload":void 0)||"beforeunload",function(){Yf(c)})}m(Vf,F);
Vf.prototype.Ma=function(a,b){var c=this;switch(a){case od:b.onclick=function(){c.a&&c.ha()};break;case Zf:b.onclick=function(){c.a&&c.ja()}}F.prototype.Ma.call(this,a,b)};
function Xf(a){var b=!0;if(a.g&&a.h){for(var c in a.c){var d=void 0,e=void 0;try{var g=a.c[c];e=g["class"];q[e]?"Machine"==e?(a.K("PCjs %s v%3.2f\n%s\n%s\n",g.name,2,$f,ag),a.b&&a.K("Configuration: %s\n",a.b)):(d=new q[e](a.S,c,g),a.K("%s device: %s\n",e,d.status)):a.K("unrecognized %s device class: %s\n",c,e)}catch(k){a.K("error initializing %s device '%s': %s\n",e,c,k.message),vb(a,c),b=!1}}if(a.f){var h=db(a);tb(a,function(k){k.ub&&k.ub(h)})}a.ha(b)}}
function Yf(a){if(a.f){var b=[];tb(a,function(c){c.Ya&&c.Ya(b)});jb(a,b)}a.ha(!1)}function Wf(a,b){try{a.c=JSON.parse(b),pb(a,a.c[a.S]),a.f=!1!==a.T.autoSave,a.j=!1!==a.T.autoStart,a.g=!0}catch(e){var c=e.message,d=c.match(/position ([0-9]+)/);d&&(c+=" ('"+b.substr(+d[1],40).replace(/\s+/g," ")+"...')");u(a,"machine '"+a.S+"' initialization error: "+c)}}
Vf.prototype.ha=function(a){a=void 0===a?!this.i:a;var b=this;a&&u(this,"power on");tb(this,function(c){c.ha&&c!=b&&("CPU"!=c.T["class"]||b.j||b.a?c.ha(a):c.time.update(!0))});this.a=!0;(this.i=a)||u(this,"power off")};Vf.prototype.ja=function(){var a=this;tb(this,function(b){b.ja&&b!=a&&b.ja()})};var od="power",Zf="reset",$f="Copyright \u00a9 2012-2019 Jeff Parsons <Jeff@pcjs.org>",ag="License: GPL version 3 or later <http://gnu.org/licenses/gpl.html>";
window.VT100=function(a,b){var c=new Vf(a,b);window.command=function(d){return Na(c,d)};return c};q.Machine=Vf;})()

//# sourceMappingURL=vt100.js.map
