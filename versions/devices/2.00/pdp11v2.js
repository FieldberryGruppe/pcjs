(function(){/*
 https://www.pcjs.org/modules/devices/lib/webio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/defs.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/numio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/stdio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/device.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/input.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/led.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/time.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/bus.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/memory.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/ports.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/ram.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/rom.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/cpu.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/pdp11ops.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/pdp11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/debugger.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/pdp11dbg.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/machine.js (C) Jeff Parsons 2012-2019
*/
var n;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:aa(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ca="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},da;
if("function"==typeof Object.setPrototypeOf)da=Object.setPrototypeOf;else{var ea;a:{var fa={tb:!0},ha={};try{ha.__proto__=fa;ea=ha.tb;break a}catch(a){}ea=!1}da=ea?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ia=da;
function u(a,b){a.prototype=ca(b.prototype);a.prototype.constructor=a;if(ia)ia(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Kf=b.prototype}var ja="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ka="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function la(a,b){if(b){var c=ka;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ja(c,a,{configurable:!0,writable:!0,value:b})}}la("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});la("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});
function ma(){ma=function(){};ka.Symbol||(ka.Symbol=na)}function oa(a,b){this.a=a;ja(this,"description",{configurable:!0,writable:!0,value:b})}oa.prototype.toString=function(){return this.a};var na=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new oa("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function pa(){ma();var a=ka.Symbol.iterator;a||(a=ka.Symbol.iterator=ka.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ja(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(aa(this))}});pa=function(){}}function qa(a){pa();a={next:a};a[ka.Symbol.iterator]=function(){return this};return a}
function ra(a,b){pa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}la("Array.prototype.keys",function(a){return a?a:function(){return ra(this,function(b){return b})}});la("Number.parseInt",function(a){return a||parseInt});
la("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});var sa,ta=new ArrayBuffer(2);(new DataView(ta)).setUint16(0,256,!0);sa=256===(new Uint16Array(ta))[0];function va(){}var x={};x.Defs=va;function wa(){}u(wa,va);
function xa(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var g;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(g=parseInt(a,b))){e&&(0>g&&(g+=Math.pow(2,36)),g=0<e?g*Math.pow(2,e):Math.trunc(g/Math.pow(2,-e)));var f=g}}return f}
function y(a,b,c,d,e){d=void 0===d?0:d;var g=void 0===g?0:g;var f="",k="",h=-1;c||(c=a.Z||10);d&&(h=Math.ceil(d/Math.log2(c)));if(void 0==e)switch(c){case 8:e="0o";break;case 16:e="0x";break;case 10:k=".";default:e=""}isNaN(b)||"number"!=typeof b?(b=void 0,e=k=""):(0>b&&-1<b&&(b=-1),d&&(0>b&&(b+=Math.pow(2,d)),b>=Math.pow(2,d)&&(h=Math.ceil(Math.log(b)/Math.log(c)))));for(a=g||-1;h--;){a||(f=","+f,a=g);if(void 0==b){if(f="?"+f,0>h)break}else if(d=b%c,b=Math.trunc(b/c),d+=0<=d&&9>=d?48:55,f=String.fromCharCode(d)+
f,!b&&0>h)break;a--}return e+f+k}function ya(a,b){var c=a/D|0,d=b/D|0;return(a&b)==(b|0)&&(c&d)==d}function za(a){for(var b=0,c=0,d=[];b<a.length;){for(var e=a[b],g=b+1;g<a.length&&a[g]===e;)g++;d[c++]=g-b;d[c++]=e;b=g}return d.length>=a.length?a:d}var D=Math.pow(2,32);x.NumIO=wa;function E(){this.La={};for(var a=0;22>a;a++)this.La["ACDFHIMNSTWYbdfjcsoXx%"[a]]=null}u(E,wa);function Aa(a,b,c){a.La[b]||(a.La[b]=c)}n=E.prototype;n.flush=function(){var a=Ba;Ba="";this.Aa(a)};
n.Ed=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return void 0===b[0]?new Date(Date.now()):"string"===typeof b[0]?new Date(b[0]+" "+(b[1]||"00:00:00 GMT")):void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,ba(b)))};n.Aa=function(a,b){var c=a.lastIndexOf("\n");b?0<=c&&(b=Date.now(),Ca||(Ca=b),a=((b-Ca)/1E3).toFixed(3)+": "+a):(0<=c&&(console.log(Ba+a.substr(0,c)),Ba="",a=a.substr(c+1)),Ca=null);Ba+=a;return a.length};function F(a,b,c){a.Aa(b+"\n",c)}
n.H=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return this.Aa(this.o.apply(this,[a].concat(ba(c))))};
n.o=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!c||!c.length)return a;d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),g=0,f;for(f=0;f<e.length-6;f+=6){d+=e[f];var k=e[f+5];if(void 0===this.La[k])d+="%"+e[f+1]+e[f+2]+e[f+3]+e[f+4]+k;else{if(g<c.length){var h=c[g];"%"!=k&&g++}else h=c[c.length-1];var m=e[f+1],l=0<=m.indexOf("#"),v=0<=m.indexOf("0"),p=e[f+2];"*"==p?(p=h,h=g<c.length?c[g++]:c[c.length-1]):p=+p||0;var q=e[f+3];q=q?+q.substr(1):
-1;var w=null,t=0,z="";var r=0<="ACDFHIMNSTWY".indexOf(k)&&"object"!=typeof h?this.Ed(h):h;switch(k){case "C":h=l?"#":"";d+=isNaN(r.getTime())?void 0:this.o(this.o("%%%sW, %%%sF %%%sD, %%%sY",h),r);continue;case "D":h=l?r.getUTCDate():r.getDate();k="d";break;case "A":case "H":case "I":h=l?r.getUTCHours():r.getHours();"A"==k?(h=12>h?"am":"pm",k="s"):("I"==k&&(h=h?12<h?h-12:h:12),k="d");break;case "F":case "M":h=l?r.getUTCMonth():r.getMonth();"F"==k?(h=Da[h],k="s"):(h++,k="d");break;case "N":h=l?r.getUTCMinutes():
r.getMinutes();k="d";break;case "S":h=l?r.getUTCSeconds():r.getSeconds();k="d";break;case "T":h=l?"#":"";d+=isNaN(r.getTime())?void 0:this.o(this.o("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",h),r);continue;case "W":h=Ea[l?r.getUTCDay():r.getDay()];k="s";break;case "Y":h=l?r.getUTCFullYear():r.getFullYear(),0<q&&(h%=Math.pow(10,q),q=-1),k="d"}switch(k){case "b":d+=h?"true":"false";break;case "d":h=Math.trunc(h),0<=q&&(v=!0,p<q&&(p=q),q=-1);case "f":h=+h;r=h+"";0<=q&&(r=h.toFixed(q));r.length<
p&&(v?(0>h&&(p--,r=r.substr(1)),r=("0000000000"+r).slice(-p),0>h&&(r="-"+r)):r=("          "+r).slice(-p));d+=r;break;case "j":d+=JSON.stringify(h,null,p||void 0);break;case "c":h="string"==typeof h?h[0]:String.fromCharCode(h);case "s":if(void 0!=h)for("string"!=typeof h&&(h=h.toString()),0<=q&&(h=h.substr(0,q));h.length<p;)h=0<=m.indexOf("-")?h+" ":" "+h;d+=h;break;case "o":t=8,l&&(z="0");case "X":w=Fa;case "x":r="";t||(t=16);!z&&l&&(z="0x");w||(w=Ga);h=Math.trunc(h);0<=q&&(v=!0,p<q&&(p=q));v&&!p&&
(p=Math.abs(h),p=255>=p?2:65535>=p?4:4294967295>=p?8:9,p+=z.length);p-=z.length;do l=h&t-1,h>>>=16==t?4:3,v||!r||l||h?r=w[l]+r:(z&&(r=z+r,z=""),0<p&&(r=" "+r));while(0<--p||h);d+=z+r;break;case "%":d+="%";break;default:this.La[k]?d+=this.La[k](k,m,p,q,h):d+="(unimplemented sprintf type: %"+k+")"}}}return d+=e[f]};var Ba="",Ca=null,Ga="0123456789abcdef",Fa="0123456789ABCDEF",Ea="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Da="January February March April May June July August September October November December".split(" ");
x.StdIO=E;function G(a){E.call(this);this.ba={};this.ha=0;this.R=this;a&&(this.R.ha=0,this.R.wa=[],this.R.sa=0,this.R.Xa={},this.R.Ff=!1)}var Ha;u(G,E);G.prototype.Sa=function(a,b){var c=this,d=this;switch(a){case Ia.Dc:b.onclick=function(){var e=c.Ha(Ia.Ya,!0);e&&(e.value="")};break;case Ia.Ya:Ja(b),b.addEventListener("keydown",function(e){Ka(d,e,!0)}),b.addEventListener("keypress",function(e){Ka(d,e)})}};function La(a,b){var c=Ma.Mb;a.R.Xa[c]||(a.R.Xa[c]=[]);a.R.Xa[c].push(b)}
function Ja(a){a.setAttribute("autocapitalize","off");a.setAttribute("autocomplete","off");a.setAttribute("autocorrect","off");a.setAttribute("spellcheck","false");a.value=""}G.prototype.Ha=function(a){return this.ba[a]};function Na(a){var b=window;if(b){do{for(var c=0;c<Oa.length;c++){var d=Oa[c];d=d?d+a[0].toUpperCase():a[0];d+=a.substr(1);if(d in b)return d}if(0>a.indexOf("screen"))break;a=a.replace("screen","Screen")}while(1)}return null}
function Pa(a){var b=Qa;return a.T.bindings&&a.T.bindings[b]}function Ra(a){if(a=a.ba[Sa])var b=a.textContent;return b}function Ta(a,b,c){a=+a||0;a<b&&(a=b);a>c&&(a=c);return a}function H(a,b,c,d){a=a.T[b];void 0===a?a=c:(d&&void 0!==d[a]&&(a=d[a]),d=typeof c,typeof a!=d&&("boolean"==d?a=!!a:"number"==typeof c&&(a=+a)));return a}
function Ua(a,b){var c=0,d=null,e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){4===e.readyState&&(d=e.responseText,200==e.status||!e.status&&d.length&&"file:"==(window?window.location.protocol:"file:")||(c=e.status||-1));b(a,d,e.readyState,c)};e.open("GET",a,!0);e.send()}
function Va(a){if(void 0===Wa.kb){var b=!1;if(window)try{window.localStorage.setItem(Wa.Pa,Wa.Pa),b=window.localStorage.getItem(Wa.Pa)==Wa.Pa,window.localStorage.removeItem(Wa.Pa)}catch(c){F(a,c.message),b=!1}Wa.kb=b}return!!Wa.kb}function Xa(a,b){b=void 0===b?0:b;1<b&&b%2&&b--;b=b||a.ha;return-1==(b|1)||ya(a.R.ha,b)?!0:!1}
function Ya(a){if(window){var b=window.navigator.userAgent;return"iOS"==a&&(!!b.match(/(iPod|iPhone|iPad)/)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function Za(a){var b=null;if(Va(a)){var c;if(window)try{(c=window.localStorage.getItem(a.V))&&(b=JSON.parse(c))}catch(d){F(a,d.message)}}return b}
function Ka(a,b,c){b=b||window.event;var d=b.which||b.keyCode;if(d){var e=a.R,g=b.target;if(c){a=!1;var f;c=g.value;var k=c.lastIndexOf("\n");d==I.Jb&&g.selectionStart<=k+1&&(a=!0);d==I.gd?(a=!0,0<e.sa&&(f=e.wa[--e.sa])):d==I.Gc&&(a=!0,e.sa<e.wa.length&&(f=e.wa[++e.sa]||""));a&&b.preventDefault();void 0!=f&&(g.value=c.substr(0,k+1)+f)}else d=String.fromCharCode(d),f=g.value,c=f.lastIndexOf("\n"),g.selectionStart<=c&&g.setSelectionRange(f.length,f.length),b.stopPropagation(),"@"==d&&0<e.sa&&c+1==f.length&&
(g.value+=e.wa[--e.sa],d="\r"),"\r"==d&&(b.preventDefault(),f=g.value+="\n",g.blur(),g.focus(),(b=$a(a,f.slice(f.lastIndexOf("\n",f.length-2)+1,-1)||""))&&F(a,b.replace(/\n$/,""),!1))}}function ab(a){return"true"==a||"on"==a?!0:"false"==a||"off"==a?!1:void 0}
function bb(a,b){if(void 0!=b){var c=a.R;try{if(b=b.trim())c.sa<c.wa.length&&b==c.wa[c.sa]?c.sa++:(c.wa.push(b),c.sa=c.wa.length);var d=b.split(" "),e=d[0],g=a.R.Xa[Ma.Mb];switch(e[0]){case "m":if("?"==e[1]){var f="";cb.forEach(function(v){f+=v+"\n"});f&&(f="message commands:\n"+f);break}f="";var k=void 0;e=d[d.length-1].toLowerCase();var h=ab(e);void 0!=h&&d.pop();1>=d.length&&(void 0!=h&&(k=h,h=void 0),d[1]="all");"all"==d[1]&&(d=Object.keys(J));for(g=1;g<d.length;g++){e=d[g];var m=J[e];if(!m){f+=
"unrecognized message: "+e+"\n";break}void 0!=h&&db(a,m,h);if(void 0==k||k==Xa(a,m))f+=a.o("%8s: %b\n",e,Xa(a,m))}Xa(a,0x800000000000)&&(f+="all messages will be buffered until buffer is turned off\n");f||(f="no messages\n");break;case "?":f="",eb.forEach(function(v){f+=v+"\n"}),f&&(f="default commands:\n"+f);default:if(d.unshift(b),g)for(a=0;a<g.length;a++){var l=g[a](d);if(void 0!=l){f=f?f+l:l;break}}}}catch(v){f="error: "+v.message+"\n"}}return f}
function $a(a,b){b=void 0===b?"?":b;if(b){var c="";b=b.split(/(?:\n|;\s*)/);for(var d=0;d<b.length;d++)c+=bb(a,b[d])}return c}G.prototype.Aa=function(a,b){void 0==b&&(b=Xa(this,0x800000000000));if(!b){var c=this.Ha(Ia.Ya,!0);if(c)return c.value.substr(-a.length)!=a&&(c.value+=a,8192<c.value.length&&(c.value=c.value.substr(c.value.length-4096)),c.scrollTop=c.scrollHeight,Ya("iOS")||c.setSelectionRange(c.value.length,c.value.length)),a.length}return E.prototype.Aa.call(this,a,b)};
G.prototype.H=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d=0;"number"==typeof a&&(d=a,a=c.shift());return Xa(this,d)?E.prototype.H.call.apply(E.prototype.H,[this,a].concat(ba(c))):0};function fb(a,b){if(Va(a)){b=JSON.stringify(b);try{window.localStorage.setItem(a.V,b)}catch(c){F(a,c.message)}}}function gb(a,b,c){(a=a.ba[b])&&a.textContent!=c&&(a.textContent=c)}
function db(a,b,c){var d=!1;c?(c=a.R.ha,a.R.ha=(c|b)+(c/D|0|b/D|0)*D):(d=ya(a.R.ha,0x800000000000)&&ya(b,0x800000000000),c=a.R.ha,a.R.ha=(c&~b)+((c/D|0)&~(b/D|0))*D);d&&a.flush()}
var Ia={Dc:"clear",Ya:"print"},eb=["\u2191 \u2193\t\trecall commands","@\t\trepeat last command","m?\t\tmessage commands"],cb=["m\t\tdisplay all messages","m on\t\tdisplay all active messages","m off\t\tdisplay all inactive messages","m all [on|off]\tturn all messages on or off","m ... [on|off]\tturn selected messages on or off"],J={all:0xffffffffffff,buffer:0x800000000000},Ma={Mb:"command"},hb={Ob:13,jb:65,Ib:66,Kb:67,Pb:68,E:69,Qb:70,Rb:71,Sb:72,Tb:73,Ub:74,Vb:75,Wb:76,Zb:77,$b:78,ac:79,bc:80,Q:81,
cc:82,ec:83,fc:84,gc:85,hc:86,jc:87,kc:88,lc:89,rb:90,tb:97,tf:98,uf:99,d:100,e:101,yf:102,zf:103,Bf:104,Cf:105,Df:106,k:107,Ef:108,Gf:109,n:110,Hf:111,p:112,q:113,r:114,If:115,t:116,Lf:117,Mf:118,Nf:119,x:120,y:121,z:122},I={Jb:8,dd:9,Pc:10,Ob:13,ad:16,Ec:17,Cc:18,gf:19,lb:20,ie:27,cd:32,kf:33,jf:34,he:35,De:36,Yb:37,gd:38,mb:39,Ae:39,Gc:40,xe:44,lf:44,Ee:45,ge:46,ze:46,Ce:47,ZERO:48,ONE:49,fd:50,ed:51,Oc:52,Nc:53,bd:54,$c:55,Hc:56,Qc:57,Mc:59,Lc:61,jb:65,Ib:66,Kb:67,Pb:68,E:69,Qb:70,Rb:71,Sb:72,
Tb:73,Ub:74,Vb:75,Wb:76,Zb:77,$b:78,ac:79,bc:80,Q:81,cc:82,ec:83,fc:84,gc:85,hc:86,jc:87,kc:88,lc:89,rb:90,Lb:91,ye:91,we:92,pf:93,Be:93,Ie:96,Ze:96,ve:96,Je:97,Xe:97,Ke:98,We:98,Le:99,bf:99,Me:100,$e:100,Ne:101,Te:101,Oe:102,df:102,Pe:103,Ye:103,Qe:104,ff:104,Re:105,cf:105,af:106,Se:107,ef:109,Ue:110,Ve:111,je:112,ne:113,oe:114,pe:115,qe:116,re:117,se:118,te:119,ue:120,ke:121,le:122,me:123,Rc:144,Yc:145,Kc:173,Zc:186,Ic:187,fe:188,Fc:189,hf:190,rf:191,de:192,Fe:219,ee:220,nf:221,mf:222,Jc:224,Ge:901,
ic:1E3},ib={},jb=(ib[I.Mc]=I.Zc,ib[I.Lc]=I.Ic,ib[I.Kc]=I.Fc,ib[I.Jc]=I.Lb,ib),kb={Yb:1,mb:2,He:3},L={},lb=(L[I.Jb]="\b",L[I.dd]="\t",L[I.Pc]="\n",L[I.Ob]="\r",L[I.cd]=" ",L[I.ZERO]="0",L[I.ONE]="1",L[I.fd]="2",L[I.ed]="3",L[I.Oc]="4",L[I.Nc]="5",L[I.bd]="6",L[I.$c]="7",L[I.Hc]="8",L[I.Qc]="9",L[I.jb]="A",L[I.Ib]="B",L[I.Kb]="C",L[I.Pb]="D",L[I.E]="E",L[I.Qb]="F",L[I.Rb]="G",L[I.Sb]="H",L[I.Tb]="I",L[I.Ub]="J",L[I.Vb]="K",L[I.Wb]="L",L[I.Zb]="M",L[I.$b]="N",L[I.ac]="O",L[I.bc]="P",L[I.Q]="Q",L[I.cc]=
"R",L[I.ec]="S",L[I.fc]="T",L[I.gc]="U",L[I.hc]="V",L[I.jc]="W",L[I.kc]="X",L[I.lc]="Y",L[I.rb]="Z",L[I.Yb]="Left",L[I.mb]="Right",L),mb={list:[],jd:"version"},Oa=["","moz","ms","webkit"],nb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",
cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",
dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",
midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",
royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Wa={kb:void 0,Pa:"PCjs.localStorage"};
x.WebIO=G;function M(a,b,c,d){G.call(this,a==b);this.V=a;this.X=b;N[this.V]||(N[this.V]={});N[this.V][this.X]&&this.H("warning: machine configuration contains multiple '%s' devices\n",this.X);N[this.V][this.X]=this;this.id=this.V+"."+this.X;ob.push(this);this.R=pb(this,this.V);qb(this,c,d);this.xa={}}u(M,G);n=M.prototype;n.ub=function(){};n.vb=function(){};
function qb(a,b,c){b=void 0===b?{}:b;c=void 0===c?[]:c;c=b.overrides||c;if(c.length){var d,e=Ha;if(!e){e={};if(window){d||(d=window.location.search.substr(1));for(var g,f=/\+/g,k=/([^&=]+)=?([^&]*)/g;g=k.exec(d);)e[decodeURIComponent(g[1].replace(f," ")).trim()]=decodeURIComponent(g[2].replace(f," ")).trim()}Ha=e}d=e;for(var h in d)0<=c.indexOf(h)&&(g=d[h],g.match(/^[+-]?[0-9.]+$/)?e=Number.parseInt(g,10):"true"==g?e=!0:"false"==g?e=!1:(e=g,g='"'+g+'"'),b[h]=e,F(a,"overriding "+a.X+" property '"+
h+"' with "+g))}a.T=b;c=b.bindings;c=void 0===c?{}:c;a.T.ba||(a.T.ba=c);(h=Array.isArray(c))?0>c.indexOf("container")&&c.push("container"):c.container||(c.container=a.X);for(var m in c){e=c[m];if(h)m=e;else if(e.match(/^[0-9]+$/)){d=+e;a.ba[m]=[];do{e=m+d++;e=document.getElementById(e);if(!e)break;a.ba[m].push(e)}while(1);continue}if(d=document.getElementById(e))a.ba[m]=d,a.Sa(m,d)}b=void 0===b?{}:b;a.version=2;if(a.version){m="";var l;a.V!=a.X&&(l=pb(a,a.V).version)&&l!=a.version&&(m="Machine");
m||(l=b.version)&&l>a.version&&(m="Config");m&&(l="Error: "+a.o("%s Device version (%3.2f) incompatible with %s version (%3.2f)",b.vf,a.version,m,l)+"\n\nClearing your browser's cache may resolve the issue.",(b=mb.jd)&&0>mb.list.indexOf(b)&&(alert(l),mb.list.push(b)),F(a,l))}}function O(a,b,c,d){a.xa[b]={get:c.bind(a),set:d?d.bind(a):null}}function rb(a,b,c){a.xa[b]&&(a.xa[c]=a.xa[b])}
function sb(a,b){var c;try{var d=N[a.V];if(d)for(c in d){var e=d[c];if("Machine"!=e.T["class"]&&!b(e))break}}catch(g){a.H("error while enumerating device '%s': %s\n",c,g.message)}}n.Ha=function(a,b){b=void 0===b?!1:b;if(a){var c=G.prototype.Ha.call(this,a,b);if(void 0===c&&b){b=N[this.V];for(var d in b)if(c=b[d].ba[a])break;c||(c=null);this.ba[a]=c}}return c};
function pb(a,b,c){var d=b,e=a.V,g=e.indexOf(".");0<g&&(e=e.substr(0,g),b=b.substr(g+1));b=(g=N[e])&&g[b]||null;if(!b){for(g=0;g<ob.length;g++)if(ob[g].id===d){b=ob[g];break}if(!b&&(void 0===c||c))throw Error(a.o("unable to find device with ID '%s'",d));}return b}function Q(a,b,c){var d=null,e=N[a.V];if(e)for(var g in e)if(e[g].T["class"]==b){if(d){d=null;break}d=e[g]}if(!d&&(void 0===c||c))throw Error(a.o("unable to find device with class '%s'",b));return d}
function tb(a,b){return(a=pb(a,a.V))&&a.T&&a.T[b]}function ub(a,b){return(a=a.xa[b])&&a.get()}n.zc=function(){};
n.H=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return"number"==typeof a&&Xa(this,a)&&(void 0===this.W&&(this.W=Q(this,"Debugger",!1)),this.W&&this.W.zc(a),this.R.ha&vb&&(void 0===this.N&&(this.N=Q(this,"CPU")),this.N))?(a=c.shift(),G.prototype.H.call(this,"%#06x: %s.%s\n",this.N.zb,this.X,this.o.apply(this,[a].concat(ba(c))).trim())):G.prototype.H.call.apply(G.prototype.H,[this,a].concat(ba(c)))};function wb(a,b){(a=N[a.V])&&delete a[b]}
function xb(a,b,c){(a=a.xa[b])&&a.set&&a.set(c)}var N={},ob=[],vb=1;J.addr=vb;J.bus=2;J.memory=4;J.ports=8;J.chips=16;J.kbd=32;J.serial=64;J.misc=128;J.cpu=256;J["int"]=512;J.trap=1024;J.video=2048;J.monitor=4096;J.screen=8192;J.time=16384;J.timer=32768;J.event=65536;J.input=131072;J.key=262144;J.mouse=524288;J.touch=1048576;J.warn=2097152;J.halt=4194304;window&&(window.PCjs||(window.PCjs={}),N=window.PCjs.Machines||(window.PCjs.Machines={}),ob=window.PCjs.Components||(window.PCjs.Components=[]));
x.Device=M;
function yb(a,b,c){M.call(this,a,b,c);this.ha=131072;this.J=this.m=null;this.time=Q(this,"Time");this.R=Q(this,"Machine");this.S=H(this,"drag",!1);this.I=H(this,"scroll",!1);this.O=H(this,"hexagonal",!1);this.g=H(this,"releaseDelay",0,void 0);this.h=!1;a=this.T.map;this.b=this.f=null;if(a)if(a.length)this.b=a;else{this.f={};b=Object.keys(a);for(var d=0;d<b.length;d++){var e=[],g=b[d],f=a[g];"string"==typeof f?f=[f]:void 0==f.length&&(e=f.grid,f=f.keys,"string"==typeof f&&(f=[f]));this.f[g]={keys:f,
Af:e,state:0}}}this.s=[];this.u=[];this.c=this.v=null;(a=this.ba[zb])&&Ab(this,a,this.Ha(c.focusBinding,!0),this.T.location);this.Ca()}u(yb,M);function Bb(a,b){a.m=b}function Cb(a,b,c){for(var d=0;d<a.s.length;d++){var e=a.s[d];e.id===b&&e.$a(b,c)}}
function Ab(a,b,c,d){d=void 0===d?[]:d;if(d.length||a.b||a.f){var e={};e.be=d[0]||0;e.ce=d[1]||0;e.Ta=d[2]||b.clientWidth;e.Za=d[3]||b.clientHeight;e.ab=d[4]||1;e.gb=d[5]||1;e.td=d[6]||b.naturalWidth||e.Ta;e.vd=d[7]||b.naturalHeight||e.Za;e.Ac=d[8]||0;e.Bc=d[9]||0;e.sd=d[10]||0;e.ud=d[11]||0;a.b?(e.cb=a.b.length,e.Ua=a.b[0].length):(e.Ua=e.ab,e.cb=e.gb,e.ab=e.gb=0);e.rc=e.Ta/(e.Ua+e.Ua*e.ab)|0;e.sc=e.Za/(e.cb+e.cb*e.gb)|0;e.rd=e.rc*e.ab|0;e.tc=e.sc*e.gb|0;e.Wa=e.hb=-1;Db(a,b,e);Eb(a,b,e);a.time&&
a.g&&(a.M=Fb(a.time,"timerInputRelease",function(){0>e.Wa&&0>e.hb&&Gb(a,-1,-1)}))}if(a.b||a.f)a.time&&a.g&&(a.U=Fb(a.time,"timerKeyRelease",function(){Hb(a)})),a.i=0,a.l="",a.j=[],d=b,c&&(d=c,a.c||"BUTTON"!=c.nodeName||(d=document,a.c=c,Ib(a,b),a.v=b)),Ib(a,d),a.c||(a.c=d)}function Jb(a){a.g?Kb(a.time,a.U,a.g):Hb(a)}
function Ib(a,b){function c(e,g,f){var k=document.activeElement;a.H(327680,"%s.onKey%s(%d): %5.2f (%s)\n",k.id||k.nodeName,e,g,Date.now()/1E3%60,void 0!=f?f?"used":"unused":"ignored")}function d(e,g){e=document.activeElement;return a.c&&e!=a.c&&e!=a.v?null:g||window.event}b.addEventListener("keydown",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=Lb(a,g,!0,e);c("Down",g,f);f&&e.preventDefault()}});b.addEventListener("keypress",function(e){if(e=d(this,e)){var g=e.which||e.charCode,f=Lb(a,g);
c("Press",g,f);f&&e.preventDefault()}});b.addEventListener("keyup",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=Lb(a,g,!1,e);c("Up",g);f&&e.preventDefault();"TEXTAREA"==b.nodeName&&(b.value="")}})}
function Db(a,b,c){b.addEventListener("mousedown",function(d){if(!a.h){var e=a.c;if(e){var g=window.scrollX,f=window.scrollY;e.focus();window.scrollTo(g,f)}d.button||Mb(a,b,Nb,d,c)}});b.addEventListener("mousemove",function(d){a.h||Mb(a,b,Ob,d,c)});b.addEventListener("mouseup",function(d){a.h||d.button||Mb(a,b,Pb,d,c)});b.addEventListener("mouseout",function(d){a.h||(0>c.Wa?Mb(a,b,Ob,d,c):Mb(a,b,Pb,d,c))})}
function Eb(a,b,c){b.addEventListener("touchstart",function(d){a.I&&(a.h=!0);Mb(a,b,Nb,d,c)});b.addEventListener("touchmove",function(d){Mb(a,b,Ob,d,c)});b.addEventListener("touchend",function(d){Mb(a,b,Pb,d,c)})}
function Lb(a,b,c,d){if(void 0!=c){var e=jb[b]||b;var g=lb[b];var f=Qb[e];d=d&&d.location==kb.mb;f&Rb&&d&&(f>>=1);f&&(f&Sb&&(c=!(a.a&f)),a.a=c?a.a|f:a.a&~f,Cb(a,e,c))}else g=String.fromCharCode(b).toUpperCase(),b>=hb.jb&&b<=hb.rb?a.a&(Tb|Ub)||(a.a|=Ub,Cb(a,I.lb,!0)):b>=hb.tb&&b<=hb.z&&a.a&Ub&&(a.a&=~Ub,Cb(a,I.lb,!1));if(a.b){if(void 0!=c)return!1;for(e=0;e<a.b.length;e++)for(f=a.b[e],d=0;d<f.length;d++)if(0<=f[d].split("|").indexOf(g))return a.i?16>a.j.length&&a.j.push(b):(a.i=1,a.l=g,Gb(a,d,e),Cb(a,
g,!0),Jb(a)),!0}if(a.f){if(void 0==c)return!0;b=Object.keys(a.f);for(e=0;e<b.length;e++)if(f=b[e],0<=a.f[f].keys.indexOf(g))return Cb(a,f,c),a.f[f].state=c?1:0,!0}return!1}function Hb(a){1==a.i?(a.i++,Cb(a,a.l,!1),a.l="",Gb(a,-1,-1),Jb(a)):(a.i=0,a.j.length&&Lb(a,a.j.shift()))}yb.prototype.Ca=function(){this.a=0;this.w=this.L=-1};
function Mb(a,b,c,d,e){var g=-1,f=-1,k=!1,h=-1,m=-1;if(c<Pb){d=d||window.event;d.targetTouches&&d.targetTouches.length?(h=d.targetTouches[0].clientX,m=d.targetTouches[0].clientY,k=1<d.targetTouches.length):(h=d.clientX,m=d.clientY);var l=d.target.getBoundingClientRect();h-=l.left;m-=l.top;h=e.td/b.offsetWidth*h|0;m=e.vd/b.offsetHeight*m|0;var v=h-e.be;var p=m-e.ce;var q=l=!1;var w=h>=e.Ac&&h<e.Ac+e.sd&&m>=e.Bc&&m<e.Bc+e.ud;if(0<=v&&v<e.Ta&&0<=p+e.tc||w)if(k||a.I||d.preventDefault(),0<=v&&v<e.Ta&&
0<=p&&p<e.Za){q=!0;d=e.Ta/e.Ua|0;var t=e.Za/e.cb|0,z=v/d|0,r=p/t|0;!a.O||r&1||(v-=d>>1,z=v/d|0,z==e.Ua-1&&(v=-1));t=r*t+(e.tc>>1);v-=z*d+(e.rd>>1);p-=t;0<=v&&v<e.rc&&0<=p&&p<e.sc&&(g=z,f=r,l=!0)}}v=v||0;p=p||0;d=b.offsetWidth;b=b.offsetHeight;if(c==Nb||c==Pb)for(z=0;z<a.u.length;z++)r=a.u[z],c==Pb?r.$a(r.id,!1):(t=p/(b/r.xf|0)|0,(v/(d/r.wf|0)|0)==r.Of&&t==r.Pf&&r.$a(r.id,!0));if(!k)if(c==Nb)e.Wa=h,e.hb=m,q?(Gb(a,g,f),l&&a.g&&Kb(a.time,a.M,a.g,!0)):w&&a.R.ua();else if(c==Ob)0<=e.Wa&&0<=e.hb&&a.S?Gb(a,
g,f):a.m&&a.m(g,f);else if(c==Pb){if(c=a.g)c=a.time,g=a.M,c=c.a&&0<g&&g<=c.b.length?0<=c.b[g-1].pa:!1;c||Gb(a,-1,-1);e.Wa=e.hb=-1}else F(a,"unrecognized action: "+c)}function Gb(a,b,c){if(b!=a.w||c!=a.L)a.w=b,a.L=c,a.J&&a.J(b,c)}var Nb=1,Ob=2,Pb=3,zb="surface",Tb=3,Rb=170,Ub=512,Sb=3584,Vb={},Qb=(Vb[I.ad]=2,Vb[I.Ec]=8,Vb[I.Cc]=32,Vb[I.Lb]=128,Vb[I.lb]=Ub,Vb[I.Rc]=1024,Vb[I.Yc]=2048,Vb);x.Input=yb;
function Wb(a,b,c){M.call(this,a,b,c,["color","backgroundColor"]);a=this.ba[Xb];if(!a)throw Error("LED "+this.T.ba[Xb]+" binding for '"+Xb+"' missing");b=document.createElement("canvas");if(!b||!b.getContext)throw a.innerHTML="LED device requires HTML5 canvas support",Error("LED device requires HTML5 canvas support");this.qa=a;this.type=Ta(H(this,"type",Yb,Zb),$b,ac);this.f=bc[this.type][0];this.j=bc[this.type][1];this.width=H(this,"width",this.f,void 0);this.height=H(this,"height",this.j,void 0);
this.g=H(this,"cols",1,void 0);this.u=this.g+H(this,"colsExtra",0,void 0);this.S=H(this,"rows",1,void 0);this.I=this.S+H(this,"rowsExtra",0,void 0);this.$=this.width*this.g;this.L=this.height*this.S;this.i=cc("black",0);this.c=dc(this.T.color)||this.i;this.fa=cc(this.c,1,.25);this.ea=cc(this.c,1,2);this.h=dc(this.T.backgroundColor);this.ja=H(this,"fixed",!1);this.ja||(b.style.width="100%",b.style.height="auto");this.da=H(this,"hexagonal",!1);this.ka=H(this,"highlight",!0);this.J=H(this,"persistent",
this.type<ac);b.setAttribute("width",this.$.toString());b.setAttribute("height",this.L.toString());b.style.backgroundColor=this.i;a.appendChild(b);this.aa=b.getContext("2d");if(this.l=document.createElement("canvas"))this.l.width=this.U=this.f*this.g,this.l.height=this.m=this.j*this.S,this.b=this.l.getContext("2d");this.la=(this.I+1)*this.u*4;this.a=Array(this.la);this.ma=this.g<this.u?4*(this.u-this.g):0;this.v=this.w=!1;this.s=this.O=0;this.M=-1;var d=this;this.time=Q(this,"Time");ec(this.time,
function(e){fc(d,!1,e)});gc(d)}u(Wb,M);function gc(a){for(var b=a.a,c=0;c<b.length;c+=4){var d=a,e=b,g=c;e[g]=d.type<ac?hc:" ";e[g+1]=d.c==d.i?null:d.c;e[g+2]=0;e[g+3]=ic}a.v=a.w=!0;fc(a,!0)}function jc(a){a.h?(a.b.fillStyle=a.h,a.b.fillRect(0,0,a.U,a.m)):a.b.clearRect(0,0,a.U,a.m)}
function fc(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(a.v||b){if(a.type<ac){var d=0;if(!a.J||b)jc(a);else if(a.s){d=a.g-a.s;var e=a.f*d;a.b.drawImage(a.l,a.f*a.s,0,e,a.m,0,0,e,a.m)}for(var g=e=0;g<a.I;g++){for(var f=0;f<a.g;f++){var k=a.a[e],h=a.a[e+1]||a.i,m=a.ka&&e==a.M;if(a.a[e+3]&ic||m||b){if(f>=d)a:{var l=a,v=k;k=h;var p=f;h=g;var q=m;p=void 0===p?0:p;h=void 0===h?0:h;q=void 0===q?!1:q;var w=0;if(l.da&&!(h&1)&&(w=l.f>>1,p==l.g-1))break a;if(k&&k!=l.c){q=q?cc(k,1,2):k;var t=cc(k,1,.25)}else q=
q?l.ea:l.c,t=l.fa;k=!1;v=v?q:t;q==l.i&&(v=l.h,k=!0);q=p*l.f+w;t=h*l.j;l.J&&(p=p*l.f+w,h*=l.j,l.h?(l.b.fillStyle=l.h,l.b.fillRect(p,h,l.f,l.j)):l.b.clearRect(p,h,l.f,l.j));l.b.fillStyle=v;h=kc[l.type];3==h.length?(l.b.beginPath(),l.b.arc(q+h[0],t+h[1],h[2],0,2*Math.PI),k?(l.b.globalCompositeOperation="destination-out",l.b.fill(),l.b.globalCompositeOperation="source-over"):l.b.fill()):l.b.fillRect(q+h[0],t+h[1],h[2],h[3])}a.a[e+3]=m?a.a[e+3]|ic:a.a[e+3]&~ic}e+=4}e+=a.ma}a.s=0}else{b="";for(d=0;d<a.a.length;d+=
4)b+=a.a[d]||" ",a.a[d+3]&lc&&(b+=".");jc(a);for(g=e=d=0;d<b.length;d++){h=b[d];"."==h&&e&&e--;f=a;m=e;l=g;m=void 0===m?0:m;l=void 0===l?0:l;if(h=mc[h])for(k=0;k<h.length;k++)if(p=f,w=nc[h[k]]){v=(void 0===m?0:m)*p.f;q=(void 0===l?0:l)*p.j;p.b.fillStyle=p.c;p.b.beginPath();if(3==w.length)p.b.arc(v+w[0],q+w[1],w[2],0,2*Math.PI);else for(t=0;t<w.length;t+=2)t?p.b.lineTo(v+w[t],q+w[t+1]):p.b.moveTo(v+w[t],q+w[t+1]);p.b.closePath();p.b.fill()}if(++e==a.g&&(e=0,++g==a.I))break}}a.aa.globalCompositeOperation=
a.h&&a.c!=a.i?"source-over":"copy";a.aa.drawImage(a.l,0,0,a.U,a.m,0,0,a.$,a.L);a.v=!1;a.M=-1}else a.J||a.w||(!c||!a.O||c-a.O>=(1E3/60|0))&&gc(a);a.w=!1;c&&(a.O=c)}function dc(a){return(a=a||void 0)&&nb[a]||a}
function cc(a,b,c){b=void 0===b?1:b;c=void 0===c?1:c;if(a){var d=[];a=nb[a]||a;var e=a;var g=16;var f=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);f||(g=10,f=e.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+|)\)$/i));if(f){for(e=1;e<f.length;e++)d[e-1]=Number.parseInt(f[e],g);d.length=e-1;g=!0}else g=!1;if(g){a="rgba(";for(g=0;3>g;g++)f=Math.round(d[g]*c),f=0>f?0:255<f?255:f,a+=f+",";a+=(g<d.length?d[g]:b)+")"}}return a}
Wb.prototype.ta=function(a){var b=a.shift(),c=a.shift();a=a.shift();if(b==this.c&&c==this.h&&a&&a.length==this.a.length){this.a=a;for(b=0;b<=this.a.length-4;b+=4)this.a[b+1]==this.i&&(this.a[b+1]=null);fc(this,!0);return!0}return!1};Wb.prototype.va=function(a){this.a&&(a.push(this.c),a.push(this.h),a.push(this.a))};
var $b=0,Yb=1,ac=3,Zb={small:$b,round:Yb,square:2,digit:ac},Xb="container",hc=0,lc=1,ic=128,oc={},kc=(oc[$b]=[4,4,4],oc[Yb]=[16,16,14],oc[2]=[2,2,28,28],oc),bc=[[8,8],[32,32],[32,32],[96,128]],nc={A:[30,8,79,8,67,19,37,19],B:[83,10,77,52,67,46,70,22],C:[77,59,71,100,61,89,64,64],D:[28,91,58,91,69,104,15,104],E:[18,59,28,64,25,88,12,100],F:[24,10,34,21,31,47,18,52],G:[24,56,34,50,60,50,71,56,61,61,33,61],P:[80,102,8]},mc={" ":[],0:"ABCDEF".split(""),1:["B","C"],2:["A","B","D","E","G"],3:["A","B","C",
"D","G"],4:["B","C","F","G"],5:["A","C","D","F","G"],6:"ACDEFG".split(""),7:["A","B","C"],8:"ABCDEFG".split(""),9:"ABCDFG".split(""),A:"ABCEFG".split(""),B:["C","D","E","F","G"],C:["A","D","E","F"],D:["B","C","D","E","G"],E:["A","D","E","F","G"],F:["A","E","F","G"],"-":["G"],".":["P"]};x.LED=Wb;
function pc(a,b,c){M.call(this,a,b,c);this.fa=H(this,"cyclesMinimum",1E5,void 0);this.ma=H(this,"cyclesMaximum",1E9,void 0);this.U=Ta(H(this,"cyclesPerSecond",1E6,void 0),this.fa,this.ma);this.J=1E3/60;this.qa=H(this,"updatesPerSecond",2,void 0)||2;this.Oa=1E3/this.qa;this.la=0;this.Qa=H(this,"timeLock",!0);this.ea=this.u=0;this.da=this.g=1;this.ka=this.i=this.U/1E4/100;this.$=[];this.m=[];this.b=[];this.O=[];this.ja=this.a=this.I=this.l=!1;this.s=this.f=0;a=Na("requestAnimationFrame");if(!a){a="setTimeout";
var d=this.J}this.za=window[a].bind(window,this.Qd.bind(this),d);this.Ga=window[Na("cancelAnimationFrame")||"clearTimeout"].bind(window);this.M=this.L=this.h=this.c=this.S=0;qc(this)||rc(this,this.da)}u(pc,M);function ec(a,b){a.$.push(b)}n=pc.prototype;
n.Sa=function(a,b){var c=this;switch(a){case sc:b.onclick=function(){tc(c)&&(c.a?uc(c):c.start())};break;case vc:b.onclick=function(){rc(c,c.g<<1);wc(c,xc(c.i))};break;case yc:b.onclick=function(){zc(c)};break;case Ac:b.addEventListener("mousedown",function(){c.l=!0}),b.addEventListener("mouseup",function(){qc(c);c.l=!1}),b.addEventListener("mousemove",function(){c.l&&qc(c)}),b.addEventListener("change",function(){c.l=!0;qc(c);c.l=!1})}M.prototype.Sa.call(this,a,b)};
function Fb(a,b,c){var d=void 0===d?-1:d;var e=a.b.length+1;a.b.push({id:b,kd:c,bb:d,pa:-1});0<=d&&Kb(a,e,d);return e}
function Bc(a,b,c,d){var e=0,g=a.i,f=1E6*g;b&&c&&(g=b/(10*c)/100,a.H(16384,"calcSpeed(%d cycles, %5.3fms): %5.3fMhz\n",b,c,g),d>a.J&&(1<a.g&&(a.g>>=1,a.H(2097152,"warning: frame time (%5.3fms) exceeded maximum (%5.3fms), target multiplier now %d\n",d,a.J,a.g)),e=d));a.u=g;a.ea=g/a.ka;b=a.ea/a.g;a.S=f/b/60+1E-8;a.H(16384,"nCyclesDepositPerFrame(%5.3f) = nCyclesPerSecond(%d) / nDivisor(%5.3f) / nFramesPerSecond(%d)\n",a.S,f,b,60);return e}
function Cc(a,b){a.L=a.h=b;if(!a.m.length)return a.h=0,a.L;for(var c=0;0<a.h;){if(c<a.m.length){var d=a.m[c++];b=d.Rd.call(d,b)||1}else c=b=0;a.h-=b}return a.L-a.h}function Dc(a,b){b=void 0===b?a.L-a.h:b;if(!a.a){if(a.c)for(var c=0;c<a.m.length;c++){var d=a.m[c];d.Sd.call(d)}a.c=b}a.c-=b;1>a.c&&(a.I=!0);a.M+=b;a.L=a.h=0;a.a||(a.M=0);return b}
function Ec(a,b){b=void 0===b?0:b;if(b){var c=b;a.c+=b}else for(c=a.c,1>c&&(c=a.c+=a.S),0>c&&(a.H(2097152,"warning: cycle count dropped below zero: %f\n",c),c=a.c=0),c|=0,b=a.b.length;0<b;b--){var d=a.b[b-1];!(0>d.pa)&&c>d.pa&&(c=d.pa)}return c}function xc(a){1<=a?a=a.toFixed(2)+"Mhz":(a=Math.round(1E6*a),a=999>=a?a+"Hz":Math.ceil(a/1E3)+"Khz");return a}function Fc(a){a.H(16384,"getSpeedCurrent(%5.3fhz)\n",1E6*a.u);return a.a&&a.u?xc(a.u):"Stopped"}
function tc(a){return a.ja?!0:(F(a,"not powered"),!1)}function Gc(a,b){if(1<=b)for(var c=a.b.length;0<c;c--){var d=a.b[c-1];0>d.pa||(d.pa-=b,0>=d.pa&&(d.pa=-1,d.kd(),0<=d.bb&&Kb(a,c,d.bb)))}}n.ua=function(a){this.ja=a;void 0===this.W&&(this.W=Q(this,"Debugger",!1))&&this.W.ub(this,"time","dump time state",this.zd)};function zc(a,b){tc(a)&&(a.a?F(a,"already running"):a.f?uc(a):Hc(a,b))}
n.Qd=function(a){a=void 0===a?Date.now():a;this.s=0;if(this.a){var b=Date.now();if(this.v){var c=b-this.w-this.J;c>this.J&&(this.j+=c,this.H(2097152,"warning: browser throttling detected, compensating by %5.3fms\n",c))}this.w=b;this.j||(this.j=b);this.aa=0;try{this.I=!1;do Gc(this,Dc(this,Cc(this,Ec(this))));while(this.a&&!this.I)}catch(d){F(this,d.message),uc(this)}this.v=Date.now();this.aa&&(this.j+=this.aa,this.w+=this.aa);this.w+=Bc(this,this.M,this.v-this.j,this.v-this.w);this.v-this.la>=this.Oa&&
this.update();for(b=0;b<this.$.length;b++)this.$[b](a);this.s=this.za()}};function rc(a,b){if(void 0!==b){if(1>b||!a.l&&0<a.u&&a.u<.9*a.i)b=a.da;a.g=b;b=a.ka*a.g;a.i!=b&&(a.i=b,wc(a,xc(a.i)))}a.j=a.v=0;a.c=a.M=0;Bc(a);for(b=a.b.length;0<b;b--){var c=a.b[b-1];0<=c.bb&&Kb(a,b,c.bb,!0)}}function qc(a){var b=a.ba[Ac];return b?(rc(a,Math.floor((b.value-b.min)/(b.max-b.min)*(a.ma-a.fa)+a.fa)/a.U|0),!0):!1}
function Kb(a,b,c,d){0<b&&b<=a.b.length&&(b=a.b[b-1],d||0>b.pa)&&(c=Math.ceil(a.U*(a.Qa?a.da:a.ea)/1E3*(void 0===c?1E3:c)),a.a&&(c+=Dc(a)),b.pa=c)}n.start=function(){if(this.a||this.f)return!1;this.a=!0;this.j=this.v=0;this.update(!0);this.s=this.za();return!0};function Hc(a,b){b=void 0===b?1:b;a.a||(b&&!a.f&&(a.f=b),a.f&&(a.f--,Gc(a,Dc(a,Cc(a,Ec(a,1)))),a.update(!1),a.f&&setTimeout(function(){Hc(a,0)},0)))}
function uc(a){return a.a?(a.a=!1,Dc(a),a.s&&(a.Ga(a.s),a.s=0),a.update(!0),!0):a.f?(a.f=0,a.update(!0),!0):!1}n.update=function(a){a&&F(this,this.a?"started with "+xc(this.i)+" target":"stopped");gb(this,sc,this.a?"Halt":"Run");gb(this,yc,this.f?"Stop":"Step");this.l||wc(this,Fc(this));for(var b=0;b<this.O.length;b++){var c=this.O[b];c.Dd.call(c,void 0!=a)}this.la=Date.now();this.I=!0};function wc(a,b){gb(a,Ic,b);gb(a,vc,b)}
n.zd=function(){var a=this.o("nCyclesPerSecond: %f\n",this.U);a+=this.o("nUpdatesPerSecond: %f\n",this.qa);a+=this.o("nTargetMultiplier: %f\n",this.g);return a+=this.o("nCyclesDepositPerFrame: %f\n",this.S)};var sc="run",vc="setSpeed",Ic="speed",yc="step",Ac="throttle";x.Time=pc;
function Jc(a,b,c){M.call(this,a,b,c);this.type="static"==c.type?Kc:Lc;this.Y=c.addrWidth||16;this.i=Math.pow(2,this.Y);this.h=this.i-1|0;this.c=c.blockSize||(16<this.Y?4096:1024);this.c>this.i&&(this.c=this.i);this.s=this.i/this.c|0;this.b=Math.log2(this.c)|0;this.g=(1<<this.b)-1;this.f=c.dataWidth||8;this.l=Math.pow(2,this.f)-1;this.m=!1!==c.littleEndian;this.a=Array(this.s);this.j=0;a=new R(a,b+"[NONE]",{size:this.c,bus:this.X});for(b=0;b<this.i;b+=this.c)Mc(this,b,this.c,S.NONE,a);Nc(this,this.type)}
u(Jc,M);function Mc(a,b,c,d,e){for(var g=0,f=b>>>a.b;0<c&&f<a.a.length;){var k=f*a.c,h=a.c-(b-k);h>c&&(h=c);var m=a.a[f];if(b!=k||h!=a.c||m&&m.type!=S.NONE)break;m=a.X+"["+y(a,b,16,a.Y)+"]";if(e)if(e.size==a.c)b=e;else{var l=void 0;if(e.values&&(l=e.values.slice(g,g+h),l.length!=h))break;b=new R(a.V,m,{type:d,ga:b,size:h,bus:a.X,values:l})}else b=new R(a.V,m,{type:d,ga:b,size:h,bus:a.X});a.a[f]=b;b=k+a.c;c-=h;g+=h;f++}}
function Oc(a,b){for(var c=S.Xc,d=0,e=0;e<a.a.length;e++){var g=a.a[e];g&&g.type&c&&(b(g),d++)}return d}function Pc(a,b,c){if(!(b&a.g)){b>>>=a.b;var d=a.a[b];a.a[b]=c}return d}n=Jc.prototype;n.Ca=function(){};n.yb=function(a){return a&&this.ta(a)?!0:!1};n.Va=function(a){this.va(a)};n.ta=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if((this.type==Lc||c.type&S.Fa)&&c.ta){var d=a.shift();if(!c.ta(d))return!1}}return!0};
n.va=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if((this.type==Lc||c.type&S.Fa)&&c.va){var d=[];c.va(d);a.push(d)}}};n.Fd=function(a){return this.a[a>>>this.b].na(a&this.g)};n.Ud=function(a,b){this.a[a>>>this.b].ia(a&this.g,b)};n.Gd=function(a){return a&1?this.na(a+1&this.h)|this.na(a)<<this.f:this.a[a>>>this.b].oa(a&this.g)};n.Hd=function(a){return a&1?this.na(a)|this.na(a+1&this.h)<<this.f:this.a[a>>>this.b].oa(a&this.g)};
n.Vd=function(a,b){a&1?(this.ia(a,b>>this.f),this.ia(a+1&this.h,b&this.l)):this.a[a>>>this.b].ca(a&this.g,b)};n.Wd=function(a,b){a&1?(this.ia(a,b&this.l),this.ia(a+1&this.h,b>>this.f)):this.a[a>>>this.b].ca(a&this.g,b)};function Nc(a,b){var c=a.j;a.j+=b;c&&a.j||(a.na=a.Fd,a.ia=a.Ud,a.m?(a.oa=a.Hd,a.ca=a.Wd):(a.oa=a.Gd,a.ca=a.Vd))}n.eb=function(a,b){return this.a[a>>>this.b].eb(b)?(Nc(this,1),!0):!1};n.Bb=function(a,b){return this.a[a>>>this.b].Bb(b)?(Nc(this,1),!0):!1};
n.fb=function(a,b){return this.a[a>>>this.b].fb(b)?(Nc(this,-1),!0):!1};n.Db=function(a,b){return this.a[a>>>this.b].Db(b)?(Nc(this,-1),!0):!1};var Kc=0,Lc=1;x.Bus=Jc;
function R(a,b,c){M.call(this,a,b,c);this.ga=c.addr;this.size=c.size;this.type=c.type||S.NONE;this.h=(a=this.T.bus)?pb(this,a):Q(this,a="Bus");if(!this.h)throw Error(this.o("unable to find bus '%s'",a));this.a=this.h.f;this.s=Math.pow(2,this.a)-1;this.f=!1!==this.h.m;this.values=this.M=this.l=this.J=null;a=this.Ia;b=this.Ea;var d=this.Jd,e=this.Yd;this.h.type==Kc&&(b=this.Xd,d=this.f?this.Nd:this.Md,e=this.Zd,8==this.a&&!1!==tb(this,"ArrayBuffer")&&(this.l=new ArrayBuffer(this.size),this.J=new DataView(this.l,
0,this.size),this.values=new Uint8Array(this.l,0,this.size),this.M=new Uint16Array(this.l,0,this.size>>1),new Int32Array(this.l,0,this.size>>2),d=this.f==sa?this.Kd:this.Ld));this.L=!1;Qc(this,c.values);switch(this.type){case S.NONE:this.na=this.Da;this.ia=this.Ka;this.oa=this.Id;this.ca=this.Ka;break;case S.dc:this.na=a;this.ia=this.Ka;this.oa=d;this.ca=this.Ka;break;case S.Fa:this.na=a,this.ia=b,this.oa=d,this.ca=e}this.u=this.c=0;this.I=this.g=this.w=this.v=this.i=this.j=null}u(R,M);
function Qc(a,b){if(!a.values&&a.type>S.NONE)b?a.values=b:a.values=Array(a.size).fill(0);else if(b)for(var c=0;c<a.size;c++)a.values[c]=b[c]}n=R.prototype;n.Ca=function(){this.type>=S.Fa&&this.values.fill(0)};n.Da=function(){return this.s};n.Id=function(a){return this.f?this.Da(a)|this.Da(a+1)<<this.a:this.Da(a+1)|this.Da(a)<<this.a};n.Ia=function(a){return this.values[a]};n.Jd=function(a){return this.f?this.Ia(a)|this.Ia(a+1)<<this.a:this.Ia(a+1)|this.Ia(a)<<this.a};
n.Md=function(a){return this.values[a+1]|this.values[a]<<this.a};n.Nd=function(a){return this.values[a]|this.values[a+1]<<this.a};n.Kd=function(a){return this.M[a>>>1]};n.Ld=function(a){return this.J.getUint16(a,this.f)};n.Ka=function(){};n.Ea=function(a,b){this.values[a]=b};n.Xd=function(a,b){this.values[a]=b;this.L=!0;this.c?this.v=this.Ea:this.ia=this.Ea};n.Yd=function(a,b){this.f?(this.Ea(a,b&this.s),this.Ea(a+1,b>>this.a)):(this.Ea(a,b>>this.a),this.Ea(a+1,b&this.s))};
n.Gb=function(a,b){this.values[a]=b>>this.a;this.values[a+1]=b&this.s};n.Hb=function(a,b){this.values[a]=b&this.s;this.values[a+1]=b>>this.a};n.Eb=function(a,b){this.M[a>>>1]=b};n.Fb=function(a,b){this.J.setUint16(a,b,this.f)};n.Zd=function(a,b){this.l?this.f==sa?(this.Eb(a,b),this.c?this.g=this.Eb:this.ca=this.Eb):(this.Fb(a,b),this.c?this.g=this.Fb:this.ca=this.Fb):this.f?(this.Hb(a,b),this.c?this.g=this.Hb:this.ca=this.Hb):(this.Gb(a,b),this.c?this.g=this.Gb:this.ca=this.Gb)};
n.eb=function(a){if(!this.u){var b=this;this.u++;this.i=a;this.w=this.na;this.I=this.oa;this.na=function(c){var d=b.w(c);b.i(b.ga,c,d);return d};this.oa=function(c){var d=b.I(c);b.i(b.ga,c,d);b.i(b.ga,c+1,d);return d};return!0}return this.i==a?(this.u++,!0):!1};n.Bb=function(a){if(!this.c){var b=this;this.c++;this.j=a;this.v=this.ia;this.g=this.ca;this.ia=function(c,d){b.j(b.ga,c,d);b.v(c,d)};this.ca=function(c,d){b.j(b.ga,c,d);b.j(b.ga,c+1,d);b.g(c,d)};return!0}return this.j==a?(this.c++,!0):!1};
n.fb=function(a){return this.u&&this.i==a?(--this.u||(this.na=this.w,this.oa=this.I,this.w=this.I=this.i=null),!0):!1};n.Db=function(a){return this.c&&this.j==a?(--this.c||(this.ia=this.v,this.ca=this.g,this.v=this.g=this.j=null),!0):!1};n.ta=function(a){var b=a.shift();if(this.X==b){this.L=a.shift();a.shift();if(a=a.shift()){var c=this.size;c=void 0===c?0:c;if(a.length!=c){b=0;c=c?Array(c):[];for(var d=0;d<a.length-1;)for(var e=a[d++],g=a[d++];e--;)c[b++]=g;a=c}Qc(this,a)}return!0}return!1};
n.va=function(a){a.push(this.X);a.push(this.L);a.push(!1);a.push(this.values?za(this.values):this.values)};var S={NONE:1,dc:2,Fa:4,Xc:14,sf:12};x.Memory=R;function Rc(a,b,c){R.call(this,a,b,c);void 0!=c.addr&&Mc(this.h,c.addr,c.size,S.NONE,this);this.b={};this.m={}}u(Rc,R);Rc.prototype.Da=function(a){var b=this.ga+a,c=this.b[b];if(c)return c(b);this.H(136,"readNone(%#04x): unknown port\n",b);return R.prototype.Da.call(this,a)};
Rc.prototype.Ka=function(a,b){var c=this.ga+a,d=this.m[c];d?d(c,b):(this.H(136,"writeNone(%#04x,%#04x): unknown port\n",c,b),R.prototype.Ka.call(this,a,b))};x.Ports=Rc;function Sc(a,b,c){c.type=S.Fa;R.call(this,a,b,c);Mc(this.h,c.addr,c.size,c.type,this)}u(Sc,R);x.RAM=Sc;
function Tc(a,b,c){c.type=S.dc;R.call(this,a,b,c);Mc(this.h,c.addr,c.size,c.type,this);this.N=this.W=void 0;if(x.LED&&this.ba[Qa]){var d=this;this.m=Math.pow(2,Math.ceil(Math.log2(this.values.length)/2));this.O=this.values.length/this.m|0;this.b=new Wb(a,b+"LEDs",{"class":"LED",bindings:{container:Pa(this)},type:Yb,cols:this.m,rows:this.O,color:H(this,"colorROM","green"),backgroundColor:H(this,"backgroundColorROM","black"),persistent:!0}),gc(this.b);this.S=new yb(a,b+"Input",{"class":"Input",location:[0,
0,this.b.$,this.b.L,this.m,this.O],bindings:{surface:Pa(this)}});this.U=Ra(this)||"";Bb(this.S,function(e,g){if(d.N){var f=d.U;0<=e&&0<=g&&(e=g*d.m+e,g=d.N,f=g.W&&Uc(g.W,d.ga+e,1)||"");gb(d,Sa,f)}})}}u(Tc,R);
Tc.prototype.ta=function(a){var b=!0,c=a.shift();if(c&&this.b){var d=c.length;this.b.a.length==d?(this.b.a=c,fc(this.b,!0)):(this.H("inconsistent saved LED state (%d), unable to load\n",d),b=!1)}a.length&&(d=(a=a.shift())&&a.length||-1,this.values.length==d?this.values=a:(this.H("inconsistent saved ROM state (%d), unable to load\n",d),b=!1));return b};Tc.prototype.ua=function(){void 0===this.N&&(this.N=Q(this,"CPU"));void 0===this.W&&(this.W=Q(this,"Debugger",!1))&&this.W.vb&&this.W.vb(this.T.symbols)};
Tc.prototype.Ia=function(a){if(this.b){var b=this.b,c=ic;c=(void 0===c?0:c)&129;var d=4*((a/this.m|0)*b.u+a%this.m);if(d<=b.a.length-4){if(1!==b.a[d]||(b.a[d+3]&129)!==c)b.a[d]=1,b.a[d+3]=b.a[d+3]&-130|c|ic,b.v=!0;b.M=d;b.w=!0;b.s=0}}return this.values[a]};Tc.prototype.va=function(a){this.b&&(a.push(this.b.a),a.push(this.values))};var Qa="array",Sa="cellDesc";x.ROM=Tc;
function Vc(a,b,c){c["class"]="CPU";M.call(this,a,b,c);this.W=void 0;this.pb=this.zb=0;this.time=Q(this,"Time");this.time.m.push(this);this.time.O.push(this);this.fa=this.U=0}u(Vc,M);Vc.prototype.abort=function(a){this.pb=this.zb;F(this,a.message);uc(this.time)};function Wc(a,b){a.W=b;return a.xa}Vc.prototype.Rd=function(a){this.fa=this.U=void 0===a?0:a;return this.fa-this.U};Vc.prototype.Sd=function(){this.fa-=this.U;this.U=0};function Xc(a,b,c){Vc.call(this,a,b,c)}u(Xc,Vc);
function Yc(a,b,c){Vc.call(this,a,b,c);this.J=+c.model||Zc;this.Qa=+c.addrReset||0;this.i=Q(this,"Bus");Q(this,"Panel",!1);this.Bd=new Rc(a,b+".IOPAGE",{size:this.i.c});this.m=0;this.nb=null;Q(this,"Input",!1);this.J<=$c?(this.nc=this.od,this.vc=~(ad|bd|cd|dd)&65535,this.uc=0):(this.nc=this.pd,this.vc=~(ad|(this.J<=ed?bd:0))&65535,this.uc=this.J>ed?bd:0);this.ib=this.sb=this.ja=0;this.L=null;this.mc=[];fd(this)}u(Yc,Xc);
function fd(a){a.$=65536;a.da=32768;a.ea=65535;a.aa=32768;a.O=15;a.c=[0,0,0,0,0,0,0,a.Qa,-1,-2,-3,-4,-5,-6,-7,-8];a.S=[0,0,0,0,0,0];a.qa=[0,0,0,0];a.za=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.Ga=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.qb=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a.xc=[0,0,0,0,0,0,0,0];a.b=0;a.j=-1;a.wc=0;a.a=0;gd(a);for(var b={ya:0};7>=b.ya;b={ya:b.ya},b.ya++)O(a,"R"+b.ya,function(c){return function(){return a.c[c.ya]}}(b),function(c){return function(d){return a.c[c.ya]=d&65535}}(b));rb(a,"R6","SP");rb(a,"R7",hd.Tc);O(a,"CF",function(){return a.$&65536&&id?1:0},function(c){a.$=c?65536:0});O(a,"NF",function(){return a.aa&32768&&jd?1:0},function(c){a.aa=c?32768:0});O(a,"VF",function(){return a.da&
32768&&kd?1:0},function(c){a.da=c?32768:0});O(a,"ZF",function(){return(a.ea&65535?0:ld)?1:0},function(c){a.ea=c?0:1});O(a,"PS",function(){return md(a)},function(c){return nd(a,c)});O(a,"PI",function(){return a.ma},function(c){if(c&=od){var d=c>>pd;do c+=qd;while(d>>=1);a.a|=rd}a.ma=c});O(a,"ER",function(){return a.g});O(a,"SL",function(){return a.u&65280},function(c){a.u=c|255});O(a,"M0",function(){return sd(a)},function(c){return td(a,c)});O(a,"M1",function(){return ud(a)});O(a,"M2",function(){return vd(a)});
O(a,"M3",function(){return a.l},function(c){return wd(a,c)})}function gd(a){a.f=0;a.ka=0;a.la=0;a.l=0;a.g=0;a.ma=0;a.u=255;a.M=0;a.w=0;a.I=0;a.s=262143;a.oc=[4,2,0,1];a.v=a.c[7];a.h=0;a.L=null;xd(a);for(var b=a.i,c=S.Fa,d=0,e=0;e<b.a.length;e++){var g=b.a[e];g.type&c&&(d=g.ga+g.size)}a.Ad=d}function sd(a){var b=a.f;b&yd||(b=b&~(zd|Ad|Bd)|a.w<<5|a.I<<1);return b}
function td(a,b){b&=~zd;if(a.f!=b){b&yd&&!(a.f&yd)&&(a.ka=a.h>>16&65535,a.la=a.h&65535);a.f=b;a.w=(b&Bd)>>Cd;a.I=(b&Ad)>>Dd;var c=0;b&(Ed|Fd)&&(c=Gd,b&Ed&&(c|=Hd));a.M!=c&&(a.M=c,xd(a))}}function ud(a){a.f&yd||(a.ka=a.h>>16&65535);a=a.ka;a&65280&&(a=(a<<8|a>>8)&65535);return a}function vd(a){a.f&yd||(a.la=a.h&65535);return a.la}function wd(a,b){a.J<Zc&&(b&=~(Id|Jd));a.l!=b&&(a.l=b,a.s=b&Id?Md:Nd,xd(a))}
function xd(a){a.nb&&Pc(a.i,a.m,a.nb);a.M?(a.Oa=Od,a.m=a.l&Id?Pd:Qd,a.ob=a.Pd,a.yc=a.ae):(a.Oa=0,a.m=Rd,a.ob=a.Od,a.yc=a.$d);a.nb=Pc(a.i,a.m,a.Bd)}n=Yc.prototype;
n.ta=function(a){if(!a||!a.length)return F(this,"invalid saved state"),!1;var b=a.shift(),c=a.shift();if(b!=this.X||2!==(c|0))return this.H("CPU state mismatch (%s %3.2f)\n",b,c),!1;try{this.c=a.shift();this.S=a.shift();this.qa=a.shift();this.za=a.shift();this.Ga=a.shift();this.qb=a.shift();this.xc=a.shift();this.g=a.shift();this.wc=a.shift();this.ma=a.shift();this.u=a.shift();this.w=a.shift();this.I=a.shift();this.v=a.shift();this.a=a.shift();this.h=a.shift();this.j=a.shift();this.sb=a.shift();this.ib=
a.shift();this.Qa=a.shift();nd(this,a.shift());td(this,a.shift());this.ka=a.shift();this.la=a.shift();wd(this,a.shift());for(var d=a.shift(),e=d.length-1;0<=e;e--){a:{for(a=0;a<this.mc.length;a++){var g=this.mc[a];if(g.Td===d[e]){var f=g;break a}}f=null}f&&(f.next=this.L,this.L=f)}}catch(k){return F(this,"CPU state error: "+k.message),!1}return!0};
n.va=function(a){a.push(this.X);a.push(2);a.push(this.c);a.push(this.S);a.push(this.qa);a.push(this.za);a.push(this.Ga);a.push(this.qb);a.push(this.xc);a.push(this.g);a.push(this.wc);a.push(this.ma);a.push(this.u);a.push(this.w);a.push(this.I);a.push(this.v);a.push(this.a);a.push(this.h);a.push(this.j);a.push(this.sb);a.push(this.ib);a.push(this.Qa);a.push(md(this));a.push(sd(this));a.push(ud(this));a.push(vd(this));a.push(this.l);a.push(Sd(this))};
function Sd(a){var b=[];for(a=a.L;a;)b.push(a.Td),a=a.next;return b}function md(a){return a.O=a.O&(dd|cd|bd|Td|Ud)|(a.aa&32768?jd:0)|(a.ea&65535?0:ld)|(a.da&32768?kd:0)|(a.$&65536?id:0)}function nd(a,b){b&=a.vc;a.aa=b<<12;a.ea=~b&4;a.da=b<<14;a.$=b<<16;if((b^a.O)&a.uc)for(var c=a.S.length;0<=--c;){var d=a.c[c];a.c[c]=a.S[c];a.S[c]=d}a.b=b>>Vd&Wd;c=a.O>>Vd&Wd;a.b!=c&&(a.qa[c]=a.c[6],a.c[6]=a.qa[a.b]);a.O=b;a.a&=~Xd;a.a|=a.L?Xd:rd}
function Yd(a,b,c,d){a.H(1024,"trap to vector %o (%o: %s)\n",b,d,0>d?Zd[-d]:"BUS ERROR");if(!a.ja){0>a.j?a.j=md(a):a.b||(d=$d);d==$d&&(a.a&ae&&(d=be),a.a|=ae,a.g|=ce,a.c[6]=b=4);if(d!=be){a.h=b|4143316992;a.b=0;var e=a.ob(b|a.Oa),g=a.ob(b+2&65535|a.Oa);nd(a,g&~cd|a.j>>2&cd);de(a,a.j);de(a,a.c[7]);a.c[ee]=e&65535}a.a&=~(c|fe|ge);a.a=a.a|rd|he;a.j=-1;a.sb=d;a.ib=b;d==be&&uc(a.time);if(d>=$d)throw b;}}function ie(a,b){var c=b>>13&31;31>c&&(b=a.l&Jd?a.qb[c]+(b&8191)&Md:b&~je);return b}
function ke(a,b,c){if(!(c&a.M)){var d=b&65535;d>=Rd&&(d|=a.m);return d}var e=b>>13;a.l&a.oc[a.b]||(e&=7);var g=a.Ga[a.b][e];d=(a.za[a.b][e]<<6)+(b&8191)&a.s;d>=je&&(d=ie(a,d));if(a.ja)return d;d>=a.Ad&&d<a.m?(a.g|=le,Yd(a,me,0,d)):d&1&&!(c&ne)&&(a.g|=oe,Yd(a,me,0,d));var f=0;switch(g&pe){case qe:f=re;case se:g|=te;c&Gd&&(f=ue);break;case ve:f=re;case we:c&Gd&&(f=re);case xe:g|=c&Gd?te|ye:te;break;default:f=ze}(g&(Ae|Be))!=Ae&&(g&Be?g&Ae&&(b&8128)<(g>>2&8128)&&(f|=Ce):(b&8128)>(g>>2&8128)&&(f|=Ce));
a.Ga[a.b][e]=g;if(d!=((Pd|De)&a.s)||a.b)a.w=a.b,a.I=e;f&&(f&yd&&(0<=a.j&&(f|=Ee),a.f&yd||(f|=a.f&re|a.w<<5|a.I<<1,td(a,a.f&~Fe|f&Fe)),Yd(a,Ge,He,Ie)),a.f&(yd|re)||!(d<((Pd|Je)&a.s)||d>((Pd|Ke|1)&a.s))||(a.f|=re,a.f&Le&&(a.a|=He)));return d}function de(a,b){var c=a.c[6]-2&65535;a.c[6]=c;a.h=a.h&65535|(a.h&-65536)<<8|16121856;a.a&ae||a.nc(Me,-2,c);a.yc(c,b)}n.od=function(a,b,c){!this.b&&0>=b&&c<=this.u&&(this.a|=Ne)};
n.pd=function(a,b,c){this.b||(65534<=c&&(c|=-65536),a&Gd&&c<=this.u&&(c<=this.u-32?Yd(this,me,0,$d):(this.g|=Oe,this.a|=Ne)))};n.Od=function(a){return this.i.oa(this.v=a)};n.Pd=function(a){return this.i.oa(this.v=ke(this,a,Pe))};n.$d=function(a,b){this.i.ca(this.v=a,b)};n.ae=function(a,b){this.i.ca(this.v=ke(this,a,Me),b)};
n.toString=function(){var a="";if(this.W)for(var b="R0 R1 R2 R3 R4 R5  SP PC PS PI SL NF ZF VF CF  M0 M1 M2 M3 ER  SR AR DR".split(" "),c=0;c<b.length;c++){var d=b[c];if(d){var e=16;"F"==d[1]&&(e=1);var g=ub(this,d);void 0!=g&&(a+=this.W.o("%s=%*n ",d,e,g))}else a+="\n"}return a};
var $c=1120,ed=1140,Zc=1170,Wd=3,id=1,kd=2,ld=4,jd=8,Ud=16,Td=224,ad=1792,bd=2048,cd=12288,dd=49152,Vd=14,od=65024,qd=34,pd=9,me=4,Ge=168,be=-1,Ie=-2,$d=-4,Zd="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),rd=1,Xd=2,ge=3,fe=16,Ne=32,He=64,he=128,ae=256,ee=7,ne=1,Hd=2,Gd=4,Od=65536,ce=4,Oe=8,le=32,oe=64,Ed=1,Ad=30,Bd=96,Ee=128,Fd=256,Le=512,zd=3072,re=4096,ue=8192,Ce=16384,ze=32768,yd=57344,Fe=61694,Dd=1,Cd=5,Id=16,Jd=32,qe=1,se=2,ve=4,we=5,xe=6,pe=7,Be=8,ye=
64,te=128,Ae=32512,Je=62592,De=65402,Ke=65470,Pe=0|Hd,Me=0|Gd,Rd=57344,Qd=253952,Pd=4186112,Nd=262143,je=3932160,Md=4194303;x.PDP11=Yc;
function Qe(a,b,c){c["class"]="Debugger";M.call(this,a,b,c);var d=this;this.Z=c.defaultRadix||16;this.aa=1;this.L=["(",")"];Aa(this,"a",function(g,f,k,h,m){return y(d,m.K,d.Z,k)});Aa(this,"n",function(g,f,k,h,m){return y(d,m,d.Z,k,0>f.indexOf("#")?"":void 0)});this.da=this.m=0;this.u={};this.ea=[];this.fa=[];this.N=Q(this,"CPU");this.xa=Wc(this.N,this);this.ja=Q(this,"Input",!1);if(a=this.N.T.busMemory||c.busMemory){this.a=pb(this,a);if(a=this.N.T.busIO||c.busIO)this.f=pb(this,a,!1);this.f||(this.f=
this.a)}else this.a=this.f=Q(this,"Bus");this.s=this.a.Y;this.qa=Math.pow(2,this.s)-1|0;this.j=this.U=0;this.i=[];for(var e in T)this.i[T[e]]=[];this.h=[];this.h[T.ra]=this.a;this.h[T.Ra]=this.a;this.h[T.Ma]=this.f;this.h[T.Na]=this.f;this.g=[];this.g[T.ra]=this.nd.bind(this);this.g[T.Ra]=this.qd.bind(this);this.g[T.Ma]=this.ld.bind(this);this.g[T.Na]=this.md.bind(this);this.c=[];this.w=void 0;this.J=null;this.M=0;this.time=Q(this,"Time");this.time.O.push(this);this.l=[];this.O="";this.ub(this,"state",
"dump machine state",this.yd);this.S=Re();this.ka=Re();this.$=!1;this.I=0;this.b=[];La(this,this.Cd.bind(this));(c=tb(this,"commands"))&&$a(this,c)}u(Qe,M);n=Qe.prototype;n.ub=function(a,b,c,d){this.l.push({xd:a,name:b,wd:c,$a:d})};function Se(a,b,c){for(var d,e=0;e<a.l.length;e++){var g=a.l[e];if(g.name==b){d=g.$a.call(g.xd,c);break}}return d}
n.vb=function(a){if(a&&a.length)for(var b=0;b<a.length-2;b+=3){var c=Te(this,a[b]);if(c){var d=Ue[a[b+1]];if(d){c={Ba:c,type:d,name:a[b+2]};d=this.ea;var e=c,g=Ve(d,e,this.pc);0>g&&d.splice(-(g+1),0,e);d=this.fa;e=Ve(d,c,this.qc);0>e&&d.splice(-(e+1),0,c)}}}};function Ve(a,b,c){var d=0,e=a.length,g=0;for(void 0===c&&(c=function(h,m){return h>m?1:h<m?-1:0});d<e;){var f=d+e>>1,k=void 0;k=c(b,a[f]);0<k?d=f+1:(e=f,g=!k)}return g?d:~d}n.pc=function(a,b){return a.name>b.name?1:a.name<b.name?-1:0};
n.qc=function(a,b){return a.Ba.K>b.Ba.K?1:a.Ba.K<b.Ba.K?-1:0};function We(a,b,c){b=Ve(a.fa,{Ba:b,type:0,name:void 0},a.qc);if(0<=b&&(a=a.fa[b],!c||a.type==c))var d=a.name;return d}function Xe(a,b,c,d){d=void 0===d?a.a:d;b.K=b.K+c&d.h}function Re(a){a=void 0===a?0:a;var b=Ye.Uc;return"number"==typeof a?{K:a,Ab:-1,type:b}:{K:a.K,Ab:a.Ab,type:a.type}}
function Te(a,b,c){if(b){var d=Re();var e=0,g=b.charAt(e);switch(g){case "&":e++;break;case "#":e++;d.type=Ye.Vc;break;case "%":e++,g=b.charAt(e),"%"==g?e++:d.type=Ye.ic}g=b.indexOf(":",e);if(0<=g){var f=Ze(a,b.substring(e,g),c);void 0==f?d=null:(d.Ab=f,e=g+1)}d&&(b=Ze(a,b.substring(e),c),void 0==b?d=null:d.K=b&a.qa)}return d}function $e(a,b,c,d){d=void 0===d?a.a:d;a.j++;var e=d.na(b.K);c&&Xe(a,b,c,d);a.j--;return e}
function af(a,b,c){if(32>=a.s)return b&c;b=U(a,b,0,!0);c=U(a,c,0,!0);return((b/D|0)&(c/D|0))*D+((b&c)>>>0)}function bf(a,b,c){if(32>=a.s)return b^c;b=U(a,b,0,!0);c=U(a,c,0,!0);return((b/D|0)^(c/D|0))*D+((b^c)>>>0)}
function cf(a,b,c,d){for(d=void 0===d?-1:d;d--&&c.length;){var e=c.pop();if(2>b.length)return!1;var g=b.pop();var f=b.pop();switch(e){case "*":f*=g;break;case "/":if(!g)return!1;f=Math.trunc(f/g);break;case "^/":if(!g)return!1;f%=g;break;case "+":f+=g;break;case "-":f-=g;break;case "<<":f<<=g;break;case ">>":f>>=g;break;case ">>>":f>>>=g;break;case "<":f=f<g?1:0;break;case "<=":f=f<=g?1:0;break;case ">":f=f>g?1:0;break;case ">=":f=f>=g?1:0;break;case "==":f=f==g?1:0;break;case "!=":f=f!=g?1:0;break;
case "&":f=af(a,f,g);break;case "!":case "|":e=f;32>=a.s?f=e|g:(e=U(a,e,0,!0),g=U(a,g,0,!0),f=(e/D|0|g/D|0)*D+((e|g)>>>0));break;case "^!":f=bf(a,f,g);break;case "&&":f=f&&g?1:0;break;case "||":f=f||g?1:0;break;case ",,":f=U(a,f,18,!0)*Math.pow(2,18)+U(a,g,18,!0);break;case "_":case "^_":"^_"==e&&(g=35-(g&255));g&&(f=U(a,f,0,!0),f=0<g?f*Math.pow(2,g):Math.trunc(f/Math.pow(2,-g)));break;default:return!1}b.push(U(a,f))}return!0}
function df(a,b,c,d,e,g){var f,k=!1,h=0,m=[],l=[],v=a.Z;for(a.Z=e;c<d;){var p=b[c++].trim();var q=c<d?b[c++]:"";if(p){var w=void 0;var t=a;var z=p,r=g;h=void 0===h?0:h;if(void 0!=z){w=ub(t,z.toUpperCase());if(void 0==w){w=void 0;var ua=t,W=Ve(ua.ea,{Ba:null,type:0,name:z},ua.pc);0<=W&&(w=ua.ea[W].Ba.K);if(void 0==w)if(w=z,t.u[w]?w=t.u[w].value:(w=w.substr(0,6),w=t.u[w]&&t.u[w].value),void 0==w)w=xa(z,1<z.length||10<t.Z?t.Z:10);else if(z=t.u[z]&&t.u[z].Jf)r?r.push(z):(r=Ze(t,z,r),void 0!==r?w+=r:w=
void 0)}void 0!=w&&(w=U(t,ef(t,w,h)))}t=w}else if("{"==q){p=1;for(t=c;c<d;)if(c++,q=c<b.length?b[c++]:"","{"==q)p++;else if("}"==q&&!--p)break;t=df(a,b,t,c-1,a.Z,g);null!=t&&h&&(t=ef(a,t,h));p=c<d?b[c++].trim():"";q=c<d?b[c++]:""}else{if(" "==q)continue;if("^B"==q){a.Z=2;continue}if("^O"==q){a.Z=8;continue}if("^D"==q){a.Z=10;continue}if(!(h&-1073741824)){if("+"==q)continue;if("-"==q){h=h<<2|1;continue}if("~"==q||"^-"==q){h=h<<2|2;continue}if("^L"==q){h=h<<2|3;continue}}k=!0;break}if(void 0===t)if(g)g.push(p),
t=0;else{k=!0;break}m.push(U(a,t));if(" "==q)if(c<b.length-1&&!b[c])c++,q=b[c++];else{k=!0;break}if(!q)break;t="<"==a.L[0]?ff:gf;if(!t[q]){k=!0;break}l.length&&t[q]<=t[l[l.length-1]]&&cf(a,m,l,1);l.push(q);a.Z="^_"==q?10:e;h=0}if(k||!cf(a,m,l)||1!=m.length)k=!0;k?g||a.H("parse error (%s)\n",p||q):f=m.pop();a.Z=v;return f}
function hf(a,b,c,d){for(var e,g=a.s/d|0;0<=(e=b.indexOf(c));){for(var f=0,k=e+1,h=g;k<b.length;){var m=b[k++];if(m==c){h=-1;break}if(!h)break;h--;m=m.charCodeAt(0);6==d&&(m-=32);m&=(1<<d)-1;f=U(a,f*Math.pow(2,d)+m,d*g,!0)}if(0<=h){a.H("parse error (%c%s%c)\n",c,b,c);return}b=b.substr(0,e)+y(a,f)+b.substr(k)}return b}
function Ze(a,b,c){if(b){"{"!=a.L[0]&&(b=b.split(a.L[0]).join("{").split(a.L[1]).join("}"));b=hf(a,b,'"',8);if(!b)return d;b=hf(a,b,"'",6);if(!b)return d;16!=a.Z&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);var d=df(a,b,0,b.length,a.Z,c)}return d}
function ef(a,b,c){for(;c;){var d;switch(c&3){case 1:b=-U(a,b);break;case 2:b=bf(a,b,-1);break;case 3:for(d=35;0<=d&&!af(a,b,Math.pow(2,d));)d--;b=35-d}c>>>=2}return b}function U(a,b,c,d){var e=b;c=c||a.s;if(d)if(32==c)e=b>>>0;else if(32>c)e=b&(1<<c)-1;else{if(a=Math.pow(2,c),0>b||b>=a)e=b%a,0>e&&(e+=a)}else 32>=c?e=b<<32-c>>32-c:(a=Math.pow(2,c-1),b>=a?(e=b%a,(b/a|0)&1&&(e-=a)):b<-a&&(e=b%a,((-b-1)/a|0)&1?e&&(e+=a):e||(e-=a)));b!=e&&(b=e);return b}
n.wb=function(a){function b(k){for(var h=0;h<k.length;h++)if(void 0!=k[h])return!1;return!0}if(-1>a)return jf(this,this.wb);var c="";if(0<=a){var d=this.c[a];if(void 0!=d){c=d>>8;d&=255;var e=this.h[c];if(e){var g=this.i[c],f=g[d];(c&1?e.Db(f.K,this.g[c]):e.fb(f.K,this.g[c]))?(g[d]=void 0,this.c[a]=void 0,b(g)&&(g.length=0,b(this.c)&&(this.c.length=0)),c=this.o("%2d: %s %*a cleared\n",a,kf[c],e.Y,f),--this.U||this.$||(c+=lf(this,!1))):c=this.o("invalid break address: %*a\n",e.Y,f)}else c="invalid bus"}else c=
this.o("invalid break index: %d\n",a)}else c="missing break index\n";return c};function mf(a,b){if(a.J&&(void 0==b||a.J.K==b)){var c=void 0===c?T.ra:c;b=-1;var d=nf(a.J,a.i[c]);if(0<=d)for(var e=0;e<a.c.length;e++){var g=a.c[e];if(void 0!=g&&c==g>>8&&d==(g&255)){b=e;break}}c=b;0<=c&&a.wb(c);a.J=null}}
n.xb=function(a,b){b=void 0===b?!1:b;if(-1>a)return jf(this,this.xb,b);if(0<=a){var c=this.c[a];if(void 0!=c){var d=c>>8;c=this.i[d][c&255];if(void 0!=c){var e=b?"enabled":"disabled",g=this.h[d];!c.disabled==!b?(c.disabled=!b,a=this.o("%2d: %s %*a %s\n",a,kf[d],g.Y,c,e)):a=this.o("%2d: %s %*a already %s\n",a,kf[d],g.Y,c,e)}else a=this.o("no break address at index: %d\n",a)}else a=this.o("invalid break index: %d\n",a)}else a="missing break index\n";return a};
function jf(a,b,c){for(var d="",e=0;e<a.c.length;e++)void 0!=a.c[e]&&(d+=b.call(a,e,c));d||(d="no break addresses found");return d}function of(a,b,c){c=void 0===c?T.ra:c;a=a.i[c];for(c=0;c<a.length;c++){var d=a[c];if(d.K==b)return d}}function nf(a,b){for(var c=0;c<b.length;c++)if(b[c].K==a.K)return c;return-1}
function pf(a,b){b=void 0===b?!1:b;for(var c="",d=0;d<a.c.length;d++){var e=a.c[d];if(void 0!=e){var g=e>>8;e=a.i[g][e&255];g=a.o("%s %*a",kf[g],a.h[g].Y,e);b?(c&&(c+=";"),c+=g,e.disabled&&(c+=";bd "+d)):c+=a.o("%2d: %s %s\n",d,g,e.disabled?"disabled":"enabled")}}c||b||(c="no break addresses found\n");return c}
function qf(a,b,c){c=void 0===c?T.ra:c;if(b){var d=a.h[c];if(d){var e=a.i[c];var g=nf(b,e);if(0<=g)g=-(g+1);else{for(g=0;g<e.length&&void 0!=e[g];g++);e[g]=b}e=g;if(0<=e)if(g=c&1?d.Bb(b.K,a.g[c]):d.eb(b.K,a.g[c])){for(g=0;g<a.c.length&&void 0!=a.c[g];g++);a.c[g]=c<<8|e;b=a.o("%2d: %s %*a set\n",g,kf[c],d.Y,b);a.U++||a.b.length||(b+=lf(a,!0))}else b=a.o("invalid break address: %*a\n",d.Y,b),a.i[c][e]=void 0;else b=a.o("%s %*a already set\n",kf[c],d.Y,b)}else b="invalid bus"}else b="missing break address\n";
return b}function rf(a,b){0<=b&&(a.m=b);var c="instruction break count: "+(0<a.m?a.m:"disabled")+"\n";0<b&&(a.b.length||(c+=lf(a,!0)),a.$=!0);return c}function sf(a,b){var c;if(b){var d=ab(b);void 0!=d?a.da=d?0xffffffffffff:0:c=a.o("unrecognized message option: %s\n",b)}c||(c=a.o("break on message: %b\n",!!a.da));return c}n.ld=function(a,b){this.j||(void 0==a?V(this,"break on unknown input %#0x: %#0x",b):(a=of(this,a+b,T.Ma))&&!a.disabled&&V(this,"break on input %*a: %#0x",this.f.Y))};
n.md=function(a,b){this.j||(void 0==a?V(this,"break on unknown output %#0x: %#0x",b):(a=of(this,a+b,T.Na))&&!a.disabled&&V(this,"break on output %*a: %#0x",this.f.Y))};n.nd=function(a,b){this.j||(void 0==a?V(this,"break on unknown read %#0x: %#0x",b):(a+=b,this.b.length&&a==this.N.zb&&(this.M++,0<this.m&&(--this.m||V(this,"break on instruction count")),this.b[this.I++]=a,this.I==this.b.length&&(this.I=0)),(b=of(this,a,T.ra))&&!b.disabled&&(V(this,"break on read %*a: %#0x",this.a.Y),mf(this,a))))};
n.qd=function(a,b){this.j||(void 0==a?V(this,"break on unknown write %#0x: %#0x",b):(a=of(this,a+b,T.Ra))&&!a.disabled&&V(this,"break on write %*a: %#0x",this.a.Y))};function V(a,b,c){b=a.o.apply(a,[b].concat(ba(c)));F(a,b);uc(a.time)}function tf(a,b,c){c=void 0===c?a.a:c;return y(a,b.K,a.Z,c.Y,"")}
function uf(a,b,c){c=void 0===c?10:c;var d="";if(a.b.length){var e,g=[];c>a.b.length&&(c=a.b.length);0>b&&(b=c);var f=a.I-b;for(0>f&&(f+=a.b.length);0<=f&&f<a.b.length&&0<c;){var k=a.b[f++];if(void 0==k)break;f==a.b.length&&(f=0);e?e.K=k:e=Re(k);for(k=0;k<a.aa;k++)g[k]=$e(a,e,1);Xe(a,e,-g.length);d+=a.Cb(e,g,a.o("[%6d]",b--));c--}}return d||"no history"}
function Uc(a,b,c){var d=[],e="";for(b="number"==typeof b?Re(b):b;c--;){for(Xe(a,b,d.length);d.length<a.aa;)d.push($e(a,b,1));Xe(a,b,-d.length);e+=a.Cb(b,d)}return e}
function vf(a,b,c,d,e,g){var f="";g=g?a.f:a.a;c||(c=g.f);var k=c>>3;d||(d=128);var h=0,m=d+15>>4||1,l=4==k?16:a.Z;"y"==e&&(l=k,m=d,h=8*k);b||(b=a.ka);for(;m--&&0<d;){var v=e=0,p,q="",w="",t=tf(a,b,g);for(p=l;0<p&&0<d;p--){var z=$e(a,b,1,g);e|=z<<(v++<<3);v==k&&(q+=y(a,e,0,c,""),q+=1==k?9==p?"-":" ":" ",h&&(w+=y(a,e,2,c,"")),e=v=0);h||(w+=32<=z&&127>z?String.fromCharCode(z):".");d--}f&&(f+="\n");f+=t+"  "+q+" "+w}a.ka=b;return f}
n.yd=function(){var a=[];sb(this,function(b){b.Va&&b.Va(a);return!0});return JSON.stringify(a,null,2)};function wf(a,b,c,d){var e=0,g="";d=d?a.f:a.a;for(var f=0;void 0!=b&&f<c.length;f++){var k=$e(a,b,0,d);if(void 0==k)break;var h=a,m=b,l=c[f],v=d;v=void 0===v?h.a:v;h.j++;v.ia(m.K,l);h.j--;g+=a.o("%*a: %#*n changed to %#*n\n",a.a.Y,b,a.a.f,k,a.a.f,c[f]);Xe(a,b,1,d);e++}e||(g+=a.o("%d locations updated\n",e));a.time.update();return g}
function lf(a,b){var c="";void 0!=b&&b==!a.b.length&&Oc(a.a,function(d){b?a.a.eb(d.ga,a.g[T.ra]):a.a.fb(d.ga,a.g[T.ra])})&&(b?(a.I=0,a.b=Array(xf)):a.b=[]);return c+=a.o("instruction history %s\n",a.b.length?"enabled":"disabled")}n.ta=function(a){var b=a.shift();return this.X==b?($a(this,a.shift()),this.R.ha=a.shift(),!0):!1};n.zc=function(a){ya(this.da,a)?V(this,"break on message"):this.time.I=!0};
n.Cd=function(a){var b=a[1],c=a[2],d=[],e=[],g=!1,f="";this.w=void 0;if("*"==c)var k=-2;else{k=xa(c);void 0==k&&(k=-1);var h=Te(this,c,e);if(null===h)return}var m=0;a[3]&&(m=xa(a[3].substr("l"==a[3][0]?1:0))||8);for(var l=3;l<a.length;l++)d.push(xa(a[l],16));if("d"==b){l=Se(this,c,d);if(void 0!=l)return l;b=this.O||b}if("s"!=b[0]&&e.length)return"unrecognized symbol(s): "+e;switch(b[0]){case "b":"c"==b[1]?f=this.wb(k):"d"==b[1]?f=this.xb(k):"e"==b[1]?f=this.xb(k,!0):"i"==b[1]?f=qf(this,h,T.Ma):"l"==
b[1]?f=pf(this):"m"==b[1]?f=sf(this,c):"n"==b[1]?f=rf(this,k):"o"==b[1]?f=qf(this,h,T.Na):"r"==b[1]?f=qf(this,h,T.ra):"w"==b[1]?f=qf(this,h,T.Ra):"?"==b[1]?(f="break commands:\n",yf.forEach(function(v){f+=v+"\n"})):b[1]&&(f=void 0);break;case "d":this.O=b;if("b"!=b[1]&&b[1])if("w"==b[1])c=16;else if("d"==b[1])c=32;else if("i"==b[1]){if(!this.f){f="invalid bus";break}c=this.f.f;m=m||1;g=!0}else{if("h"==b[1])this.O="",f=uf(this,k,m);else if("?"==b[1]){if(this.O="",f="dump commands:\n",zf.forEach(function(v){f+=
v+"\n"}),this.l.length)for(f+="dump extensions:\n",b=0;b<this.l.length;b++)h=this.l[b],f+=this.o("d   %-12s%s\n",h.name,h.wd)}else f=void 0;break}else c=8;f=vf(this,h,c,m,b[2],g);break;case "e":if("o"==b[1]){if(!this.f){f="invalid bus";break}g=!0}else if(b[1]){f=void 0;break}f=wf(this,h,d,g);break;case "g":if(this.time.start()){if(void 0!=h){mf(this);f=qf(this,h);if(2!=f.indexOf(":"))break;this.J=h;f=""}break}f="already started\n";break;case "h":uc(this.time)||(f="already stopped\n");break;case "p":a.shift();
a.shift();b=a.join(" ");f+=this.o("%s = %s\n",b,y(this,Ze(this,b)));break;case "r":if(b=b.substr(1).toUpperCase()){if(void 0==ub(this.N,b)){f+=this.o("unrecognized register: %s\n",b);break}void 0!=h&&xb(this.N,b,h.K)}this.S.K=this.N.pb;f+=this.N.toString();break;case "s":h=ab(c);if("h"==b[1]){if(this.U||0<this.m)h=void 0;f=lf(this,h);void 0!=h&&(this.$=h)}else"p"==b[1]?0<k?(rc(this.time,k),f="target speed:  "+xc(this.time.i)):f="current speed: "+Fc(this.time):"s"==b[1]&&this.ma?(k=this.ma.indexOf(c),
0<=k&&(this.style=this.ma[k]),f="style: "+this.style):"?"==b[1]?(f="set commands:\n",Af.forEach(function(v){f+=v+"\n"})):f=void 0;break;case "t":m=xa(c,10)||1;this.w=!0;if(b[1]){if("r"!=b[1]){f=void 0;break}this.w=!1}zc(this.time,m);break;case "u":if(b[1]){f=void 0;break}m||(m=8);h||(h=this.S);f+=Uc(this,h,m);this.S=h;break;case "?":f="debugger commands:\n";Bf.forEach(function(v){f+=v+"\n"});break;default:f=void 0}void 0==f&&a[0]&&(f="unrecognized command '"+a[0]+"' (try '?')\n");return f};
n.yb=function(a){return a&&this.ta(a[0])?(a.shift(),!0):!1};n.Va=function(a){var b=[];this.va(b);a.push(b)};n.Dd=function(a){if(a)if(this.time.a){if(this.ja){a=this.ja;var b=a.c;b&&a.R.Ja&&(a.H(131072,'setFocus("%s")\n',b.id||b.nodeName),b.focus(),b.scrollIntoView())}}else this.w?this.Aa(Uc(this,this.N.pb,1)):(this.M&&(F(this.N,this.M+" instructions executed"),this.M=0),this.N.Aa(this.N.toString()),void 0==this.w&&(a=this.Ha(Ia.Ya,!0))&&a.focus())};
n.va=function(a){a.push(this.X);a.push(pf(this,!0));a.push(this.R.ha)};n.Cb=function(a,b,c){var d=this;return this.o("%s %02x       unsupported       ; %s\n",tf(this,a),function(){var e=b.shift();Xe(d,a,1);return e}(),c||"")};
var Bf="b?\t\tbreak commands;d?\t\tdump commands;e[o] [addr] ...\tedit memory/ports;g    [addr]\trun (to addr);h\t\thalt;p    [expr]\tparse expression;r?   [value]\tdisplay/set registers;s?\t\tset commands;t[r] [n]\tstep (n instructions);u    [addr] [n]\tunassemble (at addr)".split(";"),yf="bc [n|*]\tclear break address;bd [n|*]\tdisable break address;be [n|*]\tenable break address;bl [n]\t\tlist break addresses;bi [addr]\tbreak on input;bo [addr]\tbreak on output;br [addr]\tbreak on read;bw [addr]\tbreak on write;bm [on|off]\tbreak on message;bn [count]\tbreak on instruction count".split(";"),
zf="db  [addr]\tdump bytes (8 bits);dw  [addr]\tdump words (16 bits);dd  [addr]\tdump dwords (32 bits);di  [addr]\tdump input ports;d*y [addr]\tdump values in binary;dh  [n] [l]\tdump instruction history buffer;ds\t\tdump machine state".split(";"),Af=["sh [on|off]\tset instruction history","sp [n]\t\tset speed multiplier","ss\t\tset debugger style"],Ye={ic:1,Uc:0,Vc:2,qf:0},T={ra:0,Ra:1,Ma:2,Na:3},Cf={},kf=(Cf[T.ra]="br",Cf[T.Ra]="bw",Cf[T.Ma]="bi",Cf[T.Na]="bo",Cf),hd={Tc:"PC"},Df={BYTE:1,Sc:2,Wc:4,
Xb:5,Nb:6,hd:7},Ue={"=":Df.hd,1:Df.BYTE,2:Df.Sc,4:Df.Wc,"@":Df.Xb,";":Df.Nb},xf=1E5,gf={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},ff={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20};
function Ef(a,b,c){Qe.call(this,a,b,c);this.la=Ff;this.v=[];this.N.J<ed&&(this.v=this.v.concat(Gf));1145>this.N.J&&(this.v=this.v.concat(Hf));this.aa=6}u(Ef,Qe);
Ef.prototype.Cb=function(a,b,c){function d(B){var A=h.N,C=[];if(A.M){var P=A.b<<1,K=B>>13;7<K&&(P|=1);A.l&A.oc[A.b]||(K&=7);var Kd=B&8191,Ld=A.za[A.b][K]<<6;B=Ld+Kd&A.s;B>=je&&(B=ie(A,B));C.push(B);C.push(Kd);C.push(P);C.push(K&7);C.push(Ld);C.push(A.s)}else B&=65535,B>=Rd&&(B|=A.m),C.push(B);return null}function e(B){return If[B]||"?"}function g(B,A){var C="",P=A&Jf;if(P==X)C=a.K+((B&255)<<24>>23)&65535,C=k(C);else if(P==Kf)C=a.K-((B&63)<<1)&65535,C=k(C);else if(P==Lf)C=y(h,B&7,0,3,"");else if(P==
Mf)C=y(h,B&63,0,6,"");else if(P==Nf)C=y(h,B&255,0,8,"");else if(B&=A,A&Y&&(B>>=6,A>>=6),A&Z){P=null;var K=B&7;switch(B&56){case 0:C=e(K);break;case 8:C="@"+e(K);P=d(h.N.c[K]);break;case 16:7>K?C="("+e(K)+")+":(A=f(),C="#"+k(A));break;case 24:7>K?C="@("+e(K)+")+":(A=f(),C="@#"+k(A),P=d(A));break;case 32:C="-("+e(K)+")";break;case 40:C="@-("+e(K)+")";break;case 48:A=f();C=k(A)+"("+e(K)+")";7==K&&(C=k(A=A+a.K&65535),P=d(A));break;case 56:A=f(),C="@"+k(A)+"("+e(K)+")",7==K&&(C="@"+k(A=A+a.K&65535),B=
h.N,B.ja++,A=B.i.oa(ke(B,A,Pe)),B.ja--,P=d(A))}P&&(C=[C,P])}return C}function f(){var B=b.shift()|b.shift()<<8;l+=k(B);Xe(h,a,2);return B}function k(B){return y(h,B,0,16,"")}var h=this,m=tf(this,a),l="",v=We(this,a,Df.Xb),p=We(this,a,Df.Nb),q=f(),w;for(z in this.la)if(w=this.la[z][q&z])break;w&&(w=Of);var t=w[0];0<=this.v.indexOf(t)&&(w=Of,t=w[0]);var z=Pf[t];var r="",ua=w.length-1;t||ua||(r=k(q));for(t=1;t<=ua;t++){var W=w[t];if(void 0!=W){W=g(q,W);if(!W||!W.length){r="INVALID";break}"string"!=typeof W&&
(W=W[0]);0<r.length&&(r+=",");r+=W||"???"}}m=this.o("%s %-7s  %-7s %s",m,l,z,r);c?p&&(c+=" "+p):p&&(c=p);c&&(m=this.o("%-32s; %s",m,c));v&&(m=v+":\n"+m);return m+"\n"};
var Pf=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),If=
"R0 R1 R2 R3 R4 R5 SP PC A0 A1 A2 A3 A4 A5 A6 A7 S0 S1 S2 S3 PS PI ER SL M0 M1 M2 M3 AR DR SR".split(" "),Z=63,Y=4032,X=4096,Kf=8192,Lf=12288,Mf=24576,Nf=32768,Jf=61440,Ff={61440:{4096:[62,Y,Z],8192:[47,Y,Z],12288:[18,Y,Z],16384:[14,Y,Z],20480:[16,Y,Z],24576:[3,Y,Z],36864:[63,Y,Z],40960:[48,Y,Z],45056:[19,Y,Z],49152:[15,Y,Z],53248:[17,Y,Z],57344:[94,Y,Z]},65024:{2048:[57,448,Z],28672:[100,Z,448],29184:[101,Z,448],29696:[102,Z,448],30208:[103,Z,448],30720:[104,448,Z],32256:[105,448,Kf]},65280:{256:[27,
X],512:[24,X],768:[10,X],1024:[11,X],1280:[22,X],1536:[12,X],1792:[20,X],32768:[25,X],33024:[23,X],33280:[13,X],33536:[21,X],33792:[28,X],34048:[29,X],34304:[8,X],34560:[9,X],34816:[106,Nf],35072:[107,Nf]},65472:{64:[56,Z],192:[95,Z],2560:[39,Z],2624:[49,Z],2688:[53,Z],2752:[51,Z],2816:[67,Z],2880:[1,Z],2944:[77,Z],3008:[97,Z],3072:[73,Z],3136:[71,Z],3200:[6,Z],3264:[4,Z],3328:[58,Mf],3392:[60,Z],3456:[65,Z],3520:[96,Z],35328:[40,Z],35392:[50,Z],35456:[54,Z],35520:[52,Z],35584:[68,Z],35648:[2,Z],
35712:[78,Z],35776:[98,Z],35840:[74,Z],35904:[72,Z],35968:[7,Z],36032:[5,Z],36096:[66,Z],36160:[59,Z],36224:[64,Z],36288:[61,Z]},65528:{128:[76,7],152:[108,Lf]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],
191:[79]}},Of=[0],Gf=[58,60,65,96,110,100,101,102,103,104,105],Hf=[108,59,64];x.PDP11Dbg=Ef;
function Qf(a,b,c){M.call(this,a,a);var d=this;this.b=this.Ja=!1;this.i=c;this.a="";this.h=this.g=!1;this.ha=0;b=b.trim();"{"==b[0]?Rf(this,b):(this.a=b,Ua(this.a,function(e,g,f,k){4==f&&(!k&&g?(Rf(d,g),Sf(d)):d.H("error (%d) loading configuration: %s\n",k,e))}));window.addEventListener("load",function(){d.h=!0;Sf(d)});window.addEventListener(Ya("iOS")?"pagehide":Ya("Opera")?"unload":"beforeunload",function(){Tf(d)});window.addEventListener("pageshow",function(){d.Ja&&!d.b&&d.ua(!0)})}u(Qf,M);
Qf.prototype.Sa=function(a,b){var c=this;switch(a){case Uf:b.onclick=function(){c.Ja&&c.ua()};break;case Vf:b.onclick=function(){c.Ja&&c.Ca()}}M.prototype.Sa.call(this,a,b)};
function Sf(a){var b=!0;if(a.g&&a.h){for(var c in a.c){var d=void 0,e=a.c[c];try{d=e["class"],x[d]?"Machine"==d?(a.H("PCjs %s v%3.2f\n%s\n%s\n",e.name,2,Wf,Xf),a.a&&a.H("Configuration: %s\n",a.a)):new x[d](a.V,c,e):a.H("unrecognized %s device class: %s\n",c,d)}catch(f){e.optional||(a.H("error initializing %s device '%s': %s\n",d,c,f.message),b=!1),wb(a,c)}}if(a.f){var g=Za(a);sb(a,function(f){return f.yb&&!f.yb(g)?(f.H("unable to restore state for device: %s\n",f.X),!1):!0})}a.ua(b)}}
function Rf(a,b){try{a.c=JSON.parse(b);qb(a,a.c[a.V],["autoSave","autoStart"]);a.f=!1!==a.T.autoSave;a.j=!1!==a.T.autoStart;if(a.i){var c=eval("("+a.i+")"),d;for(d in c)a.T[d]=c[d]}a.g=!0}catch(e){c=e.message,(d=c.match(/position ([0-9]+)/))&&(c+=" ('"+b.substr(+d[1],40).replace(/\s+/g," ")+"...')"),F(a,"machine '"+a.V+"' initialization error: "+c)}}
Qf.prototype.ua=function(a){a=void 0===a?!this.b:a;var b=this;a&&F(this,"power on");sb(this,function(c){c.ua&&c!=b&&("CPU"!=c.T["class"]||b.j||b.Ja?c.ua(a):c.time.update(!0));return!0});this.Ja=!0;(this.b=a)||F(this,"power off")};Qf.prototype.Ca=function(){var a=this;sb(this,function(b){b.Ca&&b!=a&&b.Ca();return!0})};function Tf(a){if(a.f){var b=[];sb(a,function(c){c.Va&&c.Va(b);return!0});fb(a,b)}a.ua(!1)}var Uf="power",Vf="reset",Wf="Copyright \u00a9 2012-2019 Jeff Parsons <Jeff@pcjs.org>",Xf="License: GPL version 3 or later <http://gnu.org/licenses/gpl.html>";
window.PDP11M=function(a,b,c){var d=new Qf(a,b,c);window.command=function(e){return $a(d,e)};return d};x.Machine=Qf;})()

//# sourceMappingURL=pdp11v2.js.map
