(function(){/*
 https://www.pcjs.org/modules/devices/lib/defs.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/numio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/stdio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/webio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/device.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/input.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/led.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/time.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/bus.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/memory.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/ports.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/ram.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/rom.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/cpu.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/debugger.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/pdp11/pdp11ops.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/pdp11/pdp11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/pdp11/pdp11dbg.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/pdp11/iopage.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/pdp11/dl11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/pdp11/pc11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/machine.js (C) Jeff Parsons 2012-2019
*/
var l;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:aa(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ca="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},da;
if("function"==typeof Object.setPrototypeOf)da=Object.setPrototypeOf;else{var ea;a:{var fa={Ab:!0},ha={};try{ha.__proto__=fa;ea=ha.Ab;break a}catch(a){}ea=!1}da=ea?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ia=da;
function u(a,b){a.prototype=ca(b.prototype);a.prototype.constructor=a;if(ia)ia(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.tg=b.prototype}var ja="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ka="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function la(a,b){if(b){var c=ka;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ja(c,a,{configurable:!0,writable:!0,value:b})}}la("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});la("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});
function ma(){ma=function(){};ka.Symbol||(ka.Symbol=na)}function oa(a,b){this.m=a;ja(this,"description",{configurable:!0,writable:!0,value:b})}oa.prototype.toString=function(){return this.m};var na=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new oa("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function pa(){ma();var a=ka.Symbol.iterator;a||(a=ka.Symbol.iterator=ka.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ja(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(aa(this))}});pa=function(){}}function qa(a){pa();a={next:a};a[ka.Symbol.iterator]=function(){return this};return a}
function ra(a,b){pa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}la("Array.prototype.keys",function(a){return a?a:function(){return ra(this,function(b){return b})}});la("Number.parseInt",function(a){return a||parseInt});
la("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});la("Array.prototype.values",function(a){return a?a:function(){return ra(this,function(b,c){return c})}});var sa,ta=new ArrayBuffer(2);(new DataView(ta)).setUint16(0,256,!0);sa=256===(new Uint16Array(ta))[0];function ua(){}var x={};x.Defs=ua;function va(){}u(va,ua);
function wa(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(f=parseInt(a,b))){e&&(0>f&&(f+=Math.pow(2,36)),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function xa(a,b,c){var d,e={Z:null,Ad:null,Wa:null,Va:null};if("["==c.charAt(0)||"{"==c.charAt(0))try{var f,g;if("<"==c.charAt(0))throw Error(c);var k=0>c.indexOf("0x")&&0>c.indexOf("0o")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+c+")");e.Wa=k.load;e.Va=k.exec;var h=k.width,m=k.values;h&&m&&(8==h?k.bytes=m:16==h?k.words=m:32==h?k.longs=m:k.data=m);if(f=k.bytes)e.Z=f;else if(f=k.words)for(e.Z=Array(2*f.length),g=d=0;d<f.length;d++)e.Z[g++]=
f[d]&255,e.Z[g++]=f[d]>>8&255;else if(f=k.longs)for(e.Z=Array(4*f.length),g=d=0;d<f.length;d++)e.Z[g++]=f[d]&255,e.Z[g++]=f[d]>>8&255,e.Z[g++]=f[d]>>16&255,e.Z[g++]=f[d]>>24&255;else(f=k.data)?e.bg=f:e.Z=k;e.Z&&(e.Z.length?1==e.Z.length&&(a.error(e.Z[0]),e=null):(a.error("empty resource: %s",b),e=null));e.Ad=k.symbols}catch(n){a.error("resource (%s) exception: %s",b,n.message),e=null}else{f=[];c=c.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(d=0;d<c.length;d++){g=parseInt(c[d],16);if(isNaN(g)){a.error("resource (%s) contains invalid hex byte (%s)",
b,c[d]);break}f.push(g&255)}d==c.length&&(e.Z=f)}return e}
function y(a,b,c,d,e){d=void 0===d?0:d;var f=void 0===f?0:f;var g="",k="",h=-1;c||(c=a.ba||10);d&&(h=Math.ceil(d/Math.log2(c)));if(void 0==e)switch(c){case 8:e="0o";break;case 16:e="0x";break;case 10:k=".";default:e=""}isNaN(b)||"number"!=typeof b?(b=void 0,e=k=""):(0>b&&-1<b&&(b=-1),d&&(0>b&&(b+=Math.pow(2,d)),b>=Math.pow(2,d)&&(h=Math.ceil(Math.log(b)/Math.log(c)))));for(a=f||-1;h--;){a||(g=","+g,a=f);if(void 0==b){if(g="?"+g,0>h)break}else if(d=b%c,b=Math.trunc(b/c),d+=0<=d&&9>=d?48:55,g=String.fromCharCode(d)+
g,!b&&0>h)break;a--}return e+g+k}function ya(a,b){var c=a/D|0,d=b/D|0;return(a&b)==(b|0)&&(c&d)==d}function za(a){for(var b=0,c=0,d=[];b<a.length;){for(var e=a[b],f=b+1;f<a.length&&a[f]===e;)f++;d[c++]=f-b;d[c++]=e;b=f}return d.length>=a.length?a:d}var D=Math.pow(2,32);x.NumIO=va;function Aa(){this.Na={};for(var a=0;22>a;a++)this.Na["ACDFHIMNSTWYbdfjcsoXx%"[a]]=null}u(Aa,va);function Ca(a,b,c){a.Na[b]||(a.Na[b]=c)}l=Aa.prototype;l.flush=function(){var a=Da;Da="";this.Fa(a)};
function Ea(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}l.Wd=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return void 0===b[0]?new Date(Date.now()):"string"===typeof b[0]?new Date(b[0]+" "+(b[1]||"00:00:00 GMT")):void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,ba(b)))};
l.Fa=function(a,b){var c=a.lastIndexOf("\n");b?0<=c&&(b=Date.now(),Fa||(Fa=b),a=((b-Fa)/1E3).toFixed(3)+": "+a):(0<=c&&(console.log(Da+a.substr(0,c)),Da="",a=a.substr(c+1)),Fa=null);Da+=a;return a.length};function E(a,b,c){a.Fa(b+"\n",c)}l.s=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return this.Fa(this.v.apply(this,[a].concat(ba(c))))};
l.v=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!c||!c.length)return a;d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),f=0,g;for(g=0;g<e.length-6;g+=6){d+=e[g];var k=e[g+5];if(void 0===this.Na[k])d+="%"+e[g+1]+e[g+2]+e[g+3]+e[g+4]+k;else{if(f<c.length){var h=c[f];"%"!=k&&f++}else h=c[c.length-1];var m=e[g+1],n=0<=m.indexOf("#"),v=0<=m.indexOf("0"),p=e[g+2];"*"==p?(p=h,h=f<c.length?c[f++]:c[c.length-1]):p=+p||0;var q=e[g+3];q=q?+q.substr(1):
-1;var w=null,t=0,z="";var r=0<="ACDFHIMNSTWY".indexOf(k)&&"object"!=typeof h?this.Wd(h):h;switch(k){case "C":h=n?"#":"";d+=isNaN(r.getTime())?void 0:this.v(this.v("%%%sW, %%%sF %%%sD, %%%sY",h),r);continue;case "D":h=n?r.getUTCDate():r.getDate();k="d";break;case "A":case "H":case "I":h=n?r.getUTCHours():r.getHours();"A"==k?(h=12>h?"am":"pm",k="s"):("I"==k&&(h=h?12<h?h-12:h:12),k="d");break;case "F":case "M":h=n?r.getUTCMonth():r.getMonth();"F"==k?(h=Ga[h],k="s"):(h++,k="d");break;case "N":h=n?r.getUTCMinutes():
r.getMinutes();k="d";break;case "S":h=n?r.getUTCSeconds():r.getSeconds();k="d";break;case "T":h=n?"#":"";d+=isNaN(r.getTime())?void 0:this.v(this.v("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",h),r);continue;case "W":h=Ha[n?r.getUTCDay():r.getDay()];k="s";break;case "Y":h=n?r.getUTCFullYear():r.getFullYear(),0<q&&(h%=Math.pow(10,q),q=-1),k="d"}switch(k){case "b":d+=h?"true":"false";break;case "d":h=Math.trunc(h),0<=q&&(v=!0,p<q&&(p=q),q=-1);case "f":h=+h;r=h+"";0<=q&&(r=h.toFixed(q));r.length<
p&&(v?(0>h&&(p--,r=r.substr(1)),r=("0000000000"+r).slice(-p),0>h&&(r="-"+r)):r=("          "+r).slice(-p));d+=r;break;case "j":d+=JSON.stringify(h,null,p||void 0);break;case "c":h="string"==typeof h?h[0]:String.fromCharCode(h);case "s":if(void 0!=h)for("string"!=typeof h&&(h=h.toString()),0<=q&&(h=h.substr(0,q));h.length<p;)h=0<=m.indexOf("-")?h+" ":" "+h;d+=h;break;case "o":t=8,n&&(z="0");case "X":w=Ia;case "x":r="";t||(t=16);!z&&n&&(z="0x");w||(w=Ja);h=Math.trunc(h);0<=q&&(v=!0,p<q&&(p=q));v&&!p&&
(p=Math.abs(h),p=255>=p?2:65535>=p?4:4294967295>=p?8:9,p+=z.length);p-=z.length;do n=h&t-1,h>>>=16==t?4:3,v||!r||n||h?r=w[n]+r:(z&&(r=z+r,z=""),0<p&&(r=" "+r));while(0<--p||h);d+=z+r;break;case "%":d+="%";break;default:this.Na[k]?d+=this.Na[k](k,m,p,q,h):d+="(unimplemented sprintf type: %"+k+")"}}}return d+=e[g]};var Da="",Fa=null,Ja="0123456789abcdef",Ia="0123456789ABCDEF",Ha="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ga="January February March April May June July August September October November December".split(" ");
x.StdIO=Aa;function Ka(a){Aa.call(this);this.Y={};this.ja=0;this.R=this;a&&(this.R.ja=0,this.R.Ba=[],this.R.ya=0,this.R.ab={},this.R.ng=!1)}var La;u(Ka,Aa);l=Ka.prototype;l.Ga=function(a,b){var c=this,d=this;switch(a){case Ma.Rc:b.onclick=function(){var e=c.Ma(Ma.bb,!0);e&&(e.value="")};break;case Ma.bb:Na(b),b.addEventListener("keydown",function(e){Oa(d,e,!0)}),b.addEventListener("keypress",function(e){Oa(d,e)})}};function Pa(a,b){var c=Qa.Yb;a.R.ab[c]||(a.R.ab[c]=[]);a.R.ab[c].push(b)}
function Ra(a,b,c){if(b=a.v.apply(a,[b].concat(ba(c))))E(a,b),alert(b)}function Na(a){a.setAttribute("autocapitalize","off");a.setAttribute("autocomplete","off");a.setAttribute("autocorrect","off");a.setAttribute("spellcheck","false");a.value=""}l.error=function(a,b){Ra(this,"%s",this.v.apply(this,[a].concat(ba(b))))};l.Ma=function(a){return this.Y[a]};
function Sa(a){var b=window;if(b){do{for(var c=0;c<Ta.length;c++){var d=Ta[c];d=d?d+a[0].toUpperCase():a[0];d+=a.substr(1);if(d in b)return d}if(0>a.indexOf("screen"))break;a=a.replace("screen","Screen")}while(1)}return null}function Ua(a){var b=Va;return a.T.bindings&&a.T.bindings[b]}function Wa(a){if(a=a.Y[Xa])var b=a.textContent;return b}function Ya(a,b,c){a=+a||0;a<b&&(a=b);a>c&&(a=c);return a}
function F(a,b,c,d){a=a.T[b];void 0===a?a=c:(d&&void 0!==d[a]&&(a=d[a]),d=typeof c,typeof a!=d&&("boolean"==d?a=!!a:"number"==typeof c&&(a=+a)));return a}
function Za(a,b){var c=0,d=null,e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){4===e.readyState&&(d=e.responseText,200==e.status||!e.status&&d.length&&"file:"==(window?window.location.protocol:"file:")||(c=e.status||-1));b(a,d,e.readyState,c)};e.open("GET",a,!0);e.send()}
function $a(a){if(void 0===ab.pb){var b=!1;if(window)try{window.localStorage.setItem(ab.Ta,ab.Ta),b=window.localStorage.getItem(ab.Ta)==ab.Ta,window.localStorage.removeItem(ab.Ta)}catch(c){E(a,c.message),b=!1}ab.pb=b}return!!ab.pb}function bb(a,b){b=void 0===b?0:b;1<b&&b%2&&b--;b=b||a.ja;return-1==(b|1)||ya(a.R.ja,b)?!0:!1}
function cb(a){if(window){var b=window.navigator.userAgent;return"iOS"==a&&(!!b.match(/(iPod|iPhone|iPad)/)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function db(a){var b=null;if($a(a)){var c;if(window)try{(c=window.localStorage.getItem(a.W))&&(b=JSON.parse(c))}catch(d){E(a,d.message)}}return b}
function Oa(a,b,c){b=b||window.event;var d=b.which||b.keyCode;if(d){var e=a.R,f=b.target;if(c){a=!1;var g;c=f.value;var k=c.lastIndexOf("\n");d==G.Rb&&f.selectionStart<=k+1&&(a=!0);d==G.yd?(a=!0,0<e.ya&&(g=e.Ba[--e.ya])):d==G.Uc&&(a=!0,e.ya<e.Ba.length&&(g=e.Ba[++e.ya]||""));a&&b.preventDefault();void 0!=g&&(f.value=c.substr(0,k+1)+g)}else d=String.fromCharCode(d),g=f.value,c=g.lastIndexOf("\n"),f.selectionStart<=c&&f.setSelectionRange(g.length,g.length),b.stopPropagation(),"@"==d&&0<e.ya&&c+1==g.length&&
(f.value+=e.Ba[--e.ya],d="\r"),"\r"==d&&(b.preventDefault(),g=f.value+="\n",f.blur(),f.focus(),(b=eb(a,g.slice(g.lastIndexOf("\n",g.length-2)+1,-1)||""))&&E(a,b.replace(/\n$/,""),!1))}}function fb(a){return"true"==a||"on"==a?!0:"false"==a||"off"==a?!1:void 0}
function gb(a,b){if(void 0!=b){var c=a.R;try{if(b=b.trim())c.ya<c.Ba.length&&b==c.Ba[c.ya]?c.ya++:(c.Ba.push(b),c.ya=c.Ba.length);var d=b.split(" "),e=d[0],f=a.R.ab[Qa.Yb];switch(e[0]){case "m":if("?"==e[1]){var g="";hb.forEach(function(v){g+=v+"\n"});g&&(g="message commands:\n"+g);break}g="";var k=void 0;e=d[d.length-1].toLowerCase();var h=fb(e);void 0!=h&&d.pop();1>=d.length&&(void 0!=h&&(k=h,h=void 0),d[1]="all");"all"==d[1]&&(d=Object.keys(H));for(f=1;f<d.length;f++){e=d[f];var m=H[e];if(!m){g+=
"unrecognized message: "+e+"\n";break}void 0!=h&&ib(a,m,h);if(void 0==k||k==bb(a,m))g+=a.v("%8s: %b\n",e,bb(a,m))}bb(a,0x800000000000)&&(g+="all messages will be buffered until buffer is turned off\n");g||(g="no messages\n");break;case "?":g="",jb.forEach(function(v){g+=v+"\n"}),g&&(g="default commands:\n"+g);default:if(d.unshift(b),f)for(a=0;a<f.length;a++){var n=f[a](d);if(void 0!=n){g=g?g+n:n;break}}}}catch(v){g="error: "+v.message+"\n"}}return g}
function eb(a,b){b=void 0===b?"?":b;if(b){var c="";b=b.split(/(?:\n|;\s*)/);for(var d=0;d<b.length;d++)c+=gb(a,b[d])}return c}l.Fa=function(a,b){void 0==b&&(b=bb(this,0x800000000000));if(!b){var c=this.Ma(Ma.bb,!0);if(c)return c.value.substr(-a.length)!=a&&(c.value+=a,8192<c.value.length&&(c.value=c.value.substr(c.value.length-4096)),c.scrollTop=c.scrollHeight,cb("iOS")||c.setSelectionRange(c.value.length,c.value.length)),a.length}return Aa.prototype.Fa.call(this,a,b)};
l.s=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d=0;"number"==typeof a&&(d=a,a=c.shift());return bb(this,d)?Aa.prototype.s.call.apply(Aa.prototype.s,[this,a].concat(ba(c))):0};function kb(a,b){if($a(a)){b=JSON.stringify(b);try{window.localStorage.setItem(a.W,b)}catch(c){E(a,c.message)}}}function lb(a,b,c){(a=a.Y[b])&&a.textContent!=c&&(a.textContent=c)}
function ib(a,b,c){var d=!1;c?(c=a.R.ja,a.R.ja=(c|b)+(c/D|0|b/D|0)*D):(d=ya(a.R.ja,0x800000000000)&&ya(b,0x800000000000),c=a.R.ja,a.R.ja=(c&~b)+((c/D|0)&~(b/D|0))*D);d&&a.flush()}
var Ma={Rc:"clear",bb:"print"},jb=["\u2191 \u2193\t\trecall commands","@\t\trepeat last command","m?\t\tmessage commands"],hb=["m\t\tdisplay all messages","m on\t\tdisplay all active messages","m off\t\tdisplay all inactive messages","m all [on|off]\tturn all messages on or off","m ... [on|off]\tturn selected messages on or off"],H={all:0xffffffffffff,buffer:0x800000000000},Qa={Yb:"command"},mb={$b:13,ob:65,Qb:66,Wb:67,ac:68,E:69,bc:70,cc:71,dc:72,ec:73,fc:74,gc:75,hc:76,kc:77,lc:78,mc:79,nc:80,Q:81,
oc:82,qc:83,rc:84,sc:85,tc:86,vc:87,wc:88,xc:89,zb:90,Ab:97,cg:98,dg:99,d:100,e:101,hg:102,ig:103,kg:104,lg:105,mg:106,k:107,og:108,pg:109,n:110,qg:111,p:112,q:113,r:114,rg:115,t:116,ug:117,vg:118,wg:119,x:120,y:121,z:122},G={Rb:8,vd:9,cd:10,$b:13,sd:16,Sc:17,Pc:18,Rf:19,qb:20,Re:27,ud:32,Uf:33,Tf:34,Qe:35,mf:36,jc:37,yd:38,tb:39,jf:39,Uc:40,ff:44,Vf:44,nf:45,Pe:46,hf:46,lf:47,ZERO:48,ONE:49,xd:50,wd:51,bd:52,ad:53,td:54,rd:55,Vc:56,fd:57,$c:59,Zc:61,ob:65,Qb:66,Wb:67,ac:68,E:69,bc:70,cc:71,dc:72,
ec:73,fc:74,gc:75,hc:76,kc:77,lc:78,mc:79,nc:80,Q:81,oc:82,qc:83,rc:84,sc:85,tc:86,vc:87,wc:88,xc:89,zb:90,Xb:91,gf:91,ef:92,Yf:93,kf:93,sf:96,Jf:96,df:96,tf:97,Hf:97,uf:98,Gf:98,vf:99,Mf:99,wf:100,Kf:100,xf:101,Df:101,yf:102,Of:102,zf:103,If:103,Af:104,Qf:104,Bf:105,Nf:105,Lf:106,Cf:107,Pf:109,Ef:110,Ff:111,Se:112,We:113,Xe:114,Ye:115,Ze:116,$e:117,af:118,bf:119,cf:120,Te:121,Ue:122,Ve:123,gd:144,pd:145,Yc:173,qd:186,Wc:187,Oe:188,Tc:189,Sf:190,$f:191,Me:192,pf:219,Ne:220,Xf:221,Wf:222,Xc:224,qf:901,
uc:1E3},nb={},ob=(nb[G.$c]=G.qd,nb[G.Zc]=G.Wc,nb[G.Yc]=G.Tc,nb[G.Xc]=G.Xb,nb),pb={jc:1,tb:2,rf:3},I={},qb=(I[G.Rb]="\b",I[G.vd]="\t",I[G.cd]="\n",I[G.$b]="\r",I[G.ud]=" ",I[G.ZERO]="0",I[G.ONE]="1",I[G.xd]="2",I[G.wd]="3",I[G.bd]="4",I[G.ad]="5",I[G.td]="6",I[G.rd]="7",I[G.Vc]="8",I[G.fd]="9",I[G.ob]="A",I[G.Qb]="B",I[G.Wb]="C",I[G.ac]="D",I[G.E]="E",I[G.bc]="F",I[G.cc]="G",I[G.dc]="H",I[G.ec]="I",I[G.fc]="J",I[G.gc]="K",I[G.hc]="L",I[G.kc]="M",I[G.lc]="N",I[G.mc]="O",I[G.nc]="P",I[G.Q]="Q",I[G.oc]=
"R",I[G.qc]="S",I[G.rc]="T",I[G.sc]="U",I[G.tc]="V",I[G.vc]="W",I[G.wc]="X",I[G.xc]="Y",I[G.zb]="Z",I[G.jc]="Left",I[G.tb]="Right",I),Ta=["","moz","ms","webkit"],rb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",
cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",
floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",
lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",
mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",
sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ab={pb:void 0,Ta:"PCjs.localStorage"};x.WebIO=Ka;
function J(a,b,c,d){Ka.call(this,a==b);this.W=a;this.N=b;K[this.W]||(K[this.W]={});K[this.W][this.N]&&this.s("warning: machine configuration contains multiple '%s' devices\n",this.N);K[this.W][this.N]=this;this.id=this.W+"."+this.N;sb.push(this);this.R=tb(this,this.W);this.ready=!0;ub(this,c,d);this.Ca={};this.yc=[]}u(J,Ka);l=J.prototype;l.Bb=function(){};l.Cb=function(){};
function ub(a,b,c){b=void 0===b?{}:b;c=void 0===c?[]:c;c=b.overrides||c;if(c.length){var d,e=La;if(!e){e={};if(window){d||(d=window.location.search.substr(1));for(var f,g=/\+/g,k=/([^&=]+)=?([^&]*)/g;f=k.exec(d);)e[decodeURIComponent(f[1].replace(g," ")).trim()]=decodeURIComponent(f[2].replace(g," ")).trim()}La=e}d=e;for(var h in d)0<=c.indexOf(h)&&(f=d[h],f.match(/^[+-]?[0-9.]+$/)?e=Number.parseInt(f,10):"true"==f?e=!0:"false"==f?e=!1:(e=f,f='"'+f+'"'),b[h]=e,E(a,"overriding "+a.N+" property '"+
h+"' with "+f))}a.T=b;c=b.bindings;c=void 0===c?{}:c;a.T.Y||(a.T.Y=c);(h=Array.isArray(c))?0>c.indexOf("container")&&c.push("container"):c.container||(c.container=a.N);for(var m in c){e=c[m];if(h)m=e;else if(e.match(/^[0-9]+$/)){d=+e;a.Y[m]=[];do{e=m+d++;e=document.getElementById(e);if(!e)break;a.Y[m].push(e)}while(1);continue}if(d=document.getElementById(e))a.Y[m]=d,a.Ga(m,d)}b=void 0===b?{}:b;a.version=2;if(a.version){m="";var n;a.W!=a.N&&(n=tb(a,a.W).version)&&n!=a.version&&(m="Machine");m||(n=
b.version)&&n>a.version&&(m="Config");m&&(n=a.v("%s Device version (%3.2f) incompatible with %s version (%3.2f)",b.eg,a.version,m,n),a.error("%s\n\nClearing your browser's cache may resolve the issue.",n))}}function M(a,b,c,d){a.Ca[b]={get:c.bind(a),set:d?d.bind(a):null}}function vb(a,b,c){a.Ca[b]&&(a.Ca[c]=a.Ca[b])}
function wb(a,b){var c;try{var d=K[a.W];if(d)for(c in d){var e=d[c];if("Machine"!=e.T["class"]&&!b(e))return!1}return!0}catch(f){a.s("error while enumerating device '%s': %s\n",c,f.message)}return!1}l.Ma=function(a,b){b=void 0===b?!1:b;if(a){var c=Ka.prototype.Ma.call(this,a,b);if(void 0===c&&b){b=K[this.W];for(var d in b)if(c=b[d].Y[a])break;c||(c=null);this.Y[a]=c}}return c};
function tb(a,b,c){var d=b,e=a.W,f=e.indexOf(".");0<f&&(e=e.substr(0,f),b=b.substr(f+1));b=(f=K[e])&&f[b]||null;if(!b){for(f=0;f<sb.length;f++)if(sb[f].id===d){b=sb[f];break}if(!b&&(void 0===c||c))throw Error(a.v("unable to find device with ID '%s'",d));}return b}function N(a,b,c){var d=null,e=K[a.W];if(e)for(var f in e)if(e[f].T["class"]==b){if(d){d=null;break}d=e[f]}if(!d&&(void 0===c||c))throw Error(a.v("unable to find device with class '%s'",b));return d}
function xb(a,b){var c=tb(a,a.W);return c&&c.T&&c.T[b]||a.T[b]}function yb(a,b){return(a=a.Ca[b])&&a.get()}function zb(a){return a==a.R&&a.ready?wb(a,function(b){return zb(b)}):a.ready}function Ab(a,b){b=void 0===b?a.ready:b;a.ready=b;if(zb(a)){for(;b=a.yc.pop();)b();a!=a.R&&Ab(a.R)}}function Bb(a,b){if(zb(a))return b(),!0;a.yc.push(b);return!1}l.Kc=function(){};
l.s=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return"number"==typeof a&&bb(this,a)&&(void 0===this.V&&(this.V=N(this,"Debugger",!1)),this.V&&this.V.Kc(a),this.R.ja&Cb&&(void 0===this.m&&(this.m=N(this,"CPU")),this.m))?(a=c.shift(),Ka.prototype.s.call(this,"%#06x: %s.%s\n",this.m.Hb,this.N,this.v.apply(this,[a].concat(ba(c))).trim())):Ka.prototype.s.call.apply(Ka.prototype.s,[this,a].concat(ba(c)))};function Db(a,b){(a=K[a.W])&&delete a[b]}
function Eb(a,b,c){(a=a.Ca[b])&&a.set&&a.set(c)}var K={},sb=[],Cb=1;H.addr=Cb;H.bus=2;H.fault=4;H.memory=8;H.ports=16;H.chips=32;H.kbd=64;H.serial=128;H.misc=256;H.cpu=512;H.mmu=1024;H["int"]=2048;H.trap=4096;H.video=8192;H.monitor=16384;H.screen=32768;H.time=65536;H.timer=131072;H.event=262144;H.input=524288;H.key=1048576;H.mouse=2097152;H.touch=4194304;H.warn=8388608;H.halt=16777216;
window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines=K),window.PCjs.Components||(window.PCjs.Components=sb));x.Device=J;
function Fb(a,b,c){J.call(this,a,b,c);this.ja=524288;this.K=this.u=null;this.time=N(this,"Time");this.R=N(this,"Machine");this.U=F(this,"drag",!1);this.J=F(this,"scroll",!1);this.S=F(this,"hexagonal",!1);this.g=F(this,"releaseDelay",0,void 0);this.h=!1;a=this.T.map;this.b=this.f=null;if(a)if(a.length)this.b=a;else{this.f={};b=Object.keys(a);for(var d=0;d<b.length;d++){var e=[],f=b[d],g=a[f];"string"==typeof g?g=[g]:void 0==g.length&&(e=g.grid,g=g.keys,"string"==typeof g&&(g=[g]));this.f[f]={keys:g,
jg:e,state:0}}}this.o=[];this.w=[];this.c=this.I=null;(a=this.Y[Gb])&&Hb(this,a,this.Ma(c.focusBinding,!0),this.T.location);this.la()}u(Fb,J);function Ib(a,b){a.u=b}function Jb(a,b,c){for(var d=0;d<a.o.length;d++){var e=a.o[d];e.id===b&&e.eb(b,c)}}
function Hb(a,b,c,d){d=void 0===d?[]:d;if(d.length||a.b||a.f){var e={};e.Ke=d[0]||0;e.Le=d[1]||0;e.Xa=d[2]||b.clientWidth;e.cb=d[3]||b.clientHeight;e.fb=d[4]||1;e.lb=d[5]||1;e.Ld=d[6]||b.naturalWidth||e.Xa;e.Nd=d[7]||b.naturalHeight||e.cb;e.Nc=d[8]||0;e.Oc=d[9]||0;e.Kd=d[10]||0;e.Md=d[11]||0;a.b?(e.ib=a.b.length,e.Ya=a.b[0].length):(e.Ya=e.fb,e.ib=e.lb,e.fb=e.lb=0);e.Ec=e.Xa/(e.Ya+e.Ya*e.fb)|0;e.Fc=e.cb/(e.ib+e.ib*e.lb)|0;e.Jd=e.Ec*e.fb|0;e.Gc=e.Fc*e.lb|0;e.$a=e.nb=-1;Kb(a,b,e);Lb(a,b,e);a.time&&
a.g&&(a.M=Mb(a.time,"timerInputRelease",function(){0>e.$a&&0>e.nb&&Nb(a,-1,-1)}))}if(a.b||a.f)a.time&&a.g&&(a.X=Mb(a.time,"timerKeyRelease",function(){Ob(a)})),a.i=0,a.l="",a.j=[],d=b,c&&(d=c,a.c||"BUTTON"!=c.nodeName||(d=document,a.c=c,Pb(a,b),a.I=b)),Pb(a,d),a.c||(a.c=d)}function Qb(a){a.g?Rb(a.time,a.X,a.g):Ob(a)}
function Pb(a,b){function c(e,f,g){var k=document.activeElement;a.s(1310720,"%s.onKey%s(%d): %5.2f (%s)\n",k.id||k.nodeName,e,f,Date.now()/1E3%60,void 0!=g?g?"used":"unused":"ignored")}function d(e,f){e=document.activeElement;return a.c&&e!=a.c&&e!=a.I?null:f||window.event}b.addEventListener("keydown",function(e){if(e=d(this,e)){var f=e.which||e.keyCode,g=Sb(a,f,!0,e);c("Down",f,g);g&&e.preventDefault()}});b.addEventListener("keypress",function(e){if(e=d(this,e)){var f=e.which||e.charCode,g=Sb(a,
f);c("Press",f,g);g&&e.preventDefault()}});b.addEventListener("keyup",function(e){if(e=d(this,e)){var f=e.which||e.keyCode,g=Sb(a,f,!1,e);c("Up",f);g&&e.preventDefault();"TEXTAREA"==b.nodeName&&(b.value="")}})}
function Kb(a,b,c){b.addEventListener("mousedown",function(d){if(!a.h){var e=a.c;if(e){var f=window.scrollX,g=window.scrollY;e.focus();window.scrollTo(f,g)}d.button||Tb(a,b,Ub,d,c)}});b.addEventListener("mousemove",function(d){a.h||Tb(a,b,Vb,d,c)});b.addEventListener("mouseup",function(d){a.h||d.button||Tb(a,b,Wb,d,c)});b.addEventListener("mouseout",function(d){a.h||(0>c.$a?Tb(a,b,Vb,d,c):Tb(a,b,Wb,d,c))})}
function Lb(a,b,c){b.addEventListener("touchstart",function(d){a.J&&(a.h=!0);Tb(a,b,Ub,d,c)});b.addEventListener("touchmove",function(d){Tb(a,b,Vb,d,c)});b.addEventListener("touchend",function(d){Tb(a,b,Wb,d,c)})}
function Sb(a,b,c,d){if(void 0!=c){var e=ob[b]||b;var f=qb[b];var g=Xb[e];d=d&&d.location==pb.tb;g&Yb&&d&&(g>>=1);g&&(g&Zb&&(c=!(a.a&g)),a.a=c?a.a|g:a.a&~g,Jb(a,e,c))}else f=String.fromCharCode(b).toUpperCase(),b>=mb.ob&&b<=mb.zb?a.a&($b|ac)||(a.a|=ac,Jb(a,G.qb,!0)):b>=mb.Ab&&b<=mb.z&&a.a&ac&&(a.a&=~ac,Jb(a,G.qb,!1));if(a.b){if(void 0!=c)return!1;for(e=0;e<a.b.length;e++)for(g=a.b[e],d=0;d<g.length;d++)if(0<=g[d].split("|").indexOf(f))return a.i?16>a.j.length&&a.j.push(b):(a.i=1,a.l=f,Nb(a,d,e),Jb(a,
f,!0),Qb(a)),!0}if(a.f){if(void 0==c)return!0;b=Object.keys(a.f);for(e=0;e<b.length;e++)if(g=b[e],0<=a.f[g].keys.indexOf(f))return Jb(a,g,c),a.f[g].state=c?1:0,!0}return!1}function Ob(a){1==a.i?(a.i++,Jb(a,a.l,!1),a.l="",Nb(a,-1,-1),Qb(a)):(a.i=0,a.j.length&&Sb(a,a.j.shift()))}Fb.prototype.la=function(){this.a=0;this.H=this.L=-1};
function Tb(a,b,c,d,e){var f=-1,g=-1,k=!1,h=-1,m=-1;if(c<Wb){d=d||window.event;d.targetTouches&&d.targetTouches.length?(h=d.targetTouches[0].clientX,m=d.targetTouches[0].clientY,k=1<d.targetTouches.length):(h=d.clientX,m=d.clientY);var n=d.target.getBoundingClientRect();h-=n.left;m-=n.top;h=e.Ld/b.offsetWidth*h|0;m=e.Nd/b.offsetHeight*m|0;var v=h-e.Ke;var p=m-e.Le;var q=n=!1;var w=h>=e.Nc&&h<e.Nc+e.Kd&&m>=e.Oc&&m<e.Oc+e.Md;if(0<=v&&v<e.Xa&&0<=p+e.Gc||w)if(k||a.J||d.preventDefault(),0<=v&&v<e.Xa&&
0<=p&&p<e.cb){q=!0;d=e.Xa/e.Ya|0;var t=e.cb/e.ib|0,z=v/d|0,r=p/t|0;!a.S||r&1||(v-=d>>1,z=v/d|0,z==e.Ya-1&&(v=-1));t=r*t+(e.Gc>>1);v-=z*d+(e.Jd>>1);p-=t;0<=v&&v<e.Ec&&0<=p&&p<e.Fc&&(f=z,g=r,n=!0)}}v=v||0;p=p||0;d=b.offsetWidth;b=b.offsetHeight;if(c==Ub||c==Wb)for(z=0;z<a.w.length;z++)r=a.w[z],c==Wb?r.eb(r.id,!1):(t=p/(b/r.gg|0)|0,(v/(d/r.fg|0)|0)==r.xg&&t==r.yg&&r.eb(r.id,!0));if(!k)if(c==Ub)e.$a=h,e.nb=m,q?(Nb(a,f,g),n&&a.g&&Rb(a.time,a.M,a.g,!0)):w&&a.R.ka();else if(c==Vb)0<=e.$a&&0<=e.nb&&a.U?Nb(a,
f,g):a.u&&a.u(f,g);else if(c==Wb){if(c=a.g)c=a.time,f=a.M,c=c.a&&0<f&&f<=c.b.length?0<=c.b[f-1].ua:!1;c||Nb(a,-1,-1);e.$a=e.nb=-1}else E(a,"unrecognized action: "+c)}function Nb(a,b,c){if(b!=a.H||c!=a.L)a.H=b,a.L=c,a.K&&a.K(b,c)}var Ub=1,Vb=2,Wb=3,Gb="surface",$b=3,Yb=170,ac=512,Zb=3584,bc={},Xb=(bc[G.sd]=2,bc[G.Sc]=8,bc[G.Pc]=32,bc[G.Xb]=128,bc[G.qb]=ac,bc[G.gd]=1024,bc[G.pd]=2048,bc);x.Input=Fb;
function cc(a,b,c){J.call(this,a,b,c,["color","backgroundColor"]);a=this.Y[dc];if(!a)throw Error("LED "+this.T.Y[dc]+" binding for '"+dc+"' missing");b=document.createElement("canvas");if(!b||!b.getContext)throw a.innerHTML="LED device requires HTML5 canvas support",Error("LED device requires HTML5 canvas support");this.wa=a;this.type=Ya(F(this,"type",ec,fc),gc,hc);this.f=ic[this.type][0];this.j=ic[this.type][1];this.width=F(this,"width",this.f,void 0);this.height=F(this,"height",this.j,void 0);this.g=
F(this,"cols",1,void 0);this.w=this.g+F(this,"colsExtra",0,void 0);this.U=F(this,"rows",1,void 0);this.J=this.U+F(this,"rowsExtra",0,void 0);this.$=this.width*this.g;this.L=this.height*this.U;this.i=jc("black",0);this.c=kc(this.T.color)||this.i;this.ha=jc(this.c,1,.25);this.ga=jc(this.c,1,2);this.h=kc(this.T.backgroundColor);this.na=F(this,"fixed",!1);this.na||(b.style.width="100%",b.style.height="auto");this.fa=F(this,"hexagonal",!1);this.oa=F(this,"highlight",!0);this.K=F(this,"persistent",this.type<
hc);b.setAttribute("width",this.$.toString());b.setAttribute("height",this.L.toString());b.style.backgroundColor=this.i;a.appendChild(b);this.da=b.getContext("2d");if(this.l=document.createElement("canvas"))this.l.width=this.X=this.f*this.g,this.l.height=this.u=this.j*this.U,this.b=this.l.getContext("2d");this.pa=(this.J+1)*this.w*4;this.a=Array(this.pa);this.qa=this.g<this.w?4*(this.w-this.g):0;this.I=this.H=!1;this.o=this.S=0;this.M=-1;var d=this;this.time=N(this,"Time");lc(this.time,function(e){mc(d,
!1,e)});nc(d)}u(cc,J);function nc(a){for(var b=a.a,c=0;c<b.length;c+=4){var d=a,e=b,f=c;e[f]=d.type<hc?oc:" ";e[f+1]=d.c==d.i?null:d.c;e[f+2]=0;e[f+3]=pc}a.I=a.H=!0;mc(a,!0)}function qc(a){a.h?(a.b.fillStyle=a.h,a.b.fillRect(0,0,a.X,a.u)):a.b.clearRect(0,0,a.X,a.u)}
function mc(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(a.I||b){if(a.type<hc){var d=0;if(!a.K||b)qc(a);else if(a.o){d=a.g-a.o;var e=a.f*d;a.b.drawImage(a.l,a.f*a.o,0,e,a.u,0,0,e,a.u)}for(var f=e=0;f<a.J;f++){for(var g=0;g<a.g;g++){var k=a.a[e],h=a.a[e+1]||a.i,m=a.oa&&e==a.M;if(a.a[e+3]&pc||m||b){if(g>=d)a:{var n=a,v=k;k=h;var p=g;h=f;var q=m;p=void 0===p?0:p;h=void 0===h?0:h;q=void 0===q?!1:q;var w=0;if(n.fa&&!(h&1)&&(w=n.f>>1,p==n.g-1))break a;if(k&&k!=n.c){q=q?jc(k,1,2):k;var t=jc(k,1,.25)}else q=
q?n.ga:n.c,t=n.ha;k=!1;v=v?q:t;q==n.i&&(v=n.h,k=!0);q=p*n.f+w;t=h*n.j;n.K&&(p=p*n.f+w,h*=n.j,n.h?(n.b.fillStyle=n.h,n.b.fillRect(p,h,n.f,n.j)):n.b.clearRect(p,h,n.f,n.j));n.b.fillStyle=v;h=rc[n.type];3==h.length?(n.b.beginPath(),n.b.arc(q+h[0],t+h[1],h[2],0,2*Math.PI),k?(n.b.globalCompositeOperation="destination-out",n.b.fill(),n.b.globalCompositeOperation="source-over"):n.b.fill()):n.b.fillRect(q+h[0],t+h[1],h[2],h[3])}a.a[e+3]=m?a.a[e+3]|pc:a.a[e+3]&~pc}e+=4}e+=a.qa}a.o=0}else{b="";for(d=0;d<a.a.length;d+=
4)b+=a.a[d]||" ",a.a[d+3]&sc&&(b+=".");qc(a);for(f=e=d=0;d<b.length;d++){h=b[d];"."==h&&e&&e--;g=a;m=e;n=f;m=void 0===m?0:m;n=void 0===n?0:n;if(h=tc[h])for(k=0;k<h.length;k++)if(p=g,w=uc[h[k]]){v=(void 0===m?0:m)*p.f;q=(void 0===n?0:n)*p.j;p.b.fillStyle=p.c;p.b.beginPath();if(3==w.length)p.b.arc(v+w[0],q+w[1],w[2],0,2*Math.PI);else for(t=0;t<w.length;t+=2)t?p.b.lineTo(v+w[t],q+w[t+1]):p.b.moveTo(v+w[t],q+w[t+1]);p.b.closePath();p.b.fill()}if(++e==a.g&&(e=0,++f==a.J))break}}a.da.globalCompositeOperation=
a.h&&a.c!=a.i?"source-over":"copy";a.da.drawImage(a.l,0,0,a.X,a.u,0,0,a.$,a.L);a.I=!1;a.M=-1}else a.K||a.H||(!c||!a.S||c-a.S>=(1E3/60|0))&&nc(a);a.H=!1;c&&(a.S=c)}function kc(a){return(a=a||void 0)&&rb[a]||a}
function jc(a,b,c){b=void 0===b?1:b;c=void 0===c?1:c;if(a){var d=[];a=rb[a]||a;var e=a;var f=16;var g=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);g||(f=10,g=e.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+|)\)$/i));if(g){for(e=1;e<g.length;e++)d[e-1]=Number.parseInt(g[e],f);d.length=e-1;f=!0}else f=!1;if(f){a="rgba(";for(f=0;3>f;f++)g=Math.round(d[f]*c),g=0>g?0:255<g?255:g,a+=g+",";a+=(f<d.length?d[f]:b)+")"}}return a}
cc.prototype.ra=function(a){var b=a.shift(),c=a.shift();a=a.shift();if(b==this.c&&c==this.h&&a&&a.length==this.a.length){this.a=a;for(b=0;b<=this.a.length-4;b+=4)this.a[b+1]==this.i&&(this.a[b+1]=null);mc(this,!0);return!0}return!1};cc.prototype.sa=function(a){this.a&&(a.push(this.c),a.push(this.h),a.push(this.a))};
var gc=0,ec=1,hc=3,fc={small:gc,round:ec,square:2,digit:hc},dc="container",oc=0,sc=1,pc=128,vc={},rc=(vc[gc]=[4,4,4],vc[ec]=[16,16,14],vc[2]=[2,2,28,28],vc),ic=[[8,8],[32,32],[32,32],[96,128]],uc={A:[30,8,79,8,67,19,37,19],B:[83,10,77,52,67,46,70,22],C:[77,59,71,100,61,89,64,64],D:[28,91,58,91,69,104,15,104],E:[18,59,28,64,25,88,12,100],F:[24,10,34,21,31,47,18,52],G:[24,56,34,50,60,50,71,56,61,61,33,61],P:[80,102,8]},tc={" ":[],0:"ABCDEF".split(""),1:["B","C"],2:["A","B","D","E","G"],3:["A","B","C",
"D","G"],4:["B","C","F","G"],5:["A","C","D","F","G"],6:"ACDEFG".split(""),7:["A","B","C"],8:"ABCDEFG".split(""),9:"ABCDFG".split(""),A:"ABCEFG".split(""),B:["C","D","E","F","G"],C:["A","D","E","F"],D:["B","C","D","E","G"],E:["A","D","E","F","G"],F:["A","E","F","G"],"-":["G"],".":["P"]};x.LED=cc;
function wc(a,b,c){J.call(this,a,b,c);this.ha=F(this,"cyclesMinimum",1E5,void 0);this.qa=F(this,"cyclesMaximum",1E9,void 0);this.X=Ya(F(this,"cyclesPerSecond",1E6,void 0),this.ha,this.qa);this.K=1E3/60;this.wa=F(this,"updatesPerSecond",2,void 0)||2;this.Ra=1E3/this.wa;this.pa=0;this.Sa=F(this,"timeLock",!0);this.ga=this.w=0;this.fa=this.g=1;this.oa=this.i=this.X/1E4/100;this.$=[];this.u=[];this.b=[];this.S=[];this.na=this.a=this.J=this.l=!1;this.o=this.f=0;a=Sa("requestAnimationFrame");if(!a){a="setTimeout";
var d=this.K}this.Ea=window[a].bind(window,this.oe.bind(this),d);this.Qa=window[Sa("cancelAnimationFrame")||"clearTimeout"].bind(window);this.M=this.L=this.h=this.c=this.U=0;xc(this)||yc(this,this.fa)}u(wc,J);function lc(a,b){a.$.push(b)}l=wc.prototype;
l.Ga=function(a,b){var c=this;switch(a){case zc:b.onclick=function(){c.gb()&&(c.a?Ac(c):c.start())};break;case Bc:b.onclick=function(){yc(c,c.g<<1);Cc(c,Dc(c.i))};break;case Ec:b.onclick=function(){Fc(c)};break;case Gc:b.addEventListener("mousedown",function(){c.l=!0}),b.addEventListener("mouseup",function(){xc(c);c.l=!1}),b.addEventListener("mousemove",function(){c.l&&xc(c)}),b.addEventListener("change",function(){c.l=!0;xc(c);c.l=!1})}J.prototype.Ga.call(this,a,b)};
function Mb(a,b,c){var d=void 0===d?-1:d;var e=a.b.length+1;a.b.push({id:b,Cd:c,hb:d,ua:-1});0<=d&&Rb(a,e,d);return e}
function Hc(a,b,c,d){var e=0,f=a.i,g=1E6*f;b&&c&&(f=b/(10*c)/100,a.s(65536,"calcSpeed(%d cycles, %5.3fms): %5.3fMhz\n",b,c,f),d>a.K&&(1<a.g&&(a.g>>=1,a.s(8388608,"warning: frame time (%5.3fms) exceeded maximum (%5.3fms), target multiplier now %d\n",d,a.K,a.g)),e=d));a.w=f;a.ga=f/a.oa;b=a.ga/a.g;a.U=g/b/60+1E-8;a.s(65536,"nCyclesDepositPerFrame(%5.3f) = nCyclesPerSecond(%d) / nDivisor(%5.3f) / nFramesPerSecond(%d)\n",a.U,g,b,60);return e}
function Ic(a,b){a.L=a.h=b;if(!a.u.length)return a.h=0,a.L;for(var c=0;0<a.h;){if(c<a.u.length){var d=a.u[c++];b=d.qe.call(d,b)||1}else c=b=0;a.h-=b}return a.L-a.h}function Jc(a,b){b=void 0===b?a.L-a.h:b;if(!a.a){if(a.c)for(var c=0;c<a.u.length;c++){var d=a.u[c];d.re.call(d)}a.c=b}a.c-=b;1>a.c&&(a.J=!0);a.M+=b;a.L=a.h=0;a.a||(a.M=0);return b}
function Kc(a,b){b=void 0===b?0:b;if(b){var c=b;a.c+=b}else for(c=a.c,1>c&&(c=a.c+=a.U),0>c&&(a.s(8388608,"warning: cycle count dropped below zero: %f\n",c),c=a.c=0),c|=0,b=a.b.length;0<b;b--){var d=a.b[b-1];!(0>d.ua)&&c>d.ua&&(c=d.ua)}return c}function Dc(a){1<=a?a=a.toFixed(2)+"Mhz":(a=Math.round(1E6*a),a=999>=a?a+"Hz":Math.ceil(a/1E3)+"Khz");return a}function Lc(a){a.s(65536,"getSpeedCurrent(%5.3fhz)\n",1E6*a.w);return a.a&&a.w?Dc(a.w):"Stopped"}
l.gb=function(){return this.na?!0:(E(this,"not powered"),!1)};function Mc(a,b){if(1<=b)for(var c=a.b.length;0<c;c--){var d=a.b[c-1];0>d.ua||(d.ua-=b,0>=d.ua&&(d.ua=-1,d.Cd(),0<=d.hb&&Rb(a,c,d.hb)))}}l.ka=function(a){this.na=a;void 0===this.V&&(this.V=N(this,"Debugger",!1))&&this.V.Bb(this,"time","dump time state",this.Rd)};function Fc(a,b){a.gb()&&(a.a?E(a,"already running"):a.f?Ac(a):Nc(a,b))}
l.oe=function(a){a=void 0===a?Date.now():a;this.o=0;if(this.a){var b=Date.now();if(this.I){var c=b-this.H-this.K;c>this.K&&(this.j+=c,this.s(8388608,"warning: browser throttling detected, compensating by %5.3fms\n",c))}this.H=b;this.j||(this.j=b);this.da=0;try{this.J=!1;do Mc(this,Jc(this,Ic(this,Kc(this))));while(this.a&&!this.J)}catch(d){E(this,d.message),Ac(this)}this.I=Date.now();this.da&&(this.j+=this.da,this.H+=this.da);this.H+=Hc(this,this.M,this.I-this.j,this.I-this.H);this.I-this.pa>=this.Ra&&
this.update();for(b=0;b<this.$.length;b++)this.$[b](a);this.o=this.Ea()}};function yc(a,b){if(void 0!==b){if(1>b||!a.l&&0<a.w&&a.w<.9*a.i)b=a.fa;a.g=b;b=a.oa*a.g;a.i!=b&&(a.i=b,Cc(a,Dc(a.i)))}a.j=a.I=0;a.c=a.M=0;Hc(a);for(b=a.b.length;0<b;b--){var c=a.b[b-1];0<=c.hb&&Rb(a,b,c.hb,!0)}}function xc(a){var b=a.Y[Gc];return b?(yc(a,Math.floor((b.value-b.min)/(b.max-b.min)*(a.qa-a.ha)+a.ha)/a.X|0),!0):!1}
function Rb(a,b,c,d){0<b&&b<=a.b.length&&(b=a.b[b-1],d||0>b.ua)&&(c=Math.ceil(a.X*(a.Sa?a.fa:a.ga)/1E3*(void 0===c?1E3:c)),a.a&&(c+=Jc(a)),b.ua=c)}l.start=function(){if(this.a||this.f)return!1;this.a=!0;this.j=this.I=0;this.update(!0);this.o=this.Ea();return!0};function Nc(a,b){b=void 0===b?1:b;a.a||(b&&!a.f&&(a.f=b),a.f&&(a.f--,Mc(a,Jc(a,Ic(a,Kc(a,1)))),a.update(!1),a.f&&setTimeout(function(){Nc(a,0)},0)))}
function Ac(a){return a.a?(a.a=!1,Jc(a),a.o&&(a.Qa(a.o),a.o=0),a.update(!0),!0):a.f?(a.f=0,a.update(!0),!0):!1}l.update=function(a){a&&E(this,this.a?"started with "+Dc(this.i)+" target":"stopped");lb(this,zc,this.a?"Halt":"Run");lb(this,Ec,this.f?"Stop":"Step");this.l||Cc(this,Lc(this));for(var b=0;b<this.S.length;b++){var c=this.S[b];c.Lc.call(c,void 0!=a)}this.pa=Date.now();this.J=!0};function Cc(a,b){lb(a,Oc,b);lb(a,Bc,b)}
l.Rd=function(){var a=this.v("nCyclesPerSecond: %f\n",this.X);a+=this.v("nUpdatesPerSecond: %f\n",this.wa);a+=this.v("nTargetMultiplier: %f\n",this.g);return a+=this.v("nCyclesDepositPerFrame: %f\n",this.U)};var zc="run",Bc="setSpeed",Oc="speed",Ec="step",Gc="throttle";x.Time=wc;
function Pc(a,b,c){J.call(this,a,b,c);this.type="static"==c.type?Qc:Rc;this.aa=c.addrWidth||16;this.i=Math.pow(2,this.aa);this.h=this.i-1|0;this.f=c.blockSize||(16<this.aa?4096:1024);this.f>this.i&&(this.f=this.i);this.w=this.i/this.f|0;this.b=Math.log2(this.f)|0;this.c=(1<<this.b)-1;this.g=c.dataWidth||8;this.o=Math.pow(2,this.g)-1;this.j=!1!==c.littleEndian;this.a=Array(this.w);this.l=0;this.u=null;a=new O(a,b+"[NONE]",{size:this.f,bus:this.N});for(b=0;b<this.i;b+=this.f)Sc(this,b,this.f,Q.NONE,
a);Tc(this,this.type)}u(Pc,J);function Sc(a,b,c,d,e){for(var f=b>>>a.b;0<c&&f<a.a.length;){var g=f*a.f,k=a.f-(b-g);k>c&&(k=c);var h=a.a[f];if(b!=g||k!=a.f||h&&h.type!=Q.NONE)break;h=a.N+"["+y(a,b,16,a.aa)+"]";b=e?e.size==a.f?e:new O(a.W,h,{type:d,ea:b,size:k,bus:a.N}):new O(a.W,h,{type:d,ea:b,size:k,bus:a.N});a.a[f]=b;b=g+a.f;c-=k;f++}}function Uc(a,b){for(var c=Q.od,d=0,e=0;e<a.a.length;e++){var f=a.a[e];f&&f.type&c&&(b(f),d++)}return d}
function Vc(a,b,c){if(!(b&a.c)){b>>>=a.b;var d=a.a[b];a.a[b]=c}return d}function Wc(a,b,c){a.V&&a.V.s(4,"bus fault (%d) at %n\n",c,b);a.u&&a.u(b,c)}l=Pc.prototype;l.ka=function(){void 0===this.V&&(this.V=N(this,"Debugger",!1))};l.la=function(){};l.Fb=function(a){return a&&this.ra(a)?!0:!1};l.Za=function(a){this.sa(a)};l.ra=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if((this.type==Rc||c.type&Q.La)&&c.ra){var d=a.shift();if(!c.ra(d))return!1}}return!0};
l.sa=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if((this.type==Rc||c.type&Q.La)&&c.sa){var d=[];c.sa(d);a.push(d)}}};l.Gb=function(a){return this.a[a>>>this.b].Gb(a&this.c)};l.Qc=function(a){return this.a[a>>>this.b].va(a&this.c)};l.Mb=function(a,b){this.a[a>>>this.b].Mb(a&this.c,b)};l.za=function(a,b){this.a[a>>>this.b].ta(a&this.c,b)};l.Sb=function(a){return a&1?this.va(a+1&this.h)|this.va(a)<<this.g:this.a[a>>>this.b].ia(a&this.c)};
l.Tb=function(a){return a&1?this.va(a)|this.va(a+1&this.h)<<this.g:this.a[a>>>this.b].ia(a&this.c)};l.Xd=function(a){return(a&this.c)==this.c?this.j?this.Tb(a):this.Sb(a):this.a[a>>>this.b].ia(a&this.c)};l.Ub=function(a,b){a&1?(this.ta(a,b>>this.g),this.ta(a+1&this.h,b&this.o)):this.a[a>>>this.b].ca(a&this.c,b)};l.Vb=function(a,b){a&1?(this.ta(a,b&this.o),this.ta(a+1&this.h,b>>this.g)):this.a[a>>>this.b].ca(a&this.c,b)};
l.te=function(a,b){(a&this.c)==this.c?this.j?this.Vb(a,b):this.Ub(a,b):this.a[a>>>this.b].ca(a&this.c,b)};function Tc(a,b){var c=a.l;a.l+=b;c&&a.l||(a.va=a.Qc,a.ta=a.za,a.type==Rc?(a.ia=a.Xd,a.ca=a.te):a.j?(a.ia=a.Tb,a.ca=a.Vb):(a.ia=a.Sb,a.ca=a.Ub))}l.jb=function(a,b){return this.a[a>>>this.b].jb(b)?(Tc(this,1),!0):!1};l.Jb=function(a,b){return this.a[a>>>this.b].Jb(b)?(Tc(this,1),!0):!1};l.kb=function(a,b){return this.a[a>>>this.b].kb(b)?(Tc(this,-1),!0):!1};
l.Lb=function(a,b){return this.a[a>>>this.b].Lb(b)?(Tc(this,-1),!0):!1};var Qc=0,Rc=1;x.Bus=Pc;
function O(a,b,c){J.call(this,a,b,c);this.ea=c.addr;this.size=c.size;this.type=c.type||Q.NONE;this.f=(a=this.T.bus)?tb(this,a):N(this,a="Bus");if(!this.f)throw Error(this.v("unable to find bus '%s'",a));this.a=this.f.g;this.c=Math.pow(2,this.a)-1;this.S=this.X=!1;this.g=!1!==this.f.j;this.values=this.U=this.u=this.M=null;a=this.Ka;b=this.za;var d=this.g?this.Zd:this.Yd,e=this.g?this.ve:this.ue;this.f.type==Qc&&(b=this.Ee,d=this.g?this.ed:this.dd,e=this.Fe,8==this.a&&!1!==xb(this,"ArrayBuffer")&&(this.X=
!0,d=this.g==sa?this.he:this.ie));switch(this.type){case Q.NONE:this.va=this.Ia;this.ta=this.Aa;this.ia=this.$d;this.ca=this.we;break;case Q.pc:this.va=a;this.ta=this.Aa;this.ia=d;this.ca=this.Aa;break;case Q.La:this.va=a,this.ta=b,this.ia=d,this.ca=e}this.w=this.h=0;this.L=this.i=this.K=this.I=this.j=this.l=null;Xc(this,c.values);Yc(this)}u(O,J);
function Xc(a,b){"string"==typeof b?(Ab(a,!1),Za(b,function(c,d,e,f){if(4==e)if(!f&&d){try{var g=JSON.parse(d);Xc(a,g.values)}catch(k){a.s("error (%s) parsing resource: %s\n",k.message,c)}Ab(a,!0)}else a.s("error (%d) loading resource: %s\n",f,c)})):a.T.values=b}
function Yc(a,b){if(a.type>Q.NONE&&(a.X?(a.u=new ArrayBuffer(a.size),a.M=new DataView(a.u,0,a.size),a.values=new Uint8Array(a.u,0,a.size),a.U=new Uint16Array(a.u,0,a.size>>1),new Int32Array(a.u,0,a.size>>2)):a.values=Array(a.size).fill(0),b))for(var c=0;c<b.length;c++)a.values[c]=b[c]}l=O.prototype;
l.la=function(){if(this.T.values)a:{var a=this.f,b=this.ea,c=this.size,d=this.T.values,e=0,f=b&a.c;b>>>=a.b;c>d.length&&(c=d.length);for(;0<c&&b<a.a.length;){var g=a.a[b++];if(!g)break a;for(;0<c&&f<g.size;)g.za(f++,d[e++]),c--;f=0}}else this.type&Q.La&&this.values&&this.values.fill(0)};l.Ia=function(){return this.c};l.$d=function(a){return this.g?this.Ia(a)|this.Ia(a+1)<<this.a:this.Ia(a+1)|this.Ia(a)<<this.a};l.Gb=function(a){return this.values?this.values[a]:0};l.Ka=function(a){return this.values[a]};
l.dd=function(a){return this.values[a+1]|this.values[a]<<this.a};l.ed=function(a){return this.values[a]|this.values[a+1]<<this.a};l.he=function(a){return this.U[a>>>1]};l.ie=function(a){return this.M.getUint16(a,this.g)};l.Yd=function(a){return this.Ka(a+1)|this.Ka(a)<<this.a};l.Zd=function(a){return this.Ka(a)|this.Ka(a+1)<<this.a};l.Aa=function(){};l.we=function(a,b){this.g?(this.Aa(a,b&this.c),this.Aa(a+1,b>>this.a)):(this.Aa(a,b>>this.a),this.Aa(a+1,b&this.c))};
l.Mb=function(a,b){this.values&&(this.values[a]=b)};l.za=function(a,b){this.values[a]=b};l.Ee=function(a,b){this.values[a]=b;this.S=!0;this.h?this.I=this.za:this.ta=this.za};l.rb=function(a,b){this.values[a]=b>>this.a;this.values[a+1]=b&this.c};l.sb=function(a,b){this.values[a]=b&this.c;this.values[a+1]=b>>this.a};l.Nb=function(a,b){this.U[a>>>1]=b};l.Ob=function(a,b){this.M.setUint16(a,b,this.g)};l.ue=function(a,b){this.za(a,b>>this.a);this.za(a+1,b&this.c)};
l.ve=function(a,b){this.za(a,b&this.c);this.za(a+1,b>>this.a)};l.Fe=function(a,b){this.u?this.g==sa?(this.Nb(a,b),this.h?this.i=this.Nb:this.ca=this.Nb):(this.Ob(a,b),this.h?this.i=this.Ob:this.ca=this.Ob):this.g?(this.sb(a,b),this.h?this.i=this.sb:this.ca=this.sb):(this.rb(a,b),this.h?this.i=this.rb:this.ca=this.rb)};
l.jb=function(a){if(!this.w){var b=this;this.w++;this.j=a;this.K=this.va;this.L=this.ia;this.va=function(c){var d=b.K(c);b.j(b.ea,c,d);return d};this.ia=function(c){var d=b.L(c);b.j(b.ea,c,d);b.j(b.ea,c+1,d);return d};return!0}return this.j==a?(this.w++,!0):!1};l.Jb=function(a){if(!this.h){var b=this;this.h++;this.l=a;this.I=this.ta;this.i=this.ca;this.ta=function(c,d){b.l(b.ea,c,d);b.I(c,d)};this.ca=function(c,d){b.l(b.ea,c,d);b.l(b.ea,c+1,d);b.i(c,d)};return!0}return this.l==a?(this.h++,!0):!1};
l.kb=function(a){return this.w&&this.j==a?(--this.w||(this.va=this.K,this.ia=this.L,this.K=this.L=this.j=null),!0):!1};l.Lb=function(a){return this.h&&this.l==a?(--this.h||(this.ta=this.I,this.ca=this.i,this.I=this.i=this.l=null),!0):!1};l.ra=function(a){var b=a.shift();if(this.N==b){this.S=a.shift();a.shift();if(a=a.shift()){var c=this.size;c=void 0===c?0:c;if(a.length!=c){b=0;c=c?Array(c):[];for(var d=0;d<a.length-1;)for(var e=a[d++],f=a[d++];e--;)c[b++]=f;a=c}Yc(this,a)}return!0}return!1};
l.sa=function(a){a.push(this.N);a.push(this.S);a.push(!1);a.push(this.values?za(this.values):this.values)};var Q={NONE:1,pc:2,La:4,od:14,ag:12};x.Memory=O;function Zc(a,b,c){O.call(this,a,b,c);this.o=[];this.H=[];this.b=[];this.J=[];void 0!=c.addr&&Sc(this.f,c.addr,c.size,Q.NONE,this)}u(Zc,O);
function $c(a,b,c,d,e,f,g,k){for(var h;c<=d;c++){h=!1;if(e){if(a.o[c])break;a.o[c]=e.bind(b)}if(f){if(a.H[c])break;a.H[c]=f.bind(b)}if(g){if(a.b[c])break;a.b[c]=g.bind(b)}if(k){if(a.J[c])break;a.J[c]=k.bind(b)}h=!0}if(!h)throw Error(a.v("handler for port %#0x already exists",c));}function ad(a,b){var c=void 0===c?0:c;for(var d in b){var e=b[d];$c(a,a,+d+c,+d+c,e[0],e[1],e[2],e[3])}}
Zc.prototype.Ia=function(a){var b,c=this.ea+a;if(b=this.o[c]){var d=b(c);var e=!0}else if(b=this.b[c])d=c&1?b(c&-2)>>this.a:b(c)&this.c,e=!0;else if(c&1)if(c&=-2,b=this.b[c])d=b(c)>>this.a,e=!0;else if(b=this.o[c])d=b(c),e=!0;e||(Wc(this.f,c,0),this.s(272,"readNone(%#04x): unknown port\n",c),d=O.prototype.Ia.call(this,a));return d};
Zc.prototype.Aa=function(a,b){var c,d=this.ea+a;if(c=this.H[d]){c(d,b);var e=!0}else if(c=this.J[d])e=this.b[d]?this.b[d](d,!0):0,d&1?c(d,e&this.c|b<<this.a):c(d,e&~this.c|b),e=!0;else if(d&1)if(d&=-2,c=this.J[d])e=this.b[d]?this.b[d](d,!0):0,c(d,e&this.c|b<<this.a),e=!0;else if(c=this.H[d])c(d,b),e=!0;e||(Wc(this.f,d,1),this.s(272,"writeNone(%#04x,%#04x): unknown port\n",d,b),O.prototype.Aa.call(this,a,b))};x.Ports=Zc;
function bd(a,b,c){c.type=Q.NONE;O.call(this,a,b,c);Sc(this.f,c.addr,c.size,Q.La);Bb(this,this.la.bind(this))}u(bd,O);x.RAM=bd;
function cd(a,b,c){c.type=Q.pc;O.call(this,a,b,c);Sc(this.f,c.addr,c.size,c.type,this);Bb(this,this.la.bind(this));this.m=this.V=void 0;if(x.LED&&this.Y[Va]){var d=this;this.o=Math.pow(2,Math.ceil(Math.log2(this.values.length)/2));this.H=this.values.length/this.o|0;this.b=new cc(a,b+"LEDs",{"class":"LED",bindings:{container:Ua(this)},type:ec,cols:this.o,rows:this.H,color:F(this,"colorROM","green"),backgroundColor:F(this,"backgroundColorROM","black"),persistent:!0}),nc(this.b);this.J=new Fb(a,b+"Input",
{"class":"Input",location:[0,0,this.b.$,this.b.L,this.o,this.H],bindings:{surface:Ua(this)}});this.$=Wa(this)||"";Ib(this.J,function(e,f){if(d.m){var g=d.$;0<=e&&0<=f&&(e=f*d.o+e,f=d.m,g=f.V&&dd(f.V,d.ea+e,1)||"");lb(d,Xa,g)}})}}u(cd,O);
cd.prototype.ra=function(a){var b=!0,c=a.shift();if(c&&this.b){var d=c.length;this.b.a.length==d?(this.b.a=c,mc(this.b,!0)):(this.s("inconsistent saved LED state (%d), unable to load\n",d),b=!1)}a.length&&(d=(a=a.shift())&&a.length||-1,this.values.length==d?this.values=a:(this.s("inconsistent saved ROM state (%d), unable to load\n",d),b=!1));return b};cd.prototype.ka=function(){void 0===this.m&&(this.m=N(this,"CPU"));void 0===this.V&&(this.V=N(this,"Debugger",!1))&&this.V.Cb&&this.V.Cb(this.T.symbols)};
cd.prototype.Ka=function(a){if(this.b){var b=this.b,c=pc;c=(void 0===c?0:c)&129;var d=4*((a/this.o|0)*b.w+a%this.o);if(d<=b.a.length-4){if(1!==b.a[d]||(b.a[d+3]&129)!==c)b.a[d]=1,b.a[d+3]=b.a[d+3]&-130|c|pc,b.I=!0;b.M=d;b.H=!0;b.o=0}}return this.values[a]};cd.prototype.sa=function(a){this.b&&(a.push(this.b.a),a.push(this.values))};var Va="array",Xa="cellDesc";x.ROM=cd;
function ed(a,b,c){c["class"]="CPU";J.call(this,a,b,c);this.V=void 0;this.wb=this.Hb=0;this.time=N(this,"Time");this.time.u.push(this);this.time.S.push(this);this.ga=this.U=0}u(ed,J);ed.prototype.abort=function(a){this.wb=this.Hb;E(this,a.message);Ac(this.time)};function fd(a,b){a.V=b;return a.Ca}ed.prototype.qe=function(a){this.ga=this.U=void 0===a?0:a;return this.ga-this.U};ed.prototype.re=function(){this.ga-=this.U;this.U=0};
function gd(a,b,c){c["class"]="Debugger";J.call(this,a,b,c);var d=this;this.ba=c.defaultRadix||16;this.da=1;this.M=["(",")"];Ca(this,"a",function(f,g,k,h,m){return y(d,m.O,d.ba,k)});Ca(this,"n",function(f,g,k,h,m){return y(d,m,d.ba,k,0>g.indexOf("#")?"":void 0)});this.fa=this.u=0;this.w={};this.ga=[];this.ha=[];this.m=N(this,"CPU");this.Ca=fd(this.m,this);this.na=N(this,"Input",!1);if(a=this.m.T.busMemory||c.busMemory){this.a=tb(this,a);if(a=this.m.T.busIO||c.busIO)this.f=tb(this,a,!1);this.f||(this.f=
this.a)}else this.a=this.f=N(this,"Bus");this.o=this.a.aa;this.wa=Math.pow(2,this.o)-1|0;this.j=this.X=0;this.i=[];for(var e in R)this.i[R[e]]=[];this.h=[];this.h[R.xa]=this.a;this.h[R.Ua]=this.a;this.h[R.Oa]=this.f;this.h[R.Pa]=this.f;this.g=[];this.g[R.xa]=this.Fd.bind(this);this.g[R.Ua]=this.Id.bind(this);this.g[R.Oa]=this.Dd.bind(this);this.g[R.Pa]=this.Ed.bind(this);this.c=[];this.H=void 0;this.L=null;this.S=0;this.time=N(this,"Time");this.time.S.push(this);this.l=[];this.K="";this.Bb(this,"state",
"dump machine state",this.Qd);this.U=hd();this.oa=hd();this.$=!1;this.J=0;this.b=[];Pa(this,this.Vd.bind(this));(c=xb(this,"commands"))&&eb(this,c)}u(gd,J);l=gd.prototype;l.Bb=function(a,b,c,d){this.l.push({Pd:a,name:b,Od:c,eb:d})};function id(a,b,c){for(var d,e=0;e<a.l.length;e++){var f=a.l[e];if(f.name==b){d=f.eb.call(f.Pd,c);break}}return d}
l.Cb=function(a){if(a&&a.length)for(var b=0;b<a.length-2;b+=3){var c=jd(this,a[b]);if(c){var d=kd[a[b+1]];if(d){c={Ha:c,type:d,name:a[b+2]};d=this.ga;var e=c,f=ld(d,e,this.Cc);0>f&&d.splice(-(f+1),0,e);d=this.ha;e=ld(d,c,this.Dc);0>e&&d.splice(-(e+1),0,c)}}}};function ld(a,b,c){var d=0,e=a.length,f=0;for(void 0===c&&(c=function(h,m){return h>m?1:h<m?-1:0});d<e;){var g=d+e>>1,k=void 0;k=c(b,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}l.Cc=function(a,b){return a.name>b.name?1:a.name<b.name?-1:0};
l.Dc=function(a,b){return a.Ha.O>b.Ha.O?1:a.Ha.O<b.Ha.O?-1:0};function md(a,b,c){b=ld(a.ha,{Ha:b,type:0,name:void 0},a.Dc);if(0<=b&&(a=a.ha[b],!c||a.type==c))var d=a.name;return d}function nd(a,b,c,d){d=void 0===d?a.a:d;b.O=b.O+c&d.h}function hd(a){a=void 0===a?0:a;var b=od.ld;return"number"==typeof a?{O:a,Ib:-1,type:b}:{O:a.O,Ib:a.Ib,type:a.type}}
function jd(a,b,c){if(b){var d=hd();var e=0,f=b.charAt(e);switch(f){case "&":e++;break;case "#":e++;d.type=od.md;break;case "%":e++,f=b.charAt(e),"%"==f?e++:d.type=od.uc}f=b.indexOf(":",e);if(0<=f){var g=pd(a,b.substring(e,f),c);void 0==g?d=null:(d.Ib=g,e=f+1)}d&&(b=pd(a,b.substring(e),c),void 0==b?d=null:d.O=b&a.wa)}return d}function qd(a,b,c,d){d=void 0===d?a.a:d;a.j++;var e=d.Gb(b.O);c&&nd(a,b,c,d);a.j--;return e}
function rd(a,b,c){if(32>=a.o)return b&c;b=S(a,b,0,!0);c=S(a,c,0,!0);return((b/D|0)&(c/D|0))*D+((b&c)>>>0)}function sd(a,b,c){if(32>=a.o)return b^c;b=S(a,b,0,!0);c=S(a,c,0,!0);return((b/D|0)^(c/D|0))*D+((b^c)>>>0)}
function td(a,b,c,d){for(d=void 0===d?-1:d;d--&&c.length;){var e=c.pop();if(2>b.length)return!1;var f=b.pop();var g=b.pop();switch(e){case "*":g*=f;break;case "/":if(!f)return!1;g=Math.trunc(g/f);break;case "^/":if(!f)return!1;g%=f;break;case "+":g+=f;break;case "-":g-=f;break;case "<<":g<<=f;break;case ">>":g>>=f;break;case ">>>":g>>>=f;break;case "<":g=g<f?1:0;break;case "<=":g=g<=f?1:0;break;case ">":g=g>f?1:0;break;case ">=":g=g>=f?1:0;break;case "==":g=g==f?1:0;break;case "!=":g=g!=f?1:0;break;
case "&":g=rd(a,g,f);break;case "!":case "|":e=g;32>=a.o?g=e|f:(e=S(a,e,0,!0),f=S(a,f,0,!0),g=(e/D|0|f/D|0)*D+((e|f)>>>0));break;case "^!":g=sd(a,g,f);break;case "&&":g=g&&f?1:0;break;case "||":g=g||f?1:0;break;case ",,":g=S(a,g,18,!0)*Math.pow(2,18)+S(a,f,18,!0);break;case "_":case "^_":"^_"==e&&(f=35-(f&255));f&&(g=S(a,g,0,!0),g=0<f?g*Math.pow(2,f):Math.trunc(g/Math.pow(2,-f)));break;default:return!1}b.push(S(a,g))}return!0}
function ud(a,b,c,d,e,f){var g,k=!1,h=0,m=[],n=[],v=a.ba;for(a.ba=e;c<d;){var p=b[c++].trim();var q=c<d?b[c++]:"";if(p){var w=void 0;var t=a;var z=p,r=f;h=void 0===h?0:h;if(void 0!=z){w=yb(t,z.toUpperCase());if(void 0==w){w=void 0;var Ba=t,V=ld(Ba.ga,{Ha:null,type:0,name:z},Ba.Cc);0<=V&&(w=Ba.ga[V].Ha.O);if(void 0==w)if(w=z,t.w[w]?w=t.w[w].value:(w=w.substr(0,6),w=t.w[w]&&t.w[w].value),void 0==w)w=wa(z,1<z.length||10<t.ba?t.ba:10);else if(z=t.w[z]&&t.w[z].sg)r?r.push(z):(r=pd(t,z,r),void 0!==r?w+=
r:w=void 0)}void 0!=w&&(w=S(t,vd(t,w,h)))}t=w}else if("{"==q){p=1;for(t=c;c<d;)if(c++,q=c<b.length?b[c++]:"","{"==q)p++;else if("}"==q&&!--p)break;t=ud(a,b,t,c-1,a.ba,f);null!=t&&h&&(t=vd(a,t,h));p=c<d?b[c++].trim():"";q=c<d?b[c++]:""}else{if(" "==q)continue;if("^B"==q){a.ba=2;continue}if("^O"==q){a.ba=8;continue}if("^D"==q){a.ba=10;continue}if(!(h&-1073741824)){if("+"==q)continue;if("-"==q){h=h<<2|1;continue}if("~"==q||"^-"==q){h=h<<2|2;continue}if("^L"==q){h=h<<2|3;continue}}k=!0;break}if(void 0===
t)if(f)f.push(p),t=0;else{k=!0;break}m.push(S(a,t));if(" "==q)if(c<b.length-1&&!b[c])c++,q=b[c++];else{k=!0;break}if(!q)break;t="<"==a.M[0]?wd:xd;if(!t[q]){k=!0;break}n.length&&t[q]<=t[n[n.length-1]]&&td(a,m,n,1);n.push(q);a.ba="^_"==q?10:e;h=0}if(k||!td(a,m,n)||1!=m.length)k=!0;k?f||a.s("parse error (%s)\n",p||q):g=m.pop();a.ba=v;return g}
function yd(a,b,c,d){for(var e,f=a.o/d|0;0<=(e=b.indexOf(c));){for(var g=0,k=e+1,h=f;k<b.length;){var m=b[k++];if(m==c){h=-1;break}if(!h)break;h--;m=m.charCodeAt(0);6==d&&(m-=32);m&=(1<<d)-1;g=S(a,g*Math.pow(2,d)+m,d*f,!0)}if(0<=h){a.s("parse error (%c%s%c)\n",c,b,c);return}b=b.substr(0,e)+y(a,g)+b.substr(k)}return b}
function pd(a,b,c){if(b){"{"!=a.M[0]&&(b=b.split(a.M[0]).join("{").split(a.M[1]).join("}"));b=yd(a,b,'"',8);if(!b)return d;b=yd(a,b,"'",6);if(!b)return d;16!=a.ba&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);var d=ud(a,b,0,b.length,a.ba,c)}return d}
function vd(a,b,c){for(;c;){var d;switch(c&3){case 1:b=-S(a,b);break;case 2:b=sd(a,b,-1);break;case 3:for(d=35;0<=d&&!rd(a,b,Math.pow(2,d));)d--;b=35-d}c>>>=2}return b}function S(a,b,c,d){var e=b;c=c||a.o;if(d)if(32==c)e=b>>>0;else if(32>c)e=b&(1<<c)-1;else{if(a=Math.pow(2,c),0>b||b>=a)e=b%a,0>e&&(e+=a)}else 32>=c?e=b<<32-c>>32-c:(a=Math.pow(2,c-1),b>=a?(e=b%a,(b/a|0)&1&&(e-=a)):b<-a&&(e=b%a,((-b-1)/a|0)&1?e&&(e+=a):e||(e-=a)));b!=e&&(b=e);return b}
l.Db=function(a){function b(k){for(var h=0;h<k.length;h++)if(void 0!=k[h])return!1;return!0}if(-1>a)return zd(this,this.Db);var c="";if(0<=a){var d=this.c[a];if(void 0!=d){c=d>>8;d&=255;var e=this.h[c];if(e){var f=this.i[c],g=f[d];(c&1?e.Lb(g.O,this.g[c]):e.kb(g.O,this.g[c]))?(f[d]=void 0,this.c[a]=void 0,b(f)&&(f.length=0,b(this.c)&&(this.c.length=0)),c=this.v("%2d: %s %*a cleared\n",a,Ad[c],e.aa,g),--this.X||this.$||(c+=Bd(this,!1))):c=this.v("invalid break address: %*a\n",e.aa,g)}else c="invalid bus"}else c=
this.v("invalid break index: %d\n",a)}else c="missing break index\n";return c};function Cd(a,b){if(a.L&&(void 0==b||a.L.O==b)){var c=void 0===c?R.xa:c;b=-1;var d=Dd(a.L,a.i[c]);if(0<=d)for(var e=0;e<a.c.length;e++){var f=a.c[e];if(void 0!=f&&c==f>>8&&d==(f&255)){b=e;break}}c=b;0<=c&&a.Db(c);a.L=null}}
l.Eb=function(a,b){b=void 0===b?!1:b;if(-1>a)return zd(this,this.Eb,b);if(0<=a){var c=this.c[a];if(void 0!=c){var d=c>>8;c=this.i[d][c&255];if(void 0!=c){var e=b?"enabled":"disabled",f=this.h[d];!c.disabled==!b?(c.disabled=!b,a=this.v("%2d: %s %*a %s\n",a,Ad[d],f.aa,c,e)):a=this.v("%2d: %s %*a already %s\n",a,Ad[d],f.aa,c,e)}else a=this.v("no break address at index: %d\n",a)}else a=this.v("invalid break index: %d\n",a)}else a="missing break index\n";return a};
function zd(a,b,c){for(var d="",e=0;e<a.c.length;e++)void 0!=a.c[e]&&(d+=b.call(a,e,c));d||(d="no break addresses found");return d}function Ed(a,b,c){c=void 0===c?R.xa:c;a=a.i[c];for(c=0;c<a.length;c++){var d=a[c];if(d.O==b)return d}}function Dd(a,b){for(var c=0;c<b.length;c++)if(b[c].O==a.O)return c;return-1}
function Fd(a,b){b=void 0===b?!1:b;for(var c="",d=0;d<a.c.length;d++){var e=a.c[d];if(void 0!=e){var f=e>>8;e=a.i[f][e&255];f=a.v("%s %*a",Ad[f],a.h[f].aa,e);b?(c&&(c+=";"),c+=f,e.disabled&&(c+=";bd "+d)):c+=a.v("%2d: %s %s\n",d,f,e.disabled?"disabled":"enabled")}}c||b||(c="no break addresses found\n");return c}
function Gd(a,b,c){c=void 0===c?R.xa:c;if(b){var d=a.h[c];if(d){var e=a.i[c];var f=Dd(b,e);if(0<=f)f=-(f+1);else{for(f=0;f<e.length&&void 0!=e[f];f++);e[f]=b}e=f;if(0<=e)if(f=c&1?d.Jb(b.O,a.g[c]):d.jb(b.O,a.g[c])){for(f=0;f<a.c.length&&void 0!=a.c[f];f++);a.c[f]=c<<8|e;b=a.v("%2d: %s %*a set\n",f,Ad[c],d.aa,b);a.X++||a.b.length||(b+=Bd(a,!0))}else b=a.v("invalid break address: %*a\n",d.aa,b),a.i[c][e]=void 0;else b=a.v("%s %*a already set\n",Ad[c],d.aa,b)}else b="invalid bus"}else b="missing break address\n";
return b}function Hd(a,b){0<=b&&(a.u=b);var c="instruction break count: "+(0<a.u?a.u:"disabled")+"\n";0<b&&(a.b.length||(c+=Bd(a,!0)),a.$=!0);return c}function Id(a,b){var c;if(b){var d=fb(b);void 0!=d?a.fa=d?0xffffffffffff:0:c=a.v("unrecognized message option: %s\n",b)}c||(c=a.v("break on message: %b\n",!!a.fa));return c}l.Dd=function(a,b){this.j||(void 0==a?T(this,"break on unknown input %#0x: %#0x",b):(a=Ed(this,a+b,R.Oa))&&!a.disabled&&T(this,"break on input %*a: %#0x",this.f.aa))};
l.Ed=function(a,b){this.j||(void 0==a?T(this,"break on unknown output %#0x: %#0x",b):(a=Ed(this,a+b,R.Pa))&&!a.disabled&&T(this,"break on output %*a: %#0x",this.f.aa))};l.Fd=function(a,b){this.j||(void 0==a?T(this,"break on unknown read %#0x: %#0x",b):(a+=b,this.b.length&&a==this.m.Hb&&(this.S++,0<this.u&&(--this.u||T(this,"break on instruction count")),this.b[this.J++]=a,this.J==this.b.length&&(this.J=0)),(b=Ed(this,a,R.xa))&&!b.disabled&&(T(this,"break on read %*a: %#0x",this.a.aa),Cd(this,a))))};
l.Id=function(a,b){this.j||(void 0==a?T(this,"break on unknown write %#0x: %#0x",b):(a=Ed(this,a+b,R.Ua))&&!a.disabled&&T(this,"break on write %*a: %#0x",this.a.aa))};function T(a,b,c){b=a.v.apply(a,[b].concat(ba(c)));E(a,b);Ac(a.time)}function Jd(a,b,c){c=void 0===c?a.a:c;return y(a,b.O,a.ba,c.aa,"")}
function Kd(a,b,c){c=void 0===c?10:c;var d="";if(a.b.length){var e,f=[];c>a.b.length&&(c=a.b.length);0>b&&(b=c);var g=a.J-b;for(0>g&&(g+=a.b.length);0<=g&&g<a.b.length&&0<c;){var k=a.b[g++];if(void 0==k)break;g==a.b.length&&(g=0);e?e.O=k:e=hd(k);for(k=0;k<a.da;k++)f[k]=qd(a,e,1);nd(a,e,-f.length);d+=a.Kb(e,f,a.v("[%6d]",b--));c--}}return d||"no history"}
function dd(a,b,c){var d=[],e="";for(b="number"==typeof b?hd(b):b;c--;){for(nd(a,b,d.length);d.length<a.da;)d.push(qd(a,b,1));nd(a,b,-d.length);e+=a.Kb(b,d)}return e}
function Ld(a,b,c,d,e,f){var g="";f=f?a.f:a.a;c||(c=f.g);var k=c>>3;d||(d=128);var h=0,m=d+15>>4||1,n=4==k?16:a.ba;"y"==e&&(n=k,m=d,h=8*k);b||(b=a.oa);for(;m--&&0<d;){var v=e=0,p,q="",w="",t=Jd(a,b,f);for(p=n;0<p&&0<d;p--){var z=qd(a,b,1,f);e|=z<<(v++<<3);v==k&&(q+=y(a,e,0,c,""),q+=1==k?9==p?"-":" ":" ",h&&(w+=y(a,e,2,c,"")),e=v=0);h||(w+=32<=z&&127>z?String.fromCharCode(z):".");d--}g&&(g+="\n");g+=t+"  "+q+" "+w}a.oa=b;return g}
l.Qd=function(){var a=[];wb(this,function(b){b.Za&&b.Za(a);return!0});return JSON.stringify(a,null,2)};function Md(a,b,c,d){var e=0,f="";d=d?a.f:a.a;for(var g=0;void 0!=b&&g<c.length;g++){var k=qd(a,b,0,d);if(void 0==k)break;var h=a,m=b,n=c[g],v=d;v=void 0===v?h.a:v;h.j++;v.Mb(m.O,n);h.j--;f+=a.v("%*a: %#*n changed to %#*n\n",a.a.aa,b,a.a.g,k,a.a.g,c[g]);nd(a,b,1,d);e++}e||(f+=a.v("%d locations updated\n",e));a.time.update();return f}
function Bd(a,b){var c="";void 0!=b&&b==!a.b.length&&Uc(a.a,function(d){b?a.a.jb(d.ea,a.g[R.xa]):a.a.kb(d.ea,a.g[R.xa])})&&(b?(a.J=0,a.b=Array(Nd)):a.b=[]);return c+=a.v("instruction history %s\n",a.b.length?"enabled":"disabled")}l.ra=function(a){var b=a.shift();return this.N==b?(eb(this,a.shift()),this.R.ja=a.shift(),!0):!1};l.Kc=function(a){ya(this.fa,a)?T(this,"break on message"):this.time.J=!0};
l.Vd=function(a){var b=a[1],c=a[2],d=[],e=[],f=!1,g="";this.H=void 0;if("*"==c)var k=-2;else{k=wa(c);void 0==k&&(k=-1);var h=jd(this,c,e);if(null===h)return}var m=0;a[3]&&(m=wa(a[3].substr("l"==a[3][0]?1:0))||8);for(var n=3;n<a.length;n++)d.push(wa(a[n],16));if("d"==b){n=id(this,c,d);if(void 0!=n)return n;b=this.K||b}if("s"!=b[0]&&e.length)return"unrecognized symbol(s): "+e;switch(b[0]){case "b":"c"==b[1]?g=this.Db(k):"d"==b[1]?g=this.Eb(k):"e"==b[1]?g=this.Eb(k,!0):"i"==b[1]?g=Gd(this,h,R.Oa):"l"==
b[1]?g=Fd(this):"m"==b[1]?g=Id(this,c):"n"==b[1]?g=Hd(this,k):"o"==b[1]?g=Gd(this,h,R.Pa):"r"==b[1]?g=Gd(this,h,R.xa):"w"==b[1]?g=Gd(this,h,R.Ua):"?"==b[1]?(g="break commands:\n",Od.forEach(function(v){g+=v+"\n"})):b[1]&&(g=void 0);break;case "d":this.K=b;if("b"!=b[1]&&b[1])if("w"==b[1])c=16;else if("d"==b[1])c=32;else if("i"==b[1]){if(!this.f){g="invalid bus";break}c=this.f.g;m=m||1;f=!0}else{if("h"==b[1])this.K="",g=Kd(this,k,m);else if("?"==b[1]){if(this.K="",g="dump commands:\n",Pd.forEach(function(v){g+=
v+"\n"}),this.l.length)for(g+="dump extensions:\n",b=0;b<this.l.length;b++)h=this.l[b],g+=this.v("d   %-12s%s\n",h.name,h.Od)}else this.K="",g=void 0;break}else c=8;g=Ld(this,h,c,m,b[2],f);break;case "e":if("o"==b[1]){if(!this.f){g="invalid bus";break}f=!0}else if(b[1]){g=void 0;break}g=Md(this,h,d,f);break;case "g":if(this.time.start()){if(void 0!=h){Cd(this);g=Gd(this,h);if(2!=g.indexOf(":"))break;this.L=h;g=""}break}g="already started\n";break;case "h":Ac(this.time)||(g="already stopped\n");break;
case "p":a.shift();a.shift();b=a.join(" ");g+=this.v("%s = %s\n",b,y(this,pd(this,b)));break;case "r":if(b=b.substr(1).toUpperCase()){if(void 0==yb(this.m,b)){g+=this.v("unrecognized register: %s\n",b);break}void 0!=h&&Eb(this.m,b,h.O)}this.U.O=this.m.wb;g+=this.m.toString();break;case "s":h=fb(c);if("h"==b[1]){if(this.X||0<this.u)h=void 0;g=Bd(this,h);void 0!=h&&(this.$=h)}else"p"==b[1]?0<k?(yc(this.time,k),g="target speed:  "+Dc(this.time.i)):g="current speed: "+Lc(this.time):"s"==b[1]&&this.qa?
(k=this.qa.indexOf(c),0<=k&&(this.style=this.qa[k]),g="style: "+this.style):"?"==b[1]?(g="set commands:\n",Qd.forEach(function(v){g+=v+"\n"})):g=void 0;break;case "t":m=wa(c,10)||1;this.H=!0;if(b[1]){if("r"!=b[1]){g=void 0;break}this.H=!1}Fc(this.time,m);break;case "u":if(b[1]){g=void 0;break}m||(m=8);h||(h=this.U);g+=dd(this,h,m);this.U=h;break;case "?":g="debugger commands:\n";Rd.forEach(function(v){g+=v+"\n"});break;default:g=void 0}void 0==g&&a[0]&&(g="unrecognized command '"+a[0]+"' (try '?')\n");
return g};l.Fb=function(a){return a&&this.ra(a[0])?(a.shift(),!0):!1};l.Za=function(a){var b=[];this.sa(b);a.push(b)};l.Lc=function(a){if(a)if(this.time.a){if(this.na){a=this.na;var b=a.c;b&&zb(a.R)&&(a.s(524288,'setFocus("%s")\n',b.id||b.nodeName),b.focus(),b.scrollIntoView())}}else this.H?this.Fa(dd(this,this.m.wb,1)):(this.S&&(E(this.m,this.S+" instructions executed"),this.S=0),this.m.Fa(this.m.toString()),void 0==this.H&&(a=this.Ma(Ma.bb,!0))&&a.focus())};
l.sa=function(a){a.push(this.N);a.push(Fd(this,!0));a.push(this.R.ja)};l.Kb=function(a,b,c){var d=this;return this.v("%s %02x       unsupported       ; %s\n",Jd(this,a),function(){var e=b.shift();nd(d,a,1);return e}(),c||"")};
var Rd="b?\t\tbreak commands;d?\t\tdump commands;e[o] [addr] ...\tedit memory/ports;g    [addr]\trun (to addr);h\t\thalt;p    [expr]\tparse expression;r?   [value]\tdisplay/set registers;s?\t\tset commands;t[r] [n]\tstep (n instructions);u    [addr] [n]\tunassemble (at addr)".split(";"),Od="bc [n|*]\tclear break address;bd [n|*]\tdisable break address;be [n|*]\tenable break address;bl [n]\t\tlist break addresses;bi [addr]\tbreak on input;bo [addr]\tbreak on output;br [addr]\tbreak on read;bw [addr]\tbreak on write;bm [on|off]\tbreak on message;bn [count]\tbreak on instruction count".split(";"),
Pd="db  [addr]\tdump bytes (8 bits);dw  [addr]\tdump words (16 bits);dd  [addr]\tdump dwords (32 bits);di  [addr]\tdump input ports;d*y [addr]\tdump values in binary;dh  [n] [l]\tdump instruction history buffer;ds\t\tdump machine state".split(";"),Qd=["sh [on|off]\tset instruction history","sp [n]\t\tset speed multiplier","ss\t\tset debugger style"],od={uc:1,ld:0,md:2,Zf:0},R={xa:0,Ua:1,Oa:2,Pa:3},Sd={},Ad=(Sd[R.xa]="br",Sd[R.Ua]="bw",Sd[R.Oa]="bi",Sd[R.Pa]="bo",Sd),Td={jd:"PC"},Ud={BYTE:1,hd:2,nd:4,
ic:5,Zb:6,zd:7},kd={"=":Ud.zd,1:Ud.BYTE,2:Ud.hd,4:Ud.nd,"@":Ud.ic,";":Ud.Zb},Nd=1E5,xd={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},wd={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20};function Vd(a,b,c){ed.call(this,a,b,c)}u(Vd,ed);
function Wd(a,b,c){ed.call(this,a,b,c);this.K=+c.model||Xd;this.Sa=+c.addrReset||0;this.i=N(this,"Bus");this.i.u=this.kd.bind(this);this.Td=N(this,"IOPage");N(this,"Panel",!1);this.u=0;this.ub=null;N(this,"Input",!1);this.K<=Yd?(this.Pb=this.Gd,this.Bc=~(Zd|$d|ae|be)&65535,this.Ac=0):(this.Pb=this.Hd,this.Bc=~(Zd|(this.K<=ce?$d:0))&65535,this.Ac=this.K>ce?$d:0);this.yb=this.xb=this.ha=0;this.g=null;this.Qa=[];de(this)}u(Wd,Vd);
function de(a){a.X=65536;a.da=32768;a.fa=65535;a.$=32768;a.M=15;a.c=[0,0,0,0,0,0,0,a.Sa,-1,-2,-3,-4,-5,-6,-7,-8];a.S=[0,0,0,0,0,0];a.qa=[0,0,0,0];a.wa=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.Ea=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.Ja=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a.Ic=[0,0,0,0,0,0,0,0];a.b=0;a.j=-1;a.Hc=0;a.a=0;ee(a);for(var b={Da:0};7>=b.Da;b={Da:b.Da},b.Da++)M(a,"R"+b.Da,function(c){return function(){return a.c[c.Da]}}(b),function(c){return function(d){return a.c[c.Da]=d&65535}}(b));vb(a,"R6","SP");vb(a,"R7",Td.jd);M(a,"CF",function(){return a.X&65536&&fe?1:0},function(c){a.X=c?65536:0});M(a,"NF",function(){return a.$&32768&&ge?1:0},function(c){a.$=c?32768:0});M(a,"VF",function(){return a.da&
32768&&he?1:0},function(c){a.da=c?32768:0});M(a,"ZF",function(){return(a.fa&65535?0:ke)?1:0},function(c){a.fa=c?0:1});M(a,"PS",function(){return le(a)},function(c){return me(a,c)});M(a,"PI",function(){return a.pa},function(c){if(c&=ne){var d=c>>oe;do c+=pe;while(d>>=1);a.a|=qe}a.pa=c});M(a,"ER",function(){return a.ma});M(a,"SL",function(){return a.w&65280},function(c){a.w=c|255});M(a,"M0",function(){return re(a)},function(c){return se(a,c)});M(a,"M1",function(){return te(a)});M(a,"M2",function(){return ue(a)});
M(a,"M3",function(){return a.l},function(c){return ve(a,c)})}function ee(a){a.f=0;a.na=0;a.oa=0;a.l=0;a.ma=0;a.pa=0;a.w=255;a.L=0;a.H=0;a.J=0;a.o=262143;a.zc=[4,2,0,1];a.I=a.c[7];a.h=0;a.g=null;we(a);for(var b=a.i,c=Q.La,d=0,e=0;e<b.a.length;e++){var f=b.a[e];f.type&c&&(d=f.ea+f.size)}a.Sd=d}l=Wd.prototype;l.Lc=function(){};function re(a){var b=a.f;b&xe||(b=b&~(ye|ze|Ae)|a.H<<5|a.J<<1);return b}
function se(a,b){b&=~ye;if(a.f!=b){b&xe&&!(a.f&xe)&&(a.na=a.h>>16&65535,a.oa=a.h&65535);a.f=b;a.H=(b&Ae)>>Be;a.J=(b&ze)>>Ce;var c=0;b&(De|Ee)&&(c=Fe,b&De&&(c|=Ge));a.L!=c&&(a.L=c,we(a))}}function te(a){a.f&xe||(a.na=a.h>>16&65535);a=a.na;a&65280&&(a=(a<<8|a>>8)&65535);return a}function ue(a){a.f&xe||(a.oa=a.h&65535);return a.oa}function ve(a,b){a.K<Xd&&(b&=~(He|Ie));a.l!=b&&(a.l=b,a.o=b&He?Je:Ke,we(a))}
function we(a){a.ub&&Vc(a.i,a.u,a.ub);a.L?(a.Ra=Le,a.u=a.l&He?Me:Ne,a.vb=a.ke,a.Jc=a.He):(a.Ra=0,a.u=Oe,a.vb=a.je,a.Jc=a.Ge);a.ub=Vc(a.i,a.u,a.Td)}
l.ra=function(a){if(!a||!a.length)return E(this,"invalid saved state"),!1;var b=a.shift(),c=a.shift();if(b!=this.N||2!==(c|0))return this.s("CPU state mismatch (%s %3.2f)\n",b,c),!1;try{this.c=a.shift();this.S=a.shift();this.qa=a.shift();this.wa=a.shift();this.Ea=a.shift();this.Ja=a.shift();this.Ic=a.shift();this.ma=a.shift();this.Hc=a.shift();this.pa=a.shift();this.w=a.shift();this.H=a.shift();this.J=a.shift();this.I=a.shift();this.a=a.shift();this.h=a.shift();this.j=a.shift();this.xb=a.shift();
this.yb=a.shift();this.Sa=a.shift();me(this,a.shift());se(this,a.shift());this.na=a.shift();this.oa=a.shift();ve(this,a.shift());for(var d=a.shift(),e=d.length-1;0<=e;e--){a:{for(a=0;a<this.Qa.length;a++){var f=this.Qa[a];if(f.mb===d[e]){var g=f;break a}}g=null}g&&(g.next=this.g,this.g=g)}}catch(k){return E(this,"CPU state error: "+k.message),!1}return!0};
l.sa=function(a){a.push(this.N);a.push(2);a.push(this.c);a.push(this.S);a.push(this.qa);a.push(this.wa);a.push(this.Ea);a.push(this.Ja);a.push(this.Ic);a.push(this.ma);a.push(this.Hc);a.push(this.pa);a.push(this.w);a.push(this.H);a.push(this.J);a.push(this.I);a.push(this.a);a.push(this.h);a.push(this.j);a.push(this.xb);a.push(this.yb);a.push(this.Sa);a.push(le(this));a.push(re(this));a.push(te(this));a.push(ue(this));a.push(this.l);a.push(Pe(this))};
function Qe(a,b,c){b={mb:b,priority:4,message:c||0,name:Re[b],next:null};a.Qa.push(b);return b}function Se(a,b){if(b){if(b!=a.g){var c=a.g;if(!c||c.priority<=b.priority)b.next=c,a.g=b;else{do{var d=c.next;if(!d||d.priority<=b.priority){b.next=d;c.next=b;break}c=d}while(c)}}a.a|=qe;a.s(2048+b.message,"setIRQ(vector=%o,priority=%d)\n",b.mb,b.priority+")")}}function Pe(a){var b=[];for(a=a.g;a;)b.push(a.mb),a=a.next;return b}
function le(a){return a.M=a.M&(be|ae|$d|Te|Ue)|(a.$&32768?ge:0)|(a.fa&65535?0:ke)|(a.da&32768?he:0)|(a.X&65536?fe:0)}function me(a,b){b&=a.Bc;a.$=b<<12;a.fa=~b&4;a.da=b<<14;a.X=b<<16;if((b^a.M)&a.Ac)for(var c=a.S.length;0<=--c;){var d=a.c[c];a.c[c]=a.S[c];a.S[c]=d}a.b=b>>Ve&We;c=a.M>>Ve&We;a.b!=c&&(a.qa[c]=a.c[6],a.c[6]=a.qa[a.b]);a.M=b;a.a&=~Xe;a.a|=a.g?Xe:qe}l.kd=function(a,b){3>=b&&(this.m.ma|=Ye);Ze(this,$e,0,a)};
function Ze(a,b,c,d){a.s(4096,"trap to vector %o (%o: %s)\n",b,d,0>d?af[-d]:"BUS ERROR");if(!a.ha){0>a.j?a.j=le(a):a.b||(d=bf);d==bf&&(a.a&cf&&(d=df),a.a|=cf,a.ma|=ef,a.c[6]=b=4);if(d!=df){a.h=b|4143316992;a.b=0;var e=a.vb(b|a.Ra),f=a.vb(b+2&65535|a.Ra);me(a,f&~ae|a.j>>2&ae);ff(a,a.j);ff(a,a.c[7]);a.c[gf]=e&65535}a.a&=~(c|hf|jf);a.a=a.a|qe|kf;a.j=-1;a.xb=d;a.yb=b;d==df&&Ac(a.time);if(d>=bf)throw b;}}function lf(a,b){var c=b>>13&31;31>c&&(b=a.l&Ie?a.Ja[c]+(b&8191)&Je:b&~mf);return b}
function nf(a,b,c){if(!(c&a.L)){var d=b&65535;d>=Oe&&(d|=a.u);return d}var e=b>>13;a.l&a.zc[a.b]||(e&=7);var f=a.Ea[a.b][e];d=(a.wa[a.b][e]<<6)+(b&8191)&a.o;d>=mf&&(d=lf(a,d));if(a.ha)return d;d>=a.Sd&&d<a.u?(a.ma|=of,Ze(a,$e,0,d)):d&1&&!(c&pf)&&(a.ma|=qf,Ze(a,$e,0,d));var g=0;switch(f&rf){case sf:g=tf;case uf:f|=vf;c&Fe&&(g=wf);break;case xf:g=tf;case yf:c&Fe&&(g=tf);case zf:f|=c&Fe?vf|Af:vf;break;default:g=Bf}(f&(Cf|Df))!=Cf&&(f&Df?f&Cf&&(b&8128)<(f>>2&8128)&&(g|=Ef):(b&8128)>(f>>2&8128)&&(g|=Ef));
a.Ea[a.b][e]=f;if(d!=((Me|Ff)&a.o)||a.b)a.H=a.b,a.J=e;g&&(g&xe&&(0<=a.j&&(g|=Gf),a.f&xe||(g|=a.f&tf|a.H<<5|a.J<<1,se(a,a.f&~Hf|g&Hf)),Ze(a,If,Jf,Kf)),a.f&(xe|tf)||!(d<((Me|Lf)&a.o)||d>((Me|Mf|1)&a.o))||(a.f|=tf,a.f&Nf&&(a.a|=Jf)));return d}function ff(a,b){var c=a.c[6]-2&65535;a.c[6]=c;a.h=a.h&65535|(a.h&-65536)<<8|16121856;a.a&cf||a.Pb(Of,-2,c);a.Jc(c,b)}l.Gd=function(a,b,c){!this.b&&0>=b&&c<=this.w&&(this.a|=Pf)};
l.Hd=function(a,b,c){this.b||(65534<=c&&(c|=-65536),a&Fe&&c<=this.w&&(c<=this.w-32?Ze(this,$e,0,bf):(this.ma|=Qf,this.a|=Pf)))};l.je=function(a){return this.i.ia(this.I=a)};l.ke=function(a){return this.i.ia(this.I=nf(this,a,Rf))};l.Ge=function(a,b){this.i.ca(this.I=a,b)};l.He=function(a,b){this.i.ca(this.I=nf(this,a,Of),b)};
l.toString=function(){var a="";if(this.V)for(var b="R0 R1 R2 R3 R4 R5  SP PC PS PI SL NF ZF VF CF  M0 M1 M2 M3 ER  SR AR DR".split(" "),c=0;c<b.length;c++){var d=b[c];if(d){var e=16;"F"==d[1]&&(e=1);var f=yb(this,d);void 0!=f&&(a+=this.V.v("%s=%*n ",d,e,f))}else a+="\n"}return a};H.dl11=4294967296;H.pc11=8589934592;
var Yd=1120,ce=1140,Xd=1170,We=3,fe=1,he=2,ke=4,ge=8,Ue=16,Te=224,Zd=1792,$d=2048,ae=12288,be=49152,Ve=14,ne=65024,pe=34,oe=9,$e=4,If=168,df=-1,Kf=-2,bf=-4,af="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),qe=1,Xe=2,jf=3,hf=16,Pf=32,Jf=64,kf=128,cf=256,gf=7,pf=1,Ge=2,Fe=4,Le=65536,ef=4,Qf=8,Ye=16,of=32,qf=64,De=1,ze=30,Ae=96,Gf=128,Ee=256,Nf=512,ye=3072,tf=4096,wf=8192,Ef=16384,Bf=32768,xe=57344,Hf=61694,Ce=1,Be=5,He=16,Ie=32,sf=1,uf=2,xf=4,yf=5,zf=6,rf=7,Df=
8,Af=64,vf=128,Cf=32512,Lf=62592,Ff=65402,Mf=65470,Re={48:"DL11R",52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11",180:"RX11"},Rf=0|Ge,Of=0|Fe,Oe=57344,Ne=253952,Me=4186112,Ke=262143,mf=3932160,Je=4194303;x.PDP11=Wd;function Sf(a,b,c){gd.call(this,a,b,c);this.pa=Tf;this.I=[];this.m.K<ce&&(this.I=this.I.concat(Uf));1145>this.m.K&&(this.I=this.I.concat(Vf));this.da=6}u(Sf,gd);
Sf.prototype.Kb=function(a,b,c){function d(B){var A=h.m,C=[];if(A.L){var P=A.b<<1,L=B>>13;7<L&&(P|=1);A.l&A.zc[A.b]||(L&=7);var ie=B&8191,je=A.wa[A.b][L]<<6;B=je+ie&A.o;B>=mf&&(B=lf(A,B));C.push(B);C.push(ie);C.push(P);C.push(L&7);C.push(je);C.push(A.o)}else B&=65535,B>=Oe&&(B|=A.u),C.push(B);return null}function e(B){return Wf[B]||"?"}function f(B,A){var C="",P=A&Xf;if(P==U)C=a.O+((B&255)<<24>>23)&65535,C=k(C);else if(P==Yf)C=a.O-((B&63)<<1)&65535,C=k(C);else if(P==Zf)C=y(h,B&7,0,3,"");else if(P==
$f)C=y(h,B&63,0,6,"");else if(P==ag)C=y(h,B&255,0,8,"");else if(B&=A,A&W&&(B>>=6,A>>=6),A&X){P=null;var L=B&7;switch(B&56){case 0:C=e(L);break;case 8:C="@"+e(L);P=d(h.m.c[L]);break;case 16:7>L?C="("+e(L)+")+":(A=g(),C="#"+k(A));break;case 24:7>L?C="@("+e(L)+")+":(A=g(),C="@#"+k(A),P=d(A));break;case 32:C="-("+e(L)+")";break;case 40:C="@-("+e(L)+")";break;case 48:A=g();C=k(A)+"("+e(L)+")";7==L&&(C=k(A=A+a.O&65535),P=d(A));break;case 56:A=g(),C="@"+k(A)+"("+e(L)+")",7==L&&(C="@"+k(A=A+a.O&65535),B=
h.m,B.ha++,A=B.i.ia(nf(B,A,Rf)),B.ha--,P=d(A))}P&&(C=[C,P])}return C}function g(){var B=b.shift()|b.shift()<<8;n+=k(B)+" ";nd(h,a,2);return B}function k(B){return y(h,B,0,16,"")}var h=this,m=Jd(this,a),n="",v=md(this,a,Ud.ic),p=md(this,a,Ud.Zb),q=g(),w;for(z in this.pa)if(w=this.pa[z][q&z])break;w||(w=bg);var t=w[0];0<=this.I.indexOf(t)&&(w=bg,t=w[0]);var z=cg[t];var r="",Ba=w.length-1;t||Ba||(r=k(q));for(t=1;t<=Ba;t++){var V=w[t];if(void 0!=V){V=f(q,V);if(!V||!V.length){r="INVALID";break}"string"!=
typeof V&&(V=V[0]);0<r.length&&(r+=",");r+=V||"???"}}m=this.v("%s %-21s %-7s %s",m,n,z,r);c?p&&(c+=" "+p):p&&(c=p);c&&(m=this.v("%-32s; %s",m,c));v&&(m=v+":\n"+m);return m+"\n"};
var cg=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),Wf=
"R0 R1 R2 R3 R4 R5 SP PC A0 A1 A2 A3 A4 A5 A6 A7 S0 S1 S2 S3 PS PI ER SL M0 M1 M2 M3 AR DR SR".split(" "),X=63,W=4032,U=4096,Yf=8192,Zf=12288,$f=24576,ag=32768,Xf=61440,Tf={61440:{4096:[62,W,X],8192:[47,W,X],12288:[18,W,X],16384:[14,W,X],20480:[16,W,X],24576:[3,W,X],36864:[63,W,X],40960:[48,W,X],45056:[19,W,X],49152:[15,W,X],53248:[17,W,X],57344:[94,W,X]},65024:{2048:[57,448,X],28672:[100,X,448],29184:[101,X,448],29696:[102,X,448],30208:[103,X,448],30720:[104,448,X],32256:[105,448,Yf]},65280:{256:[27,
U],512:[24,U],768:[10,U],1024:[11,U],1280:[22,U],1536:[12,U],1792:[20,U],32768:[25,U],33024:[23,U],33280:[13,U],33536:[21,U],33792:[28,U],34048:[29,U],34304:[8,U],34560:[9,U],34816:[106,ag],35072:[107,ag]},65472:{64:[56,X],192:[95,X],2560:[39,X],2624:[49,X],2688:[53,X],2752:[51,X],2816:[67,X],2880:[1,X],2944:[77,X],3008:[97,X],3072:[73,X],3136:[71,X],3200:[6,X],3264:[4,X],3328:[58,$f],3392:[60,X],3456:[65,X],3520:[96,X],35328:[40,X],35392:[50,X],35456:[54,X],35520:[52,X],35584:[68,X],35648:[2,X],
35712:[78,X],35776:[98,X],35840:[74,X],35904:[72,X],35968:[7,X],36032:[5,X],36096:[66,X],36160:[59,X],36224:[64,X],36288:[61,X]},65528:{128:[76,7],152:[108,Zf]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],
191:[79]}},bg=[0],Uf=[58,60,65,96,110,100,101,102,103,104,105],Vf=[108,59,64];x.PDP11Dbg=Sf;function dg(a,b,c){Zc.call(this,a,b,c);for(var d in eg){var e=eg[d];d=+d;a=e[0];b=e[1];c=e[2];e=e[3];65472<=d&&65487>=d&&(!a&&c&&(a=function(f){return function(g){return f(g)&255}}(c)),!b&&e&&(b=function(f){return function(g,k){return f(g,k)}}(e)));$c(this,this,d,d,a,b,c,e)}this.la()}u(dg,Zc);l=dg.prototype;l.ka=function(){void 0===this.m&&(this.m=N(this,"Debugger"))};
l.ra=function(a){return a&&(a=a.shift(),this.N==a)?!0:!1};l.sa=function(a){a.push(this.N)};l.ge=function(a){a=a>>1&63;var b=this.m.Ja[a>>1];return a&1?b>>16:b&65535};l.De=function(a,b){a=a>>1&63;var c=a>>1;this.m.Ja[c]=a&1?this.m.Ja[c]&65535|(b&63)<<16:this.m.Ja[c]&-65536|b&65534};var fg={},eg=(fg[61568]=[null,null,dg.prototype.ge,dg.prototype.De,"UNIMAP",64,Xd],fg);x.IOPage=dg;
function Y(a,b,c){J.call(this,a,b,c);this.H=+c.baudReceive||9600;this.K=+c.baudTransmit||9600;this.time=N(this,"Time");this.L=Mb(this.time,this.N+".receive",this.Mc.bind(this));this.M=Mb(this.time,this.N+".transmit",this.se.bind(this));this.ports=N(this,"Ports");ad(this.ports,gg);this.f="";this.c=this.g=this.j=null;this.exports={connect:this.Ud,receiveData:this.Mc,receiveStatus:this.ne,setConnection:this.pe};this.la()}u(Y,J);l=Y.prototype;
l.Ud=function(a){if(!this.c){var b=xb(this,"connection");if(b){var c=b.split("->");if(2==c.length){var d=c[0].trim();if(d!=this.N)return;c=c[1].trim();if(this.c=tb(this,c)){var e=this.c.exports;if(e){var f=e.connect;f&&f.call(this.c,this.w);if(this.g=e.receiveData){this.w=a;this.j=e.receiveStatus;this.s("Connected %s.%s to %s\n",this.W,d,c);return}}}}this.s("Unable to establish connection: %s\n",b)}}};
l.ra=function(a){var b=a.shift();return this.N==b?(this.h=a.shift(),this.a=a.shift(),this.b=a.shift(),this.l=a.shift(),!0):!1};l.sa=function(a){a.push(this.N);a.push(this.h);a.push(this.a);a.push(this.b);a.push(this.l)};l.ka=function(){this.m||(this.m=N(this,"CPU"),this.I=Qe(this.m,this.J?-1:48,128),this.i=Qe(this.m,this.J?-1:52,128))};l.la=function(){this.h=0;this.a=8192;this.b=128;this.l=[]};
l.Mc=function(a){null!=a&&(this.f="number"!=typeof a?a:this.f+String.fromCharCode(a));this.f&&(a=this.f.charCodeAt(0),this.s(128,"receiveByte(%#04x)\n",a),this.o?a=!1:(this.h=a,this.a&128?this.h|=49152:this.a|=128,this.a&64&&Se(this.m,this.I),a=!0),a&&(this.f=this.f.substr(1)),this.f&&Rb(this.time,this.L,1E3/Math.round(this.H/10)));return!0};l.ne=function(a){var b=this.a;this.a&=-12289;a&32&&(this.a|=8192);a&256&&(this.a|=4096);b!=this.a&&(this.a|=32768,this.a&32&&Se(this.m,this.I))};
l.pe=function(a,b){return this.c?!1:(this.c=a,this.g=b,!0)};l.se=function(a){var b=!0;this.b|=128;this.b&64&&Se(this.m,this.i);a&&(b=this.g?this.g.call(this.c,a):!1);return b};l.fe=function(){var a=this.a&65534;this.a&=-32769;return a};l.Ce=function(a){var b=a^this.a;this.a=this.a&-112|a&111;this.j&&b&6&&(b=0,b=this.w?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.j.call(this.c,b))};l.ee=function(){this.a&=-129;return this.h};l.Be=function(){};l.me=function(){return this.b};
l.Je=function(a){if(this.b&128)if(a&64)Se(this.m,this.i);else{var b=this.m,c=this.i;if(c){var d=b.g;if(d==c)b.g=c.next;else for(;d;){var e=d.next;if(e==c){d.next=e.next;break}d=e}b.g&&(b.a|=qe);b.s(2048+c.message,"clearIRQ(vector=%o,priority=%d)\n",c.mb,c.priority+")")}}this.b=this.b&-70|a&69};l.le=function(){return 0};
l.Ie=function(a){a:{a&=255;this.s(128,"transmitByte(%#04x)\n",a);if(this.S){if(19==a){this.o=!0;break a}if(17==a){this.o=!1;break a}}this.g&&this.g.call(this.c,a);Rb(this.m,this.M,1E3/Math.round(this.K/10))}this.b&=-129};var hg={},gg=(hg[65392]=[null,null,Y.prototype.fe,Y.prototype.Ce,"RCSR"],hg[65394]=[null,null,Y.prototype.ee,Y.prototype.Be,"RBUF"],hg[65396]=[null,null,Y.prototype.me,Y.prototype.Je,"XCSR"],hg[65398]=[null,null,Y.prototype.le,Y.prototype.Ie,"XBUF"],hg);x.DL11=Y;
function Z(a,b,c){J.call(this,a,b,c);this.b=0;this.l=!1;this.M=+c.baudReceive||3600;this.time=N(this,"Time");this.L=Mb(this.time,this.N+".reader",this.Bd.bind(this));this.h=this.a=0;this.o=32768;this.c=this.K=0;this.j=[];this.i=ig;this.f=jg;this.w=this.g="";this.Z=this.Wa=this.Va=null;this.J=-1;this.H=window&&"FileReader"in window;this.u=null;this.L=-1;this.I={};if(a=xb(this,"autoMount"))for(var d in a)"PTR"==d&&(this.I[d]=a[d]);this.ports=N(this,"Ports");ad(this.ports,kg);lg(this,"None",ig,!0);this.H&&
lg(this,"Local Tape",mg);lg(this,"Remote Tape",ng);this.b=0;if(a=this.I.PTR){d=a.path||"";if(!(a=a.name))a:{if((a=this.Y[og])&&a.options)for(b=0;b<a.options.length;b++)if(c=a.options[b],c.value==d){a=c.text;break a}a=Ea(d,!0)}d&&a?pg(this,a,d,qg,!0):rg(this)}this.b||Ab(this)}u(Z,J);l=Z.prototype;
l.Ga=function(a,b){var c=this,d=jg;switch(a){case og:b.onchange=function(){var e=c.Y.descTape,f=b.options[b.selectedIndex];if(e&&f){var g={};if(f=f.getAttribute("data-value"))try{g=eval("("+f+")")}catch(k){c.s("PC11 option error: %s",k.message)}f=g.desc;void 0===f&&(f="");g=g.href;void 0!==g&&(f='<a href="'+g+'" target="_blank">'+f+"</a>");e.innerHTML=f}};break;case "readTape":d=sg;case "loadTape":d||(d=qg);b.onclick=function(){var e=c.Y[og];e&&tg(c,e.options[e.selectedIndex].text,e.value,d)};break;
case "mountTape":if(!this.H){this.s("Local tape support not available\n");b.parentNode.removeChild(b);break}b.addEventListener("change",function(){var e=b.children[0];e.children[1].disabled=!e.children[0].files.length});b.onsubmit=function(e){if(e=e.currentTarget[1].files[0]){var f=e.name;tg(c,Ea(f,!0),f,qg,e)}return!1};break;default:J.prototype.Ga.call(this,a,b)}};l.ra=function(a){a=a.shift();return this.N==a?!0:!1};l.sa=function(a){a.push(this.N)};
l.ka=function(){this.m||(this.m=N(this,"CPU"),this.u=Qe(this.m,56,8589934592))};l.la=function(){this.a&=-2241;this.h=0};function tg(a,b,c,d,e){if(c)if(c==mg)Ra(a,'Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==ng){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=Ea(c);a.s('Attempting to load %s as "%s"',c,b);a.i=ng}else a.i=c;pg(a,b,c,d,!1,e)}else ug(a,!1)}
function pg(a,b,c,d,e,f){var g=-1;if(a.g.toLowerCase()!=c.toLowerCase()||a.f!=d)g++,ug(a,!0),a.l?Ra(a,"PC11 load already in progress"):(e&&(a.b++,a.s(8589934592,"auto-loading tape: %s\n",b)),a.load(b,c,d,f)?g++:a.l=!0);g&&vg(a,a.w,a.g,a.f,a.Z,a.Wa,a.Va)}
l.load=function(a,b,c,d){var e=this;this.s(8589934592,'load("%s","%s")\n',a,b);if(d){var f=new FileReader;f.onload=function(){var g=f.result;g&&(g=new Uint8Array(g,0,g.byteLength),vg(e,a,b,c,g),e.i=mg);e.l=!1;rg(e)};f.readAsArrayBuffer(d);return!1}Za(b,function(g,k,h,m){4==h&&(h=0>m&&!e.R.gb(),m?Ra(e,'Unable to load tape "'+a+'" (error '+m+": "+g+")",h):(e.s('finishLoad("%s")\n',b),(g=xa(e,g,k))&&vg(e,a,b,c,g.Z,g.Wa,g.Va)),e.l=!1,e.b&&(e.b--,e.b||Ab(e)),rg(e))});return!1};
function lg(a,b,c,d){if((a=a.Y[og])&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}function rg(a){var b=a.Y[og];if(b&&b.options){var c=a.i||a.g;for(a=0;a<b.options.length;a++)if(b.options[a].value==c){b.selectedIndex!=a&&(b.selectedIndex=a);break}a==b.options.length&&(b.selectedIndex=0)}}
function wg(a,b){b|=0;if(b!==a.J){var c=a.Y[xg];c&&(c=(c=c.getElementsByClassName(yg))&&c[0])&&c.style&&(c.style.width=b+"%");a.J=b}}function vg(a,b,c,d,e,f,g){a.w=b;a.g=c;a.f=d;a.Z=e;a.Wa=f;a.Va=g;d==sg?Ra(a,'No valid memory address for tape "'+b+'"'):(a.c=0,a.j=e,a.a&=-32769,a.s('Loaded tape "%s" (%d bytes)',b,e.length),wg(a,0))}function ug(a,b){if(a.g||!1===b)a.w="",a.g="",b||(a.f&&a.s(a.f==qg?"tape detached":"tape unloaded"),a.i=ig,a.f=jg,rg(a))}
l.Bd=function(){1!=(this.a&32769)||this.a&128||(this.c<this.j.length?(this.h=this.j[this.c]&255,this.s(8589934592,"%s.advanceReader(%d): %#02x\n",this.N,this.c,this.h),this.c++,wg(this,this.c/this.j.length*100)):this.a|=32768,this.a|=128,this.a&=-2049,this.a&64&&Se(this.m,this.u))};l.de=function(){return this.a&65534};l.Ae=function(a){a&1&&(this.a&32768?(a&=-2,this.a&64&&Se(this.m,this.u)):(this.a&=-129,this.a|=2048,this.h=0,Rb(this.m,this.L,1E3/Math.round(this.M/10))));this.a=this.a&-66|a&65};
l.ce=function(){this.a&=-129;this.a|=2048;return this.h};l.ze=function(){};l.be=function(){return this.o};l.ye=function(a){this.o=this.o&-65|a&64};l.ae=function(){return this.K};l.xe=function(a){this.K=a&255};
var ig="",mg="?",ng="??",jg=0,qg=1,sg=2,og="listTapes",xg="readProgress",yg="progressBar",zg={},kg=(zg[65384]=[null,null,Z.prototype.de,Z.prototype.Ae,"PRS"],zg[65386]=[null,null,Z.prototype.ce,Z.prototype.ze,"PRB"],zg[65388]=[null,null,Z.prototype.be,Z.prototype.ye,"PPS"],zg[65390]=[null,null,Z.prototype.ae,Z.prototype.xe,"PPB"],zg);x.PC11=Z;
function Ag(a,b,c){J.call(this,a,a);var d=this;this.a=!1;this.i=c;this.b="";this.h=this.g=!1;Ab(this,!1);this.ja=0;b=b.trim();"{"==b[0]?Bg(this,b):(this.b=b,Za(this.b,function(e,f,g,k){4==g&&(!k&&f?(Bg(d,f),Cg(d)):d.s("error (%d) loading configuration: %s\n",k,e))}));window.addEventListener("load",function(){d.h=!0;Cg(d)});window.addEventListener(cb("iOS")?"pagehide":cb("Opera")?"unload":"beforeunload",function(){Dg(d)});window.addEventListener("pageshow",function(){d.a||d.ka(!0)})}u(Ag,J);
Ag.prototype.Ga=function(a,b){var c=this;switch(a){case Eg:b.onclick=function(){c.ka()};break;case Fg:b.onclick=function(){c.la()}}J.prototype.Ga.call(this,a,b)};
function Cg(a){var b=!0;if(a.g&&a.h){for(var c in a.c){var d=void 0,e=a.c[c];try{d=e["class"],x[d]?"Machine"==d?(a.s("PCjs %s v%3.2f\n%s\n",e.name,2,Gg),a.b&&a.s("Configuration: %s\n",a.b)):new x[d](a.W,c,e):a.s("unrecognized %s device class: %s\n",c,d)}catch(g){e.optional||(a.s("error initializing %s device '%s': %s\n",d,c,g.message),b=!1),Db(a,c)}}if(a.f){var f=db(a);wb(a,function(g){return g.Fb&&!g.Fb(f)?(g.s("unable to restore state for device: %s\n",g.N),!1):!0})}Ab(a,!0);Bb(a,a.ka.bind(a,b))||
a.s("machine %s not ready to power, waiting for device(s)\n",a.W)}}Ag.prototype.gb=function(){return this.a};function Bg(a,b){try{a.c=JSON.parse(b);ub(a,a.c[a.W],["autoSave","autoStart"]);a.f=!1!==a.T.autoSave;a.j=!1!==a.T.autoStart;if(a.i){var c=eval("("+a.i+")"),d;for(d in c)a.T[d]=c[d]}a.g=!0}catch(e){c=e.message,(d=c.match(/position ([0-9]+)/))&&(c+=" ('"+b.substr(+d[1],40).replace(/\s+/g," ")+"...')"),E(a,"machine '"+a.W+"' initialization error: "+c)}}
Ag.prototype.ka=function(a){a=void 0===a?!this.a:a;if(zb(this)){var b=this;a&&E(this,"power on");wb(this,function(c){c.ka&&c!=b&&("CPU"!=c.T["class"]||b.j||zb(b)?c.ka(a):c.time.update(!0));return!0});(this.a=a)||E(this,"power off")}};Ag.prototype.la=function(){if(zb(this)){var a=this;wb(this,function(b){b.la&&b!=a&&b.la();return!0});E(this,"reset")}};function Dg(a){if(a.f){var b=[];wb(a,function(c){c.Za&&c.Za(b);return!0});kb(a,b)}a.ka(!1)}var Eg="power",Fg="reset",Gg="Copyright \u00a9 2012-2019 Jeff Parsons <Jeff@pcjs.org>";
window.PDP11V2=function(a,b,c){var d=new Ag(a,b,c);window.command=function(e){return eb(d,e)};return d};x.Machine=Ag;})()

//# sourceMappingURL=pdp11v2.js.map
