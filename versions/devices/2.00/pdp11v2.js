(function(){/*
 https://www.pcjs.org/modules/devices/lib/webio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/defs.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/numio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/lib/stdio.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/device.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/input.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/led.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/time.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/bus.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/memory.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/ports.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/ram.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/bus/rom.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/cpu.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/pdp11ops.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/pdp11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/cpu/debugger.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/devices/main/machine.js (C) Jeff Parsons 2012-2019
*/
function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function n(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:aa(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca;
if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={Ra:!0},fa={};try{fa.__proto__=ea;da=fa.Ra;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;
function t(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.de=b.prototype}var ia="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},x="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function z(a,b){if(b){var c=x;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ia(c,a,{configurable:!0,writable:!0,value:b})}}z("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});z("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});z("Number.parseInt",function(a){return a||parseInt});
function ja(){ja=function(){};x.Symbol||(x.Symbol=ka)}function la(a,b){this.m=a;ia(this,"description",{configurable:!0,writable:!0,value:b})}la.prototype.toString=function(){return this.m};var ka=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new la("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function ma(){ja();var a=x.Symbol.iterator;a||(a=x.Symbol.iterator=x.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ia(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return na(aa(this))}});ma=function(){}}function na(a){ma();a={next:a};a[x.Symbol.iterator]=function(){return this};return a}
function oa(a,b){ma();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}z("Array.prototype.keys",function(a){return a?a:function(){return oa(this,function(b){return b})}});
z("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});var pa=new ArrayBuffer(2);(new DataView(pa)).setUint16(0,256,!0);new Uint16Array(pa);function qa(){}var A={};A.Defs=qa;function ra(){}t(ra,qa);function sa(a,b){var c=a/B|0,d=b/B|0;return(a&b)==(b|0)&&(c&d)==d}
function ta(a){for(var b=0,c=0,d=[];b<a.length;){for(var e=a[b],g=b+1;g<a.length&&a[g]===e;)g++;d[c++]=g-b;d[c++]=e;b=g}return d.length>=a.length?a:d}var B=Math.pow(2,32);A.NumIO=ra;function C(){this.ya={};for(var a=0;22>a;a++)this.ya["ACDFHIMNSTWYbdfjcsoXx%"[a]]=null}t(C,ra);C.prototype.flush=function(){var a=D;D="";this.wa(a)};
C.prototype.qc=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return void 0===b[0]?new Date(Date.now()):"string"===typeof b[0]?new Date(b[0]+" "+(b[1]||"00:00:00 GMT")):void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,n(b)))};C.prototype.wa=function(a,b){var c=a.lastIndexOf("\n");b?0<=c&&(b=Date.now(),ua||(ua=b),a=((b-ua)/1E3).toFixed(3)+": "+a):(0<=c&&(console.log(D+a.substr(0,c)),D="",a=a.substr(c+1)),ua=null);D+=a;return a.length};
function E(a,b,c){a.wa(b+"\n",c)}C.prototype.m=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return this.wa(this.W.apply(this,[a].concat(n(c))))};
C.prototype.W=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!c||!c.length)return a;d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),g=0,f;for(f=0;f<e.length-6;f+=6){d+=e[f];var m=e[f+5];if(void 0===this.ya[m])d+="%"+e[f+1]+e[f+2]+e[f+3]+e[f+4]+m;else{if(g<c.length){var h=c[g];"%"!=m&&g++}else h=c[c.length-1];var p=e[f+1],k=0<=p.indexOf("#"),r=0<=p.indexOf("0"),l=e[f+2];"*"==l?(l=h,h=g<c.length?c[g++]:c[c.length-1]):l=+l||0;var u=e[f+3];u=u?
+u.substr(1):-1;var w=null,v=0,y="";var q=0<="ACDFHIMNSTWY".indexOf(m)&&"object"!=typeof h?this.qc(h):h;switch(m){case "C":h=k?"#":"";d+=isNaN(q.getTime())?void 0:this.W(this.W("%%%sW, %%%sF %%%sD, %%%sY",h),q);continue;case "D":h=k?q.getUTCDate():q.getDate();m="d";break;case "A":case "H":case "I":h=k?q.getUTCHours():q.getHours();"A"==m?(h=12>h?"am":"pm",m="s"):("I"==m&&(h=h?12<h?h-12:h:12),m="d");break;case "F":case "M":h=k?q.getUTCMonth():q.getMonth();"F"==m?(h=va[h],m="s"):(h++,m="d");break;case "N":h=
k?q.getUTCMinutes():q.getMinutes();m="d";break;case "S":h=k?q.getUTCSeconds():q.getSeconds();m="d";break;case "T":h=k?"#":"";d+=isNaN(q.getTime())?void 0:this.W(this.W("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",h),q);continue;case "W":h=wa[k?q.getUTCDay():q.getDay()];m="s";break;case "Y":h=k?q.getUTCFullYear():q.getFullYear(),0<u&&(h%=Math.pow(10,u),u=-1),m="d"}switch(m){case "b":d+=h?"true":"false";break;case "d":h=Math.trunc(h);case "f":h=+h;q=h+"";0<=u&&(q=h.toFixed(u));q.length<l&&(r?(0>
h&&(l--,q=q.substr(1)),q=("0000000000"+q).slice(-l),0>h&&(q="-"+q)):q=("          "+q).slice(-l));d+=q;break;case "j":d+=JSON.stringify(h,null,l||void 0);break;case "c":h="string"==typeof h?h[0]:String.fromCharCode(h);case "s":if(void 0!==h)for("string"!=typeof h&&(h=h.toString()),0<=u&&(h=h.substr(0,u));h.length<l;)h=0<=p.indexOf("-")?h+" ":" "+h;d+=h;break;case "o":v=8,k&&(y="0");case "X":w=xa;case "x":q="";v||(v=16);!y&&k&&(y="0x");w||(w=ya);"string"==typeof h&&(h=Number.parseInt(h,h.match(/(^0x|[a-f])/i)?
16:10));r&&!l&&(l=Math.abs(h),l=255>=l?2:65535>=l?4:4294967295>=l?8:9,l+=y.length);l-=y.length;do k=h&v-1,h>>>=16==v?4:3,r||!q||k||h?q=w[k]+q:(y&&(q=y+q,y=""),0<l&&(q=" "+q));while(0<--l||h);d+=y+q;break;case "%":d+="%";break;default:this.ya[m]?d+=this.ya[m](m,p,l,u,h):d+="(unimplemented sprintf type: %"+m+")"}}}return d+=e[f]};var D="",ua=null,ya="0123456789abcdef",xa="0123456789ABCDEF",wa="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),va="January February March April May June July August September October November December".split(" ");
A.StdIO=C;function F(a){C.call(this);this.R={};this.V=0;this.w=this;a&&(this.w.V=0,this.w.fa=[],this.w.aa=0,this.w.pc={},this.w.Yd=!1)}var za;t(F,C);F.prototype.qa=function(a,b){var c=this;switch(a){case Aa.Hb:b.onclick=function(){var d=c.ra(Aa.Oa,!0);d&&(d.value="")};break;case Aa.Oa:Ba(b),b.addEventListener("keydown",function(d){Ca(c,d,!0)}),b.addEventListener("keypress",function(d){Ca(c,d)})}};
function Ba(a){a.setAttribute("autocapitalize","off");a.setAttribute("autocomplete","off");a.setAttribute("autocorrect","off");a.setAttribute("spellcheck","false");a.value=""}F.prototype.ra=function(a){return this.R[a]};function Da(a){var b=window;if(b){do{for(var c=0;c<Ea.length;c++){var d=Ea[c];d=d?d+a[0].toUpperCase():a[0];d+=a.substr(1);if(d in b)return d}if(0>a.indexOf("screen"))break;a=a.replace("screen","Screen")}while(1)}return null}
function Fa(a){var b=Ga;return a.u.bindings&&a.u.bindings[b]}function Ha(a){if(a=a.R[Ia])var b=a.textContent;return b}function Ja(a,b,c){a=+a||0;a<b&&(a=b);a>c&&(a=c);return a}function G(a,b,c,d){a=a.u[b];void 0===a?a=c:(d&&void 0!==d[a]&&(a=d[a]),d=typeof c,typeof a!=d&&("boolean"==d?a=!!a:"number"==typeof c&&(a=+a)));return a}
function Ka(a,b){var c=0,d=null,e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){4===e.readyState&&(d=e.responseText,200==e.status||!e.status&&d.length&&"file:"==(window?window.location.protocol:"file:")||(c=e.status||-1));b(a,d,e.readyState,c)};e.open("GET",a,!0);e.send()}
function La(a){if(void 0===H.Ma){var b=!1;if(window)try{window.localStorage.setItem(H.sa,H.sa),b=window.localStorage.getItem(H.sa)==H.sa,window.localStorage.removeItem(H.sa)}catch(c){E(a,c.message),b=!1}H.Ma=b}return!!H.Ma}function I(a,b){b=void 0===b?0:b;1<b&&b%2&&b--;b=b||a.V;return-1==(b|1)||sa(a.w.V,b)?!0:!1}
function Ma(a){if(window){var b=window.navigator.userAgent;return"iOS"==a&&(!!b.match(/(iPod|iPhone|iPad)/)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function Na(a){var b=null;if(La(a)){var c;if(window)try{(c=window.localStorage.getItem(a.s))&&(b=JSON.parse(c))}catch(d){E(a,d.message)}}return b}
function Ca(a,b,c){b=b||window.event;var d=b.which||b.keyCode;if(d){var e=a.w,g=b.target;if(c){a=!1;var f;c=g.value;var m=c.lastIndexOf("\n");d==J.Ua&&g.selectionStart<=m+1&&(a=!0);d==J.gc?(a=!0,0<e.aa&&(f=e.fa[--e.aa])):d==J.Lb&&(a=!0,e.aa<e.fa.length&&(f=e.fa[++e.aa]||""));a&&b.preventDefault();void 0!=f&&(g.value=c.substr(0,m+1)+f)}else d=String.fromCharCode(d),f=g.value,c=f.lastIndexOf("\n"),g.selectionStart<=c&&g.setSelectionRange(f.length,f.length),b.stopPropagation(),"@"==d&&0<e.aa&&c+1==f.length&&
(g.value+=e.fa[--e.aa],d="\r"),"\r"==d&&(b.preventDefault(),f=g.value+="\n",g.blur(),g.focus(),(b=Oa(a,f.slice(f.lastIndexOf("\n",f.length-2)+1,-1)||""))&&E(a,b.replace(/\n$/,""),!1))}}
function Pa(a,b){if(void 0!=b){var c=a.w;try{if(b=b.trim())c.aa<c.fa.length&&b==c.fa[c.aa]?c.aa++:(c.fa.push(b),c.aa=c.fa.length);var d=b.split(" "),e=d[0],g=a.w.pc[Qa.Ib];switch(e[0]){case "m":if("?"==e[1]){var f="";Ra.forEach(function(r){f+=r+"\n"});f&&(f="message commands:\n"+f);break}f="";var m=void 0;e=d[d.length-1].toLowerCase();var h="true"==e||"on"==e?!0:"false"==e||"off"==e?!1:void 0;void 0!=h&&d.pop();1>=d.length&&(void 0!=h&&(m=h,h=void 0),d[1]="all");"all"==d[1]&&(d=Object.keys(K));for(g=
1;g<d.length;g++){e=d[g];var p=K[e];if(!p){f+="unrecognized message: "+e+"\n";break}void 0!=h&&Sa(a,p,h);if(void 0==m||m==I(a,p))f+=a.W("%8s: %b\n",e,I(a,p))}I(a,0x800000000000)&&(f+="all messages will be buffered until buffer is turned off\n");f||(f="no messages\n");break;case "?":f="",Ta.forEach(function(r){f+=r+"\n"}),f&&(f="default commands:\n"+f);default:if(d.unshift(b),g)for(a=0;a<g.length;a++){var k=g[a](d);if(void 0!=k){f=f?f+k:k;break}}}}catch(r){f="error: "+r.message+"\n"}}return f}
function Oa(a,b){b=void 0===b?"?":b;if(b){var c="";b=b.split(/(?:\n|;\s*)/);for(var d=0;d<b.length;d++)c+=Pa(a,b[d])}return c}F.prototype.wa=function(a,b){void 0==b&&(b=I(this,0x800000000000));if(!b){var c=this.ra(Aa.Oa,!0);if(c)return c.value.substr(-a.length)!=a&&(c.value+=a,8192<c.value.length&&(c.value=c.value.substr(c.value.length-4096)),c.scrollTop=c.scrollHeight,Ma("iOS")||c.setSelectionRange(c.value.length,c.value.length)),a.length}return C.prototype.wa.call(this,a,b)};
F.prototype.m=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d=0;"number"==typeof a&&(d=a,a=c.shift());return I(this,d)?C.prototype.m.call.apply(C.prototype.m,[this,a].concat(n(c))):0};function Ua(a,b){if(La(a)){b=JSON.stringify(b);try{window.localStorage.setItem(a.s,b)}catch(c){E(a,c.message)}}}function Va(a,b,c){(a=a.R[b])&&a.textContent!=c&&(a.textContent=c)}
function Sa(a,b,c){var d=!1;c?(c=a.w.V,a.w.V=(c|b)+(c/B|0|b/B|0)*B):(d=sa(a.w.V,0x800000000000)&&sa(b,0x800000000000),c=a.w.V,a.w.V=(c&~b)+((c/B|0)&~(b/B|0))*B);d&&a.flush()}
var Aa={Hb:"clear",Oa:"print"},Ta=["\u2191 \u2193\t\trecall commands","@\t\trepeat last command","m?\t\tmessage commands"],Ra=["m\t\tdisplay all messages","m on\t\tdisplay all active messages","m off\t\tdisplay all inactive messages","m all [on|off]\tturn all messages on or off","m ... [on|off]\tturn selected messages on or off"],K={all:0xffffffffffff,buffer:0x800000000000},Qa={Ib:"command"},Wa={Xa:13,La:65,Ta:66,Va:67,Ya:68,E:69,Za:70,$a:71,ab:72,bb:73,cb:74,eb:75,fb:76,hb:77,ib:78,jb:79,kb:80,Q:81,
lb:82,mb:83,nb:84,ob:85,qb:86,sb:87,tb:88,ub:89,Qa:90,Ra:97,Nd:98,Od:99,d:100,e:101,Sd:102,Td:103,Vd:104,Wd:105,Xd:106,k:107,Zd:108,$d:109,n:110,ae:111,p:112,q:113,r:114,ce:115,t:116,ee:117,fe:118,ge:119,x:120,y:121,z:122},J={Ua:8,dc:9,Ub:10,Xa:13,ac:16,Jb:17,Gb:18,Bd:19,Na:20,Cc:27,cc:32,Ed:33,Dd:34,Bc:35,Xc:36,gb:37,gc:38,Pa:39,Uc:39,Lb:40,Rc:44,Fd:44,Yc:45,Ac:46,Tc:46,Wc:47,ZERO:48,ONE:49,fc:50,ec:51,Tb:52,Sb:53,bc:54,$b:55,Mb:56,Vb:57,Rb:59,Qb:61,La:65,Ta:66,Va:67,Ya:68,E:69,Za:70,$a:71,ab:72,
bb:73,cb:74,eb:75,fb:76,hb:77,ib:78,jb:79,kb:80,Q:81,lb:82,mb:83,nb:84,ob:85,qb:86,sb:87,tb:88,ub:89,Qa:90,Wa:91,Sc:91,Qc:92,Id:93,Vc:93,bd:96,td:96,Pc:96,cd:97,rd:97,dd:98,qd:98,ed:99,wd:99,fd:100,ud:100,gd:101,nd:101,hd:102,yd:102,jd:103,sd:103,kd:104,Ad:104,ld:105,xd:105,vd:106,md:107,zd:109,od:110,pd:111,Dc:112,Hc:113,Ic:114,Jc:115,Kc:116,Lc:117,Mc:118,Nc:119,Oc:120,Ec:121,Fc:122,Gc:123,Wb:144,Yb:145,Pb:173,Zb:186,Nb:187,zc:188,Kb:189,Cd:190,Kd:191,xc:192,Zc:219,yc:220,Hd:221,Gd:222,Ob:224,$c:901,
Ld:1E3},Xa={},Ya=(Xa[J.Rb]=J.Zb,Xa[J.Qb]=J.Nb,Xa[J.Pb]=J.Kb,Xa[J.Ob]=J.Wa,Xa),Za={gb:1,Pa:2,ad:3},L={},$a=(L[J.Ua]="\b",L[J.dc]="\t",L[J.Ub]="\n",L[J.Xa]="\r",L[J.cc]=" ",L[J.ZERO]="0",L[J.ONE]="1",L[J.fc]="2",L[J.ec]="3",L[J.Tb]="4",L[J.Sb]="5",L[J.bc]="6",L[J.$b]="7",L[J.Mb]="8",L[J.Vb]="9",L[J.La]="A",L[J.Ta]="B",L[J.Va]="C",L[J.Ya]="D",L[J.E]="E",L[J.Za]="F",L[J.$a]="G",L[J.ab]="H",L[J.bb]="I",L[J.cb]="J",L[J.eb]="K",L[J.fb]="L",L[J.hb]="M",L[J.ib]="N",L[J.jb]="O",L[J.kb]="P",L[J.Q]="Q",L[J.lb]=
"R",L[J.mb]="S",L[J.nb]="T",L[J.ob]="U",L[J.qb]="V",L[J.sb]="W",L[J.tb]="X",L[J.ub]="Y",L[J.Qa]="Z",L[J.gb]="Left",L[J.Pa]="Right",L),ab={list:[],hc:"version"},Ea=["","moz","ms","webkit"],bb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",
cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",
dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",
midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",
royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},H={Ma:void 0,sa:"PCjs.localStorage"};
A.WebIO=F;function M(a,b,c,d){F.call(this,a==b);this.s=a;this.N=b;N[this.s]||(N[this.s]={});N[this.s][this.N]&&this.m("warning: machine configuration contains multiple '%s' devices\n",this.N);N[this.s][this.N]=this;this.id=this.s+"."+this.N;cb.push(this);this.w=db(this,this.s);eb(this,c,d);this.za={}}t(M,F);
function eb(a,b,c){b=void 0===b?{}:b;c=void 0===c?[]:c;c=b.overrides||c;if(c.length){var d,e=za;if(!e){e={};if(window){d||(d=window.location.search.substr(1));for(var g,f=/\+/g,m=/([^&=]+)=?([^&]*)/g;g=m.exec(d);)e[decodeURIComponent(g[1].replace(f," ")).trim()]=decodeURIComponent(g[2].replace(f," ")).trim()}za=e}d=e;for(var h in d)0<=c.indexOf(h)&&(g=d[h],g.match(/^[+-]?[0-9.]+$/)?e=Number.parseInt(g,10):"true"==g?e=!0:"false"==g?e=!1:(e=g,g='"'+g+'"'),b[h]=e,E(a,"overriding "+a.N+" property '"+
h+"' with "+g))}a.u=b;c=b.bindings;c=void 0===c?{}:c;a.u.R||(a.u.R=c);h=Array.isArray(c);c.container||(c.container=a.N);for(var p in c){e=c[p];if(h)p=e;else if(e.match(/^[0-9]+$/)){d=+e;a.R[p]=[];do{e=p+d++;e=document.getElementById(e);if(!e)break;a.R[p].push(e)}while(1);continue}if(d=document.getElementById(e))a.R[p]=d,a.qa(p,d)}b=void 0===b?{}:b;a.version=2;if(a.version){p="";var k;a.s!=a.N&&(k=db(a,a.s).version)&&k!=a.version&&(p="Machine");p||(k=b.version)&&k>a.version&&(p="Config");p&&(k="Error: "+
a.W("%s Device version (%3.2f) incompatible with %s version (%3.2f)",b.Pd,a.version,p,k)+"\n\nClearing your browser's cache may resolve the issue.",(b=ab.hc)&&0>ab.list.indexOf(b)&&(alert(k),ab.list.push(b)),E(a,k))}}function fb(a,b,c,d){a.za[b]={get:c.bind(a),set:d.bind(a)}}function gb(a,b,c){a.za[c]&&(a.za[b]=a.za[c])}
function hb(a,b){var c;try{var d=N[a.s];if(d)for(c in d){var e=d[c];if("Machine"!=e.u["class"]&&!b(e))break}}catch(g){a.m("error while enumerating device '%s': %s\n",c,g.message)}}M.prototype.ra=function(a,b){b=void 0===b?!1:b;if(a){var c=F.prototype.ra.call(this,a,b);if(void 0===c&&b){b=N[this.s];for(var d in b)if(c=b[d].R[a])break;c||(c=null);this.R[a]=c}}return c};
function db(a,b){var c=b,d=a.s,e=d.indexOf(".");0<e&&(d=d.substr(0,e),b=b.substr(e+1));b=(e=N[d])&&e[b]||null;if(!b){for(e=0;e<cb.length;e++)if(cb[e].id===c){b=cb[e];break}if(!b)throw Error(a.W("unable to find device with ID '%s'",c));}return b}function O(a,b,c){var d=null,e=N[a.s];if(e)for(var g in e)if(e[g].u["class"]==b){if(d){d=null;break}d=e[g]}if(!d&&(void 0===c||c))throw Error(a.W("unable to find device with class '%s'",b));return d}
M.prototype.m=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return"number"==typeof a&&I(this,a)&&(void 0===this.$&&(this.$=O(this,"Debugger",!1)),this.w.V&ib&&(void 0===this.ga&&(this.ga=O(this,"CPU")),this.ga))?(a=c.shift(),F.prototype.m.call(this,"%#06x: %s.%s\n",this.ga.rc,this.N,this.W.apply(this,[a].concat(n(c))).trim())):F.prototype.m.call.apply(F.prototype.m,[this,a].concat(n(c)))};function jb(a,b){(a=N[a.s])&&delete a[b]}var N={},cb=[],ib=1;K.addr=ib;K.bus=2;
K.memory=4;K.ports=8;K.chips=16;K.kbd=32;K.serial=64;K.misc=128;K.cpu=256;K["int"]=512;K.trap=1024;K.video=2048;K.monitor=4096;K.screen=8192;K.time=16384;K.timer=32768;K.event=65536;K.input=131072;K.key=262144;K.mouse=524288;K.touch=1048576;K.warn=2097152;K.halt=4194304;window&&(window.PCjs||(window.PCjs={}),N=window.PCjs.Machines||(window.PCjs.Machines={}),cb=window.PCjs.Components||(window.PCjs.Components=[]));A.Device=M;
function kb(a,b,c){M.call(this,a,b,c);this.V=131072;this.L=this.o=null;this.time=O(this,"Time");this.w=O(this,"Machine");this.T=G(this,"drag",!1);this.K=G(this,"scroll",!1);this.S=G(this,"hexagonal",!1);this.g=G(this,"releaseDelay",0,void 0);this.h=!1;a=this.u.map;this.b=this.c=null;if(a)if(a.length)this.b=a;else{this.c={};b=Object.keys(a);for(var d=0;d<b.length;d++){var e=[],g=b[d],f=a[g];"string"==typeof f?f=[f]:void 0==f.length&&(e=f.grid,f=f.keys,"string"==typeof f&&(f=[f]));this.c[g]={keys:f,
Ud:e,state:0}}}this.v=[];this.H=[];this.f=this.I=null;(a=this.R[lb])&&mb(this,a,this.ra(c.focusBinding,!0),this.u.location);this.oa()}t(kb,M);function nb(a,b){a.o=b}function P(a,b,c){for(var d=0;d<a.v.length;d++){var e=a.v[d];e.id===b&&e.Cb(b,c)}}
function mb(a,b,c,d){d=void 0===d?[]:d;if(d.length||a.b||a.c){var e={};e.vc=d[0]||0;e.wc=d[1]||0;e.ta=d[2]||b.clientWidth;e.Fa=d[3]||b.clientHeight;e.Ga=d[4]||1;e.Ja=d[5]||1;e.lc=d[6]||b.naturalWidth||e.ta;e.nc=d[7]||b.naturalHeight||e.Fa;e.Eb=d[8]||0;e.Fb=d[9]||0;e.kc=d[10]||0;e.mc=d[11]||0;a.b?(e.Ia=a.b.length,e.ua=a.b[0].length):(e.ua=e.Ga,e.Ia=e.Ja,e.Ga=e.Ja=0);e.xb=e.ta/(e.ua+e.ua*e.Ga)|0;e.yb=e.Fa/(e.Ia+e.Ia*e.Ja)|0;e.jc=e.xb*e.Ga|0;e.zb=e.yb*e.Ja|0;e.va=e.Ka=-1;ob(a,b,e);pb(a,b,e);a.time&&
a.g&&(a.O=qb(a.time,"timerInputRelease",function(){0>e.va&&0>e.Ka&&Q(a,-1,-1)}))}if(a.b||a.c)a.time&&a.g&&(a.U=qb(a.time,"timerKeyRelease",function(){rb(a)})),a.i=0,a.l="",a.j=[],d=b,c&&(d=c,a.f||"BUTTON"!=c.nodeName||(d=document,a.f=c,sb(a,b),a.I=b)),sb(a,d),a.f||(a.f=d)}function tb(a){a.g?ub(a.time,a.U,a.g):rb(a)}
function sb(a,b){function c(e,g,f){var m=document.activeElement;a.m(327680,"%s.onKey%s(%d): %5.2f (%s)\n",m.id||m.nodeName,e,g,Date.now()/1E3%60,void 0!=f?f?"used":"unused":"ignored")}function d(e,g){e=document.activeElement;return a.f&&e!=a.f&&e!=a.I?null:g||window.event}b.addEventListener("keydown",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=vb(a,g,!0,e);c("Down",g,f);f&&e.preventDefault()}});b.addEventListener("keypress",function(e){if(e=d(this,e)){var g=e.which||e.charCode,f=vb(a,g);
c("Press",g,f);f&&e.preventDefault()}});b.addEventListener("keyup",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=vb(a,g,!1,e);c("Up",g);f&&e.preventDefault();"TEXTAREA"==b.nodeName&&(b.value="")}})}
function ob(a,b,c){b.addEventListener("mousedown",function(d){if(!a.h){var e=a.f;if(e){var g=window.scrollX,f=window.scrollY;e.focus();window.scrollTo(g,f)}d.button||R(a,b,wb,d,c)}});b.addEventListener("mousemove",function(d){a.h||R(a,b,xb,d,c)});b.addEventListener("mouseup",function(d){a.h||d.button||R(a,b,S,d,c)});b.addEventListener("mouseout",function(d){a.h||(0>c.va?R(a,b,xb,d,c):R(a,b,S,d,c))})}
function pb(a,b,c){b.addEventListener("touchstart",function(d){a.K&&(a.h=!0);R(a,b,wb,d,c)});b.addEventListener("touchmove",function(d){R(a,b,xb,d,c)});b.addEventListener("touchend",function(d){R(a,b,S,d,c)})}
function vb(a,b,c,d){if(void 0!=c){var e=Ya[b]||b;var g=$a[b];var f=yb[e];d=d&&d.location==Za.Pa;f&zb&&d&&(f>>=1);f&&(f&Ab&&(c=!(a.a&f)),a.a=c?a.a|f:a.a&~f,P(a,e,c))}else g=String.fromCharCode(b).toUpperCase(),b>=Wa.La&&b<=Wa.Qa?a.a&(Bb|Cb)||(a.a|=Cb,P(a,J.Na,!0)):b>=Wa.Ra&&b<=Wa.z&&a.a&Cb&&(a.a&=~Cb,P(a,J.Na,!1));if(a.b){if(void 0!=c)return!1;for(e=0;e<a.b.length;e++)for(f=a.b[e],d=0;d<f.length;d++)if(0<=f[d].split("|").indexOf(g))return a.i?16>a.j.length&&a.j.push(b):(a.i=1,a.l=g,Q(a,d,e),P(a,g,
!0),tb(a)),!0}if(a.c){if(void 0==c)return!0;b=Object.keys(a.c);for(e=0;e<b.length;e++)if(f=b[e],0<=a.c[f].keys.indexOf(g))return P(a,f,c),a.c[f].state=c?1:0,!0}return!1}function rb(a){1==a.i?(a.i++,P(a,a.l,!1),a.l="",Q(a,-1,-1),tb(a)):(a.i=0,a.j.length&&vb(a,a.j.shift()))}kb.prototype.oa=function(){this.a=0;this.J=this.M=-1};
function R(a,b,c,d,e){var g=-1,f=-1,m=!1,h=-1,p=-1;if(c<S){d=d||window.event;d.targetTouches&&d.targetTouches.length?(h=d.targetTouches[0].clientX,p=d.targetTouches[0].clientY,m=1<d.targetTouches.length):(h=d.clientX,p=d.clientY);var k=d.target.getBoundingClientRect();h-=k.left;p-=k.top;h=e.lc/b.offsetWidth*h|0;p=e.nc/b.offsetHeight*p|0;var r=h-e.vc;var l=p-e.wc;var u=k=!1;var w=h>=e.Eb&&h<e.Eb+e.kc&&p>=e.Fb&&p<e.Fb+e.mc;if(0<=r&&r<e.ta&&0<=l+e.zb||w)if(m||a.K||d.preventDefault(),0<=r&&r<e.ta&&0<=
l&&l<e.Fa){u=!0;d=e.ta/e.ua|0;var v=e.Fa/e.Ia|0,y=r/d|0,q=l/v|0;!a.S||q&1||(r-=d>>1,y=r/d|0,y==e.ua-1&&(r=-1));v=q*v+(e.zb>>1);r-=y*d+(e.jc>>1);l-=v;0<=r&&r<e.xb&&0<=l&&l<e.yb&&(g=y,f=q,k=!0)}}r=r||0;l=l||0;d=b.offsetWidth;b=b.offsetHeight;if(c==wb||c==S)for(y=0;y<a.H.length;y++)q=a.H[y],c==S?q.Cb(q.id,!1):(v=l/(b/q.Rd|0)|0,(r/(d/q.Qd|0)|0)==q.he&&v==q.ie&&q.Cb(q.id,!0));if(!m)if(c==wb)e.va=h,e.Ka=p,u?(Q(a,g,f),k&&a.g&&ub(a.time,a.O,a.g,!0)):w&&a.w.ea();else if(c==xb)0<=e.va&&0<=e.Ka&&a.T?Q(a,g,f):
a.o&&a.o(g,f);else if(c==S){if(c=a.g)c=a.time,g=a.O,c=c.a&&0<g&&g<=c.b.length?0<=c.b[g-1].X:!1;c||Q(a,-1,-1);e.va=e.Ka=-1}else E(a,"unrecognized action: "+c)}function Q(a,b,c){if(b!=a.J||c!=a.M)a.J=b,a.M=c,a.L&&a.L(b,c)}var wb=1,xb=2,S=3,lb="surface",Bb=3,zb=170,Cb=512,Ab=3584,T={},yb=(T[J.ac]=2,T[J.Jb]=8,T[J.Gb]=32,T[J.Wa]=128,T[J.Na]=Cb,T[J.Wb]=1024,T[J.Yb]=2048,T);A.Input=kb;
function Db(a,b,c){M.call(this,a,b,c,["color","backgroundColor"]);a=this.R[Eb];if(!a)throw Error("LED "+this.u.R[Eb]+" binding for '"+Eb+"' missing");b=document.createElement("canvas");if(!b||!b.getContext)throw a.innerHTML="LED device requires HTML5 canvas support",Error("LED device requires HTML5 canvas support");this.pa=a;this.type=Ja(G(this,"type",Fb,Gb),Hb,Ib);this.f=Jb[this.type][0];this.j=Jb[this.type][1];this.width=G(this,"width",this.f,void 0);this.height=G(this,"height",this.j,void 0);this.g=
G(this,"cols",1,void 0);this.H=this.g+G(this,"colsExtra",0,void 0);this.S=G(this,"rows",1,void 0);this.I=this.S+G(this,"rowsExtra",0,void 0);this.U=this.width*this.g;this.M=this.height*this.S;this.i=Kb("black",0);this.c=Lb(this.u.color)||this.i;this.da=Kb(this.c,1,.25);this.ca=Kb(this.c,1,2);this.h=Lb(this.u.backgroundColor);this.ia=G(this,"fixed",!1);this.ia||(b.style.width="100%",b.style.height="auto");this.ba=G(this,"hexagonal",!1);this.ja=G(this,"highlight",!0);this.L=G(this,"persistent",this.type<
Ib);b.setAttribute("width",this.U.toString());b.setAttribute("height",this.M.toString());b.style.backgroundColor=this.i;a.appendChild(b);this.Y=b.getContext("2d");if(this.l=document.createElement("canvas"))this.l.width=this.T=this.f*this.g,this.l.height=this.o=this.j*this.S,this.a=this.l.getContext("2d");this.ka=(this.I+1)*this.H*4;this.b=Array(this.ka);this.la=this.g<this.H?4*(this.H-this.g):0;this.J=this.K=!1;this.v=this.O=0;this.Z=-1;var d=this;this.time=O(this,"Time");Mb(this.time,function(e){Nb(d,
!1,e)});Ob(d)}t(Db,M);function Ob(a){for(var b=a.b,c=0;c<b.length;c+=4){var d=a,e=b,g=c;e[g]=d.type<Ib?Pb:" ";e[g+1]=d.c==d.i?null:d.c;e[g+2]=0;e[g+3]=Qb}a.J=a.K=!0;Nb(a,!0)}function Rb(a){a.h?(a.a.fillStyle=a.h,a.a.fillRect(0,0,a.T,a.o)):a.a.clearRect(0,0,a.T,a.o)}
function Nb(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(a.J||b){if(a.type<Ib){var d=0;if(!a.L||b)Rb(a);else if(a.v){d=a.g-a.v;var e=a.f*d;a.a.drawImage(a.l,a.f*a.v,0,e,a.o,0,0,e,a.o)}for(var g=e=0;g<a.I;g++){for(var f=0;f<a.g;f++){var m=a.b[e],h=a.b[e+1]||a.i,p=a.ja&&e==a.Z;if(a.b[e+3]&Qb||p||b){if(f>=d)a:{var k=a,r=m;m=h;var l=f;h=g;var u=p;l=void 0===l?0:l;h=void 0===h?0:h;u=void 0===u?!1:u;var w=0;if(k.ba&&!(h&1)&&(w=k.f>>1,l==k.g-1))break a;if(m&&m!=k.c){u=u?Kb(m,1,2):m;var v=Kb(m,1,.25)}else u=
u?k.ca:k.c,v=k.da;m=!1;r=r?u:v;u==k.i&&(r=k.h,m=!0);u=l*k.f+w;v=h*k.j;k.L&&(l=l*k.f+w,h*=k.j,k.h?(k.a.fillStyle=k.h,k.a.fillRect(l,h,k.f,k.j)):k.a.clearRect(l,h,k.f,k.j));k.a.fillStyle=r;h=Sb[k.type];3==h.length?(k.a.beginPath(),k.a.arc(u+h[0],v+h[1],h[2],0,2*Math.PI),m?(k.a.globalCompositeOperation="destination-out",k.a.fill(),k.a.globalCompositeOperation="source-over"):k.a.fill()):k.a.fillRect(u+h[0],v+h[1],h[2],h[3])}a.b[e+3]=p?a.b[e+3]|Qb:a.b[e+3]&~Qb}e+=4}e+=a.la}a.v=0}else{b="";for(d=0;d<a.b.length;d+=
4)b+=a.b[d]||" ",a.b[d+3]&Tb&&(b+=".");Rb(a);for(g=e=d=0;d<b.length;d++){h=b[d];"."==h&&e&&e--;f=a;p=e;k=g;p=void 0===p?0:p;k=void 0===k?0:k;if(h=Ub[h])for(m=0;m<h.length;m++)if(l=f,w=Vb[h[m]]){r=(void 0===p?0:p)*l.f;u=(void 0===k?0:k)*l.j;l.a.fillStyle=l.c;l.a.beginPath();if(3==w.length)l.a.arc(r+w[0],u+w[1],w[2],0,2*Math.PI);else for(v=0;v<w.length;v+=2)v?l.a.lineTo(r+w[v],u+w[v+1]):l.a.moveTo(r+w[v],u+w[v+1]);l.a.closePath();l.a.fill()}if(++e==a.g&&(e=0,++g==a.I))break}}a.Y.globalCompositeOperation=
a.h&&a.c!=a.i?"source-over":"copy";a.Y.drawImage(a.l,0,0,a.T,a.o,0,0,a.U,a.M);a.J=!1;a.Z=-1}else a.L||a.K||(!c||!a.O||c-a.O>=(1E3/60|0))&&Ob(a);a.K=!1;c&&(a.O=c)}function Lb(a){return(a=a||void 0)&&bb[a]||a}
function Kb(a,b,c){b=void 0===b?1:b;c=void 0===c?1:c;if(a){var d=[];a=bb[a]||a;var e=a;var g=16;var f=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);f||(g=10,f=e.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+|)\)$/i));if(f){for(e=1;e<f.length;e++)d[e-1]=Number.parseInt(f[e],g);d.length=e-1;g=!0}else g=!1;if(g){a="rgba(";for(g=0;3>g;g++)f=Math.round(d[g]*c),f=0>f?0:255<f?255:f,a+=f+",";a+=(g<d.length?d[g]:b)+")"}}return a}
Db.prototype.ma=function(a){var b=a.shift(),c=a.shift();a=a.shift();if(b==this.c&&c==this.h&&a&&a.length==this.b.length){this.b=a;for(b=0;b<=this.b.length-4;b+=4)this.b[b+1]==this.i&&(this.b[b+1]=null);Nb(this,!0);return!0}return!1};Db.prototype.na=function(a){this.b&&(a.push(this.c),a.push(this.h),a.push(this.b))};
var Hb=0,Fb=1,Ib=3,Gb={small:Hb,round:Fb,square:2,digit:Ib},Eb="container",Pb=0,Tb=1,Qb=128,Wb={},Sb=(Wb[Hb]=[4,4,4],Wb[Fb]=[16,16,14],Wb[2]=[2,2,28,28],Wb),Jb=[[8,8],[32,32],[32,32],[96,128]],Vb={A:[30,8,79,8,67,19,37,19],B:[83,10,77,52,67,46,70,22],C:[77,59,71,100,61,89,64,64],D:[28,91,58,91,69,104,15,104],E:[18,59,28,64,25,88,12,100],F:[24,10,34,21,31,47,18,52],G:[24,56,34,50,60,50,71,56,61,61,33,61],P:[80,102,8]},Ub={" ":[],0:"ABCDEF".split(""),1:["B","C"],2:["A","B","D","E","G"],3:["A","B","C",
"D","G"],4:["B","C","F","G"],5:["A","C","D","F","G"],6:"ACDEFG".split(""),7:["A","B","C"],8:"ABCDEFG".split(""),9:"ABCDFG".split(""),A:"ABCEFG".split(""),B:["C","D","E","F","G"],C:["A","D","E","F"],D:["B","C","D","E","G"],E:["A","D","E","F","G"],F:["A","E","F","G"],"-":["G"],".":["P"]};A.LED=Db;
function U(a,b,c){M.call(this,a,b,c);this.ca=G(this,"cyclesMinimum",1E5,void 0);this.la=G(this,"cyclesMaximum",1E9,void 0);this.da=Ja(G(this,"cyclesPerSecond",1E6,void 0),this.ca,this.la);this.K=1E3/60;this.Da=G(this,"updatesPerSecond",2,void 0)||2;this.Ca=1E3/this.Da;this.ka=0;this.Ea=G(this,"timeLock",!0);this.Z=this.H=0;this.Y=this.i=1;this.ja=this.l=this.da/1E4/100;this.S=[];this.o=[];this.b=[];this.T=[];this.ia=this.a=this.O=this.j=!1;this.v=this.f=0;a=Da("requestAnimationFrame");if(!a){a="setTimeout";
var d=this.K}this.pa=window[a].bind(window,this.xa.bind(this),d);this.Ba=window[Da("cancelAnimationFrame")||"clearTimeout"].bind(window);this.M=this.L=this.g=this.c=this.ba=0;Xb(this)||Yb(this,this.Y)}t(U,M);function Mb(a,b){a.S.push(b)}
U.prototype.qa=function(a,b){var c=this;switch(a){case Zb:b.onclick=function(){$b(c)&&(c.a?ac(c):c.start())};break;case bc:b.onclick=function(){Yb(c,c.i<<1);cc(c,dc(c.l))};break;case ec:b.onclick=function(){$b(c)&&(c.a?E(c,"already running"):c.f?ac(c):fc(c,void 0))};break;case gc:b.addEventListener("mousedown",function(){c.j=!0}),b.addEventListener("mouseup",function(){Xb(c);c.j=!1}),b.addEventListener("mousemove",function(){c.j&&Xb(c)}),b.addEventListener("change",function(){c.j=!0;Xb(c);c.j=!1})}M.prototype.qa.call(this,
a,b)};function qb(a,b,c){var d=void 0===d?-1:d;var e=a.b.length+1;a.b.push({id:b,ic:c,Ha:d,X:-1});0<=d&&ub(a,e,d);return e}
function hc(a,b,c,d){var e=0,g=a.l,f=1E6*g;b&&c&&(g=b/(10*c)/100,a.m(16384,"calcSpeed(%d cycles, %5.3fms): %5.3fMhz\n",b,c,g),d>a.K&&(1<a.i&&(a.i>>=1,a.m(2097152,"warning: frame time (%5.3fms) exceeded maximum (%5.3fms), target multiplier now %d\n",d,a.K,a.i)),e=d));a.H=g;a.Z=g/a.ja;b=a.Z/a.i;a.ba=f/b/60+1E-8;a.m(16384,"nCyclesDepositPerFrame(%5.3f) = nCyclesPerSecond(%d) / nDivisor(%5.3f) / nFramesPerSecond(%d)\n",a.ba,f,b,60);return e}
function ic(a,b){a.L=a.g=b;if(!a.o.length)return a.g=0,a.L;for(var c=0;0<a.g;){if(c<a.o.length){var d=a.o[c++];b=d.sc.call(d,b)||1}else c=b=0;a.g-=b}return a.L-a.g}function jc(a,b){b=void 0===b?a.L-a.g:b;if(!a.a){if(a.c)for(var c=0;c<a.o.length;c++){var d=a.o[c];d.tc.call(d)}a.c=b}a.c-=b;1>a.c&&(a.O=!0);a.M+=b;a.L=a.g=0;a.a||(a.M=0);return b}
function kc(a,b){b=void 0===b?0:b;if(b){var c=b;a.c+=b}else for(c=a.c,1>c&&(c=a.c+=a.ba),0>c&&(a.m(2097152,"warning: cycle count dropped below zero: %f\n",c),c=a.c=0),c|=0,b=a.b.length;0<b;b--){var d=a.b[b-1];!(0>d.X)&&c>d.X&&(c=d.X)}return c}function dc(a){1<=a?a=a.toFixed(2)+"Mhz":(a=Math.round(1E6*a),a=999>=a?a+"Hz":Math.ceil(a/1E3)+"Khz");return a}function $b(a){return a.ia?!0:(E(a,"not powered"),!1)}
function lc(a,b){if(1<=b)for(var c=a.b.length;0<c;c--){var d=a.b[c-1];0>d.X||(d.X-=b,0>=d.X&&(d.X=-1,d.ic(),0<=d.Ha&&ub(a,c,d.Ha)))}}U.prototype.ea=function(a){this.ia=a;void 0===this.$&&(this.$=O(this,"Debugger",!1))};
U.prototype.xa=function(a){a=void 0===a?Date.now():a;this.v=0;if(this.a){var b=Date.now();if(this.I){var c=b-this.J-this.K;c>this.K&&(this.h+=c,this.m(2097152,"warning: browser throttling detected, compensating by %5.3fms\n",c))}this.J=b;this.h||(this.h=b);this.U=0;try{this.O=!1;do lc(this,jc(this,ic(this,kc(this))));while(this.a&&!this.O)}catch(d){E(this,d.message),ac(this)}this.I=Date.now();this.U&&(this.h+=this.U,this.J+=this.U);this.J+=hc(this,this.M,this.I-this.h,this.I-this.J);this.I-this.ka>=
this.Ca&&this.update();for(b=0;b<this.S.length;b++)this.S[b](a);this.v=this.pa()}};function Yb(a,b){if(void 0!==b){if(1>b||!a.j&&0<a.H&&a.H<.9*a.l)b=a.Y;a.i=b;b=a.ja*a.i;a.l!=b&&(a.l=b,cc(a,dc(a.l)))}a.h=a.I=0;a.c=a.M=0;hc(a);for(b=a.b.length;0<b;b--){var c=a.b[b-1];0<=c.Ha&&ub(a,b,c.Ha,!0)}}function Xb(a){var b=a.R[gc];return b?(Yb(a,Math.floor((b.value-b.min)/(b.max-b.min)*(a.la-a.ca)+a.ca)/a.da|0),!0):!1}
function ub(a,b,c,d){0<b&&b<=a.b.length&&(b=a.b[b-1],d||0>b.X)&&(c=Math.ceil(a.da*(a.Ea?a.Y:a.Z)/1E3*(void 0===c?1E3:c)),a.a&&(c+=jc(a)),b.X=c)}U.prototype.start=function(){if(this.a||this.f)return!1;this.a=!0;this.h=this.I=0;this.update(!0);this.v=this.pa();return!0};function fc(a,b){b=void 0===b?1:b;a.a||(b&&!a.f&&(a.f=b),a.f&&(a.f--,lc(a,jc(a,ic(a,kc(a,1)))),a.update(!1),a.f&&setTimeout(function(){fc(a,0)},0)))}
function ac(a){a.a?(a.a=!1,jc(a),a.v&&(a.Ba(a.v),a.v=0),a.update(!0)):a.f&&(a.f=0,a.update(!0))}U.prototype.update=function(a){a&&E(this,this.a?"started with "+dc(this.l)+" target":"stopped");Va(this,Zb,this.a?"Halt":"Run");Va(this,ec,this.f?"Stop":"Step");this.j||(this.m(16384,"getSpeedCurrent(%5.3fhz)\n",1E6*this.H),cc(this,this.a&&this.H?dc(this.H):"Stopped"));for(var b=0;b<this.T.length;b++){var c=this.T[b];c.be.call(c,void 0!=a)}this.ka=Date.now();this.O=!0};
function cc(a,b){Va(a,mc,b);Va(a,bc,b)}var Zb="run",bc="setSpeed",mc="speed",ec="step",gc="throttle";A.Time=U;
function V(a,b,c){M.call(this,a,b,c);this.type="static"==c.type?nc:oc;this.f=c.addrWidth||16;this.c=Math.pow(2,this.f);this.a=c.blockSize||(16<this.f?4096:1024);this.a>this.c&&(this.a=this.c);this.j=this.c/this.a|0;this.g=Math.log2(this.a)|0;this.i=(1<<this.g)-1;this.h=c.dataWidth||8;this.b=Array(this.j);a=new W(a,b+"[NONE]",{size:this.a,bus:this.N});for(b=0;b<this.c;b+=this.a)pc(this,b,this.a,X.NONE,a)}t(V,M);
function pc(a,b,c,d,e){for(var g=0,f=b>>>a.g;0<c&&f<a.b.length;){var m=f*a.a,h=a.a-(b-m);h>c&&(h=c);var p=a.b[f];if(b!=m||h!=a.a||p&&p.type!=X.NONE)break;var k=p=void 0,r=b,l=a.f,u=16;l=void 0===l?0:l;p=void 0===p?0:p;var w="",v="",y=-1;u||(u=a.l||10);l&&(y=Math.ceil(l/Math.log2(u)));if(void 0==k)switch(u){case 8:k="0o";break;case 16:k="0x";break;case 10:v=".";default:k=""}isNaN(r)||"number"!=typeof r?(r=void 0,k=v=""):(0>r&&-1<r&&(r=-1),l&&(0>r&&(r+=Math.pow(2,l)),r>=Math.pow(2,l)&&(y=Math.ceil(Math.log(r)/
Math.log(u)))));for(l=p||-1;y--;){l||(w=","+w,l=p);if(void 0==r){if(w="?"+w,0>y)break}else{var q=r%u;r=Math.trunc(r/u);q+=0<=q&&9>=q?48:55;w=String.fromCharCode(q)+w;if(!r&&0>y)break}l--}p=a.N+"["+(k+w+v)+"]";if(e)if(e.size==a.a)b=e;else{k=void 0;if(e.values&&(k=e.values.slice(g,g+h),k.length!=h))break;b=new W(a.s,p,{type:d,Sa:b,size:h,bus:a.N,values:k})}else b=new W(a.s,p,{type:d,Sa:b,size:h,bus:a.N});a.b[f]=b;b=m+a.a;c-=h;g+=h;f++}}
function qc(a,b,c){if(!(b&a.i)){b>>>=a.g;var d=a.b[b];a.b[b]=c}return d}V.prototype.oa=function(){};V.prototype.pb=function(a){return a&&this.ma(a)?!0:!1};V.prototype.rb=function(a){this.na(a)};V.prototype.ma=function(a){for(var b=0;b<this.b.length;b++){var c=this.b[b];if((this.type==oc||c.type&X.Aa)&&c.ma){var d=a.shift();if(!c.ma(d))return!1}}return!0};V.prototype.na=function(a){for(var b=0;b<this.b.length;b++){var c=this.b[b];if((this.type==oc||c.type&X.Aa)&&c.na){var d=[];c.na(d);a.push(d)}}};
var nc=0,oc=1;A.Bus=V;
function W(a,b,c){M.call(this,a,b,c);this.Sa=c.addr;this.size=c.size;this.type=c.type||X.NONE;this.b=(a=this.u.bus)?db(this,a):O(this,a="Bus");if(!this.b)throw Error(this.W("unable to find bus '%s'",a));this.g=this.b.h;this.j=Math.pow(2,this.g)-1;this.values=this.c=null;if(a=this.b.type==nc)if(a=8==this.g)a=db(this,this.s),a=!1!==(a&&a.u&&a.u.ArrayBuffer);a&&(this.c=new ArrayBuffer(this.size),new DataView(this.c,0,this.size),this.values=new Uint8Array(this.c,0,this.size),new Uint16Array(this.c,0,
this.size>>1),new Int32Array(this.c,0,this.size>>2));this.i=!1;rc(this,c.values)}t(W,M);function rc(a,b){if(!a.values&&a.type>X.NONE)b?a.values=b:a.values=Array(a.size).fill(a.j);else if(b)for(var c=0;c<a.size;c++)a.values[c]=b[c]}W.prototype.oa=function(){this.type>=X.Aa&&this.values.fill(0)};
W.prototype.ma=function(a){var b=a.shift();if(this.N==b){this.i=a.shift();a.shift();if(a=a.shift()){var c=this.size;c=void 0===c?0:c;if(a.length!=c){b=0;c=c?Array(c):[];for(var d=0;d<a.length-1;)for(var e=a[d++],g=a[d++];e--;)c[b++]=g;a=c}rc(this,a)}return!0}return!1};W.prototype.na=function(a){a.push(this.N);a.push(this.i);a.push(!1);a.push(this.values?ta(this.values):this.values)};var X={NONE:1,Xb:2,Aa:4,Jd:14,Md:12};A.Memory=W;
function sc(a,b,c){W.call(this,a,b,c);void 0!=c.addr&&pc(this.b,c.addr,c.size,X.NONE,this)}t(sc,W);A.Ports=sc;function tc(a,b,c){c.type=X.Aa;W.call(this,a,b,c);pc(this.b,c.addr,c.size,c.type,this)}t(tc,W);A.RAM=tc;
function uc(a,b,c){c.type=X.Xb;W.call(this,a,b,c);pc(this.b,c.addr,c.size,c.type,this);this.ga=this.$=void 0;if(A.LED&&this.R[Ga]){var d=this;this.f=Math.pow(2,Math.ceil(Math.log2(this.values.length)/2));this.h=this.values.length/this.f|0;this.a=new Db(a,b+"LEDs",{"class":"LED",bindings:{container:Fa(this)},type:Fb,cols:this.f,rows:this.h,color:G(this,"colorROM","green"),backgroundColor:G(this,"backgroundColorROM","black"),persistent:!0}),Ob(this.a);this.l=new kb(a,b+"Input",{"class":"Input",location:[0,
0,this.a.U,this.a.M,this.f,this.h],bindings:{surface:Fa(this)}});this.o=Ha(this)||"";nb(this.l,function(e,g){if(d.ga){var f=d.o;0<=e&&0<=g&&(e=g*d.f+e,g=d.ga,f=g.$&&g.$.a(d.Sa+e,1)||"");Va(d,Ia,f)}})}}t(uc,W);
uc.prototype.ma=function(a){var b=!0,c=a.shift();if(c&&this.a){var d=c.length;this.a.b.length==d?(this.a.b=c,Nb(this.a,!0)):(this.m("inconsistent saved LED state (%d), unable to load\n",d),b=!1)}a.length&&(d=(a=a.shift())&&a.length||-1,this.values.length==d?this.values=a:(this.m("inconsistent saved ROM state (%d), unable to load\n",d),b=!1));return b};uc.prototype.ea=function(){void 0===this.ga&&(this.ga=O(this,"CPU"));void 0===this.$&&(this.$=O(this,"Debugger",!1))};
uc.prototype.na=function(a){this.a&&(a.push(this.a.b),a.push(this.values))};var Ga="array",Ia="cellDesc";A.ROM=uc;function Y(a,b,c){c["class"]="CPU";M.call(this,a,b,c);this.$=void 0;this.rc=0;this.time=O(this,"Time");this.time.o.push(this);this.time.T.push(this);this.L=this.j=0}t(Y,M);Y.prototype.abort=function(a){E(this,a.message);ac(this.time)};Y.prototype.sc=function(a){this.L=this.j=void 0===a?0:a;return this.L-this.j};Y.prototype.tc=function(){this.L-=this.j;this.j=0};
function vc(a,b,c){Y.call(this,a,b,c)}t(vc,Y);function wc(a,b,c){Y.call(this,a,b,c);this.K=+c.model||xc;this.Z=+c.addrReset||0;this.U=O(this,"Bus");this.$=O(this,"Debugger");this.oc=new sc(a,b+".IOPAGE",{size:this.U.a});this.Y=0;this.ba=null;O(this,"Input",!1);this.K<=yc?(this.pa=~(zc|Ac|Bc|Cc)&65535,this.ka=0):(this.pa=~(zc|(this.K<=Dc?Ac:0))&65535,this.ka=this.K>Dc?Ac:0);this.Db=this.Bb=0;this.g=null;this.ia=[];Ec(this)}t(wc,vc);
function Ec(a){a.l=65536;a.v=32768;a.H=65535;a.o=32768;a.h=15;a.a=[0,0,0,0,0,0,0,a.Z,-1,-2,-3,-4,-5,-6,-7,-8];a.i=[0,0,0,0,0,0];a.T=[0,0,0,0];a.vb=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.wb=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];a.Ab=[0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a.Ea=[0,0,0,0,0,0,0,0];a.da=0;a.la=-1;a.Ca=0;a.b=0;Fc(a);for(var b={ha:0};7>=b.ha;b={ha:b.ha},b.ha++)fb(a,"R"+b.ha,function(c){return function(){return a.a[c.ha]}}(b),function(c){return function(d){return a.a[c.ha]=d&65535}}(b));gb(a,"SP","R6");gb(a,Gc,"R7");fb(a,"CF",function(){return a.l&65536&&Hc?1:0},function(c){a.l=c?65536:0});fb(a,"NF",function(){return a.o&32768&&Ic?1:0},function(c){a.o=c?32768:0});fb(a,"VF",function(){return a.v&
32768&&Jc?1:0},function(c){a.v=c?32768:0});fb(a,"ZF",function(){return(a.H&65535?0:Kc)?1:0},function(c){a.H=c?0:1})}function Fc(a){a.f=0;a.M=0;a.O=0;a.S=0;a.Ba=0;a.Da=0;a.xa=255;a.ca=0;a.I=0;a.J=0;a.ja=a.a[7];a.c=0;a.g=null;Lc(a)}function Mc(a){a.f&Nc||(a.M=a.c>>16&65535);a=a.M;a&65280&&(a=(a<<8|a>>8)&65535);return a}function Oc(a){a.f&Nc||(a.O=a.c&65535);return a.O}function Lc(a){a.ba&&qc(a.U,a.Y,a.ba);a.Y=a.ca?a.S&Pc?Qc:Rc:Sc;a.ba=qc(a.U,a.Y,a.oc)}
wc.prototype.ma=function(a){if(!a||!a.length)return E(this,"invalid saved state"),!1;var b=a.shift(),c=a.shift();if(b!=this.N||2!==(c|0))return this.m("CPU state mismatch (%s %3.2f)\n",b,c),!1;try{this.a=a.shift();this.i=a.shift();this.T=a.shift();this.vb=a.shift();this.wb=a.shift();this.Ab=a.shift();this.Ea=a.shift();this.Ba=a.shift();this.Ca=a.shift();this.Da=a.shift();this.xa=a.shift();this.I=a.shift();this.J=a.shift();this.ja=a.shift();this.b=a.shift();this.c=a.shift();this.la=a.shift();this.Bb=
a.shift();this.Db=a.shift();this.Z=a.shift();var d=a.shift();d&=this.pa;this.o=d<<12;this.H=~d&4;this.v=d<<14;this.l=d<<16;if((d^this.h)&this.ka)for(var e=this.i.length;0<=--e;){var g=this.a[e];this.a[e]=this.i[e];this.i[e]=g}this.da=d>>Tc&Uc;var f=this.h>>Tc&Uc;this.da!=f&&(this.T[f]=this.a[6],this.a[6]=this.T[this.da]);this.h=d;this.b&=~Vc;this.b|=this.g?Vc:Wc;var m=a.shift();m&=~Xc;this.f!=m&&(m&Nc&&!(this.f&Nc)&&(this.M=this.c>>16&65535,this.O=this.c&65535),this.f=m,this.I=(m&Yc)>>Zc,this.J=(m&
$c)>>ad,b=0,m&(bd|cd)&&(b=dd,m&bd&&(b|=ed)),this.ca!=b&&(this.ca=b,Lc(this)));this.M=a.shift();this.O=a.shift();var h=a.shift();this.K<xc&&(h&=~(Pc|fd));this.S!=h&&(this.S=h,Lc(this));for(var p=a.shift(),k=p.length-1;0<=k;k--){a:{for(a=0;a<this.ia.length;a++){var r=this.ia[a];if(r.uc===p[k]){var l=r;break a}}l=null}l&&(l.next=this.g,this.g=l)}}catch(u){return E(this,"CPU state error: "+u.message),!1}return!0};
wc.prototype.na=function(a){a.push(this.N);a.push(2);a.push(this.a);a.push(this.i);a.push(this.T);a.push(this.vb);a.push(this.wb);a.push(this.Ab);a.push(this.Ea);a.push(this.Ba);a.push(this.Ca);a.push(this.Da);a.push(this.xa);a.push(this.I);a.push(this.J);a.push(this.ja);a.push(this.b);a.push(this.c);a.push(this.la);a.push(this.Bb);a.push(this.Db);a.push(this.Z);a.push(this.h=this.h&(Cc|Bc|Ac|gd|hd)|(this.o&32768?Ic:0)|(this.H&65535?0:Kc)|(this.v&32768?Jc:0)|(this.l&65536?Hc:0));var b=this.f;b&Nc||
(b=b&~(Xc|$c|Yc)|this.I<<5|this.J<<1);a.push(b);a.push(Mc(this));a.push(Oc(this));a.push(this.S);a.push(id(this))};function id(a){var b=[];for(a=a.g;a;)b.push(a.uc),a=a.next;return b}wc.prototype.toString=function(){return"unimplemented"};var yc=1120,Dc=1140,xc=1170,Uc=3,Hc=1,Jc=2,Kc=4,Ic=8,hd=16,gd=224,zc=1792,Ac=2048,Bc=12288,Cc=49152,Tc=14,Wc=1,Vc=2,ed=2,dd=4,bd=1,$c=30,Yc=96,cd=256,Xc=3072,Nc=57344,ad=1,Zc=5,Pc=16,fd=32,Sc=57344,Rc=253952,Qc=4186112;A.PDP11=wc;var Gc="PC";
function Z(a,b,c){M.call(this,a,a);var d=this;this.c=this.a=!1;this.j=c;this.b="";this.i=this.h=!1;this.V=0;b=b.trim();"{"==b[0]?jd(this,b):(this.b=b,Ka(this.b,function(e,g,f,m){4==f&&(!m&&g?(jd(d,g),kd(d)):d.m("error (%d) loading configuration: %s\n",m,e))}));window.addEventListener("load",function(){d.i=!0;kd(d)});window.addEventListener(Ma("iOS")?"pagehide":Ma("Opera")?"unload":"beforeunload",function(){ld(d)});window.addEventListener("pageshow",function(){d.a&&!d.c&&d.ea(!0)})}t(Z,M);
Z.prototype.qa=function(a,b){var c=this;switch(a){case md:b.onclick=function(){c.a&&c.ea()};break;case nd:b.onclick=function(){c.a&&c.oa()}}M.prototype.qa.call(this,a,b)};
function kd(a){var b=!0;if(a.h&&a.i){for(var c in a.f){var d=void 0,e=a.f[c];try{d=e["class"],A[d]?"Machine"==d?(a.m("PCjs %s v%3.2f\n%s\n%s\n",e.name,2,od,pd),a.b&&a.m("Configuration: %s\n",a.b)):new A[d](a.s,c,e):a.m("unrecognized %s device class: %s\n",c,d)}catch(f){e.optional||(a.m("error initializing %s device '%s': %s\n",d,c,f.message),b=!1),jb(a,c)}}if(a.g){var g=Na(a);hb(a,function(f){return f.pb&&!f.pb(g)?(f.m("unable to restore state for device: %s\n",f.N),!1):!0})}a.ea(b)}}
function jd(a,b){try{a.f=JSON.parse(b);eb(a,a.f[a.s],["autoSave","autoStart"]);a.g=!1!==a.u.autoSave;a.l=!1!==a.u.autoStart;if(a.j){var c=eval("("+a.j+")"),d;for(d in c)a.u[d]=c[d]}a.h=!0}catch(e){c=e.message,(d=c.match(/position ([0-9]+)/))&&(c+=" ('"+b.substr(+d[1],40).replace(/\s+/g," ")+"...')"),E(a,"machine '"+a.s+"' initialization error: "+c)}}
Z.prototype.ea=function(a){a=void 0===a?!this.c:a;var b=this;a&&E(this,"power on");hb(this,function(c){c.ea&&c!=b&&("CPU"!=c.u["class"]||b.l||b.a?c.ea(a):c.time.update(!0));return!0});this.a=!0;(this.c=a)||E(this,"power off")};Z.prototype.oa=function(){var a=this;hb(this,function(b){b.oa&&b!=a&&b.oa();return!0})};function ld(a){if(a.g){var b=[];hb(a,function(c){c.rb&&c.rb(b);return!0});Ua(a,b)}a.ea(!1)}var md="power",nd="reset",od="Copyright \u00a9 2012-2019 Jeff Parsons <Jeff@pcjs.org>",pd="License: GPL version 3 or later <http://gnu.org/licenses/gpl.html>";
window.PDP11=function(a,b,c){var d=new Z(a,b,c);window.command=function(e){return Oa(d,e)};return d};A.Machine=Z;})()

//# sourceMappingURL=pdp11v2.js.map
